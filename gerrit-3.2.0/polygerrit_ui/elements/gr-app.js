/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const e={flagsService:null};
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t{constructor(){this._experiments=new Set,this._loadExperiments()}isEnabled(e){return this._experiments.has(e)}_loadExperiments(){this._experiments=new Set(window.ENABLED_EXPERIMENTS)}get enabledExperiments(){return[...this._experiments]}}
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n=new Map;
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.Polymer||(window.Polymer={passiveTouchGestures:!0,lazyRegister:!0}),window.Gerrit=window.Gerrit||{},function(){const i={};!function(e,t){if(i[e])throw new Error(`Service ${e} already registered.`);i[e]={get:()=>function(e,t){return n[e]||(n[e]=t()),n[e]}(e,t)}}("flagsService",()=>new t),Object.defineProperties(e,i)}();
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const i=new URL("..",document.baseURI).href,s=document.createElement("style");s.textContent=`\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Thin.ttf",i)}) format("truetype");\n  font-weight: 100;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-ThinItalic.ttf",i)}) format("truetype");\n  font-weight: 100;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Light.ttf",i)}) format("truetype");\n  font-weight: 300;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-LightItalic.ttf",i)}) format("truetype");\n  font-weight: 300;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Regular.ttf",i)}) format("truetype");\n  font-weight: 400;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Italic.ttf",i)}) format("truetype");\n  font-weight: 400;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Medium.ttf",i)}) format("truetype");\n  font-weight: 500;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-MediumItalic.ttf",i)}) format("truetype");\n  font-weight: 500;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Bold.ttf",i)}) format("truetype");\n  font-weight: 700;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-BoldItalic.ttf",i)}) format("truetype");\n  font-weight: 700;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-Black.ttf",i)}) format("truetype");\n  font-weight: 900;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto";\n  src: url(${new URL("fonts/roboto/Roboto-BlackItalic.ttf",i)}) format("truetype");\n  font-weight: 900;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-Thin.ttf",i)}) format("truetype");\n  font-weight: 100;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-ThinItalic.ttf",i)}) format("truetype");\n  font-weight: 100;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-Light.ttf",i)}) format("truetype");\n  font-weight: 300;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-LightItalic.ttf",i)}) format("truetype");\n  font-weight: 300;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-Regular.ttf",i)}) format("truetype");\n  font-weight: 400;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-Italic.ttf",i)}) format("truetype");\n  font-weight: 400;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-Medium.ttf",i)}) format("truetype");\n  font-weight: 500;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-MediumItalic.ttf",i)}) format("truetype");\n  font-weight: 500;\n  font-style: italic;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-Bold.ttf",i)}) format("truetype");\n  font-weight: 700;\n  font-style: normal;\n  }\n  @font-face {\n  font-family: "Roboto Mono";\n  src: url(${new URL("fonts/robotomono/RobotoMono-BoldItalic.ttf",i)}) format("truetype");\n  font-weight: 700;\n  font-style: italic;\n  }`,document.head.appendChild(s),
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(e,t){return e},
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
window.COMPILED=window.COMPILED||!1,COMPILED||window.goog||(window.goog={require(e){if("webcomponentsjs.custom_elements.auto_es5_shim"!==e)throw new Error("Called goog.require without loading //javascript/closure:base")}},window.goog.require.isDevModeNoOpImpl=!0),goog.require("webcomponentsjs.custom_elements.auto_es5_shim"),COMPILED||
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(){let e=window.goog&&window.goog.declareModuleId||(()=>{});const t=function(t){if(goog.isInEs6ModuleLoader_())return e(t)};window.goog.declareModuleId?goog.declareModuleId=t:(window.goog.isInEs6ModuleLoader_=()=>!1,Object.defineProperty(window.goog,"declareModuleId",{get:()=>t,set:n=>(e=n,t)}))}(),goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Boot");const a=window.Polymer;window.Polymer=function(e){return window.Polymer._polymerFn(e)},a&&Object.assign(Polymer,a),Polymer._polymerFn=function(e){throw new Error("Load polymer.html to use the Polymer() function.")};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let o,r,l=/(url\()([^)]*)(\))/g,c=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function d(e,t){if(e&&c.test(e))return e;if("//"===e)return e;if(void 0===o){o=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",o="http://a/c%20d"===e.href}catch(e){}}if(t||(t=document.baseURI||window.location.href),o)try{return new URL(e,t).href}catch(t){return e}return r||(r=document.implementation.createHTMLDocument("temp"),r.base=r.createElement("base"),r.head.appendChild(r.base),r.anchor=r.createElement("a"),r.body.appendChild(r.anchor)),r.base.href=t,r.anchor.href=e,r.anchor.href||e}function h(e,t){return e.replace(l,(function(e,n,i,s){return n+"'"+d(i.replace(/["']/g,""),t)+"'"+s}))}function p(e){return e.substring(0,e.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const u=p,m=h,g=d;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.ResolveUrl"),Polymer.ResolveUrl={resolveCss:m,resolveUrl:g,pathFromUrl:u};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const _=!window.ShadyDOM,f=Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),b=!window.customElements.polyfillWrapFlushCallback;let v=p(document.baseURI||window.location.href);const y=function(e){v=e};let w=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0;const C=function(e){w=e};let E=!1;const S=function(e){E=e};let x=!1;const A=function(e){x=e};let P=!1;const k=function(e){P=e};let T=!1;const I=function(e){T=e};let R=!1;const L=function(e){R=e};let D=!0;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Settings"),Polymer.Settings={useShadow:_,useNativeCSSProperties:f,useNativeCustomElements:b,get rootPath(){return v},setRootPath:y,get sanitizeDOMValue(){return w},setSanitizeDOMValue:C,get passiveTouchGestures(){return E},setPassiveTouchGestures:S,get strictTemplatePolicy(){return x},setStrictTemplatePolicy:A,get allowTemplateFromDomModule(){return P},setAllowTemplateFromDomModule:k,get legacyOptimizations(){return T},setLegacyOptimizations:I,get syncInitialRender(){return R},setSyncInitialRender:L},void 0!==Polymer.rootPath&&y(Polymer.rootPath),void 0!==Polymer.sanitizeDOMValue&&C(Polymer.sanitizeDOMValue),void 0!==Polymer.passiveTouchGestures&&S(Polymer.passiveTouchGestures),void 0!==Polymer.strictTemplatePolicy&&A(Polymer.strictTemplatePolicy),void 0!==Polymer.allowTemplateFromDomModule?k(Polymer.allowTemplateFromDomModule):k(!0),void 0!==Polymer.legacyOptimizations&&I(Polymer.legacyOptimizations),void 0!==Polymer.syncInitialRender&&L(Polymer.syncInitialRender),Object.defineProperty(Polymer,"sanitizeDOMValue",{get:()=>w,set(e){C(e)}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let O=0;function N(){}N.prototype.__mixinApplications,N.prototype.__mixinSet;const M=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let n=O++;return function(i){let s=i.__mixinSet;if(s&&s[n])return i;let a=t,o=a.get(i);o||(o=e(i),a.set(i,o));let r=Object.create(o.__mixinSet||s||null);return r[n]=!0,o.__mixinSet=r,o}},$=M;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Mixin"),Polymer.dedupingMixin=$;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let B={},F={};function U(e,t){B[e]=F[e.toLowerCase()]=t}function H(e){return B[e]||F[e.toLowerCase()]}class j extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let n=H(e);return n&&t?n.querySelector(t):n}return null}attributeChangedCallback(e,t,n,i){t!==n&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=d(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=p(t)}return this.__assetpath}register(e){if(e=e||this.id){if(x&&void 0!==H(e))throw U(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,U(e,this),(t=this).querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}var t}}j.prototype.modules=B,customElements.define("dom-module",j),
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Elements.DomModule"),Polymer.DomModule=j;function G(e){return j.import(e)}function V(e){const t=h((e.body?e.body:e).textContent,e.baseURI),n=document.createElement("style");return n.textContent=t,n}function z(e){const t=e.trim().split(/\s+/),n=[];for(let e=0;e<t.length;e++)n.push(...W(t[e]));return n}function W(e){const t=G(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(void 0===t._styles){const e=[];e.push(...Y(t));const n=t.querySelector("template");n&&e.push(...q(n,t.assetpath)),t._styles=e}return t._styles}function q(e,t){if(!e._styles){const n=[],i=e.content.querySelectorAll("style");for(let e=0;e<i.length;e++){let s=i[e],a=s.getAttribute("include");a&&n.push(...z(a).filter((function(e,t,n){return n.indexOf(e)===t}))),t&&(s.textContent=h(s.textContent,t)),n.push(s)}e._styles=n}return e._styles}function K(e){let t=G(e);return t?Y(t):[]}function Y(e){const t=[],n=e.querySelectorAll("link[rel=import][type~=css]");for(let e=0;e<n.length;e++){let i=n[e];if(i.import){const e=i.import,n=i.hasAttribute("shady-unscoped");if(n&&!e._unscopedStyle){const t=V(e);t.setAttribute("shady-unscoped",""),e._unscopedStyle=t}else e._style||(e._style=V(e));t.push(n?e._unscopedStyle:e._style)}}return t}function X(e){let t=e.trim().split(/\s+/),n="";for(let e=0;e<t.length;e++)n+=J(t[e]);return n}function J(e){let t=G(e);if(t&&void 0===t._cssText){let e=Q(t),n=t.querySelector("template");n&&(e+=Z(n,t.assetpath)),t._cssText=e||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}function Z(e,t){let n="";const i=q(e,t);for(let e=0;e<i.length;e++){let t=i[e];t.parentNode&&t.parentNode.removeChild(t),n+=t.textContent}return n}function Q(e){let t="",n=Y(e);for(let e=0;e<n.length;e++)t+=n[e].textContent;return t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.StyleGather");const ee=J,te=function(e){let t=G(e);return t?Q(t):""},ne=X,ie=Z,se=W,ae=K,oe=z,re=q;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function le(e){return e.indexOf(".")>=0}function ce(e){let t=e.indexOf(".");return-1===t?e:e.slice(0,t)}function de(e,t){return 0===e.indexOf(t+".")}function he(e,t){return 0===t.indexOf(e+".")}function pe(e,t,n){return t+n.slice(e.length)}function ue(e,t){return e===t||de(e,t)||he(e,t)}function me(e){if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let i=e[n].toString().split(".");for(let e=0;e<i.length;e++)t.push(i[e])}return t.join(".")}return e}function ge(e){return Array.isArray(e)?me(e).split("."):e.toString().split(".")}function _e(e,t,n){let i=e,s=ge(t);for(let e=0;e<s.length;e++){if(!i)return;i=i[s[e]]}return n&&(n.path=s.join(".")),i}function fe(e,t,n){let i=e,s=ge(t),a=s[s.length-1];if(s.length>1){for(let e=0;e<s.length-1;e++){if(i=i[s[e]],!i)return}i[a]=n}else i[t]=n;return s.join(".")}Polymer.StyleGather={stylesFromModules:oe,stylesFromModule:se,stylesFromTemplate:re,stylesFromModuleImports:ae,cssFromModules:ne,cssFromModule:ee,cssFromTemplate:ie,cssFromModuleImports:te};const be=le,ve=ce,ye=de,we=he,Ce=pe,Ee=ue,Se=me,xe=ge,Ae=_e,Pe=fe,ke=le;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Path"),Polymer.Path={isPath:be,root:ve,isAncestor:ye,isDescendant:we,translate:Ce,matches:Ee,normalize:Se,split:xe,get:Ae,set:Pe,isDeep:ke};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Te={},Ie=/-[a-z]/g,Re=/([A-Z])/g;function Le(e){return Te[e]||(Te[e]=e.indexOf("-")<0?e:e.replace(Ie,e=>e[1].toUpperCase()))}function De(e){return Te[e]||(Te[e]=e.replace(Re,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.CaseMap");const Oe=Le,Ne=De;Polymer.CaseMap={dashToCamelCase:Oe,camelToDashCase:Ne};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Me=0,$e=0,Be=[],Fe=0,Ue=document.createTextNode("");new window.MutationObserver((function(){const e=Be.length;for(let t=0;t<e;t++){let e=Be[t];if(e)try{e()}catch(e){setTimeout(()=>{throw e})}}Be.splice(0,e),$e+=e})).observe(Ue,{characterData:!0});const He={after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},je={run:e=>window.requestAnimationFrame(e),cancel(e){window.cancelAnimationFrame(e)}},Ge={run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}},Ve={run:e=>(Ue.textContent=Fe++,Be.push(e),Me++),cancel(e){const t=e-$e;if(t>=0){if(!Be[t])throw new Error("invalid async handle: "+e);Be[t]=null}}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Async"),Polymer.Async={timeOut:He,animationFrame:je,idlePeriod:Ge,microTask:Ve};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const ze=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Wrap"),Polymer.wrap=ze;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const We=Ve,qe=M(e=>class extends e{static createProperties(e){const t=this.prototype;for(let n in e)n in t||t._createPropertyAccessor(n)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){if(this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[e]){const t=this.constructor.attributeNameForProperty(e);this.__dataAttributes[t]=e}}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this._getProperty(e)},set:t?function(){}:function(t){this._setProperty(e,t)}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,n){let i=this.__data[e],s=this._shouldPropertyChange(e,t,i);return s&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),!this.__dataOld||e in this.__dataOld||(this.__dataOld[e]=i),this.__data[e]=t,this.__dataPending[e]=t),s}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,We.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){const e=this.__data,t=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(e,t,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,n))}_shouldPropertiesChange(e,t,n){return Boolean(t)}_propertiesChanged(e,t,n){}_shouldPropertyChange(e,t,n){return n!==t&&(n==n||t==t)}attributeChangedCallback(e,t,n,i){t!==n&&this._attributeToProperty(e,n),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,n,i)}_attributeToProperty(e,t,n){if(!this.__serializing){const i=this.__dataAttributes,s=i&&i[e]||e;this[s]=this._deserializeValue(t,n||this.constructor.typeForProperty(s))}}_propertyToAttribute(e,t,n){this.__serializing=!0,n=arguments.length<3?this[e]:n,this._valueToNodeAttribute(this,n,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,n){const i=this._serializeValue(t);"class"!==n&&"name"!==n&&"slot"!==n||(e=ze(e)),void 0===i?e.removeAttribute(n):e.setAttribute(n,i)}_serializeValue(e){switch(typeof e){case"boolean":return e?"":void 0;default:return null!=e?e.toString():void 0}}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}),Ke=qe;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.PropertiesChanged"),Polymer.PropertiesChanged=Ke;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Ye={};let Xe=HTMLElement.prototype;for(;Xe;){let e=Object.getOwnPropertyNames(Xe);for(let t=0;t<e.length;t++)Ye[e[t]]=!0;Xe=Object.getPrototypeOf(Xe)}const Je=M(e=>{const t=qe(e);return class extends t{static createPropertiesForAttributes(){let e=this.observedAttributes;for(let t=0;t<e.length;t++)this.prototype._createPropertyAccessor(Le(e[t]))}static attributeNameForProperty(e){return De(e)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const n=this;n.hasAttribute(e)||this._valueToNodeAttribute(n,t,e)}_serializeValue(e){switch(typeof e){case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return super._serializeValue(e)}}_deserializeValue(e,t){let n;switch(t){case Object:try{n=JSON.parse(e)}catch(t){n=e}break;case Array:try{n=JSON.parse(e)}catch(t){n=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${e}`)}break;case Date:n=isNaN(e)?String(e):Number(e),n=new Date(n);break;default:n=super._deserializeValue(e,t)}return n}_definePropertyAccessor(e,t){!function(e,t){if(!Ye[t]){let n=e[t];void 0!==n&&(e.__data?e._setPendingProperty(t,n):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=n))}}(this,e),super._definePropertyAccessor(e,t)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}}),Ze=Je;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.PropertyAccessors"),Polymer.PropertyAccessors=Ze;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Qe={"dom-if":!0,"dom-repeat":!0};let et=!1,tt=!1;function nt(e){(function(){if(!et){et=!0;const e=document.createElement("textarea");e.placeholder="a",tt=e.placeholder===e.textContent}return tt})()&&"textarea"===e.localName&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function it(e){let t=e.getAttribute("is");if(t&&Qe[t]){let n=e;for(n.removeAttribute("is"),e=n.ownerDocument.createElement(t),n.parentNode.replaceChild(e,n),e.appendChild(n);n.attributes.length;)e.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return e}function st(e,t){let n=t.parentInfo&&st(e,t.parentInfo);if(!n)return e;for(let e=n.firstChild,i=0;e;e=e.nextSibling)if(t.parentIndex===i++)return e}function at(e,t,n,i){i.id&&(t[i.id]=n)}function ot(e,t,n){if(n.events&&n.events.length)for(let i,s=0,a=n.events;s<a.length&&(i=a[s]);s++)e._addMethodEventListenerToNode(t,i.name,i.value,e)}function rt(e,t,n){n.templateInfo&&(t._templateInfo=n.templateInfo)}const lt=M(e=>class extends e{static _parseTemplate(e,t){if(!e._templateInfo){let n=e._templateInfo={};n.nodeInfoList=[],n.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,n,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,n){return this._parseTemplateNode(e.content,t,n)}static _parseTemplateNode(e,t,n){let i=!1,s=e;return"template"!=s.localName||s.hasAttribute("preserve-content")?"slot"===s.localName&&(t.hasInsertionPoint=!0):i=this._parseTemplateNestedTemplate(s,t,n)||i,nt(s),s.firstChild&&this._parseTemplateChildNodes(s,t,n),s.hasAttributes&&s.hasAttributes()&&(i=this._parseTemplateNodeAttributes(s,t,n)||i),i}static _parseTemplateChildNodes(e,t,n){if("script"!==e.localName&&"style"!==e.localName)for(let i,s=e.firstChild,a=0;s;s=i){if("template"==s.localName&&(s=it(s)),i=s.nextSibling,s.nodeType===Node.TEXT_NODE){let n=i;for(;n&&n.nodeType===Node.TEXT_NODE;)s.textContent+=n.textContent,i=n.nextSibling,e.removeChild(n),n=i;if(t.stripWhiteSpace&&!s.textContent.trim()){e.removeChild(s);continue}}let o={parentIndex:a,parentInfo:n};this._parseTemplateNode(s,t,o)&&(o.infoIndex=t.nodeInfoList.push(o)-1),s.parentNode&&a++}}static _parseTemplateNestedTemplate(e,t,n){let i=e,s=this._parseTemplate(i,t);return(s.content=i.content.ownerDocument.createDocumentFragment()).appendChild(i.content),n.templateInfo=s,!0}static _parseTemplateNodeAttributes(e,t,n){let i=!1,s=Array.from(e.attributes);for(let a,o=s.length-1;a=s[o];o--)i=this._parseTemplateNodeAttribute(e,t,n,a.name,a.value)||i;return i}static _parseTemplateNodeAttribute(e,t,n,i,s){return"on-"===i.slice(0,3)?(e.removeAttribute(i),n.events=n.events||[],n.events.push({name:i.slice(3),value:s}),!0):"id"===i&&(n.id=s,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let t=this.constructor._parseTemplate(e),n=t.nodeInfoList,i=t.content||e.content,s=document.importNode(i,!0);s.__noInsertionPoint=!t.hasInsertionPoint;let a=s.nodeList=new Array(n.length);s.$={};for(let e,t=0,i=n.length;t<i&&(e=n[t]);t++){let n=a[t]=st(s,e);at(0,s.$,n,e),rt(0,n,e),ot(this,n,e)}return s=s,s}_addMethodEventListenerToNode(e,t,n,i){let s=function(e,t,n){return e=e._methodHost||e,function(t){e[n]?e[n](t,t.detail):console.warn("listener method `"+n+"` not defined")}}(i=i||e,0,n);return this._addEventListenerToNode(e,t,s),s}_addEventListenerToNode(e,t,n){e.addEventListener(t,n)}_removeEventListenerFromNode(e,t,n){e.removeEventListener(t,n)}}),ct=lt;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.TemplateStamp"),Polymer.TemplateStamp=ct;
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
let dt=0;const ht={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},pt=/[A-Z]/;function ut(e,t){let n=e[t];if(n){if(!e.hasOwnProperty(t)){n=e[t]=Object.create(e[t]);for(let e in n){let t=n[e],i=n[e]=Array(t.length);for(let e=0;e<t.length;e++)i[e]=t[e]}}}else n=e[t]={};return n}function mt(e,t,n,i,s,a){if(t){let o=!1,r=dt++;for(let l in n)gt(e,t,r,l,n,i,s,a)&&(o=!0);return o}return!1}function gt(e,t,n,i,s,a,o,r){let l=!1,c=t[o?ce(i):i];if(c)for(let t,d=0,h=c.length;d<h&&(t=c[d]);d++)t.info&&t.info.lastRun===n||o&&!_t(i,t.trigger)||(t.info&&(t.info.lastRun=n),t.fn(e,i,s,a,t.info,o,r),l=!0);return l}function _t(e,t){if(t){let n=t.name;return n==e||!(!t.structured||!de(n,e))||!(!t.wildcard||!he(n,e))}return!0}function ft(e,t,n,i,s){let a="string"==typeof s.method?e[s.method]:s.method,o=s.property;a?a.call(e,e.__data[o],i[o]):s.dynamicFn||console.warn("observer method `"+s.method+"` not defined")}function bt(e,t,n){let i=ce(t);if(i!==t){return vt(e,De(i)+"-changed",n[t],t),!0}return!1}function vt(e,t,n,i){let s={value:n,queueProperty:!0};i&&(s.path=i),ze(e).dispatchEvent(new CustomEvent(t,{detail:s}))}function yt(e,t,n,i,s,a){let o=(a?ce(t):t)!=t?t:null,r=o?_e(e,o):e.__data[t];o&&void 0===r&&(r=n[t]),vt(e,s.eventName,r,o)}function wt(e,t,n,i,s){let a=e.__data[t];w&&(a=w(a,s.attrName,"attribute",e)),e._propertyToAttribute(t,s.attrName,a)}function Ct(e,t,n,i,s){let a=Tt(e,t,n,i,s),o=s.methodInfo;e.__dataHasAccessor&&e.__dataHasAccessor[o]?e._setPendingProperty(o,a,!0):e[o]=a}function Et(e,t,n,i,s,a,o){n.bindings=n.bindings||[];let r={kind:i,target:s,parts:a,literal:o,isCompound:1!==a.length};if(n.bindings.push(r),function(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}(r)){let{event:e,negate:t}=r.parts[0];r.listenerEvent=e||De(s)+"-changed",r.listenerNegate=t}let l=t.nodeInfoList.length;for(let n=0;n<r.parts.length;n++){let i=r.parts[n];i.compoundIndex=n,St(e,t,r,i,l)}}function St(e,t,n,i,s){if(!i.literal)if("attribute"===n.kind&&"-"===n.target[0])console.warn("Cannot set attribute "+n.target+' because "-" is not a valid attribute starting character');else{let a=i.dependencies,o={index:s,binding:n,part:i,evaluator:e};for(let n=0;n<a.length;n++){let i=a[n];"string"==typeof i&&(i=Ot(i),i.wildcard=!0),e._addTemplatePropertyEffect(t,i.rootProperty,{fn:xt,info:o,trigger:i})}}}function xt(e,t,n,i,s,a,o){let r=o[s.index],l=s.binding,c=s.part;if(a&&c.source&&t.length>c.source.length&&"property"==l.kind&&!l.isCompound&&r.__isPropertyEffectsClient&&r.__dataHasAccessor&&r.__dataHasAccessor[l.target]){let i=n[t];t=pe(c.source,l.target,t),r._setPendingPropertyOrPath(t,i,!1,!0)&&e._enqueueClient(r)}else{!function(e,t,n,i,s){s=function(e,t,n,i){if(n.isCompound){let s=e.__dataCompoundStorage[n.target];s[i.compoundIndex]=t,t=s.join("")}"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t));return t}(t,s,n,i),w&&(s=w(s,n.target,n.kind,t));if("attribute"==n.kind)e._valueToNodeAttribute(t,s,n.target);else{let i=n.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[i]?t[ht.READ_ONLY]&&t[ht.READ_ONLY][i]||t._setPendingProperty(i,s)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,i,s)}}(e,r,l,c,s.evaluator._evaluateBinding(e,c,t,n,i,a))}}function At(e,t){if(t.isCompound){let n=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),i=t.parts,s=new Array(i.length);for(let e=0;e<i.length;e++)s[e]=i[e].literal;let a=t.target;n[a]=s,t.literal&&"property"==t.kind&&("className"===a&&(e=ze(e)),e[a]=t.literal)}}function Pt(e,t,n){if(n.listenerEvent){let i=n.parts[0];e.addEventListener(n.listenerEvent,(function(e){!function(e,t,n,i,s){let a,o=e.detail,r=o&&o.path;r?(i=pe(n,i,r),a=o&&o.value):a=e.currentTarget[n],a=s?!a:a,t[ht.READ_ONLY]&&t[ht.READ_ONLY][i]||!t._setPendingPropertyOrPath(i,a,!0,Boolean(r))||o&&o.queueProperty||t._invalidateProperties()}(e,t,n.target,i.source,i.negate)}))}}function kt(e,t,n,i,s,a){a=t.static||a&&("object"!=typeof a||a[t.methodName]);let o={methodName:t.methodName,args:t.args,methodInfo:s,dynamicFn:a};for(let s,a=0;a<t.args.length&&(s=t.args[a]);a++)s.literal||e._addPropertyEffect(s.rootProperty,n,{fn:i,info:o,trigger:s});a&&e._addPropertyEffect(t.methodName,n,{fn:i,info:o})}function Tt(e,t,n,i,s){let a=e._methodHost||e,o=a[s.methodName];if(o){let i=e._marshalArgs(s.args,t,n);return o.apply(a,i)}s.dynamicFn||console.warn("method `"+s.methodName+"` not defined")}const It=[],Rt=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function Lt(e){let t="";for(let n=0;n<e.length;n++){t+=e[n].literal||""}return t}function Dt(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:It};if(t[2].trim()){return function(e,t){return t.args=e.map((function(e){let n=Ot(e);return n.literal||(t.static=!1),n}),this),t}(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function Ot(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t,value:"",literal:!1},i=t[0];switch("-"===i&&(i=t[1]),i>="0"&&i<="9"&&(i="#"),i){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.rootProperty=ce(t),n.structured=le(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n}function Nt(e,t,n){let i=_e(e,n);return void 0===i&&(i=t[n]),i}function Mt(e,t,n,i){e.notifyPath(n+".splices",{indexSplices:i}),e.notifyPath(n+".length",t.length)}function $t(e,t,n,i,s,a){Mt(e,t,n,[{index:i,addedCount:s,removed:a,object:t,type:"splice"}])}const Bt=M(e=>{const t=lt(Je(e));return class extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataCounter=0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo}get PROPERTY_EFFECT_TYPES(){return ht}_initializeProperties(){super._initializeProperties(),Ft.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[ht.READ_ONLY];for(let n in e)t&&t[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=e[n])}_addPropertyEffect(e,t,n){this._createPropertyAccessor(e,t==ht.READ_ONLY);let i=ut(this,t)[e];i||(i=this[t][e]=[]),i.push(n)}_removePropertyEffect(e,t,n){let i=ut(this,t)[e],s=i.indexOf(n);s>=0&&i.splice(s,1)}_hasPropertyEffect(e,t){let n=this[t];return Boolean(n&&n[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,ht.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,ht.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,ht.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,ht.COMPUTE)}_setPendingPropertyOrPath(e,t,n,i){if(i||ce(Array.isArray(e)?e[0]:e)!==e){if(!i){let n=_e(this,e);if(!(e=fe(this,e,t))||!super._shouldPropertyChange(e,t,n))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,n))return function(e,t,n){let i=e.__dataLinkedPaths;if(i){let s;for(let a in i){let o=i[a];he(a,t)?(s=pe(a,o,t),e._setPendingPropertyOrPath(s,n,!0,!0)):he(o,t)&&(s=pe(o,a,t),e._setPendingPropertyOrPath(s,n,!0,!0))}}}(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,n);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,n){n===e[t]&&"object"!=typeof n||("className"===t&&(e=ze(e)),e[t]=n)}_setPendingProperty(e,t,n){let i=this.__dataHasPaths&&le(e),s=i?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,s[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),i?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(i||this[ht.NOTIFY]&&this[ht.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=n),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushProperties(){this.__dataCounter++,super._flushProperties(),this.__dataCounter--}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let n=e[t];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let n in e)!t&&this[ht.READ_ONLY]&&this[ht.READ_ONLY][n]||this._setPendingPropertyOrPath(n,e[n],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,t,n){let i=this.__dataHasPaths;this.__dataHasPaths=!1,function(e,t,n,i){let s=e[ht.COMPUTE];if(s){let a=t;for(;mt(e,s,a,n,i);)Object.assign(n,e.__dataOld),Object.assign(t,e.__dataPending),a=e.__dataPending,e.__dataPending=null}}(this,t,n,i);let s=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(t,n,i),this._flushClients(),mt(this,this[ht.REFLECT],t,n,i),mt(this,this[ht.OBSERVE],t,n,i),s&&function(e,t,n,i,s){let a,o,r=e[ht.NOTIFY],l=dt++;for(let o in t)t[o]&&(r&&gt(e,r,l,o,n,i,s)?a=!0:s&&bt(e,o,n)&&(a=!0));a&&(o=e.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}(this,s,t,n,i),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,t,n){this[ht.PROPAGATE]&&mt(this,this[ht.PROPAGATE],e,t,n);let i=this.__templateInfo;for(;i;)mt(this,i.propertyEffects,e,t,n,i.nodeList),i=i.nextTemplateInfo}linkPaths(e,t){e=me(e),t=me(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=me(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let n={path:""};Mt(this,_e(this,e,n),n.path,t)}get(e,t){return _e(t||this,e)}set(e,t,n){n?fe(n,e,t):this[ht.READ_ONLY]&&this[ht.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let n={path:""},i=_e(this,e,n),s=i.length,a=i.push(...t);return t.length&&$t(this,i,n.path,s,t.length,[]),a}pop(e){let t={path:""},n=_e(this,e,t),i=Boolean(n.length),s=n.pop();return i&&$t(this,n,t.path,n.length,0,[s]),s}splice(e,t,n,...i){let s,a={path:""},o=_e(this,e,a);return t<0?t=o.length-Math.floor(-t):t&&(t=Math.floor(t)),s=2===arguments.length?o.splice(t):o.splice(t,n,...i),(i.length||s.length)&&$t(this,o,a.path,t,i.length,s),s}shift(e){let t={path:""},n=_e(this,e,t),i=Boolean(n.length),s=n.shift();return i&&$t(this,n,t.path,0,0,[s]),s}unshift(e,...t){let n={path:""},i=_e(this,e,n),s=i.unshift(...t);return t.length&&$t(this,i,n.path,0,t.length,[]),s}notifyPath(e,t){let n;if(1==arguments.length){let i={path:""};t=_e(this,e,i),n=i.path}else n=Array.isArray(e)?me(e):e;this._setPendingPropertyOrPath(n,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){var n;this._addPropertyEffect(e,ht.READ_ONLY),t&&(this["_set"+(n=e,n[0].toUpperCase()+n.substring(1))]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,n){let i={property:e,method:t,dynamicFn:Boolean(n)};this._addPropertyEffect(e,ht.OBSERVE,{fn:ft,info:i,trigger:{name:e}}),n&&this._addPropertyEffect(t,ht.OBSERVE,{fn:ft,info:i,trigger:{name:t}})}_createMethodObserver(e,t){let n=Dt(e);if(!n)throw new Error("Malformed observer expression '"+e+"'");kt(this,n,ht.OBSERVE,Tt,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,ht.NOTIFY,{fn:yt,info:{eventName:De(e)+"-changed",property:e}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]?console.warn("Property "+e+" cannot be reflected to attribute "+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,ht.REFLECT,{fn:wt,info:{attrName:t}})}_createComputedProperty(e,t,n){let i=Dt(t);if(!i)throw new Error("Malformed computed expression '"+t+"'");kt(this,i,ht.COMPUTE,Ct,e,n)}_marshalArgs(e,t,n){const i=this.__data,s=[];for(let a=0,o=e.length;a<o;a++){let{name:o,structured:r,wildcard:l,value:c,literal:d}=e[a];if(!d)if(l){const e=he(o,t),s=Nt(i,n,e?t:o);c={path:e?t:o,value:s,base:e?_e(i,o):s}}else c=r?Nt(i,n,o):i[o];s[a]=c}return s}static addPropertyEffect(e,t,n){this.prototype._addPropertyEffect(e,t,n)}static createPropertyObserver(e,t,n){this.prototype._createPropertyObserver(e,t,n)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,n){this.prototype._createComputedProperty(e,t,n)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let n=this.constructor._parseTemplate(e),i=this.__templateInfo==n;if(!i)for(let e in n.propertyEffects)this._createPropertyAccessor(e);if(t&&(n=Object.create(n),n.wasPreBound=i,!i&&this.__templateInfo)){let e=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=e.nextTemplateInfo=n,n.previousTemplateInfo=e,n}return this.__templateInfo=n}static _addTemplatePropertyEffect(e,t,n){(e.hostProps=e.hostProps||{})[t]=!0;let i=e.propertyEffects=e.propertyEffects||{};(i[t]=i[t]||[]).push(n)}_stampTemplate(e){Ft.beginHosting(this);let t=super._stampTemplate(e);Ft.endHosting(this);let n=this._bindTemplate(e,!0);if(n.nodeList=t.nodeList,!n.wasPreBound){let e=n.childNodes=[];for(let n=t.firstChild;n;n=n.nextSibling)e.push(n)}return t.templateInfo=n,function(e,t){let{nodeList:n,nodeInfoList:i}=t;if(i.length)for(let t=0;t<i.length;t++){let s=i[t],a=n[t],o=s.bindings;if(o)for(let t=0;t<o.length;t++){let n=o[t];At(a,n),Pt(a,e,n)}a.__dataHost=e}}(this,n),this.__dataReady&&mt(this,n.propertyEffects,this.__data,null,!1,n.nodeList),t}_removeBoundDom(e){let t=e.templateInfo;t.previousTemplateInfo&&(t.previousTemplateInfo.nextTemplateInfo=t.nextTemplateInfo),t.nextTemplateInfo&&(t.nextTemplateInfo.previousTemplateInfo=t.previousTemplateInfo),this.__templateInfoLast==t&&(this.__templateInfoLast=t.previousTemplateInfo),t.previousTemplateInfo=t.nextTemplateInfo=null;let n=t.childNodes;for(let e=0;e<n.length;e++){let t=n[e];t.parentNode.removeChild(t)}}static _parseTemplateNode(e,n,i){let s=t._parseTemplateNode.call(this,e,n,i);if(e.nodeType===Node.TEXT_NODE){let t=this._parseBindings(e.textContent,n);t&&(e.textContent=Lt(t)||" ",Et(this,n,i,"text","textContent",t),s=!0)}return s}static _parseTemplateNodeAttribute(e,n,i,s,a){let o=this._parseBindings(a,n);if(o){let t=s,a="property";pt.test(s)?a="attribute":"$"==s[s.length-1]&&(s=s.slice(0,-1),a="attribute");let r=Lt(o);return r&&"attribute"==a&&("class"==s&&e.hasAttribute("class")&&(r+=" "+e.getAttribute(s)),e.setAttribute(s,r)),"input"===e.localName&&"value"===t&&e.setAttribute(t,""),e.removeAttribute(t),"property"===a&&(s=Le(s)),Et(this,n,i,a,s,o,r),!0}return t._parseTemplateNodeAttribute.call(this,e,n,i,s,a)}static _parseTemplateNestedTemplate(e,n,i){let s=t._parseTemplateNestedTemplate.call(this,e,n,i),a=i.templateInfo.hostProps;for(let e in a){Et(this,n,i,"property","_host_"+e,[{mode:"{",source:e,dependencies:[e]}])}return s}static _parseBindings(e,t){let n,i=[],s=0;for(;null!==(n=Rt.exec(e));){n.index>s&&i.push({literal:e.slice(s,n.index)});let a=n[1][0],o=Boolean(n[2]),r=n[3].trim(),l=!1,c="",d=-1;"{"==a&&(d=r.indexOf("::"))>0&&(c=r.substring(d+2),r=r.substring(0,d),l=!0);let h=Dt(r),p=[];if(h){let{args:e,methodName:n}=h;for(let t=0;t<e.length;t++){let n=e[t];n.literal||p.push(n)}let i=t.dynamicFns;(i&&i[n]||h.static)&&(p.push(n),h.dynamicFn=!0)}else p.push(r);i.push({source:r,mode:a,negate:o,customEvent:l,signature:h,dependencies:p,event:c}),s=Rt.lastIndex}if(s&&s<e.length){let t=e.substring(s);t&&i.push({literal:t})}return i.length?i:null}static _evaluateBinding(e,t,n,i,s,a){let o;return o=t.signature?Tt(e,n,i,0,t.signature):n!=t.source?_e(e,t.source):a&&le(n)?_e(e,n):e.__data[n],t.negate&&(o=!o),o}}});const Ft=new class{constructor(){this.stack=[]}registerHost(e){if(this.stack.length){this.stack[this.stack.length-1]._enqueueClient(e)}}beginHosting(e){this.stack.push(e)}endHosting(e){let t=this.stack.length;t&&this.stack[t-1]==e&&this.stack.pop()}},Ut=Bt;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.PropertyEffects"),Polymer.PropertyEffects=Ut;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Ht=0;function jt(){Ht++}const Gt=[];function Vt(e){console.log("["+e.is+"]: registered")}function zt(e){Gt.push(e)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Wt=jt,qt=Gt,Kt=zt,Yt=function(){Gt.forEach(Vt)};goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Telemetry"),Polymer.telemetry={instanceCount:Ht,incrementInstanceCount:Wt,registrations:qt,register:Kt,dumpRegistrations:Yt};const Xt=M(e=>{const t=qe(e);function n(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof s?t:null}function i(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const n=e.properties;n&&(t=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(e){const t={};for(let n in e){const i=e[n];t[n]="function"==typeof i?{type:i}:i}return t}(n))}e.__ownProperties=t}return e.__ownProperties}class s extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){zt(this.prototype);const e=this._properties;this.__observedAttributes=e?Object.keys(e).map(e=>this.attributeNameForProperty(e)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=n(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=i(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=n(this);this.__properties=Object.assign({},e&&e._properties,i(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){jt(),this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return s}),Jt=Xt;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.PropertiesMixin"),Polymer.PropertiesMixin=Jt;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class Zt{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run(()=>{this._timer=null,Qt.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),Qt.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(e,t,n){return e instanceof Zt?e._cancelAsync():e=new Zt,e.setConfig(t,n),e}}let Qt=new Set;const en=function(e){Qt.add(e)},tn=function(){const e=Boolean(Qt.size);return Qt.forEach(e=>{try{e.flush()}catch(e){setTimeout(()=>{throw e})}}),e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Debounce");const nn=Zt;Polymer.Debouncer=nn;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let sn="string"==typeof document.head.style.touchAction,an="__polymerGesturesHandled",on="__polymerGesturesTouchAction",rn=["mousedown","mousemove","mouseup","click"],ln=[0,1,4,2],cn=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function dn(e){return rn.indexOf(e)>-1}let hn=!1;function pn(e){if(!dn(e)&&"touchend"!==e)return sn&&hn&&E?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){hn=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let un=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const mn=[],gn={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},_n={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function fn(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let n=e.getRootNode();if(e.id){let i=n.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<i.length;e++)t.push(i[e])}}return t}let bn=function(e){let t=e.sourceCapabilities;var n;if((!t||t.firesTouchEvents)&&(e[an]={skip:!0},"click"===e.type)){let t=!1,i=Sn(e);for(let e=0;e<i.length;e++){if(i[e].nodeType===Node.ELEMENT_NODE)if("label"===i[e].localName)mn.push(i[e]);else if(n=i[e],gn[n.localName]){let n=fn(i[e]);for(let e=0;e<n.length;e++)t=t||mn.indexOf(n[e])>-1}if(i[e]===wn.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation()}};function vn(e){let t=un?["click"]:rn;for(let n,i=0;i<t.length;i++)n=t[i],e?(mn.length=0,document.addEventListener(n,bn,!0)):document.removeEventListener(n,bn,!0)}function yn(e){let t=e.type;if(!dn(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!cn&&(t=ln[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let wn={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function Cn(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function En(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}D&&document.addEventListener("touchend",(function(e){if(!D)return;wn.mouse.mouseIgnoreJob||vn(!0),wn.mouse.target=Sn(e)[0],wn.mouse.mouseIgnoreJob=Zt.debounce(wn.mouse.mouseIgnoreJob,He.after(2500),(function(){vn(),wn.mouse.target=null,wn.mouse.mouseIgnoreJob=null}))}),!!hn&&{passive:!0});const Sn=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],xn={},An=[];function Pn(e,t){let n=document.elementFromPoint(e,t),i=n;for(;i&&i.shadowRoot&&!window.ShadyDOM;){let s=i;if(i=i.shadowRoot.elementFromPoint(e,t),s===i)break;i&&(n=i)}return n}function kn(e){const t=Sn(e);return t.length>0?t[0]:e.target}function Tn(e){let t,n=e.type,i=e.currentTarget.__polymerGestures;if(!i)return;let s=i[n];if(s){if(!e[an]&&(e[an]={},"touch"===n.slice(0,5))){let t=(e=e).changedTouches[0];if("touchstart"===n&&1===e.touches.length&&(wn.touch.id=t.identifier),wn.touch.id!==t.identifier)return;sn||"touchstart"!==n&&"touchmove"!==n||function(e){let t=e.changedTouches[0],n=e.type;if("touchstart"===n)wn.touch.x=t.clientX,wn.touch.y=t.clientY,wn.touch.scrollDecided=!1;else if("touchmove"===n){if(wn.touch.scrollDecided)return;wn.touch.scrollDecided=!0;let n=function(e){let t="auto",n=Sn(e);for(let e,i=0;i<n.length;i++)if(e=n[i],e[on]){t=e[on];break}return t}(e),i=!1,s=Math.abs(wn.touch.x-t.clientX),a=Math.abs(wn.touch.y-t.clientY);e.cancelable&&("none"===n?i=!0:"pan-x"===n?i=a>s:"pan-y"===n&&(i=s>a)),i?e.preventDefault():Nn("track")}}(e)}if(t=e[an],!t.skip){for(let n,i=0;i<An.length;i++)n=An[i],s[n.name]&&!t[n.name]&&n.flow&&n.flow.start.indexOf(e.type)>-1&&n.reset&&n.reset();for(let i,a=0;a<An.length;a++)i=An[a],s[i.name]&&!t[i.name]&&(t[i.name]=!0,i[n](e))}}}function In(e,t,n){return!!xn[t]&&(function(e,t,n){let i=xn[t],s=i.deps,a=i.name,o=e.__polymerGestures;o||(e.__polymerGestures=o={});for(let t,n,i=0;i<s.length;i++)t=s[i],un&&dn(t)&&"click"!==t||(n=o[t],n||(o[t]=n={_count:0}),0===n._count&&e.addEventListener(t,Tn,pn(t)),n[a]=(n[a]||0)+1,n._count=(n._count||0)+1);e.addEventListener(t,n),i.touchAction&&Dn(e,i.touchAction)}(e,t,n),!0)}function Rn(e,t,n){return!!xn[t]&&(function(e,t,n){let i=xn[t],s=i.deps,a=i.name,o=e.__polymerGestures;if(o)for(let t,n,i=0;i<s.length;i++)t=s[i],n=o[t],n&&n[a]&&(n[a]=(n[a]||1)-1,n._count=(n._count||1)-1,0===n._count&&e.removeEventListener(t,Tn,pn(t)));e.removeEventListener(t,n)}(e,t,n),!0)}function Ln(e){An.push(e);for(let t=0;t<e.emits.length;t++)xn[e.emits[t]]=e}function Dn(e,t){sn&&e instanceof HTMLElement&&Ve.run(()=>{e.style.touchAction=t}),e[on]=t}function On(e,t,n){let i=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(i.detail=n,ze(e).dispatchEvent(i),i.defaultPrevented){let e=n.preventer||n.sourceEvent;e&&e.preventDefault&&e.preventDefault()}}function Nn(e){let t=function(e){for(let t,n=0;n<An.length;n++){t=An[n];for(let n,i=0;i<t.emits.length;i++)if(n=t.emits[i],n===e)return t}return null}(e);t.info&&(t.info.prevent=!0)}function Mn(e,t,n,i){t&&On(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:i,prevent:function(e){return Nn(e)}})}function $n(e,t,n){if(e.prevent)return!1;if(e.started)return!0;let i=Math.abs(e.x-t),s=Math.abs(e.y-n);return i>=5||s>=5}function Bn(e,t,n){if(!t)return;let i,s=e.moves[e.moves.length-2],a=e.moves[e.moves.length-1],o=a.x-e.x,r=a.y-e.y,l=0;s&&(i=a.x-s.x,l=a.y-s.y),On(t,"track",{state:e.state,x:n.clientX,y:n.clientY,dx:o,dy:r,ddx:i,ddy:l,sourceEvent:n,hover:function(){return Pn(n.clientX,n.clientY)}})}function Fn(e,t,n){let i=Math.abs(t.clientX-e.x),s=Math.abs(t.clientY-e.y),a=kn(n||t);!a||_n[a.localName]&&a.hasAttribute("disabled")||(isNaN(i)||isNaN(s)||i<=25&&s<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=kn(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let n=t.getBoundingClientRect(),i=e.pageX,s=e.pageY;return!(i>=n.left&&i<=n.right&&s>=n.top&&s<=n.bottom)}return!1}(t))&&(e.prevent||On(a,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:n}))}Ln({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){En(this.info)},mousedown:function(e){if(!yn(e))return;let t=kn(e),n=this;Cn(this.info,(function(e){yn(e)||(Mn("up",t,e),En(n.info))}),(function(e){yn(e)&&Mn("up",t,e),En(n.info)})),Mn("down",t,e)},touchstart:function(e){Mn("down",kn(e),e.changedTouches[0],e)},touchend:function(e){Mn("up",kn(e),e.changedTouches[0],e)}}),Ln({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,En(this.info)},mousedown:function(e){if(!yn(e))return;let t=kn(e),n=this,i=function(e){let i=e.clientX,s=e.clientY;$n(n.info,i,s)&&(n.info.state=n.info.started?"mouseup"===e.type?"end":"track":"start","start"===n.info.state&&Nn("tap"),n.info.addMove({x:i,y:s}),yn(e)||(n.info.state="end",En(n.info)),t&&Bn(n.info,t,e),n.info.started=!0)};Cn(this.info,i,(function(e){n.info.started&&i(e),En(n.info)})),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=kn(e),n=e.changedTouches[0],i=n.clientX,s=n.clientY;$n(this.info,i,s)&&("start"===this.info.state&&Nn("tap"),this.info.addMove({x:i,y:s}),Bn(this.info,t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=kn(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),Bn(this.info,t,n))}}),Ln({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){yn(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){yn(e)&&Fn(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){Fn(this.info,e.changedTouches[0],e)}});const Un=xn,Hn=An,jn=Pn,Gn=In,Vn=Rn,zn=Ln,Wn=Dn,qn=Nn,Kn=function(){wn.mouse.mouseIgnoreJob&&wn.mouse.mouseIgnoreJob.flush()},Yn=kn,Xn=In,Jn=Rn;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Gestures"),Polymer.Gestures={gestures:Un,recognizers:Hn,deepTargetFind:jn,addListener:Gn,removeListener:Vn,register:zn,setTouchAction:Wn,prevent:qn,resetMouseCanceller:Kn,findOriginalTarget:Yn,add:Xn,remove:Jn};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Zn=M(e=>class extends e{_addEventListenerToNode(e,t,n){In(e,t,n)||super._addEventListenerToNode(e,t,n)}_removeEventListenerFromNode(e,t,n){Rn(e,t,n)||super._removeEventListenerFromNode(e,t,n)}}),Qn=Zn;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.GestureEventListeners"),Polymer.GestureEventListeners=Qn;
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
const ei=/:host\(:dir\((ltr|rtl)\)\)/g,ti=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,ni=/:dir\((?:ltr|rtl)\)/,ii=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),si=[];let ai=null,oi="";function ri(){oi=document.documentElement.getAttribute("dir")}function li(e){if(!e.__autoDirOptOut){e.setAttribute("dir",oi)}}function ci(){ri(),oi=document.documentElement.getAttribute("dir");for(let e=0;e<si.length;e++)li(si[e])}const di=M(e=>{ii||ai||(ri(),ai=new MutationObserver(ci),ai.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=Je(e);class n extends t{static _processStyleText(e,n){return e=t._processStyleText.call(this,e,n),!ii&&ni.test(e)&&(e=this._replaceDirInCssText(e),this.__activateDir=!0),e}static _replaceDirInCssText(e){let t=e;return t=t.replace(ei,':host([dir="$1"])'),t=t.replace(ti,':host([dir="$2"]) $1'),t}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(ai&&ai.takeRecords().length&&ci(),si.push(this),li(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const e=si.indexOf(this);e>-1&&si.splice(e,1)}}}return n.__activateDir=!1,n}),hi=di;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.DirMixin"),Polymer.DirMixin=hi;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let pi=!1,ui=[],mi=[];function gi(){pi=!0,requestAnimationFrame((function(){pi=!1,_i(ui),setTimeout((function(){!function(e){for(let t=0,n=e.length;t<n;t++)fi(e.shift())}(mi)}))}))}function _i(e){for(;e.length;)fi(e.shift())}function fi(e){const t=e[0],n=e[1],i=e[2];try{n.apply(t,i)}catch(e){setTimeout(()=>{throw e})}}function bi(e,t,n){pi||gi(),mi.push([e,t,n])}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const vi=function(e,t,n){pi||gi(),ui.push([e,t,n])},yi=bi,wi=function(){for(;ui.length||mi.length;)_i(ui),_i(mi);pi=!1};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Ci(){document.body.removeAttribute("unresolved")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Ei(e,t,n){return{index:e,removed:t,addedCount:n}}goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.RenderStatus"),Polymer.RenderStatus={beforeNextRender:vi,afterNextRender:yi,flush:wi},"interactive"===document.readyState||"complete"===document.readyState?Ci():window.addEventListener("DOMContentLoaded",Ci)
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/,goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Unresolved");function Si(e,t,n,i,s,a){let o,r=0,l=0,c=Math.min(n-t,a-s);if(0==t&&0==s&&(r=function(e,t,n){for(let i=0;i<n;i++)if(!Ai(e[i],t[i]))return i;return n}(e,i,c)),n==e.length&&a==i.length&&(l=function(e,t,n){let i=e.length,s=t.length,a=0;for(;a<n&&Ai(e[--i],t[--s]);)a++;return a}(e,i,c-r)),s+=r,a-=l,(n-=l)-(t+=r)==0&&a-s==0)return[];if(t==n){for(o=Ei(t,[],0);s<a;)o.removed.push(i[s++]);return[o]}if(s==a)return[Ei(t,[],n-t)];let d=function(e){let t=e.length-1,n=e[0].length-1,i=e[t][n],s=[];for(;t>0||n>0;){if(0==t){s.push(2),n--;continue}if(0==n){s.push(3),t--;continue}let a,o=e[t-1][n-1],r=e[t-1][n],l=e[t][n-1];a=r<l?r<o?r:o:l<o?l:o,a==o?(o==i?s.push(0):(s.push(1),i=o),t--,n--):a==r?(s.push(3),t--,i=r):(s.push(2),n--,i=l)}return s.reverse(),s}(function(e,t,n,i,s,a){let o=a-s+1,r=n-t+1,l=new Array(o);for(let e=0;e<o;e++)l[e]=new Array(r),l[e][0]=e;for(let e=0;e<r;e++)l[0][e]=e;for(let n=1;n<o;n++)for(let a=1;a<r;a++)if(Ai(e[t+a-1],i[s+n-1]))l[n][a]=l[n-1][a-1];else{let e=l[n-1][a]+1,t=l[n][a-1]+1;l[n][a]=e<t?e:t}return l}(e,t,n,i,s,a));o=void 0;let h=[],p=t,u=s;for(let e=0;e<d.length;e++)switch(d[e]){case 0:o&&(h.push(o),o=void 0),p++,u++;break;case 1:o||(o=Ei(p,[],0)),o.addedCount++,p++,o.removed.push(i[u]),u++;break;case 2:o||(o=Ei(p,[],0)),o.addedCount++,p++;break;case 3:o||(o=Ei(p,[],0)),o.removed.push(i[u]),u++}return o&&h.push(o),h}function xi(e,t){return Si(e,0,e.length,t,0,t.length)}function Ai(e,t){return e===t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Pi=xi;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function ki(e){return"slot"===e.localName}goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.ArraySplice"),Polymer.ArraySplice={calculateSplices:Pi};let Ti=class{static getFlattenedNodes(e){const t=ze(e);return ki(e)?(e=e,t.assignedNodes({flatten:!0})):Array.from(t.childNodes).map(e=>ki(e)?ze(e=e).assignedNodes({flatten:!0}):[e]).reduce((e,t)=>e.concat(t),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){ki(this._target)?this._listenSlots([this._target]):ze(this._target).children&&(this._listenSlots(ze(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,e=>{this._processMutations(e)}):(this._nativeChildrenObserver=new MutationObserver(e=>{this._processMutations(e)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){ki(this._target)?this._unlistenSlots([this._target]):ze(this._target).children&&(this._unlistenSlots(ze(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,Ve.run(()=>this.flush()))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let n=e[t];n.addedNodes&&this._listenSlots(n.addedNodes),n.removedNodes&&this._unlistenSlots(n.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),n=xi(t,this._effectiveNodes);for(let t,i=0;i<n.length&&(t=n[i]);i++)for(let n,i=0;i<t.removed.length&&(n=t.removed[i]);i++)e.removedNodes.push(n);for(let i,s=0;s<n.length&&(i=n[s]);s++)for(let n=i.index;n<i.index+i.addedCount;n++)e.addedNodes.push(t[n]);this._effectiveNodes=t;let i=!1;return(e.addedNodes.length||e.removedNodes.length)&&(i=!0,this.callback.call(this._target,e)),i}_listenSlots(e){for(let t=0;t<e.length;t++){let n=e[t];ki(n)&&n.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let n=e[t];ki(n)&&n.removeEventListener("slotchange",this._boundSchedule)}}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.FlattenedNodesObserver"),Polymer.FlattenedNodesObserver=Ti;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Ii=function(){let e,t;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=tn()}while(e||t)},Ri=en,Li=Ii;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Flush"),Polymer.enqueueDebouncer=Ri,Polymer.flush=Li;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Di=Element.prototype,Oi=Di.matches||Di.matchesSelector||Di.mozMatchesSelector||Di.msMatchesSelector||Di.oMatchesSelector||Di.webkitMatchesSelector,Ni=function(e,t){return Oi.call(e,t)};class Mi{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e}observeNodes(e){return new Ti(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(ze(this.node).contains(e))return!0;let t=e,n=e.ownerDocument;for(;t&&t!==n&&t!==this.node;)t=ze(t).parentNode||ze(t).host;return t===this.node}getOwnerRoot(){return ze(this.node).getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?ze(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],t=ze(this.node).assignedSlot;for(;t;)e.push(t),t=ze(t).assignedSlot;return e}importNode(e,t){let n=this.node instanceof Document?this.node:this.node.ownerDocument;return ze(n).importNode(e,t)}getEffectiveChildNodes(){return Ti.getFlattenedNodes(this.node)}queryDistributedElements(e){let t=this.getEffectiveChildNodes(),n=[];for(let i,s=0,a=t.length;s<a&&(i=t[s]);s++)i.nodeType===Node.ELEMENT_NODE&&Ni(i,e)&&n.push(i);return n}get activeElement(){let e=this.node;return void 0!==e._activeElement?e._activeElement:e.activeElement}}function $i(e,t){for(let n=0;n<t.length;n++){let i=t[n];Object.defineProperty(e,i,{get:function(){return this.node[i]},configurable:!0})}}class Bi{constructor(e){this.event=e}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}Mi.prototype.cloneNode,Mi.prototype.appendChild,Mi.prototype.insertBefore,Mi.prototype.removeChild,Mi.prototype.replaceChild,Mi.prototype.setAttribute,Mi.prototype.removeAttribute,Mi.prototype.querySelector,Mi.prototype.querySelectorAll,Mi.prototype.parentNode,Mi.prototype.firstChild,Mi.prototype.lastChild,Mi.prototype.nextSibling,Mi.prototype.previousSibling,Mi.prototype.firstElementChild,Mi.prototype.lastElementChild,Mi.prototype.nextElementSibling,Mi.prototype.previousElementSibling,Mi.prototype.childNodes,Mi.prototype.children,Mi.prototype.classList,Mi.prototype.textContent,Mi.prototype.innerHTML;let Fi=Mi;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(Mi.prototype).forEach(t=>{"activeElement"!=t&&(e.prototype[t]=Mi.prototype[t])}),$i(e.prototype,["classList"]),Fi=e,Object.defineProperties(Bi.prototype,{localTarget:{get(){const e=this.event.currentTarget,t=e&&Ui(e).getOwnerRoot(),n=this.path;for(let e=0;e<n.length;e++){const i=n[e];if(Ui(i).getOwnerRoot()===t)return i}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else!function(e,t){for(let n=0;n<t.length;n++){let i=t[n];e[i]=function(){return this.node[i].apply(this.node,arguments)}}}(Mi.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),$i(Mi.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(e,t){for(let n=0;n<t.length;n++){let i=t[n];Object.defineProperty(e,i,{get:function(){return this.node[i]},set:function(e){this.node[i]=e},configurable:!0})}}(Mi.prototype,["textContent","innerHTML","className"]);const Ui=function(e){if((e=e||document)instanceof Fi)return e;if(e instanceof Bi)return e;let t=e.__domApi;return t||(t=e instanceof Event?new Bi(e):new Fi(e),e.__domApi=t),t},Hi=Fi,ji=Bi,Gi=Ui,Vi=Ni,zi=Ii,Wi=en;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Legacy.PolymerDom"),Polymer.DomApi=Hi,Polymer.EventApi=ji,Polymer.dom=Gi,Polymer.dom.matchesSelector=Vi,Polymer.dom.flush=zi,Polymer.dom.addDebouncer=Wi;
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
const qi=window.ShadyCSS&&window.ShadyCSS.cssBuild,Ki=M(e=>{const t=Xt(Bt(e));function n(e,t,n,i){n.computed&&(n.readOnly=!0),n.computed&&(e._hasReadOnlyEffect(t)?console.warn(`Cannot redefine computed property '${t}'.`):e._createComputedProperty(t,n.computed,i)),n.readOnly&&!e._hasReadOnlyEffect(t)?e._createReadOnlyProperty(t,!n.computed):!1===n.readOnly&&e._hasReadOnlyEffect(t)&&console.warn(`Cannot make readOnly property '${t}' non-readOnly.`),n.reflectToAttribute&&!e._hasReflectEffect(t)?e._createReflectedProperty(t):!1===n.reflectToAttribute&&e._hasReflectEffect(t)&&console.warn(`Cannot make reflected property '${t}' non-reflected.`),n.notify&&!e._hasNotifyEffect(t)?e._createNotifyingProperty(t):!1===n.notify&&e._hasNotifyEffect(t)&&console.warn(`Cannot make notify property '${t}' non-notify.`),n.observer&&e._createPropertyObserver(t,n.observer,i[n.observer]),e._addPropertyToAttributeMap(t)}return class extends t{static get polymerElementVersion(){return"3.3.1"}static _finalizeClass(){t._finalizeClass.call(this);const e=((n=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",n))||(n.__ownObservers=n.hasOwnProperty(JSCompiler_renameProperty("observers",n))?n.observers:null),n.__ownObservers);var n;e&&this.createObservers(e,this._properties),this._prepareTemplate()}static _prepareTemplate(){let e=this.template;e&&("string"==typeof e?(console.error("template getter must return HTMLTemplateElement"),e=null):T||(e=e.cloneNode(!0))),this.prototype._template=e}static createProperties(e){for(let t in e)n(this.prototype,t,e[t],e)}static createObservers(e,t){const n=this.prototype;for(let i=0;i<e.length;i++)n._createMethodObserver(e[i],t)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:function(e){let t=null;if(e&&(!x||P)&&(t=j.import(e,"template"),x&&!t))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${e}`);return t}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static set template(e){this._template=e}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=this.importMeta;if(e)this._importPath=p(e.url);else{const e=j.import(this.is);this._importPath=e&&e.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=v,this.importPath=this.constructor.importPath;let e=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let n in t){let i=t[n];"value"in i&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[n]=i)}}return e.__propertyDefaults}(this.constructor);if(e)for(let t in e){let n=e[t];if(!this.hasOwnProperty(t)){let e="function"==typeof n.value?n.value.call(this):n.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e}}}static _processStyleText(e,t){return h(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const n=this.importPath;!function(e,t,n,i){if(!qi){const s=t.content.querySelectorAll("style"),a=q(t),o=K(n),r=t.content.firstElementChild;for(let n=0;n<o.length;n++){let s=o[n];s.textContent=e._processStyleText(s.textContent,i),t.content.insertBefore(s,r)}let l=0;for(let t=0;t<a.length;t++){let n=a[t],o=s[l];o!==n?(n=n.cloneNode(!0),o.parentNode.insertBefore(n,o)):l++,n.textContent=e._processStyleText(n.textContent,i)}}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,n)}(this,t,e,n?d(n):""),this.prototype._bindTemplate(t)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(e){const t=ze(this);if(t.attachShadow)return e?(t.shadowRoot||(t.attachShadow({mode:"open",shadyUpgradeFragment:e}),t.shadowRoot.appendChild(e)),R&&window.ShadyDOM&&window.ShadyDOM.flushInitial(t.shadowRoot),t.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}resolveUrl(e,t){return!t&&this.importPath&&(t=d(this.importPath)),d(e,t)}static _parseTemplateContent(e,n,i){return n.dynamicFns=n.dynamicFns||this._properties,t._parseTemplateContent.call(this,e,n,i)}static _addTemplatePropertyEffect(e,n,i){return!T||n in this._properties||console.warn(`Property '${n}' used in template but not declared in 'properties'; `+"attribute will not be observed."),t._addTemplatePropertyEffect.call(this,e,n,i)}}}),Yi=function(e){window.ShadyCSS&&window.ShadyCSS.styleDocument(e)},Xi=Ki,Ji=Yi;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.ElementMixin"),Polymer.ElementMixin=Xi,Polymer.updateStyles=Ji,Polymer.version="3.3.1";const Zi=!(window.ShadyDOM&&window.ShadyDOM.inUse);let Qi,es;function ts(e){Qi=(!e||!e.shimcssproperties)&&(Zi||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(es=window.ShadyCSS.cssBuild);const ns=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?Qi=window.ShadyCSS.nativeCss:window.ShadyCSS?(ts(window.ShadyCSS),window.ShadyCSS=void 0):ts(window.WebComponents&&window.WebComponents.flags);const is=Qi;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class ss{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function as(e){return function e(t,n){let i=n.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=i.trim(),t.parent){let e=t.previous?t.previous.end:t.parent.start;i=n.substring(e,t.start-1),i=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(){let e=arguments[1],t=6-e.length;for(;t--;)e="0"+e;return"\\"+e}))}(i),i=i.replace(ds.multipleSpaces," "),i=i.substring(i.lastIndexOf(";")+1);let s=t.parsedSelector=t.selector=i.trim();t.atRule=0===s.indexOf(us),t.atRule?0===s.indexOf(ps)?t.type=rs.MEDIA_RULE:s.match(ds.keyframesRule)&&(t.type=rs.KEYFRAMES_RULE,t.keyframesName=t.selector.split(ds.multipleSpaces).pop()):0===s.indexOf(hs)?t.type=rs.MIXIN_RULE:t.type=rs.STYLE_RULE}let s=t.rules;if(s)for(let t,i=0,a=s.length;i<a&&(t=s[i]);i++)e(t,n);return t}(function(e){let t=new ss;t.start=0,t.end=e.length;let n=t;for(let i=0,s=e.length;i<s;i++)if(e[i]===ls){n.rules||(n.rules=[]);let e=n,t=e.rules[e.rules.length-1]||null;n=new ss,n.start=i+1,n.parent=e,n.previous=t,e.rules.push(n)}else e[i]===cs&&(n.end=i+1,n=n.parent||t);return t}(e=e.replace(ds.comments,"").replace(ds.port,"")),e)}function os(e,t,n=""){let i="";if(e.cssText||e.rules){let n=e.rules;if(n&&!function(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&0===t.selector.indexOf(hs)}(n))for(let e,s=0,a=n.length;s<a&&(e=n[s]);s++)i=os(e,t,i);else i=t?e.cssText:function(e){return function(e){return e.replace(ds.mixinApply,"").replace(ds.varApply,"")}(e=function(e){return e.replace(ds.customProp,"").replace(ds.mixinProp,"")}(e))}(e.cssText),i=i.trim(),i&&(i="  "+i+"\n")}return i&&(e.selector&&(n+=e.selector+" "+ls+"\n"),n+=i,e.selector&&(n+=cs+"\n\n")),n}const rs={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},ls="{",cs="}",ds={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},hs="--",ps="@media",us="@",ms=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,gs=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,_s=/@media\s(.*)/,fs=new Set;function bs(e){const t=e.textContent;if(!fs.has(t)){fs.add(t);const e=document.createElement("style");e.setAttribute("shady-unscoped",""),e.textContent=t,document.head.appendChild(e)}}function vs(e){return e.hasAttribute("shady-unscoped")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function ys(e,t){return e?("string"==typeof e&&(e=as(e)),t&&Cs(e,t),os(e,is)):""}function ws(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=as(e.textContent)),e.__cssRules||null}function Cs(e,t,n,i){if(!e)return;let s=!1,a=e.type;if(i&&a===rs.MEDIA_RULE){let t=e.selector.match(_s);t&&(window.matchMedia(t[1]).matches||(s=!0))}a===rs.STYLE_RULE?t(e):n&&a===rs.KEYFRAMES_RULE?n(e):a===rs.MIXIN_RULE&&(s=!0);let o=e.rules;if(o&&!s)for(let e,s=0,a=o.length;s<a&&(e=o[s]);s++)Cs(e,t,n,i)}function Es(e,t){let n=0;for(let i=t,s=e.length;i<s;i++)if("("===e[i])n++;else if(")"===e[i]&&0==--n)return i;return-1}window.ShadyDOM&&window.ShadyDOM.wrap;function Ss(e){if(void 0!==es)return es;if(void 0===e.__cssBuild){const t=e.getAttribute("css-build");if(t)e.__cssBuild=t;else{const t=function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;if(t instanceof Comment){const e=t.textContent.trim().split(":");if("css-build"===e[0])return e[1]}return""}(e);""!==t&&function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),e.__cssBuild=t}}return e.__cssBuild||""}function xs(e){return""!==Ss(e)}function As(e,t){for(let n in t)null===n?e.style.removeProperty(n):e.style.setProperty(n,t[n])}function Ps(e,t){const n=window.getComputedStyle(e).getPropertyValue(t);return n?n.trim():""}const ks=/;\s*/m,Ts=/^\s*(initial)|(inherit)\s*$/,Is=/\s*!important/;class Rs{constructor(){this._map={}}set(e,t){e=e.trim(),this._map[e]={properties:t,dependants:{}}}get(e){return e=e.trim(),this._map[e]||null}}let Ls=null;class Ds{constructor(){this._currentElement=null,this._measureElement=null,this._map=new Rs}detectMixin(e){return function(e){const t=gs.test(e)||ms.test(e);return gs.lastIndex=0,ms.lastIndex=0,t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e)}gatherStyles(e){const t=function(e){const t=[],n=e.querySelectorAll("style");for(let e=0;e<n.length;e++){const i=n[e];vs(i)?Zi||(bs(i),i.parentNode.removeChild(i)):(t.push(i.textContent),i.parentNode.removeChild(i))}return t.join("").trim()}(e.content);if(t){const n=document.createElement("style");return n.textContent=t,e.content.insertBefore(n,e.content.firstChild),n}return null}transformTemplate(e,t){void 0===e._gatheredStyle&&(e._gatheredStyle=this.gatherStyles(e));const n=e._gatheredStyle;return n?this.transformStyle(n,t):null}transformStyle(e,t=""){let n=ws(e);return this.transformRules(n,t),e.textContent=ys(n),n}transformCustomStyle(e){let t=ws(e);return Cs(t,e=>{":root"===e.selector&&(e.selector="html"),this.transformRule(e)}),e.textContent=ys(t),t}transformRules(e,t){this._currentElement=t,Cs(e,e=>{this.transformRule(e)}),this._currentElement=null}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),":root"===e.selector&&(e.selector=":host > *")}transformCssText(e,t){return e=e.replace(ms,(e,n,i,s)=>this._produceCssProperties(e,n,i,s,t)),this._consumeCssProperties(e,t)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let t=e;for(;t.parent;)t=t.parent;const n={};let i=!1;return Cs(t,t=>{i=i||t===e,i||t.selector===e.selector&&Object.assign(n,this._cssTextToMap(t.parsedCssText))}),n}_consumeCssProperties(e,t){let n=null;for(;n=gs.exec(e);){let i=n[0],s=n[1],a=n.index,o=a+i.indexOf("@apply"),r=a+i.length,l=e.slice(0,o),c=e.slice(r),d=t?this._fallbacksFromPreviousRules(t):{};Object.assign(d,this._cssTextToMap(l));let h=this._atApplyToCssProperties(s,d);e=`${l}${h}${c}`,gs.lastIndex=a+h.length}return e}_atApplyToCssProperties(e,t){e=e.replace(ks,"");let n=[],i=this._map.get(e);if(i||(this._map.set(e,{}),i=this._map.get(e)),i){let s,a,o;this._currentElement&&(i.dependants[this._currentElement]=!0);const r=i.properties;for(s in r)o=t&&t[s],a=[s,": var(",e,"_-_",s],o&&a.push(",",o.replace(Is,"")),a.push(")"),Is.test(r[s])&&a.push(" !important"),n.push(a.join(""))}return n.join("; ")}_replaceInitialOrInherit(e,t){let n=Ts.exec(t);return n&&(t=n[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),t}_cssTextToMap(e,t=!1){let n,i,s=e.split(";"),a={};for(let e,o,r=0;r<s.length;r++)e=s[r],e&&(o=e.split(":"),o.length>1&&(n=o[0].trim(),i=o.slice(1).join(":"),t&&(i=this._replaceInitialOrInherit(n,i)),a[n]=i));return a}_invalidateMixinEntry(e){if(Ls)for(let t in e.dependants)t!==this._currentElement&&Ls(t)}_produceCssProperties(e,t,n,i,s){if(n&&function e(t,n){let i=t.indexOf("var(");if(-1===i)return n(t,"","","");let s=Es(t,i+3),a=t.substring(i+4,s),o=t.substring(0,i),r=e(t.substring(s+1),n),l=a.indexOf(",");return-1===l?n(o,a.trim(),"",r):n(o,a.substring(0,l).trim(),a.substring(l+1).trim(),r)}(n,(e,t)=>{t&&this._map.get(t)&&(i=`@apply ${t};`)}),!i)return e;let a=this._consumeCssProperties(""+i,s),o=e.slice(0,e.indexOf("--")),r=this._cssTextToMap(a,!0),l=r,c=this._map.get(t),d=c&&c.properties;d?l=Object.assign(Object.create(d),r):this._map.set(t,l);let h,p,u=[],m=!1;for(h in l)p=r[h],void 0===p&&(p="initial"),!d||h in d||(m=!0),u.push(`${t}_-_${h}: ${p}`);return m&&this._invalidateMixinEntry(c),c&&(c.properties=l),n&&(o=`${e};${o}`),`${o}${u.join("; ")};`}}Ds.prototype.detectMixin=Ds.prototype.detectMixin,Ds.prototype.transformStyle=Ds.prototype.transformStyle,Ds.prototype.transformCustomStyle=Ds.prototype.transformCustomStyle,Ds.prototype.transformRules=Ds.prototype.transformRules,Ds.prototype.transformRule=Ds.prototype.transformRule,Ds.prototype.transformTemplate=Ds.prototype.transformTemplate,Ds.prototype._separator="_-_",Object.defineProperty(Ds.prototype,"invalidCallback",{get:()=>Ls,set(e){Ls=e}});const Os={},Ns="_applyShimCurrentVersion",Ms="_applyShimNextVersion",$s=Promise.resolve();
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Bs(e){let t=Os[e];t&&function(e){e[Ns]=e[Ns]||0,e._applyShimValidatingVersion=e._applyShimValidatingVersion||0,e[Ms]=(e[Ms]||0)+1}(t)}function Fs(e){return e[Ns]===e[Ms]}function Us(e){return!Fs(e)&&e._applyShimValidatingVersion===e[Ms]}function Hs(e){e._applyShimValidatingVersion=e[Ms],e._validating||(e._validating=!0,$s.then((function(){e[Ns]=e[Ms],e._validating=!1})))}let js,Gs=null,Vs=window.HTMLImports&&window.HTMLImports.whenReady||null;function zs(e){requestAnimationFrame((function(){Vs?Vs(e):(Gs||(Gs=new Promise(e=>{js=e}),"complete"===document.readyState?js():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&js()})),Gs.then((function(){e&&e()})))}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Ws="__shadyCSSCachedStyle";let qs=null,Ks=null;class Ys{constructor(){this.customStyles=[],this.enqueued=!1,zs(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&Ks&&(this.enqueued=!0,zs(Ks))}addCustomStyle(e){e.__seenByShadyCSS||(e.__seenByShadyCSS=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[Ws])return e[Ws];let t;return t=e.getStyle?e.getStyle():e,t}processStyles(){const e=this.customStyles;for(let t=0;t<e.length;t++){const n=e[t];if(n[Ws])continue;const i=this.getStyleForCustomStyle(n);if(i){const e=i.__appliedElement||i;qs&&qs(e),n[Ws]=e}}return e}}Ys.prototype.addCustomStyle=Ys.prototype.addCustomStyle,Ys.prototype.getStyleForCustomStyle=Ys.prototype.getStyleForCustomStyle,Ys.prototype.processStyles=Ys.prototype.processStyles,Object.defineProperties(Ys.prototype,{transformCallback:{get:()=>qs,set(e){qs=e}},validateCallback:{get:()=>Ks,set(e){let t=!1;Ks||(t=!0),Ks=e,t&&this.enqueueDocumentValidation()}}});const Xs=new Ds;class Js{constructor(){this.customStyleInterface=null,Xs.invalidCallback=Bs}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{Xs.transformCustomStyle(e)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(e,t){if(this.ensure(),xs(e))return;Os[t]=e;let n=Xs.transformTemplate(e,t);e._styleAst=n}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let t=0;t<e.length;t++){let n=e[t],i=this.customStyleInterface.getStyleForCustomStyle(n);i&&Xs.transformCustomStyle(i)}this.customStyleInterface.enqueued=!1}}styleSubtree(e,t){if(this.ensure(),t&&As(e,t),e.shadowRoot){this.styleElement(e);let t=e.shadowRoot.children||e.shadowRoot.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}else{let t=e.children||e.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}}styleElement(e){this.ensure();let{is:t}=function(e){let t=e.localName,n="",i="";return t?t.indexOf("-")>-1?n=t:(i=t,n=e.getAttribute&&e.getAttribute("is")||""):(n=e.is,i=e.extends),{is:n,typeExtension:i}}(e),n=Os[t];if((!n||!xs(n))&&n&&!Fs(n)){Us(n)||(this.prepareTemplate(n,t),Hs(n));let i=e.shadowRoot;if(i){let e=i.querySelector("style");e&&(e.__cssRules=n._styleAst,e.textContent=ys(n._styleAst))}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const e=new Js;let t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(t,n,i){e.flushCustomStyles(),e.prepareTemplate(t,n)},prepareTemplateStyles(e,t,n){window.ShadyCSS.prepareTemplate(e,t,n)},prepareTemplateDom(e,t){},styleSubtree(t,n){e.flushCustomStyles(),e.styleSubtree(t,n)},styleElement(t){e.flushCustomStyles(),e.styleElement(t)},styleDocument(t){e.flushCustomStyles(),e.styleDocument(t)},getComputedStyleValue:(e,t)=>Ps(e,t),flushCustomStyles(){e.flushCustomStyles()},nativeCss:is,nativeShadow:Zi,cssBuild:es,disableRuntime:ns},t&&(window.ShadyCSS.CustomStyleInterface=t)}window.ShadyCSS.ApplyShim=Xs;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Zs=window.ShadyDOM,Qs=window.ShadyCSS;function ea(e,t){return ze(e).getRootNode()===t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ta=window.ShadyCSS;const na=M(e=>{const t=di(Zn(Ki(e))),n={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class i extends t{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers}static get importMeta(){return this.prototype.importMeta}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(e,t,n,i){t!==n&&(super.attributeChangedCallback(e,t,n,i),this.attributeChanged(e,t,n))}attributeChanged(e,t,n){}_initializeProperties(){let e=Object.getPrototypeOf(this);e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))||(this._registered(),e.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),this._applyListeners()}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,n){this._propertyToAttribute(e,t,n)}serializeValueToAttribute(e,t,n){this._valueToNodeAttribute(n||this,e,t)}extend(e,t){if(!e||!t)return e||t;let n=Object.getOwnPropertyNames(t);for(let i,s=0;s<n.length&&(i=n[s]);s++){let n=Object.getOwnPropertyDescriptor(t,i);n&&Object.defineProperty(e,i,n)}return e}mixin(e,t){for(let n in t)e[n]=t[n];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,n){n=n||{},t=null==t?{}:t;let i=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});i.detail=t;let s=n.node||this;return ze(s).dispatchEvent(i),i}listen(e,t,n){e=e||this;let i=this.__boundListeners||(this.__boundListeners=new WeakMap),s=i.get(e);s||(s={},i.set(e,s));let a=t+n;s[a]||(s[a]=this._addMethodEventListenerToNode(e,t,n,this))}unlisten(e,t,n){e=e||this;let i=this.__boundListeners&&this.__boundListeners.get(e),s=t+n,a=i&&i[s];a&&(this._removeEventListenerFromNode(e,t,a),i[s]=null)}setScrollDirection(e,t){Dn(t||this,n[e]||"auto")}$$(e){return this.root.querySelector(e)}get domHost(){let e=ze(this).getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){const e=Ui(this);window.ShadyDOM&&e.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Ui(this).getEffectiveChildNodes()}queryDistributedElements(e){return Ui(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let n,i=0;n=e[i];i++)n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?Ui(t).getDistributedNodes():[]}getContentChildren(e){return this.getContentChildNodes(e).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}isLightDescendant(e){return this!==e&&ze(this).contains(e)&&ze(this).getRootNode()===ze(e).getRootNode()}isLocalDescendant(e){return this.root===ze(e).getRootNode()}scopeSubtree(e,t=!1){return function(e,t=!1){if(!Zs||!Qs)return null;if(!Zs.handlesDynamicScoping)return null;const n=Qs.ScopingShim;if(!n)return null;const i=n.scopeForNode(e),s=ze(e).getRootNode(),a=e=>{if(!ea(e,s))return;const t=Array.from(Zs.nativeMethods.querySelectorAll.call(e,"*"));t.push(e);for(let e=0;e<t.length;e++){const a=t[e];if(!ea(a,s))continue;const o=n.currentScopeForNode(a);o!==i&&(""!==o&&n.unscopeNode(a,o),n.scopeNode(a,i))}};if(a(e),t){const t=new MutationObserver(e=>{for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.addedNodes.length;e++){const t=n.addedNodes[e];t.nodeType===Node.ELEMENT_NODE&&a(t)}}});return t.observe(e,{childList:!0,subtree:!0}),t}return null}(e,t)}getComputedStyleValue(e){return ta.getComputedStyleValue(this,e)}debounce(e,t,n){return this._debouncers=this._debouncers||{},this._debouncers[e]=Zt.debounce(this._debouncers[e],n>0?He.after(n):Ve,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return!(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush()}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel()}async(e,t){return t>0?He.run(e.bind(this),t):~Ve.run(e.bind(this))}cancelAsync(e){e<0?Ve.cancel(~e):He.cancel(e)}create(e,t){let n=document.createElement(e);if(t)if(n.setProperties)n.setProperties(t);else for(let e in t)n[e]=t[e];return n}elementMatches(e,t){return Ni(t||this,e)}toggleAttribute(e,t){let n=this;return 3===arguments.length&&(n=arguments[2]),1==arguments.length&&(t=!n.hasAttribute(e)),t?(ze(n).setAttribute(e,""),!0):(ze(n).removeAttribute(e),!1)}toggleClass(e,t,n){n=n||this,1==arguments.length&&(t=!n.classList.contains(e)),t?n.classList.add(e):n.classList.remove(e)}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e}translate3d(e,t,n,i){i=i||this,this.transform("translate3d("+e+","+t+","+n+")",i)}arrayDelete(e,t){let n;if(Array.isArray(e)){if(n=e.indexOf(t),n>=0)return e.splice(n,1)}else{if(n=_e(this,e).indexOf(t),n>=0)return this.splice(e,n,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t)}}_log(...e){this._logger("log",e)}_warn(...e){this._logger("warn",e)}_error(...e){this._logger("error",e)}_logf(e,...t){return["[%s::%s]",this.is,e,...t]}}return i.prototype.is="",i}),ia=na;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Legacy.LegacyElementMixin"),Polymer.LegacyElementMixin=ia;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const sa={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},aa={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},oa=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},aa);function ra(e,t){return da({},na(t),e)}function la(e,t,n,i){!function(e,t,n){const i=e._noAccessors,s=Object.getOwnPropertyNames(e);for(let a=0;a<s.length;a++){let o=s[a];if(!(o in n))if(i)t[o]=e[o];else{let n=Object.getOwnPropertyDescriptor(e,o);n&&(n.configurable=!0,Object.defineProperty(t,o,n))}}}(t,e,i);for(let e in sa)t[e]&&(n[e]=n[e]||[],n[e].push(t[e]))}function ca(e,t){for(const n in t){const i=e[n],s=t[n];e[n]=!("value"in s)&&i&&"value"in i?Object.assign({value:i.value},s):s}}function da(e,t,n){let i;const s={};class a extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(i)for(let e,t=0;t<i.length;t++)e=i[t],e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const t={};if(i)for(let e=0;e<i.length;e++)ca(t,i[e].properties);return ca(t,e.properties),t}static get observers(){let t=[];if(i)for(let e,n=0;n<i.length;n++)e=i[n],e.observers&&(t=t.concat(e.observers));return e.observers&&(t=t.concat(e.observers)),t}created(){super.created();const e=s.created;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}_registered(){const e=a.prototype;if(!e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))){e.__hasRegisterFinished=!0,super._registered(),T&&o(e);const t=Object.getPrototypeOf(this);let n=s.beforeRegister;if(n)for(let e=0;e<n.length;e++)n[e].call(t);if(n=s.registered,n)for(let e=0;e<n.length;e++)n[e].call(t)}}_applyListeners(){super._applyListeners();const e=s.listeners;if(e)for(let t=0;t<e.length;t++){const n=e[t];if(n)for(let e in n)this._addMethodEventListenerToNode(this,e,n[e])}}_ensureAttributes(){const e=s.hostAttributes;if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e in n)this._ensureAttribute(e,n[e])}super._ensureAttributes()}ready(){super.ready();let e=s.ready;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attached(){super.attached();let e=s.attached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}detached(){super.detached();let e=s.detached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attributeChanged(e,t,n){super.attributeChanged();let i=s.attributeChanged;if(i)for(let s=0;s<i.length;s++)i[s].call(this,e,t,n)}}if(n){Array.isArray(n)||(n=[n]);let e=t.prototype.behaviors;i=function e(t,n,i){n=n||[];for(let s=t.length-1;s>=0;s--){let a=t[s];a?Array.isArray(a)?e(a,n):n.indexOf(a)<0&&(!i||i.indexOf(a)<0)&&n.unshift(a):console.warn("behavior is null, check for missing or 404 import")}return n}(n,null,e),a.prototype.behaviors=e?e.concat(n):i}const o=t=>{i&&function(e,t,n){for(let i=0;i<t.length;i++)la(e,t[i],n,oa)}(t,i,s),la(t,e,s,aa)};return T||o(a.prototype),a.generatedFrom=e,a}const ha=function(e,t){e||console.warn("Polymer.Class requires `info` argument");let n=t?t(na(HTMLElement)):na(HTMLElement);return n=da(e,n,e.behaviors),n.is=n.prototype.is=e.is,n};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Legacy.Class");const pa=ha,ua=ra;Polymer.Class=pa,Polymer.mixinBehaviors=ua;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const ma=function(e){let t;return t="function"==typeof e?e:ma.Class(e),customElements.define(t.is,t),t};ma.Class=ha,
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Legacy.PolymerFn"),Polymer._polymerFn=ma;const ga=window.onLegacyPolymerFunctionDefinedCallback;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function _a(e,t,n,i,s){let a;s&&(a="object"==typeof n&&null!==n,a&&(i=e.__dataTemp[t]));let o=i!==n&&(i==i||n==n);return a&&o&&(e.__dataTemp[t]=n),o}ga&&ga();const fa=M(e=>class extends e{_shouldPropertyChange(e,t,n){return _a(this,e,t,n,!0)}}),ba=M(e=>class extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(e,t,n){return _a(this,e,t,n,this.mutableData)}});fa._mutablePropertyChange=_a;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const va=ba,ya=fa;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Mixins.MutableData"),Polymer.MutableData=ya,Polymer.OptionalMutableData=va;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let wa=null;function Ca(){return wa}Ca.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:Ca,writable:!0}});const Ea=Bt(Ca),Sa=fa(Ea);const xa=Bt(class{});class Aa extends xa{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=[];this.children=t;for(let e=this.root.firstChild;e;e=e.nextSibling)t.push(e),e.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(e&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let t in e)this._setPendingProperty(t,e[t])}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,t,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,e=>{e.model=this,n(e)});else{let i=this.__dataHost.__dataHost;i&&i._addEventListenerToNode(e,t,n)}}_showHideChildren(e){let t=this.children;for(let n=0;n<t.length;n++){let i=t[n];if(Boolean(e)!=Boolean(i.__hideTemplateChildren__))if(i.nodeType===Node.TEXT_NODE)e?(i.__polymerTextContent__=i.textContent,i.textContent=""):i.textContent=i.__polymerTextContent__;else if("slot"===i.localName)if(e)i.__polymerReplaced__=document.createComment("hidden-slot"),ze(ze(i).parentNode).replaceChild(i.__polymerReplaced__,i);else{const e=i.__polymerReplaced__;e&&ze(ze(e).parentNode).replaceChild(i,e)}else i.style&&(e?(i.__polymerDisplay__=i.style.display,i.style.display="none"):i.style.display=i.__polymerDisplay__);i.__hideTemplateChildren__=e,i._showHideChildren&&i._showHideChildren(e)}}_setUnmanagedPropertyToNode(e,t,n){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(e,t,n)}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}Aa.prototype.__dataHost,Aa.prototype.__templatizeOptions,Aa.prototype._methodHost,Aa.prototype.__templatizeOwner,Aa.prototype.__hostProps;const Pa=fa(Aa);function ka(e){let t=e.__dataHost;return t&&t._methodHost||t}function Ta(e,t,n){let i=n.mutableData?Pa:Aa;Da.mixin&&(i=Da.mixin(i));let s=class extends i{};return s.prototype.__templatizeOptions=n,s.prototype._bindTemplate(e),function(e,t,n,i){let s=n.hostProps||{};for(let t in i.instanceProps){delete s[t];let n=i.notifyInstanceProp;n&&e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:La(t,n)})}if(i.forwardHostProp&&t.__dataHost)for(let t in s)n.hasHostProps||(n.hasHostProps=!0),e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,n){e.__dataHost._setPendingPropertyOrPath("_host_"+t,n[t],!0,!0)}})}(s,e,t,n),s}function Ia(e,t,n){let i=n.forwardHostProp;if(i&&t.hasHostProps){let s=t.templatizeTemplateClass;if(!s){let e=n.mutableData?Sa:Ea;s=t.templatizeTemplateClass=class extends e{};let a=t.hostProps;for(let e in a)s.prototype._addPropertyEffect("_host_"+e,s.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:Ra(e,i)}),s.prototype._createNotifyingProperty("_host_"+e)}!function(e,t){wa=e,Object.setPrototypeOf(e,t.prototype),new t,wa=null}(e,s),e.__dataProto&&Object.assign(e.__data,e.__dataProto),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties()}}function Ra(e,t){return function(e,n,i){t.call(e.__templatizeOwner,n.substring("_host_".length),i[n])}}function La(e,t){return function(e,n,i){t.call(e.__templatizeOwner,e,n,i[n])}}function Da(e,t,n){if(x&&!ka(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(n=n||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let i=(t?t.constructor:Aa)._parseTemplate(e),s=i.templatizeInstanceClass;s||(s=Ta(e,i,n),i.templatizeInstanceClass=s),Ia(e,i,n);let a=class extends s{};return a.prototype._methodHost=ka(e),a.prototype.__dataHost=e,a.prototype.__templatizeOwner=t,a.prototype.__hostProps=i.hostProps,a=a,a}function Oa(e,t){let n;for(;t;)if(n=t.__templatizeInstance){if(n.__dataHost==e)return n;t=n.__dataHost}else t=ze(t).parentNode;return null}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const Na=Da,Ma=Oa,$a=Aa;goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.Templatize"),Polymer.Templatize={templatize:Na,modelForElement:Ma},Polymer.TemplateInstanceBase=$a;const Ba={templatize(e,t){this._templatizerTemplate=e,this.ctor=Da(e,this,{mutableData:Boolean(t),parentModel:this._parentModel,instanceProps:this._instanceProps,forwardHostProp:this._forwardHostPropV2,notifyInstanceProp:this._notifyInstancePropV2})},stamp(e){return new this.ctor(e)},modelForElement(e){return Oa(this._templatizerTemplate,e)}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Legacy.TemplatizerBehavior"),Polymer.Templatizer=Ba;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Fa=!1;function Ua(){if(T&&!_){if(!Fa){Fa=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Ha=Zn(ba(Bt(HTMLElement)));class ja extends Ha{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),x)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(e,t,n,i){this.mutableData=!0}connectedCallback(){Ua()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){ze(ze(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let t=new MutationObserver(()=>{if(e=this.querySelector("template"),!e)throw new Error("dom-bind requires a <template> child");t.disconnect(),this.render()});return void t.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",ja),
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Elements.DomBind"),Polymer.DomBind=ja;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class Ga{constructor(e){this.value=e.toString()}toString(){return this.value}}function Va(e){if(e instanceof Ga)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}const za=function(e,...t){const n=document.createElement("template");return n.innerHTML=t.reduce((t,n,i)=>t+function(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof Ga)return Va(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}(n)+e[i+1],e[0]),n},Wa=za,qa=function(e,...t){return new Ga(t.reduce((t,n,i)=>t+Va(n)+e[i+1],e[0]))};goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Utils.HtmlTag"),Polymer.html=Wa,Polymer.htmlLiteral=qa;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Ka=Ki(HTMLElement);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.PolymerElement");const Ya=Ka;Polymer.Element=Ya;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Xa=ba(Ka);class Ja extends Xa{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__limit=1/0,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),Ua()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=ze(ze(this).parentNode);for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){let e=this.template=this.querySelector("template");if(!e){let e=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}let t={};t[this.as]=!0,t[this.indexAs]=!0,t[this.itemsIndexAs]=!0,this.__ctor=Da(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:t,forwardHostProp:function(e,t){let n=this.__instances;for(let i,s=0;s<n.length&&(i=n[s]);s++)i.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,n){if(ue(this.as,t)){let i=e[this.itemsIndexAs];t==this.as&&(this.items[i]=n);let s=pe(this.as,`${JSCompiler_renameProperty("items",this)}.${i}`,t);this.notifyPath(s,n)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,n=this.__getMethodHost();return function(){return n[t].apply(n,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__initializeChunking(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}__tryRenderChunk(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}__requestRenderChunk(){requestAnimationFrame(()=>this.__renderChunk())}__renderChunk(){let e=performance.now(),t=this._targetFrameTime/(e-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*t)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=e,this.__debounceRender(this.__render)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let n=0;n<t.length;n++)0===e.indexOf(t[n])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__debounceRender(e,t=0){this.__renderDebouncer=Zt.debounce(this.__renderDebouncer,t>0?He.after(t):Ve,e.bind(this)),en(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Ii()}__render(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this.__tryRenderChunk())}__applyFullRefresh(){let e=this.items||[],t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=n;this.__filterFn&&(t=t.filter((t,n,i)=>this.__filterFn(e[t],n,i))),this.__sortFn&&t.sort((t,n)=>this.__sortFn(e[t],e[n]));const n=this.__itemsIdxToInstIdx={};let i=0;const s=Math.min(t.length,this.__limit);for(;i<s;i++){let s=this.__instances[i],a=t[i],o=e[a];n[a]=i,s?(s._setPendingProperty(this.as,o),s._setPendingProperty(this.indexAs,i),s._setPendingProperty(this.itemsIndexAs,a),s._flushProperties()):this.__insertInstance(o,i,a)}for(let e=this.__instances.length-1;e>=i;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];const n=ze(t.root);for(let e=0;e<t.children.length;e++){let i=t.children[e];n.appendChild(i)}return t}__attachInstance(e,t){let n=this.__instances[e];t.insertBefore(n.root,this)}__detachAndRemoveInstance(e){let t=this.__detachInstance(e);t&&this.__pool.push(t),this.__instances.splice(e,1)}__stampInstance(e,t,n){let i={};return i[this.as]=e,i[this.indexAs]=t,i[this.itemsIndexAs]=n,new this.__ctor(i)}__insertInstance(e,t,n){let i=this.__pool.pop();i?(i._setPendingProperty(this.as,e),i._setPendingProperty(this.indexAs,t),i._setPendingProperty(this.itemsIndexAs,n),i._flushProperties()):i=this.__stampInstance(e,t,n);let s=this.__instances[t+1],a=s?s.children[0]:this;return ze(ze(this).parentNode).insertBefore(i.root,a),this.__instances[t]=i,i}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let n=e.slice(6),i=n.indexOf("."),s=i<0?n:n.substring(0,i);if(s==parseInt(s,10)){let e=i<0?"":n.substring(i+1);this.__handleObservedPaths(e);let a=this.__itemsIdxToInstIdx[s],o=this.__instances[a];if(o){let n=this.as+(e?"."+e:"");o._setPendingPropertyOrPath(n,t,!1,!0),o._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return Oa(this.template,e)}}customElements.define(Ja.is,Ja),
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Elements.DomRepeat"),Polymer.DomRepeat=Ja;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class Za extends Ka{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null,this._lastIf=!1,this.__ctor=null,this.__hideTemplateChildren__=!1}__debounceRender(){this.__renderDebouncer=Zt.debounce(this.__renderDebouncer,Ve,()=>this.__render()),en(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const e=ze(this).parentNode;e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||ze(e).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),Ua()||(this.style.display="none"),this.if&&this.__debounceRender()}render(){Ii()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let e=ze(this).parentNode;if(e){if(!this.__ctor){let e=ze(this).querySelector("template");if(!e){let e=new MutationObserver(()=>{if(!ze(this).querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}this.__ctor=Da(e,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[ce(e)]=!0))}})}if(this.__instance){this.__syncHostProperties();let t=this.__instance.children;if(t&&t.length){if(ze(this).previousSibling!==t[t.length-1])for(let n,i=0;i<t.length&&(n=t[i]);i++)ze(e).insertBefore(n,this)}}else this.__instance=new this.__ctor,ze(e).insertBefore(this.__instance.root,this)}return!0}__syncHostProperties(){let e=this.__invalidProps;if(e){for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=ze(e[0]).parentNode;if(t){t=ze(t);for(let n,i=0;i<e.length&&(n=e[i]);i++)t.removeChild(n)}}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let e=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(e)}}customElements.define(Za.is,Za),
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Elements.DomIf"),Polymer.DomIf=Za;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Qa=M(e=>{let t=Ki(e);return class extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(e,t){let n=t.path;if(n==JSCompiler_renameProperty("items",this)){let n=t.base||[],i=this.__lastItems;if(e!==this.__lastMulti&&this.clearSelection(),i){let e=xi(n,i);this.__applySplices(e)}this.__lastItems=n,this.__lastMulti=e}else if(t.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(t.value.indexSplices);else{let e=n.slice(`${JSCompiler_renameProperty("items",this)}.`.length),t=parseInt(e,10);e.indexOf(".")<0&&e==t&&this.__deselectChangedIdx(t)}}__applySplices(e){let t=this.__selectedMap;for(let n=0;n<e.length;n++){let i=e[n];t.forEach((e,n)=>{e<i.index||(e>=i.index+i.removed.length?t.set(n,e+i.addedCount-i.removed.length):t.set(n,-1))});for(let e=0;e<i.addedCount;e++){let n=i.index+e;t.has(this.items[n])&&t.set(this.items[n],n)}}this.__updateLinks();let n=0;t.forEach((e,i)=>{e<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null,t.delete(i)):n++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let e=0;this.__selectedMap.forEach(t=>{t>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${t}`,`${JSCompiler_renameProperty("selected",this)}.${e++}`)})}else this.__selectedMap.forEach(e=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${e}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${e}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(e){return this.__selectedMap.has(e)}isIndexSelected(e){return this.isSelected(this.items[e])}__deselectChangedIdx(e){let t=this.__selectedIndexForItemIndex(e);if(t>=0){let e=0;this.__selectedMap.forEach((n,i)=>{t==e++&&this.deselect(i)})}}__selectedIndexForItemIndex(e){let t=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${e}`];if(t)return parseInt(t.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(e){let t=this.__selectedMap.get(e);if(t>=0){let n;this.__selectedMap.delete(e),this.multi&&(n=this.__selectedIndexForItemIndex(t)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null}}deselectIndex(e){this.deselect(this.items[e])}select(e){this.selectIndex(this.items.indexOf(e))}selectIndex(e){let t=this.items[e];this.isSelected(t)?this.toggle&&this.deselectIndex(e):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(t,e),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),t):this.selected=this.selectedItem=t)}}}),eo=Qa(Ka);class to extends eo{static get is(){return"array-selector"}static get template(){return null}}customElements.define(to.is,to),
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Elements.ArraySelector"),Polymer.ArraySelectorMixin=Qa,Polymer.ArraySelector=to;const no=new Ys;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,n){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,n){},styleSubtree(e,t){no.processStyles(),As(e,t)},styleElement(e){no.processStyles()},styleDocument(e){no.processStyles(),As(document.body,e)},getComputedStyleValue:(e,t)=>Ps(e,t),flushCustomStyles(){},nativeCss:is,nativeShadow:Zi,cssBuild:es,disableRuntime:ns}),window.ShadyCSS.CustomStyleInterface=no;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const io=window.ShadyCSS.CustomStyleInterface;class so extends HTMLElement{constructor(){super(),this._style=null,io.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const t=e.getAttribute("include");return t&&(e.removeAttribute("include"),e.textContent=X(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ao;window.customElements.define("custom-style",so),
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Elements.CustomStyle"),Polymer.CustomStyle=so,ao=fa._mutablePropertyChange;const oo={_shouldPropertyChange(e,t,n){return ao(this,e,t,n,!0)}},ro={properties:{mutableData:Boolean},_shouldPropertyChange(e,t,n){return ao(this,e,t,n,this.mutableData)}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
goog.declareModuleId("HtmlImportsNamespace.Polymer.Lib.Legacy.MutableDataBehavior"),Polymer.MutableDataBehavior=oo,Polymer.OptionalMutableDataBehavior=ro;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const lo=na(HTMLElement).prototype;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/goog.declareModuleId("HtmlImportsNamespace.Polymer.Polymer");const co=lo;
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ho(e){window.HTMLImports?HTMLImports.whenReady(e):e()}function po(e,t,n,i){let s=document.head.querySelector('link[href="'+e+'"][import-href]');s||(s=document.createElement("link"),s.rel="import",s.href=e,s.setAttribute("import-href","")),i&&s.setAttribute("async","");const a=function(){s.removeEventListener("load",o),s.removeEventListener("error",r)},o=function(e){a(),s.__dynamicImportLoaded=!0,t&&ho(()=>{t(e)})},r=function(e){a(),s.parentNode&&s.parentNode.removeChild(s),n&&ho(()=>{n(e)})};return s.addEventListener("load",o),s.addEventListener("error",r),null==s.parentNode?document.head.appendChild(s):s.__dynamicImportLoaded&&s.dispatchEvent(new Event("load")),s}
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Polymer.Base=co,Polymer.importHref=po,function(){var e=this||self,t=function(t,n){t=t.split(".");var i,s=e;t[0]in s||void 0===s.execScript||s.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===n?s=s[i]&&s[i]!==Object.prototype[i]?s[i]:s[i]={}:s[i]=n},n=function(e,t,n){return e.call.apply(e.bind,arguments)},i=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},s=function(e,t,a){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:i).apply(null,arguments)},a={align:1,alt:1,"aria-activedescendant":10,"aria-atomic":1,"aria-autocomplete":1,"aria-busy":1,"aria-checked":1,"aria-disabled":1,"aria-dropeffect":1,"aria-expanded":1,"aria-haspopup":1,"aria-hidden":1,"aria-invalid":1,"aria-label":1,"aria-level":1,"aria-live":1,"aria-multiline":1,"aria-multiselectable":1,"aria-orientation":1,"aria-posinset":1,"aria-pressed":1,"aria-readonly":1,"aria-relevant":1,"aria-required":1,"aria-selected":1,"aria-setsize":1,"aria-sort":1,"aria-valuemax":1,"aria-valuemin":1,"aria-valuenow":1,"aria-valuetext":1,autocapitalize:1,autocomplete:1,autocorrect:1,autofocus:1,bgcolor:1,border:1,checked:1,class:1,color:1,cols:1,colspan:1,contenteditable:1,dir:8,disabled:1,draggable:1,enctype:1,face:1,for:10,formenctype:1,frameborder:1,height:1,hidden:1,href:4,hreflang:1,id:10,ismap:1,itemid:1,itemprop:1,itemref:1,itemscope:1,itemtype:1,label:1,lang:1,list:10,loop:1,max:1,maxlength:1,min:1,multiple:1,muted:1,name:10,placeholder:1,preload:1,rel:1,required:1,reversed:1,role:1,rows:1,rowspan:1,selected:1,shape:1,size:1,sizes:1,span:1,spellcheck:1,src:4,start:1,step:1,style:5,summary:1,tabindex:1,target:8,title:1,translate:1,valign:1,value:1,width:1,wrap:1},o={a:{href:[{c:3}]},area:{href:[{c:3}]},audio:{src:[{c:3}]},blockquote:{cite:[{c:3}]},button:{formaction:[{c:3}],formmethod:[{c:1}],type:[{c:1}]},command:{type:[{c:1}]},content:{select:[{c:1}]},del:{cite:[{c:3}]},details:{open:[{c:1}]},form:{action:[{c:3}],method:[{c:1}]},iframe:{srcdoc:[{c:2}]},img:{src:[{c:3}],srcset:[{c:11}]},input:{formaction:[{c:3}],formmethod:[{c:1}],pattern:[{c:1}],readonly:[{c:1}],src:[{c:3}],type:[{c:1}]},ins:{cite:[{c:3}]},li:{type:[{c:1}]},link:{href:[{c:3,f:"rel",g:"alternate"},{c:3,f:"rel",g:"author"},{c:3,f:"rel",g:"bookmark"},{c:3,f:"rel",g:"canonical"},{c:3,f:"rel",g:"cite"},{c:3,f:"rel",g:"help"},{c:3,f:"rel",g:"icon"},{c:3,f:"rel",g:"license"},{c:3,f:"rel",g:"next"},{c:3,f:"rel",g:"prefetch"},{c:3,f:"rel",g:"dns-prefetch"},{c:3,f:"rel",g:"prerender"},{c:3,f:"rel",g:"preconnect"},{c:3,f:"rel",g:"preload"},{c:3,f:"rel",g:"prev"},{c:3,f:"rel",g:"search"},{c:3,f:"rel",g:"subresource"}],media:[{c:1}],nonce:[{c:1}],type:[{c:1}]},menuitem:{icon:[{c:3}]},ol:{type:[{c:1}]},q:{cite:[{c:3}]},script:{nonce:[{c:1}],type:[{c:1}]},source:{media:[{c:1}],src:[{c:3}]},style:{media:[{c:1}],nonce:[{c:1}]},table:{cellpadding:[{c:1}],cellspacing:[{c:1}]},textarea:{readonly:[{c:1}]},time:{datetime:[{c:1}]},video:{autoplay:[{c:1}],controls:[{c:1}],poster:[{c:3}],src:[{c:3}]}},r={a:1,abbr:1,address:1,applet:4,area:5,article:1,aside:1,audio:1,b:1,base:4,bdi:1,bdo:1,blockquote:1,body:1,br:5,button:1,canvas:1,caption:1,cite:1,code:1,col:5,colgroup:1,command:1,content:1,data:1,datalist:1,dd:1,del:1,details:1,dfn:1,dialog:1,div:1,dl:1,dt:1,em:1,embed:4,fieldset:1,figcaption:1,figure:1,font:1,footer:1,form:1,frame:1,frameset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,head:1,header:1,hr:5,html:1,i:1,iframe:1,img:5,input:5,ins:1,kbd:1,keygen:5,label:1,legend:1,li:1,link:5,main:1,map:1,mark:1,math:4,menu:1,menuitem:1,meta:4,meter:1,nav:1,noscript:1,object:4,ol:1,optgroup:1,option:1,output:1,p:1,param:5,picture:1,pre:1,progress:1,q:1,rb:1,rp:1,rt:1,rtc:1,ruby:1,s:1,samp:1,script:3,section:1,select:1,slot:1,small:1,source:5,span:1,strong:1,style:2,sub:1,summary:1,sup:1,svg:4,table:1,tbody:1,td:1,template:4,textarea:6,tfoot:1,th:1,thead:1,time:1,title:6,tr:1,track:5,u:1,ul:1,var:1,video:1,wbr:5},l=[{auto:!0,ltr:!0,rtl:!0},{_self:!0,_blank:!0}],c={"*":{dir:0,target:1}},d=function(){if(!u){var e=p,t={};for(n in e)t[n]=e[n];for(u=t,e=0,t=h.length;e<t;++e){var n=h[e];u[n.toLowerCase()]=n}}return u},h="aLink accessKey allowFullscreen bgColor cellPadding cellSpacing codeBase codeType contentEditable crossOrigin dateTime dirName formAction formEnctype formMethod formNoValidate formTarget frameBorder innerHTML innerText inputMode isMap longDesc marginHeight marginWidth maxLength mediaGroup minLength noHref noResize noShade noValidate noWrap nodeValue outerHTML outerText readOnly tabIndex textContent trueSpeed useMap vAlign vLink valueAsDate valueAsNumber valueType".split(" "),p={accept_charset:"acceptCharset",char:"ch",charoff:"chOff",checked:"defaultChecked",class:"className",for:"htmlFor",http_equiv:"httpEquiv",muted:"defaultMuted",selected:"defaultSelected",value:"defaultValue"},u=null,m=null,g={},_=!1,f=0,b=/^(?!(?:annotation-xml|color-profile|font-face|font-face(?:-(?:src|uri|format|name))?|missing-glyph)$)[a-z][a-z.0-9_\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u200c\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\udfff\uf900-\ufdcf\ufdf0-\ufffd]*-[\-a-z.0-9_\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u200c\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\udfff\uf900-\ufdcf\ufdf0-\ufffd]*$/,v=function(e,t){var n=window.customElements;if(_){for(var i=window.Polymer.telemetry.registrations,s=i.length,a=f;a<s;++a)g[i[a].is]=g;f=s}return n&&n.get(e)||g[e]===g?2:"HTMLUnknownElement"===t.name?1:"HTMLElement"===t.name&&b.test(e)?3:0},y=/(?!,)([^\t\n\f\r ]+)(?:[\t\n\f\r ]+([.0-9+\-]+[a-z]?))?/gi,w=/[\t\n\f\r ]+/,C=/[\t\n\f\r ,]+/g,E=function(e){return(e=e.split(w,2))?{url:e[0],metadata:e[1]}:null},S=function(e){var t=String(e.url).replace(C,encodeURIComponent);if(e=e.metadata){if(C.lastIndex=0,C.test(e))return null;t+=" "+e}return t},x=function(e,t,n){return n},A=function(e){function t(e){var t=this.getAttribute(e);return!t||/[\[\{]/.test(e)?null:t}var n=e.reportHandler||void 0,i=e.safeTypesBridge||x,h=/^$/;if(e=e.allowedIdentifierPrefixes)for(var p=0,u=e.length;p<u;++p)h=new RegExp(h.source+"|^"+String(e[p]).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"));n&&n(!1,"initResin");var g={},_=[,{h:null,j:function(e,t,n){return n},l:null,m:null},{h:null,j:null,l:null,m:"HTML"},{h:null,j:null,l:"about:invalid#zClosurez",m:"URL"},{h:null,j:null,l:"about:invalid#zClosurez",m:"RESOURCE_URL"},{h:null,j:null,l:"zClosurez",m:"STYLE"},,{h:null,j:null,l:" /*zClosurez*/ ",m:"JAVASCRIPT"},{h:null,j:function(e,t,n){n=String(n).toLowerCase();var i=null;return(e=c[e])&&(i=e[t]),(t=("number"==typeof i||((e=c["*"])&&(i=e[t]),"number"==typeof i))&&!0===l[i][String(n).toLowerCase()])?n:"zClosurez"},l:"zClosurez",m:null},{h:null,j:null,l:"zClosurez",m:"CONSTANT"},{h:null,j:function(e,t,n){return h.test(n)?n:"zClosurez"},l:"zClosurez",m:"CONSTANT"},{h:function(e,t,s){var a=s;if("string"==typeof a&&(a=(a=a.match(y))?a.map(E).filter(Boolean):[]),!Array.isArray(a))return"about:invalid#zClosurez";var o=a;a=[];var r=[],l={};if(Array.isArray(o))for(var c=0,d=o.length;c<d;++c){var h=o[c],p=h&&h.url;if(p){var u=i(p,"URL",l);if(u){var m=u!==l;(m?a:r).push({url:m?u:p,metadata:h.metadata})}}}else r.push(o);if(o=r.length?JSON.stringify(r):null,r=g,a.length){if(!Array.isArray(a))throw Error();r=a.map(S).filter(Boolean).join(" , ")||g}return o&&n&&n(!0,'Failed to sanitize attribute value of <%s>: <%s %s="%O">: %s',e,e,t,s,o),r===g?"about:invalid#zClosurez":r},j:null,l:null,m:null}],f={},b=document.createElement("polyresinuncustomized");return function(e,l,c,h){if(!h&&h!==document.all)return h;var p=e.nodeType;if(p!==Node.ELEMENT_NODE){if(p===Node.TEXT_NODE){if(l=!(p=e.parentElement),p&&p.nodeType===Node.ELEMENT_NODE){var u=p.localName;switch(v(u,p.constructor)){case 0:case 1:l=1===(p=Object.hasOwnProperty.call(r,u)?r[u]:null)||6===p;break;case 3:case 2:l=!0}}if(l)return""+i(h,"STRING",h)}return n&&n(!0,"Failed to sanitize %s %s%s node to value %O",e.parentElement&&e.parentElement.nodeName,"#text","",h),"zClosurez"}p=e.localName;var y=e.localName;if(e.getAttribute("is")||2!==v(y,e.constructor)){var w=f[y];w||(w=f[y]=document.createElement(y)),y=w}else y=b;switch(c){case"attribute":w=String(l).toLowerCase();var C=d()[w];if(("string"==typeof C?C:function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))}(w))in y)break;return h;case"property":if(l in y)break;if(w=l.toLowerCase(),(w="string"==typeof(w=d()[w])?w:null)&&w in y)break;return h;default:throw Error(c+": "+typeof c)}if("attribute"==c)l=l.toLowerCase();else{if(!(c=m)){for(u in y={},c=d())y[c[u]]=u;c=m=y}l="string"==typeof(u=c[l])?u:String(l).replace(/([A-Z])/g,"-$1").toLowerCase()}e:{if(e=s(t,e),Object.hasOwnProperty.call(o,p)&&(u=o[p],Object.hasOwnProperty.call(u,l)&&(u=u[l])instanceof Array)){for(c=null,y=!1,w=0,C=u.length;w<C;++w){var E=u[w],S=E.f;if(!S){c=E.c;break e}if(null===c&&(c={}),(S=Object.hasOwnProperty.call(c,S)?c[S]:c[S]=e(S))===E.g){c=E.c;break e}null==S&&(y=!0)}if(y){c=null;break e}}c="number"==typeof(e=a[l])?e:null}return u=g,e=null,null!=c&&(y=(c=_[c]).m,e=c.l,y&&(u=i(h,y,g)),u===g&&(c.j?(u=""+i(h,"STRING",h),u=c.j(p,l,u)):c.h&&(u=c.h(p,l,h)),u===e&&(u=g))),u===g&&(u=e||"zClosurez",n&&n(!0,'Failed to sanitize attribute of <%s>: <%s %s="%O">',p,p,l,h)),u}};t("security.polymer_resin.install",(function(e){var t=A(e||{});if(/^1\./.test(Polymer.version)){_=!0;var n=Polymer.Base._computeFinalAnnotationValue;if(e=function(e,i,s,a){s=n.call(this,e,i,s,a);var o="property";return a&&a.propertyName?i=a.propertyName:o=a&&a.kind||"property",t(e,i,o,s)},Polymer.Base._computeFinalAnnotationValue=e,Polymer.Base._computeFinalAnnotationValue!==e)throw Error("Cannot replace _computeFinalAnnotationValue.  Is Polymer frozen?")}else{var i=Polymer.sanitizeDOMValue||Polymer.Settings&&Polymer.Settings.sanitizeDOMValue;if(e=function(e,n,s,a){return e=i?i.call(Polymer,e,n,s,a):e,a?t(a,n,s,e):"zClosurez"},Polymer.Settings&&Polymer.Settings.o)Polymer.Settings.o(e);else if(Polymer.sanitizeDOMValue=e,Polymer.sanitizeDOMValue!==e)throw Error("Cannot install sanitizeDOMValue.  Is Polymer frozen?")}})),t("security.polymer_resin.CONSOLE_LOGGING_REPORT_HANDLER",(function(e,t,n){for(var i=[t],s=2,a=arguments.length;s<a;++s)i[s-1]=arguments[s];e?console.warn.apply(console,i):console.log.apply(console,i)}))}.call(window);class uo{static getUserName(e,t){return t&&t.name?t.name:t&&t.username?t.username:t&&t.email?t.email:e&&e.user&&"Anonymous Coward"!==e.user.anonymous_coward_name?e.user.anonymous_coward_name:"Anonymous"}static getDisplayName(e,t){return t&&t.display_name?t.display_name:t&&t.name&&e&&e.accounts?"USERNAME"===e.accounts.default_display_name&&t.username?t.username:"FIRST_NAME"===e.accounts.default_display_name?t.name.trim().split(" ")[0]:t.name:this.getUserName(e,t)}static getAccountDisplayName(e,t){return[this.getUserName(e,t),this._accountEmail(t.email),t.status?"("+t.status+")":""].filter(e=>e.length>0).join(" ")}static _accountEmail(e){return void 0!==e?"<"+e+">":""}static getGroupDisplayName(e){return e.name+" (group)"}}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,go={getLength(e){return this.getStringLength(e.textContent)},getStringLength:e=>e.replace(mo,"_").length,annotateWithElement(e,t,n,{tagName:i,attributes:s={}}){let a;if(e instanceof Element)a=Array.from(e.childNodes);else{if(!(e instanceof Text))return;a=[e],e=e.parentNode}const o=[];for(let e of a){const i=this.getLength(e);if(t>0&&i<=t)t-=i;else if(t>0&&(e=this.splitNode(e,t),t=0),this.getLength(e)>n&&this.splitNode(e,n),o.push(e),!(n-=this.getLength(e)))break}const r=document.createElement(i),l=window.Polymer.sanitizeDOMValue;for(const[e,t]of Object.entries(s))r.setAttribute(e,l?l(t,e,"attribute",r):t);for(const t of o)e.replaceChild(r,t),r.appendChild(t)},annotateElement(e,t,n,i){const s=[].slice.apply(e.childNodes);let a,o;for(const e of s)if(a=this.getLength(e),a<=t)t-=a;else{if(o=Math.min(n,a-t),e instanceof Text?this._annotateText(e,t,o,i):e instanceof HTMLElement&&this.annotateElement(e,t,o,i),!(o<n))break;n-=o,t=0}},wrapInHighlight(e,t){let n;return"HL"===e.tagName?(n=e,n.classList.add(t)):(n=document.createElement("HL"),n.className=t,Polymer.dom(e.parentElement).replaceChild(n,e),Polymer.dom(n).appendChild(e)),n},splitAndWrapInHighlight(e,t,n,i){return this.getLength(e)===t||0===t?this.wrapInHighlight(e,n):(i?this.splitNode(e,t):e=this.splitNode(e,t),this.wrapInHighlight(e,n))},splitNode(e,t){if(e instanceof Text)return this.splitTextNode(e,t);const n=e.cloneNode(!1);e.parentElement.insertBefore(n,e.nextSibling);let i=e.firstChild;for(;i&&this.getLength(i)<=t||0===this.getLength(i);)t-=this.getLength(i),i=i.nextSibling;for(this.getLength(i)>t&&n.appendChild(this.splitNode(i,t));i.nextSibling;)n.appendChild(i.nextSibling);return n},splitTextNode(e,t){if(e.textContent.match(mo)){const n=Array.from(e.textContent),i=n.splice(t),s=e.parentNode;e.textContent=n.join("");const a=document.createTextNode(i.join(""));return s&&s.insertBefore(a,e.nextSibling),a}return e.splitText(t)},_annotateText(e,t,n,i){const s=this.getLength(e);0===t&&s===n?this.wrapInHighlight(e,i):0===t?this.splitAndWrapInHighlight(e,n,i,!0):t+n===s?this.splitAndWrapInHighlight(e,t,i,!1):this.splitAndWrapInHighlight(this.splitTextNode(e,t),n,i,!0)}};go.ElementSpec;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _o=document.createElement("template");function fo(e){this.element=e,this._promises={}}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bo(e,t,n){this.type=e,this.beforeNumber=t||0,this.afterNumber=n||0,this.hasIntralineInfo=!1,this.highlights=[],this.contextGroups=null,this.text=""}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vo(e,t){this.type=e,this.dueToRebase=!1,this.ignoredWhitespaceOnly=!1,this.keyLocation=!1,this.element=null,this.lines=[],this.adds=[],this.removes=[],this.lineRange={left:{start:null,end:null},right:{start:null,end:null}},t&&t.forEach(this.addLine,this)}_o.innerHTML='<dom-module id="gr-attribute-helper">\n  \n</dom-module>',document.head.appendChild(_o.content),fo.prototype._getChangedEventName=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"-changed"},fo.prototype._elementHasProperty=function(e){return void 0!==this.element[e]},fo.prototype._reportValue=function(e,t){try{e(t)}catch(e){console.info(e)}},fo.prototype.bind=function(e,t){const n=this._getChangedEventName(e),i=e=>this._reportValue(t,e.detail.value);return this.element.addEventListener(n,i),this._elementHasProperty(e)&&this._reportValue(t,this.element[e]),()=>this.element.removeEventListener(n,i)},fo.prototype.get=function(e){if(this._elementHasProperty(e))return Promise.resolve(this.element[e]);if(!this._promises[e]){let t;const n=new Promise(e=>t=e),i=this.bind(e,e=>{t(e),i()});this._promises[e]=n}return this._promises[e]},fo.prototype.set=function(e,t){this.element[e]=t,this.element.dispatchEvent(new CustomEvent(this._getChangedEventName(e),{detail:{value:t}}))},bo.Type={ADD:"add",BOTH:"both",BLANK:"blank",CONTEXT_CONTROL:"contextControl",REMOVE:"remove"},bo.Highlights,bo.FILE="FILE",bo.BLANK_LINE=new bo(bo.Type.BLANK),vo.Type={BOTH:"both",CONTEXT_CONTROL:"contextControl",DELTA:"delta"},vo.hideInContextControl=function(e,t,n){if(0===e.length)return[];t=Math.max(t,0);let i=[],s=e,a=[];(n=Math.max(n,t))-t>1?(t&&([i,s]=vo._splitCommonGroups(s,t)),n&&([s,a]=vo._splitCommonGroups(s,n-t))):[s,a]=[[],s];const o=[...i];if(s.length){const e=new bo(bo.Type.CONTEXT_CONTROL);e.contextGroups=s;const t=new vo(vo.Type.CONTEXT_CONTROL,[e]);o.push(t)}return o.push(...a),o},vo._splitCommonGroups=function(e,t){if(0===e.length)return[[],[]];const n=e[0].lineRange.left.start+t,i=e[0].lineRange.right.start+t,s=[],a=[];for(const t of e){if(t.lineRange.left.end<n||t.lineRange.right.end<i){s.push(t);continue}if(n<=t.lineRange.left.start||i<=t.lineRange.right.start){a.push(t);continue}const e=[],o=[];for(const s of t.lines)s.beforeNumber&&s.beforeNumber<n||s.afterNumber&&s.afterNumber<i?e.push(s):o.push(s);e.length&&s.push(e.length===t.lines.length?t:t.cloneWithLines(e)),o.length&&a.push(o.length===t.lines.length?t:t.cloneWithLines(o))}return[s,a]},vo.prototype.cloneWithLines=function(e){const t=new vo(this.type,e);return t.dueToRebase=this.dueToRebase,t.ignoredWhitespaceOnly=this.ignoredWhitespaceOnly,t},vo.prototype.addLine=function(e){if(this.lines.push(e),(this.type===vo.Type.BOTH||this.type===vo.Type.CONTEXT_CONTROL)&&(e.type===bo.Type.ADD||e.type===bo.Type.REMOVE))throw Error("Cannot add delta line to a non-delta group.");e.type===bo.Type.ADD?this.adds.push(e):e.type===bo.Type.REMOVE&&this.removes.push(e),this._updateRange(e)},vo.prototype.getSideBySidePairs=function(){if(this.type===vo.Type.BOTH||this.type===vo.Type.CONTEXT_CONTROL)return this.lines.map(e=>({left:e,right:e}));const e=[];let t=0,n=0;for(;t<this.removes.length||n<this.adds.length;)e.push({left:this.removes[t]||bo.BLANK_LINE,right:this.adds[n]||bo.BLANK_LINE}),t++,n++;return e},vo.prototype._updateRange=function(e){"FILE"!==e.beforeNumber&&"FILE"!==e.afterNumber&&(e.type!==bo.Type.ADD&&e.type!==bo.Type.BOTH||((null===this.lineRange.right.start||e.afterNumber<this.lineRange.right.start)&&(this.lineRange.right.start=e.afterNumber),(null===this.lineRange.right.end||e.afterNumber>this.lineRange.right.end)&&(this.lineRange.right.end=e.afterNumber)),e.type!==bo.Type.REMOVE&&e.type!==bo.Type.BOTH||((null===this.lineRange.left.start||e.beforeNumber<this.lineRange.left.start)&&(this.lineRange.left.start=e.beforeNumber),(null===this.lineRange.left.end||e.beforeNumber>this.lineRange.left.end)&&(this.lineRange.left.end=e.beforeNumber)))};
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const yo=/\t|[\uD800-\uDBFF][\uDC00-\uDFFF]/;function wo(e,t,n,i){if(this._diff=e,this._prefs=t,this._outputEl=n,this.groups=[],this._blameInfo=null,this.layers=i||[],isNaN(t.tab_size)||t.tab_size<=0)throw Error("Invalid tab size from preferences.");if(isNaN(t.line_length)||t.line_length<=0)throw Error("Invalid line length from preferences.");for(const e of this.layers)e.addListener&&e.addListener(this._handleLayerUpdate.bind(this))}wo.GroupType={ADDED:"b",BOTH:"ab",REMOVED:"a"},wo.Highlights={ADDED:"edit_b",REMOVED:"edit_a"},wo.Side={LEFT:"left",RIGHT:"right"},wo.ContextButtonType={ABOVE:"above",BELOW:"below",ALL:"all"};
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Co(e,t,n,i){wo.call(this,e,t,n,i)}wo.prototype.addColumns=function(){throw Error("Subclasses must implement addColumns")},wo.prototype.buildSectionElement=function(){throw Error("Subclasses must implement buildSectionElement")},wo.prototype.emitGroup=function(e,t){const n=this.buildSectionElement(e);this._outputEl.insertBefore(n,t),e.element=n},wo.prototype.getGroupsByLineRange=function(e,t,n){const i=[];for(let s=0;s<this.groups.length;s++){const a=this.groups[s];if(0===a.lines.length)continue;let o=0,r=0;n&&(o=a.lineRange[n].start,r=a.lineRange[n].end),0===o&&(o=r),0===r&&(r=o),e<=r&&t>=o&&i.push(a)}return i},wo.prototype.getContentByLine=function(e,t,n){const i=t?"."+t:"";return Polymer.dom(n||this._outputEl).querySelector('td.lineNum[data-value="'+e+'"]'+i+" ~ td.content .contentText")},wo.prototype.findLinesByRange=function(e,t,n,i,s){const a=this.getGroupsByLineRange(e,t,n);for(const o of a){let a=null;for(const r of o.lines){if("left"===n&&r.type===bo.Type.ADD||"right"===n&&r.type===bo.Type.REMOVE)continue;const l="left"===n?r.beforeNumber:r.afterNumber;l<e||l>t||(i&&i.push(r),s&&(a=a?this._getNextContentOnSide(a,n):this.getContentByLine(l,n,o.element),a&&s.push(a)))}}},wo.prototype._renderContentByRange=function(e,t,n){const i=[],s=[];let a,o;this.findLinesByRange(e,t,n,i,s);for(let e=0;e<i.length;e++){if(a=i[e],o=s[e],!o)continue;const t=this._getLineNumberEl(o,n);o.parentElement.replaceChild(this._createTextEl(t,a,n).firstChild,o)}},wo.prototype.getSectionsByLineRange=function(e,t,n){return this.getGroupsByLineRange(e,t,n).map(e=>e.element)},wo.prototype._createContextControl=function(e,t){if(!t.contextGroups)return null;const n=t.contextGroups[t.contextGroups.length-1].lineRange.left.end-t.contextGroups[0].lineRange.left.start+1;if(0===n)return null;const i=this._createElement("td"),s=n>10;return s&&i.appendChild(this._createContextButton(wo.ContextButtonType.ABOVE,e,t,n)),i.appendChild(this._createContextButton(wo.ContextButtonType.ALL,e,t,n)),s&&i.appendChild(this._createContextButton(wo.ContextButtonType.BELOW,e,t,n)),i},wo.prototype._createContextButton=function(e,t,n,i){const s=this._createElement("gr-button","showContext");let a;s.setAttribute("link",!0),s.setAttribute("no-uppercase",!0);let o=[];if(e===wo.ContextButtonType.ALL){const e=this._createElement("iron-icon","showContext");e.setAttribute("icon","gr-icons:unfold-more"),Polymer.dom(s).appendChild(e),a="Show "+i+" common line",i>1&&(a+="s"),o.push(...n.contextGroups)}else e===wo.ContextButtonType.ABOVE?(a="+10 above",o=vo.hideInContextControl(n.contextGroups,10,i)):e===wo.ContextButtonType.BELOW&&(a="+10 below",o=vo.hideInContextControl(n.contextGroups,0,i-10));const r=this._createElement("span","showContext");return Polymer.dom(r).textContent=a,Polymer.dom(s).appendChild(r),s.addEventListener("tap",e=>{e.detail={groups:o,section:t,numLines:i}}),s},wo.prototype._createLineEl=function(e,t,n,i){const s=this._createElement("td");if(e.type===bo.Type.BLANK)return s;if(e.type===bo.Type.CONTEXT_CONTROL)return s.classList.add("contextLineNum"),s;if(e.type===bo.Type.BOTH||e.type===n){const n=this._createElement("button");n.tabIndex=-1,s.appendChild(n),this._decorateLineEl(s,t,i),s.classList.add("lineNum"),this._decorateLineEl(n,t,i),n.classList.add("lineNumButton"),n.textContent="FILE"===t?"File":t,t>0&&(e.type===bo.Type.REMOVE?n.setAttribute("aria-label",`${t} removed`):e.type===bo.Type.ADD&&n.setAttribute("aria-label",`${t} added`))}return s},wo.prototype._decorateLineEl=function(e,t,n){e.classList.add(n),e.dataset.value=t},wo.prototype._createTextEl=function(e,t,n){const i=this._createElement("td");t.type!==bo.Type.BLANK&&i.classList.add("content"),t.hasIntralineInfo||i.classList.add("no-intraline-info"),i.classList.add(t.type);const s=this._prefs.line_wrapping?1/0:this._prefs.line_length,a=this._formatText(t.text,this._prefs.tab_size,s);n&&a.setAttribute("data-side",n);for(const n of this.layers)"function"==typeof n.annotate&&n.annotate(a,e,t);return i.appendChild(a),i},wo.prototype._formatText=function(e,t,n){const i=this._createElement("div","contentText");let s=0,a=0;for(const o of e.split(yo)){if(o){let e=0,t=n-s;for(;t<o.length;)i.appendChild(document.createTextNode(o.substring(e,t))),i.appendChild(this._createElement("span","br")),s=0,e=t,t+=n;i.appendChild(document.createTextNode(o.substring(e))),s+=o.length-e,a+=o.length}if(a<e.length)if(e.startsWith("\t",a)){let e=t-s%t;s+e>n&&(i.appendChild(this._createElement("span","br")),s=0,e=t),i.appendChild(this._getTabWrapper(e)),s+=e,a++}else s>=n&&(i.appendChild(this._createElement("span","br")),s=0),i.appendChild(document.createTextNode(e.substring(a,a+2))),a+=2,s+=1}return i},wo.prototype._getTabWrapper=function(e){const t=this._createElement("span","tab");return t.style["tab-size"]=e,t.style["-moz-tab-size"]=e,t.innerText="\t",t},wo.prototype._createElement=function(e,t){const n=document.createElement(e);if(n.classList.add("style-scope","gr-diff"),t)for(const e of t.split(" "))n.classList.add(e);return n},wo.prototype._handleLayerUpdate=function(e,t,n){this._renderContentByRange(e,t,n)},wo.prototype._getNextContentOnSide=function(e,t){throw Error("Subclasses must implement _getNextContentOnSide")},wo.prototype._isTotal=function(e){return!(e.type!==vo.Type.DELTA||e.adds.length&&e.removes.length||!e.adds.length&&!e.removes.length)},wo.prototype.setBlame=function(e){this._blameInfo=e;for(const t of e)for(const e of t.ranges)for(let n=e.start;n<=e.end;n++){const e=this._getBlameByLineNum(n);if(!e)continue;for(;e.hasChildNodes();)e.removeChild(e.lastChild);const i=this._getBlameForBaseLine(n,t);e.appendChild(i)}},wo.prototype._getBlameByLineNum=function(e){return Polymer.dom(this._outputEl).querySelector(`td.blame[data-line-number="${e}"]`)},wo.prototype._getBlameCommitForBaseLine=function(e){if(!this._blameInfo)return null;for(const t of this._blameInfo)for(const n of t.ranges)if(n.start<=e&&n.end>=e)return t;return null},wo.prototype._getBlameForBaseLine=function(e,t){const n=t||this._getBlameCommitForBaseLine(e);if(!n)return null;const i=n.ranges.some(t=>t.start===e),s=new Date(1e3*n.time).toLocaleDateString(),a=this._createElement("span",i?"startOfRange":""),o=this._createElement("a","blameDate");o.innerText=`${s}`,o.setAttribute("href",`/q/${n.id}`),a.appendChild(o);const r=n.author.split(" ")[0],l=this._createElement("span","blameAuthor");l.innerText=` ${r}`,a.appendChild(l);const c=this._createElement("span","blameHoverCard");c.innerText=`Commit ${n.id}\nAuthor: ${n.author}\nDate: ${s}\n\n${n.commit_msg}`;const d=this._createElement("gr-hovercard");return d.appendChild(c),a.appendChild(d),a},wo.prototype._createBlameCell=function(e){const t=this._createElement("td","blame");if(t.setAttribute("data-line-number",e.beforeNumber),e.beforeNumber){const n=this._getBlameForBaseLine(e.beforeNumber);n&&t.appendChild(n)}return t},wo.prototype._getLineNumberEl=function(e,t){let n=e;for(;n&&!n.classList.contains("diff-row");)n=n.parentElement;return n?n.querySelector(".lineNum."+t):null},Co.prototype=Object.create(wo.prototype),Co.prototype.constructor=Co,Co.prototype.buildSectionElement=function(e){const t=this._createElement("tbody","section");t.classList.add(e.type),this._isTotal(e)&&t.classList.add("total"),e.dueToRebase&&t.classList.add("dueToRebase"),e.ignoredWhitespaceOnly&&t.classList.add("ignoredWhitespaceOnly");const n=e.getSideBySidePairs();for(let e=0;e<n.length;e++)t.appendChild(this._createRow(t,n[e].left,n[e].right));return t},Co.prototype.addColumns=function(e,t){const n=4*t,i=document.createElement("colgroup");let s=this._createElement("col","blame");i.appendChild(s),s=document.createElement("col"),s.setAttribute("width",n),i.appendChild(s),i.appendChild(document.createElement("col")),s=document.createElement("col"),s.setAttribute("width",n),i.appendChild(s),i.appendChild(document.createElement("col")),e.appendChild(i)},Co.prototype._createRow=function(e,t,n){const i=this._createElement("tr");return i.classList.add("diff-row","side-by-side"),i.setAttribute("left-type",t.type),i.setAttribute("right-type",n.type),i.tabIndex=-1,i.appendChild(this._createBlameCell(t)),this._appendPair(e,i,t,t.beforeNumber,wo.Side.LEFT),this._appendPair(e,i,n,n.afterNumber,wo.Side.RIGHT),i},Co.prototype._appendPair=function(e,t,n,i,s){const a=this._createLineEl(n,i,n.type,s);t.appendChild(a);const o=this._createContextControl(e,n);if(o)t.appendChild(o);else{const e=this._createTextEl(a,n,s);t.appendChild(e)}},Co.prototype._getNextContentOnSide=function(e,t){let n=e.parentElement.parentElement;for(;n=n.nextSibling;)if(e=n.querySelector('td.content .contentText[data-side="'+t+'"]'))return e;return null};
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Eo=/^image\/(bmp|gif|x-icon|jpeg|jpg|png|tiff|webp)$/;function So(e,t,n,i,s){Co.call(this,e,t,n,[]),this._baseImage=i,this._revisionImage=s}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xo(e,t,n,i){wo.call(this,e,t,n,i)}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ao(e,t,n){wo.call(this,e,t,n)}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Po(e){if(!e._el){const t=document.createElement("gr-js-api-interface");ko(e,t.getElement(t.Element.CHANGE_ACTIONS))}}function ko(e,t){t?(e._el=t,e.RevisionActions=t.RevisionActions,e.ChangeActions=t.ChangeActions,e.ActionType=t.ActionType):console.warn("changeActions() is not ready")}function To(e,t){this.plugin=e,ko(this,t)}So.prototype=Object.create(Co.prototype),So.prototype.constructor=So,So.prototype.renderDiff=function(){const e=this._createElement("tbody","image-diff");this._emitImagePair(e),this._emitImageLabels(e),this._outputEl.appendChild(e),this._outputEl.appendChild(this._createEndpoint())},So.prototype._createEndpoint=function(){const e=this._createElement("tbody"),t=this._createElement("tr"),n=this._createElement("td");n.setAttribute("colspan","4");const i=this._createElement("gr-endpoint-decorator"),s=Polymer.dom(i);return s.setAttribute("name","image-diff"),s.appendChild(this._createEndpointParam("baseImage",this._baseImage)),s.appendChild(this._createEndpointParam("revisionImage",this._revisionImage)),n.appendChild(i),t.appendChild(n),e.appendChild(t),e},So.prototype._createEndpointParam=function(e,t){const n=this._createElement("gr-endpoint-param");return n.setAttribute("name",e),n.value=t,n},So.prototype._emitImagePair=function(e){const t=this._createElement("tr");t.appendChild(this._createElement("td","left lineNum blank")),t.appendChild(this._createImageCell(this._baseImage,"left",e)),t.appendChild(this._createElement("td","right lineNum blank")),t.appendChild(this._createImageCell(this._revisionImage,"right",e)),e.appendChild(t)},So.prototype._createImageCell=function(e,t,n){const i=this._createElement("td",t);if(e&&Eo.test(e.type)){const s=this._createElement("img");s.onload=function(){e._height=s.naturalHeight,e._width=s.naturalWidth,this._updateImageLabel(n,t,e)}.bind(this),s.setAttribute("src",`data:${e.type};base64, ${e.body}`),s.addEventListener("error",()=>{s.remove(),i.textContent="[Image failed to load]"}),i.appendChild(s)}return i},So.prototype._updateImageLabel=function(e,t,n){const i=Polymer.dom(e).querySelector("."+t+" span.label");this._setLabelText(i,n)},So.prototype._setLabelText=function(e,t){e.textContent=this._getImageLabel(t)},So.prototype._emitImageLabels=function(e){const t=this._createElement("tr");let n=!1;this._baseImage&&this._revisionImage&&this._baseImage._name!==this._revisionImage._name&&(n=!0),t.appendChild(this._createElement("td","left lineNum blank"));let i,s=this._createElement("td","left"),a=this._createElement("label"),o=this._createElement("span","label");n&&(i=this._createElement("span","name"),i.textContent=this._baseImage._name,a.appendChild(i),a.appendChild(this._createElement("br"))),this._setLabelText(o,this._baseImage,n),a.appendChild(o),s.appendChild(a),t.appendChild(s),t.appendChild(this._createElement("td","right lineNum blank")),s=this._createElement("td","right"),a=this._createElement("label"),o=this._createElement("span","label"),n&&(i=this._createElement("span","name"),i.textContent=this._revisionImage._name,a.appendChild(i),a.appendChild(this._createElement("br"))),this._setLabelText(o,this._revisionImage,n),a.appendChild(o),s.appendChild(a),t.appendChild(s),e.appendChild(t)},So.prototype._getImageLabel=function(e){if(e){const t=e.type||e._expectedType;return e._width&&e._height?e._width+"×"+e._height+" "+t:t}return"No image"},xo.prototype=Object.create(wo.prototype),xo.prototype.constructor=xo,xo.prototype.buildSectionElement=function(e){const t=this._createElement("tbody","section");t.classList.add(e.type),this._isTotal(e)&&t.classList.add("total"),e.dueToRebase&&t.classList.add("dueToRebase"),e.ignoredWhitespaceOnly&&t.classList.add("ignoredWhitespaceOnly");for(let n=0;n<e.lines.length;++n){const i=e.lines[n];e.ignoredWhitespaceOnly&&i.type==bo.Type.REMOVE||t.appendChild(this._createRow(t,i))}return t},xo.prototype.addColumns=function(e,t){const n=4*t,i=document.createElement("colgroup");let s=this._createElement("col","blame");i.appendChild(s),s=document.createElement("col"),s.setAttribute("width",n),i.appendChild(s),s=document.createElement("col"),s.setAttribute("width",n),i.appendChild(s),i.appendChild(document.createElement("col")),e.appendChild(i)},xo.prototype._createRow=function(e,t){const n=this._createElement("tr",t.type);n.classList.add("diff-row","unified"),n.tabIndex=-1,n.appendChild(this._createBlameCell(t));let i=this._createLineEl(t,t.beforeNumber,bo.Type.REMOVE,"left");n.appendChild(i),i=this._createLineEl(t,t.afterNumber,bo.Type.ADD,"right"),n.appendChild(i);const s=this._createContextControl(e,t);if(s)n.appendChild(s);else{const e=this._createTextEl(i,t);n.appendChild(e)}return n},xo.prototype._getNextContentOnSide=function(e,t){let n=e.parentElement.parentElement;for(;n=n.nextSibling;)if(n.classList.contains("both")||"left"===t&&n.classList.contains("remove")||"right"===t&&n.classList.contains("add"))return n.querySelector(".contentText");return null},Ao.prototype=Object.create(wo.prototype),Ao.prototype.constructor=Ao,Ao.prototype.addColumns=function(e,t){},Ao.prototype.buildSectionElement=function(){const e=this._createElement("tbody","binary-diff"),t=this._createElement("tr"),n=this._createElement("td"),i=this._createElement("label");return i.textContent="Difference in binary files",n.appendChild(i),t.appendChild(n),e.appendChild(t),e},To.prototype.addPrimaryActionKey=function(e){Po(this),this._el.primaryActionKeys.includes(e)||this._el.push("primaryActionKeys",e)},To.prototype.removePrimaryActionKey=function(e){Po(this),this._el.primaryActionKeys=this._el.primaryActionKeys.filter(t=>t!==e)},To.prototype.hideQuickApproveAction=function(){Po(this),this._el.hideQuickApproveAction()},To.prototype.setActionOverflow=function(e,t,n){return Po(this),this._el.setActionOverflow(e,t,n)},To.prototype.setActionPriority=function(e,t,n){return Po(this),this._el.setActionPriority(e,t,n)},To.prototype.setActionHidden=function(e,t,n){return Po(this),this._el.setActionHidden(e,t,n)},To.prototype.add=function(e,t){return Po(this),this._el.addActionButton(e,t)},To.prototype.remove=function(e){return Po(this),this._el.removeActionButton(e)},To.prototype.addTapListener=function(e,t){Po(this),this._el.addEventListener(e+"-tap",t)},To.prototype.removeTapListener=function(e,t){Po(this),this._el.removeEventListener(e+"-tap",t)},To.prototype.setLabel=function(e,t){Po(this),this._el.setActionButtonProp(e,"label",t)},To.prototype.setTitle=function(e,t){Po(this),this._el.setActionButtonProp(e,"title",t)},To.prototype.setEnabled=function(e,t){Po(this),this._el.setActionButtonProp(e,"enabled",t)},To.prototype.setIcon=function(e,t){Po(this),this._el.setActionButtonProp(e,"icon",t)},To.prototype.getActionDetails=function(e){return Po(this),this._el.getActionDetails(e)||this._el.getActionDetails(this.plugin.getPluginName()+"~"+e)};
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Io{constructor(e){this.plugin=e,this._sharedApiEl=Plugin._sharedAPIElement}get _el(){return this._sharedApiEl.getElement(this._sharedApiEl.Element.REPLY_DIALOG)}getLabelValue(e){return this._el.getLabelValue(e)}setLabelValue(e,t){this._el.setLabelValue(e,t)}send(e){this._el.send(e)}addReplyTextChangedCallback(e){const t=this.plugin.hook("reply-text"),n=t=>e(t.detail.value);t.onAttached(e=>{e.content&&e.content.addEventListener("value-changed",n)}),t.onDetached(e=>{e.content&&e.content.removeEventListener("value-changed",n)})}addLabelValuesChangedCallback(e){const t=this.plugin.hook("reply-label-scores"),n=t=>e(t.detail);t.onAttached(e=>{e.content&&e.content.addEventListener("labels-changed",n)}),t.onDetached(e=>{e.content&&e.content.removeEventListener("labels-changed",n)})}showMessage(e){return this._el.setPluginMessage(e)}}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro={Actions:{OPEN:{label:"Add/Open/Upload",id:"open"},DELETE:{label:"Delete",id:"delete"},RENAME:{label:"Rename",id:"rename"},RESTORE:{label:"Restore",id:"restore"}}},Lo={FilesExpandedState:{ALL:"all",NONE:"none",SOME:"some"}},Do=document.createElement("template");
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(e){this._plugin=e,this._hooks={}}function No(e,t){this._instances=[],this._attachCallbacks=[],this._detachCallbacks=[],t?this._moduleName=t:(this._moduleName=e,this._createPlaceholder(e))}Do.innerHTML='<dom-module id="gr-dom-hooks">\n  \n</dom-module>',document.head.appendChild(Do.content),Oo.prototype._getHookName=function(e,t){return t?e+" "+t:this._plugin.getPluginName()+"-autogenerated-"+e},Oo.prototype.getDomHook=function(e,t){const n=this._getHookName(e,t);return this._hooks[n]||(this._hooks[n]=new No(n,t)),this._hooks[n]},No.prototype._createPlaceholder=function(e){ma({is:e,properties:{plugin:Object,content:Object}})},No.prototype.handleInstanceDetached=function(e){const t=this._instances.indexOf(e);-1!==t&&this._instances.splice(t,1),this._detachCallbacks.forEach(t=>t(e))},No.prototype.handleInstanceAttached=function(e){this._instances.push(e),this._attachCallbacks.forEach(t=>t(e))},No.prototype.getLastAttached=function(){if(this._instances.length)return Promise.resolve(this._instances.slice(-1)[0]);if(!this._lastAttachedPromise){let e;const t=new Promise(t=>e=t);this._attachCallbacks.push(e),this._lastAttachedPromise=t.then(t=>{this._lastAttachedPromise=null;const n=this._attachCallbacks.indexOf(e);return-1!==n&&this._attachCallbacks.splice(n,1),t})}return this._lastAttachedPromise},No.prototype.getAllAttached=function(){return this._instances},No.prototype.onAttached=function(e){return this._attachCallbacks.push(e),this},No.prototype.onDetached=function(e){return this._detachCallbacks.push(e),this},No.prototype.getModuleName=function(){return this._moduleName},No.prototype.getPublicAPI=function(){const e={},t=["onAttached","onDetached","getLastAttached","getAllAttached","getModuleName"];for(const n of t)e[n]=this[n].bind(this);return e};
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Mo=document.createElement("template");Mo.innerHTML='<dom-module id="gr-etag-decorator">\n  \n</dom-module>',document.head.appendChild(Mo.content);function $o(){this._etags=new Map,this._payloadCache=new Map}$o.prototype.getOptions=function(e,t){if(!this._etags.get(e))return t;const n=Object.assign({},t);return n.headers=n.headers||new Headers,n.headers.set("If-None-Match",this._etags.get(e)),n},$o.prototype.collect=function(e,t,n){if(!t||!t.ok||200!==t.status||304===t.status)return;this._payloadCache.set(e,n);const i=t.headers&&t.headers.get("etag");i?(this._etags.set(e,i),this._truncateCache()):this._etags.delete(e)},$o.prototype.getCachedPayload=function(e){return this._payloadCache.get(e)},$o.prototype._truncateCache=function(){for(const e of this._etags.keys()){if(this._etags.size<=30)break;this._etags.delete(e),this._payloadCache.delete(e)}},
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ma({_template:za`
    <style>
      img {
        width: 1em;
        height: 1em;
        vertical-align: middle;
      }
      .title {
        margin-left: var(--spacing-xs);
      }
    </style>
    <span>
      <img src="[[logoUrl]]" hidden\$="[[!logoUrl]]">
      <span class="title">[[title]]</span>
    </span>
`,is:"gr-custom-plugin-header",properties:{logoUrl:String,title:String}});
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bo=document.createElement("template");function Fo(e){this.plugin=e}Bo.innerHTML='<dom-module id="gr-theme-api">\n  \n</dom-module>',document.head.appendChild(Bo.content),Fo.prototype.setHeaderLogoAndTitle=function(e,t){this.plugin.hook("header-title",{replace:!0}).onAttached(n=>{const i=document.createElement("gr-custom-plugin-header");i.logoUrl=e,i.title=t,n.appendChild(i)})};class Uo{constructor(){this._data=new Map,null!=window.INITIAL_DATA&&Object.entries(window.INITIAL_DATA).forEach(e=>this._cache().set(e[0],e[1]))}_cache(){return this._data.has(window.CANONICAL_PATH)||this._data.set(window.CANONICAL_PATH,new Map),this._data.get(window.CANONICAL_PATH)}has(e){return this._cache().has(e)}get(e){return this._cache().get(e)}set(e,t){this._cache().set(e,t)}delete(e){this._cache().delete(e)}invalidatePrefix(e){const t=new Map;for(const[n,i]of this._cache().entries())n.startsWith(e)||t.set(n,i);this._data.set(window.CANONICAL_PATH,t)}}class Ho{constructor(){this._data={}}has(e){return!!this._data[e]}get(e){return this._data[e]}set(e,t){this._data[e]=t}invalidatePrefix(e){const t={};Object.entries(this._data).forEach(([n,i])=>{n.startsWith(e)||(t[n]=i)}),this._data=t}}class jo{constructor(e,t,n,i){this._cache=e,this._auth=t,this._fetchPromisesCache=n,this._restApiInterface=i}fetch(e){const t=Date.now(),n=this._auth.fetch(e.url,e.fetchOptions);return n.then(n=>this._logCall(e,t,n?n.status:null)),n}_logCall(e,t,n){const i=e.fetchOptions&&e.fetchOptions.method?e.fetchOptions.method:"GET",s=Date.now(),a=s-t,o=new Date(t),r=new Date(s);console.log(["HTTP",n,i,a+"ms",e.anonymizedUrl||e.url,`(${o.toISOString()}, ${r.toISOString()})`].join(" ")),e.anonymizedUrl&&this.dispatchEvent(new CustomEvent("rpc-log",{detail:{status:n,method:i,elapsed:a,anonymizedUrl:e.anonymizedUrl},composed:!0,bubbles:!0}))}fetchRawJSON(e){const t=this.urlWithParams(e.url,e.params),n={url:t,fetchOptions:e.fetchOptions,anonymizedUrl:e.reportUrlAsIs?t:e.anonymizedUrl};return this.fetch(n).then(t=>{if(!e.cancelCondition||!e.cancelCondition())return t;t.body.cancel()}).catch(t=>{throw e.errFn?e.errFn.call(void 0,null,t):this.dispatchEvent(new CustomEvent("network-error",{detail:{error:t},composed:!0,bubbles:!0})),t})}fetchJSON(e,t){return t||(e=this.addAcceptJsonHeader(e)),this.fetchRawJSON(e).then(t=>{if(t)return t.ok?t&&this.getResponseObject(t):e.errFn?void e.errFn.call(null,t):void this.dispatchEvent(new CustomEvent("server-error",{detail:{request:e,response:t},composed:!0,bubbles:!0}))})}urlWithParams(e,t){if(!t)return this.getBaseUrl()+e;const n=[];for(const e in t)if(t.hasOwnProperty(e))if(null!=t[e])for(const i of[].concat(t[e]))n.push(`${encodeURIComponent(e)}=${encodeURIComponent(i)}`);else n.push(encodeURIComponent(e));return this.getBaseUrl()+e+"?"+n.join("&")}getResponseObject(e){return this.readResponsePayload(e).then(e=>e.parsed)}readResponsePayload(e){return e.text().then(e=>{let t;try{t=this.parsePrefixedJSON(e)}catch(e){t=null}return{parsed:t,raw:e}})}parsePrefixedJSON(e){return JSON.parse(e.substring(")]}'".length))}addAcceptJsonHeader(e){return e.fetchOptions||(e.fetchOptions={}),e.fetchOptions.headers||(e.fetchOptions.headers=new Headers),e.fetchOptions.headers.has("Accept")||e.fetchOptions.headers.append("Accept","application/json"),e}getBaseUrl(){return this._restApiInterface.getBaseUrl()}dispatchEvent(e,t){return this._restApiInterface.dispatchEvent(e,t)}fetchCacheURL(e){return this._fetchPromisesCache.has(e.url)?this._fetchPromisesCache.get(e.url):this._cache.has(e.url)?Promise.resolve(this._cache.get(e.url)):(this._fetchPromisesCache.set(e.url,this.fetchJSON(e).then(t=>(void 0!==t&&this._cache.set(e.url,t),this._fetchPromisesCache.set(e.url,void 0),t)).catch(t=>{throw this._fetchPromisesCache.set(e.url,void 0),t})),this._fetchPromisesCache.get(e.url))}send(e){const t={method:e.method};if(e.body&&(t.headers=new Headers,t.headers.set("Content-Type",e.contentType||"application/json"),t.body="string"==typeof e.body?e.body:JSON.stringify(e.body)),e.headers){t.headers||(t.headers=new Headers);for(const n in e.headers)e.headers.hasOwnProperty(n)&&t.headers.set(n,e.headers[n])}const n=e.url.startsWith("http")?e.url:this.getBaseUrl()+e.url,i={url:n,fetchOptions:t,anonymizedUrl:e.reportUrlAsIs?n:e.anonymizedUrl},s=this.fetch(i).then(t=>{if(!t.ok){if(e.errFn)return e.errFn.call(void 0,t);this.dispatchEvent(new CustomEvent("server-error",{detail:{request:i,response:t},composed:!0,bubbles:!0}))}return t}).catch(t=>{if(this.dispatchEvent(new CustomEvent("network-error",{detail:{error:t},composed:!0,bubbles:!0})),e.errFn)return e.errFn.call(void 0,null,t);throw t});return e.parseResponse?s.then(e=>this.getResponseObject(e)):s}invalidateFetchPromisesPrefix(e){this._fetchPromisesCache.invalidatePrefix(e),this._cache.invalidatePrefix(e)}}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go={getBaseUrl:()=>window.CANONICAL_PATH||""};window.Gerrit=window.Gerrit||{},window.Gerrit.BaseUrlBehavior=Go;
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vo=/^(.*)(https?:\/\/|mailto:)/;function zo(e,t,n){this.linkConfig=e,this.callback=t,this.removeZeroWidthSpace=n,this.baseUrl=Go.getBaseUrl(),Object.preventExtensions(this)}zo.prototype.addText=function(e,t){e&&this.callback(e,t)},zo.prototype.processLinks=function(e,t){this.sortArrayReverse(t);const n=document.createDocumentFragment();let i=e.length;t.forEach(t=>{t.position+t.length!==i&&n.insertBefore(document.createTextNode(e.slice(t.position+t.length,i)),n.firstChild),n.insertBefore(t.html,n.firstChild),i=t.position}),0!==i&&n.insertBefore(document.createTextNode(e.slice(0,i)),n.firstChild),this.callback(null,null,n)},zo.prototype.sortArrayReverse=function(e){e.sort((e,t)=>t.position-e.position)},zo.prototype.addItem=function(e,t,n,i,s,a){let o="";if(t){const n=document.createElement("a");n.href=t,n.textContent=e,n.target="_blank",n.rel="noopener",o=n}else if(n){const e=document.createDocumentFragment(),t=document.createElement("div");for(t.innerHTML=n;t.firstChild;)e.appendChild(t.firstChild);o=e}a.push({html:o,position:i,length:s})},zo.prototype.addLink=function(e,t,n,i,s){e&&!this.hasOverlap(n,i,s)&&(this.baseUrl&&t.startsWith("/")&&!t.startsWith(this.baseUrl)&&(t=this.baseUrl+t),this.addItem(e,t,null,n,i,s))},zo.prototype.addHTML=function(e,t,n,i){this.hasOverlap(t,n,i)||(this.baseUrl&&e.match(/<a href=\"\//g)&&!new RegExp(`<a href="${this.baseUrl}`,"g").test(e)&&(e=e.replace(/<a href=\"\//g,`<a href="${this.baseUrl}/`)),this.addItem(null,null,e,t,n,i))},zo.prototype.hasOverlap=function(e,t,n){const i=e+t;for(let t=0;t<n.length;t++){const s=n[t].position,a=n[t].position+n[t].length;if(e>=s&&e<a||i>s&&i<=a||e===s&&e===a)return!0}return!1},zo.prototype.parse=function(e){e&&linkify(e,{callback:this.parseChunk.bind(this)})},zo.prototype.parseChunk=function(e,t){if(this.removeZeroWidthSpace&&(e=e.replace(/^(CC|R)=\u200B/gm,"$1=")),t){const n=Vo.exec(t);if(n){const i=n[1];return i.length>0&&(this.parseLinks(i,[]),e=e.substring(i.length),t=t.substring(i.length)),void this.addText(e,t)}}this.parseLinks(e,this.linkConfig)},zo.prototype.parseLinks=function(e,t){const n=[];for(const i in t){if(null!=t[i].enabled&&0==t[i].enabled)continue;t[i].html?t[i].html=t[i].html.replace(/<a href=\"#\//g,'<a href="/'):t[i].link&&"#"==t[i].link[0]&&(t[i].link=t[i].link.substr(1));const s=new RegExp(t[i].match,"g");let a,o=e,r=0;for(;null!=(a=s.exec(o));){o=o.substr(a.index+a[0].length);let e=a[0].replace(s,t[i].html||t[i].link);if(t[i].html){let t;for(t=0;t<e.length&&e[t]===a[0][t];t++);e=e.slice(t),this.addHTML(e,r+a.index+t,a[0].length-t,n)}else{if(!t[i].link)throw Error("linkconfig entry "+i+" doesn’t contain a link or html attribute.");this.addLink(a[0],e,r+a.index,a[0].length,n)}r=r+a.index+a[0].length}}this.processLinks(e,n)};let Wo;function qo(){return Wo||(Wo=document.createElement("gr-rest-api-interface")),Wo}function Ko(){return Go.getBaseUrl()}function Yo(e){if(!(e instanceof URL))try{e=new URL(e)}catch(e){return console.warn(e),null}if("preloaded:"===e.protocol)return e.pathname;const t=Go.getBaseUrl();let n=e.pathname.replace(t,"");return window.ASSETS_PATH&&e.href.includes(window.ASSETS_PATH)&&(n=e.href.replace(window.ASSETS_PATH,"")),"/static/gerrit-theme.html"===n?"gerrit-theme":n.startsWith("/plugins")?n.split("/")[2].split(".")[0]:(console.warn("Plugin not being loaded from /plugins base path:",e.href,"— Unable to determine name."),null)}function Xo(e,t,n,i){return qo().send(e,t,i).then(e=>e.status<200||e.status>=300?e.text().then(t=>t?Promise.reject(new Error(t)):Promise.reject(new Error(e.status))):qo().getResponseObject(e)).then(e=>(n&&n(e),e))}
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jo="PENDING",Zo="LOADED",Qo="LOAD_FAILED";class er{constructor(){this._pluginListLoaded=!1,this._plugins=new Map,this._reporting=null,this._loadingPromise=null,this._loadingResolver=null}_getReporting(){return this._reporting||(this._reporting=document.createElement("gr-reporting")),this._reporting}_getPluginKeyFromUrl(e){return Yo(e)||`__$$__${e}`}loadPlugins(e=[],t={}){this._pluginListLoaded=!0,e.forEach(e=>{const n=this._urlFor(e,window.ASSETS_PATH);if(this.isPluginPreloaded(n))return;const i=this._getPluginKeyFromUrl(n);this._plugins.has(i)||(this._plugins.set(i,{name:i,url:n,state:Jo,plugin:null}),this._isPathEndsWith(n,".html")?this._importHtmlPlugin(e,t&&t[e]):this._isPathEndsWith(n,".js")?this._loadJsPlugin(e):this._failToLoad(`Unrecognized plugin path ${e}`,e))}),this.awaitPluginsLoaded().then(()=>{console.info("Plugins loaded"),this._getReporting().pluginsLoaded(this._getAllInstalledPluginNames())})}_isPathEndsWith(e,t){if(!(e instanceof URL))try{e=new URL(e)}catch(e){return console.warn(e),!1}return e.pathname&&e.pathname.endsWith(t)}_getAllInstalledPluginNames(){const e=[];for(const t of this._plugins.values())t.state===Zo&&e.push(t.name);return e}install(e,t,n){const i=document.currentScript&&(document.currentScript.__importElement||document.currentScript);let s=n||i&&i.src;if(s&&!s.startsWith("data:")||(s=i&&i.baseURI),t&&"0.1"!==t)return void this._failToLoad(`Plugin ${s} install error: only version `+"0.1 is supported in PolyGerrit. "+t+" was given.",s);const a=this._urlFor(s),o=this.getPlugin(a);let r=o&&o.plugin;r||(r=new Plugin(a));try{e(r),this._pluginInstalled(a,r)}catch(e){this._failToLoad(`${e.name}: ${e.message}`,s)}}arePluginsLoaded(){if(!this._pluginListLoaded)return!1;for(const e of this._plugins.values())if(e.state===Jo)return!1;return!0}_checkIfCompleted(){this.arePluginsLoaded()&&this._loadingResolver&&(this._loadingResolver(),this._loadingResolver=null,this._loadingPromise=null)}_timeout(){const e=[];for(const t of this._plugins.values())t.state===Jo&&(this._updatePluginState(t.url,Qo),this._checkIfCompleted(),e.push(t.url));return`Timeout when loading plugins: ${e.join(",")}`}_failToLoad(e,t){document.dispatchEvent(new CustomEvent("show-alert",{detail:{message:`Plugin install error: ${e} from ${t}`}})),this._updatePluginState(t,Qo),this._checkIfCompleted()}_updatePluginState(e,t){const n=this._getPluginKeyFromUrl(e);return this._plugins.has(n)?this._plugins.get(n).state=t:(console.warn(`Plugin loaded separately: ${e}`),this._plugins.set(n,{name:n,url:e,state:t,plugin:null})),this._plugins.get(n)}_pluginInstalled(e,t){this._updatePluginState(e,Zo).plugin=t,this._getReporting().pluginLoaded(t.getPluginName()||e),console.log(`Plugin ${t.getPluginName()||e} installed.`),this._checkIfCompleted()}installPreloadedPlugins(){if(!window.Gerrit||!window.Gerrit._preloadedPlugins)return;const e=window.Gerrit;for(const t in e._preloadedPlugins){if(!e._preloadedPlugins.hasOwnProperty(t))continue;const n=e._preloadedPlugins[t];this.install(n,"0.1","preloaded:"+t)}}isPluginPreloaded(e){const t=Yo(this._urlFor(e));return!(!t||!window.Gerrit._preloadedPlugins)&&window.Gerrit._preloadedPlugins.hasOwnProperty(t)}isPluginEnabled(e){const t=this._urlFor(e);if(this.isPluginPreloaded(t))return!0;const n=this._getPluginKeyFromUrl(t);return this._plugins.has(n)}getPlugin(e){const t=this._getPluginKeyFromUrl(this._urlFor(e));return this._plugins.get(t)}isPluginLoaded(e){const t=this._urlFor(e),n=this._getPluginKeyFromUrl(t);return!!this._plugins.has(n)&&this._plugins.get(n).state===Zo}_importHtmlPlugin(e,t={}){const n=this._urlFor(e,window.ASSETS_PATH),i=this._urlFor(e);let s=null;n!==i&&(s=()=>this._loadHtmlPlugin(i,t.sync)),this._loadHtmlPlugin(n,t.sync,s)}_loadHtmlPlugin(e,t,n){n||(n=()=>{this._failToLoad(`${e} import error`,e)}),(Polymer.importHref||Polymer.Base.importHref)(e,()=>{},n,!t)}_loadJsPlugin(e){const t=this._urlFor(e,window.ASSETS_PATH),n=this._urlFor(e);let i=null;t!==n&&(i=()=>this._createScriptTag(n)),this._createScriptTag(t,i)}_createScriptTag(e,t){t||(t=()=>this._failToLoad(`${e} load error`,e));const n=document.createElement("script");return n.defer=!0,n.setAttribute("src",e),n.setAttribute("crossorigin","anonymous"),n.onerror=t,document.body.appendChild(n)}_urlFor(e,t){if(!e)return e;const n=!e.endsWith("static/gerrit-theme.html")&&t;return e.startsWith("preloaded:")||e.startsWith("http")?e.includes(location.host)&&n?e.replace(location.origin,t):e:(e.startsWith("/")||(e="/"+e),n?t+e:window.location.origin+Ko()+e)}awaitPluginsLoaded(){if(this._checkIfCompleted(),this.arePluginsLoaded())return Promise.resolve();if(!this._loadingPromise){let e;this._loadingPromise=Promise.race([new Promise(e=>this._loadingResolver=e),new Promise((t,n)=>e=setTimeout(()=>{n(new Error(this._timeout()))},1e4))]).then(()=>{e&&clearTimeout(e)})}return this._loadingPromise}}er.PluginObject,er.PluginOption;let tr=new er;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nr(){this._endpoints={},this._callbacks={},this._dynamicPlugins={}}nr.prototype.onNewEndpoint=function(e,t){this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t)},nr.prototype.onDetachedEndpoint=function(e,t){this._callbacks[e]&&(this._callbacks[e]=this._callbacks[e].filter(e=>e!==t))},nr.prototype._getOrCreateModuleInfo=function(e,t,n,i,s){const a=this._endpoints[t].find(t=>t.plugin===e&&t.moduleName===i&&t.domHook===s);if(a)return a;{const a={moduleName:i,plugin:e,pluginUrl:e._url,type:n,domHook:s};return this._endpoints[t].push(a),a}},nr.prototype.registerModule=function(e,t,n,i,s,a){a&&(this._dynamicPlugins[a]||(this._dynamicPlugins[a]=new Set),this._dynamicPlugins[a].add(t)),this._endpoints[t]||(this._endpoints[t]=[]);const o=this._getOrCreateModuleInfo(e,t,n,i,s);tr.arePluginsLoaded()&&this._callbacks[t]&&this._callbacks[t].forEach(e=>e(o))},nr.prototype.getDynamicEndpoints=function(e){const t=this._dynamicPlugins[e];return t?Array.from(t):[]},nr.prototype.getDetails=function(e,t){const n=t&&t.type,i=t&&t.moduleName;return this._endpoints[e]?this._endpoints[e].filter(e=>!(n&&e.type!==n||i&&i!=e.moduleName)):[]},nr.prototype.getModules=function(e,t){const n=this.getDetails(e,t);return n.length?n.map(e=>e.moduleName):[]},nr.prototype.getPlugins=function(e,t){const n=this.getDetails(e,t).filter(e=>e.pluginUrl.pathname.includes(".html"));return n.length?Array.from(new Set(n.map(e=>e.pluginUrl))):[]};let ir=new nr;const sr={parseDate:e=>new Date(e.replace(" ","T")+"Z"),getCookie(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1);if(i.startsWith(t))return i.substring(t.length,i.length)}return""},makeCancelable:e=>{let t,n=!1;const i=new Promise((i,s)=>{t=s,e.then(e=>{n||i(e),n=!0},e=>{n||s(e),n=!0})});return i.cancel=()=>{n||(t({isCanceled:!0}),n=!0)},i},getComputedStyleValue:(e,t)=>{let n;return n=window.ShadyCSS?ShadyCSS.getComputedStyleValue(t,e):t.getComputedStyleValue?t.getComputedStyleValue(e):getComputedStyle(t).getPropertyValue(e),n},querySelector:(e,t)=>{let n=[e],i=null;for(;n.length;){const e=n.pop();if(!e||!e.querySelector)continue;if(i=e.querySelector(t),i)break;const s=[...e.querySelectorAll("*")].filter(e=>!!e.shadowRoot).map(e=>e.shadowRoot);n=n.concat(s),e.shadowRoot&&n.push(e.shadowRoot)}return i},querySelectorAll:(e,t)=>{let n=[e];const i=new Set;for(;n.length;){const e=n.pop();if(!e||!e.querySelectorAll)continue;[...e.querySelectorAll(t)].forEach(e=>i.add(e));const s=[...e.querySelectorAll("*")].filter(e=>!!e.shadowRoot).map(e=>e.shadowRoot);n=n.concat(s),e.shadowRoot&&n.push(e.shadowRoot)}return[...i]},getEventPath:e=>{if(!e)return"";let t=e.path;if(!t||!t.length){t=[];let n=e.target;for(;n;)t.push(n),n=n.parentNode||n.host}return t.reduce((e,t)=>{const n=
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){if(!e.tagName||"GR-APP"===e.tagName||e instanceof DocumentFragment||e instanceof HTMLSlotElement)return"";let t=e.tagName.toLowerCase();return e.id&&(t+=`#${e.id}`),e.className&&(t+=`.${e.className.replace(/ /g,".")}`),t}(t);return n?e?`${n}>${e}`:n:e},"")}};
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(e){this.result=Object.assign({},e),this._lastState={}}ar.parse=function(e){if(!(e&&e.messages&&e.reviewer_updates&&e.reviewer_updates.length))return e;const t=new ar(e);return t._filterRemovedMessages(),t._groupUpdates(),t._formatUpdates(),t._advanceUpdates(),t.result},ar.MESSAGE_REVIEWERS_THRESHOLD_MILLIS=500,ar.REVIEWER_UPDATE_THRESHOLD_MILLIS=6e3,ar.prototype.result=null,ar.prototype._batch=null,ar.prototype._updateItems=null,ar.prototype._lastState=null,ar.prototype._filterRemovedMessages=function(){this.result.messages=this.result.messages.filter(e=>"autogenerated:gerrit:deleteReviewer"!==e.tag)},ar.prototype._startBatch=function(e){return this._updateItems=[],{author:e.updated_by,date:e.updated,type:"REVIEWER_UPDATE"}},ar.prototype._completeBatch=function(e){const t=[];for(const e in this._updateItems){if(!this._updateItems.hasOwnProperty(e))continue;const n=this._updateItems[e];this._lastState[e]!==n.state&&(this._lastState[e]=n.state,t.push(n))}t.length&&(this._batch.updates=t)},ar.prototype._groupUpdates=function(){const e=this.result.reviewer_updates.reduce((e,t)=>{this._batch||(this._batch=this._startBatch(t));const n=sr.parseDate(t.updated).getTime(),i=sr.parseDate(this._batch.date).getTime(),s=t.reviewer._account_id.toString();return(n-i>ar.REVIEWER_UPDATE_THRESHOLD_MILLIS||t.updated_by._account_id!==this._batch.author._account_id)&&(this._completeBatch(),this._batch.updates&&this._batch.updates.length&&e.push(this._batch),this._batch=this._startBatch(t)),this._updateItems[s]={reviewer:t.reviewer,state:t.state},this._lastState[s]&&(this._updateItems[s].prev_state=this._lastState[s]),e},[]);this._completeBatch(),this._batch.updates&&this._batch.updates.length&&e.push(this._batch),this.result.reviewer_updates=e},ar.prototype._getUpdateMessage=function(e,t){return"REMOVED"!==e&&e?"REMOVED"===t?e?"Removed from "+e.toLowerCase()+": ":"Removed : ":"Moved from "+e.toLowerCase()+" to "+t.toLowerCase()+": ":"Added to "+t.toLowerCase()+": "},ar.prototype._groupUpdatesByMessage=function(e){return e.reduce((e,t)=>{const n=this._getUpdateMessage(t.prev_state,t.state);return e[n]||(e[n]=[]),e[n].push(t.reviewer),e},{})},ar.prototype._formatUpdates=function(){for(const e of this.result.reviewer_updates){const t=this._groupUpdatesByMessage(e.updates),n=[];for(const e in t)t.hasOwnProperty(e)&&n.push({message:e,reviewers:t[e]});e.updates=n}},ar.prototype._advanceUpdates=function(){const e=this.result.reviewer_updates,t=this.result.messages;t.forEach((n,i)=>{const s=sr.parseDate(n.date).getTime(),a=i===t.length-1?null:sr.parseDate(t[i+1].date).getTime();for(const t of e){const e=sr.parseDate(t.date).getTime();if(e>=s&&(!a||e<a)){const e=sr.parseDate(t.date).getTime()-ar.MESSAGE_REVIEWERS_THRESHOLD_MILLIS;t.date=new Date(e).toISOString().replace("T"," ").replace("Z","000000")}if(a&&e>a)break}})};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const or={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){return this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width},get _fitHeight(){return this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height},get _fitLeft(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().left},get _fitTop(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().top},get _defaultPositionTarget(){var e=Ui(this).parentNode;return e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(e=e.host),e},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign)return"left";if("left"===this.horizontalAlign)return"right"}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&this.positionTarget},get _isRTL(){return void 0===this._memoizedIsRTL&&(this._memoizedIsRTL="rtl"==window.getComputedStyle(this).direction),this._memoizedIsRTL},attached:function(){this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):(window.ShadyDOM&&ShadyDOM.flush(),this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var e=window.getComputedStyle(this),t=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||"",maxHeight:this.sizingTarget.style.maxHeight||"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==e.top?"top":"auto"!==e.bottom?"bottom":null,horizontally:"auto"!==e.left?"left":"auto"!==e.right?"right":null},sizedBy:{height:"none"!==t.maxHeight,width:"none"!==t.maxWidth,minWidth:parseInt(t.minWidth,10)||0,minHeight:parseInt(t.minHeight,10)||0},margin:{top:parseInt(e.marginTop,10)||0,right:parseInt(e.marginRight,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0}}}},resetFit:function(){var e=this._fitInfo||{};for(var t in e.sizerInlineStyle)this.sizingTarget.style[t]=e.sizerInlineStyle[t];for(var t in e.inlineStyle)this.style[t]=e.inlineStyle[t];this._fitInfo=null},refit:function(){var e=this.sizingTarget.scrollLeft,t=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=e,this.sizingTarget.scrollTop=t},position:function(){if(this.__shouldPosition){this._discoverInfo(),this.style.position="fixed",this.sizingTarget.style.boxSizing="border-box",this.style.left="0px",this.style.top="0px";var e=this.getBoundingClientRect(),t=this.__getNormalizedRect(this.positionTarget),n=this.__getNormalizedRect(this.fitInto),i=this._fitInfo.margin,s={width:e.width+i.left+i.right,height:e.height+i.top+i.bottom},a=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,s,e,t,n),o=a.left+i.left,r=a.top+i.top,l=Math.min(n.right-i.right,o+e.width),c=Math.min(n.bottom-i.bottom,r+e.height);o=Math.max(n.left+i.left,Math.min(o,l-this._fitInfo.sizedBy.minWidth)),r=Math.max(n.top+i.top,Math.min(r,c-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=Math.max(l-o,this._fitInfo.sizedBy.minWidth)+"px",this.sizingTarget.style.maxHeight=Math.max(c-r,this._fitInfo.sizedBy.minHeight)+"px",this.style.left=o-e.left+"px",this.style.top=r-e.top+"px"}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var e=this._fitInfo;e.positionedBy.vertically||(this.style.position="fixed",this.style.top="0px"),e.positionedBy.horizontally||(this.style.position="fixed",this.style.left="0px"),this.sizingTarget.style.boxSizing="border-box";var t=this.getBoundingClientRect();e.sizedBy.height||this.__sizeDimension(t,e.positionedBy.vertically,"top","bottom","Height"),e.sizedBy.width||this.__sizeDimension(t,e.positionedBy.horizontally,"left","right","Width")}},_sizeDimension:function(e,t,n,i,s){this.__sizeDimension(e,t,n,i,s)},__sizeDimension:function(e,t,n,i,s){var a=this._fitInfo,o=this.__getNormalizedRect(this.fitInto),r="Width"===s?o.width:o.height,l=t===i,c=l?r-e[i]:e[n],d=a.margin[l?n:i],h="offset"+s,p=this[h]-this.sizingTarget[h];this.sizingTarget.style["max"+s]=r-d-c-p+"px"},center:function(){if(!this.__shouldPosition){this._discoverInfo();var e=this._fitInfo.positionedBy;if(!e.vertically||!e.horizontally){this.style.position="fixed",e.vertically||(this.style.top="0px"),e.horizontally||(this.style.left="0px");var t=this.getBoundingClientRect(),n=this.__getNormalizedRect(this.fitInto);if(!e.vertically){var i=n.top-t.top+(n.height-t.height)/2;this.style.top=i+"px"}if(!e.horizontally){var s=n.left-t.left+(n.width-t.width)/2;this.style.left=s+"px"}}}},__getNormalizedRect:function(e){return e===document.documentElement||e===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:e.getBoundingClientRect()},__getOffscreenArea:function(e,t,n){var i=Math.min(0,e.top)+Math.min(0,n.bottom-(e.top+t.height)),s=Math.min(0,e.left)+Math.min(0,n.right-(e.left+t.width));return Math.abs(i)*t.width+Math.abs(s)*t.height},__getPosition:function(e,t,n,i,s,a){var o,r=[{verticalAlign:"top",horizontalAlign:"left",top:s.top+this.verticalOffset,left:s.left+this.horizontalOffset},{verticalAlign:"top",horizontalAlign:"right",top:s.top+this.verticalOffset,left:s.right-n.width-this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"left",top:s.bottom-n.height-this.verticalOffset,left:s.left+this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"right",top:s.bottom-n.height-this.verticalOffset,left:s.right-n.width-this.horizontalOffset}];if(this.noOverlap){for(var l=0,c=r.length;l<c;l++){var d={};for(var h in r[l])d[h]=r[l][h];r.push(d)}r[0].top=r[1].top+=s.height,r[2].top=r[3].top-=s.height,r[4].left=r[6].left+=s.width,r[5].left=r[7].left-=s.width}t="auto"===t?null:t,(e="auto"===e?null:e)&&"center"!==e||(r.push({verticalAlign:"top",horizontalAlign:"center",top:s.top+this.verticalOffset+(this.noOverlap?s.height:0),left:s.left-i.width/2+s.width/2+this.horizontalOffset}),r.push({verticalAlign:"bottom",horizontalAlign:"center",top:s.bottom-n.height-this.verticalOffset-(this.noOverlap?s.height:0),left:s.left-i.width/2+s.width/2+this.horizontalOffset})),t&&"middle"!==t||(r.push({verticalAlign:"middle",horizontalAlign:"left",top:s.top-i.height/2+s.height/2+this.verticalOffset,left:s.left+this.horizontalOffset+(this.noOverlap?s.width:0)}),r.push({verticalAlign:"middle",horizontalAlign:"right",top:s.top-i.height/2+s.height/2+this.verticalOffset,left:s.right-n.width-this.horizontalOffset-(this.noOverlap?s.width:0)})),"middle"===t&&"center"===e&&r.push({verticalAlign:"middle",horizontalAlign:"center",top:s.top-i.height/2+s.height/2+this.verticalOffset,left:s.left-i.width/2+s.width/2+this.horizontalOffset});for(l=0;l<r.length;l++){var p=r[l],u=p.verticalAlign===t,m=p.horizontalAlign===e;if(!this.dynamicAlign&&!this.noOverlap&&u&&m){o=p;break}var g=(!t||u)&&(!e||m);if(this.dynamicAlign||g){if(p.offscreenArea=this.__getOffscreenArea(p,n,a),0===p.offscreenArea&&g){o=p;break}o=o||p;var _=p.offscreenArea-o.offscreenArea;(_<0||0===_&&(u||m))&&(o=p)}}return o}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/var rr=new Set;const lr={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(rr.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach((function(e){this.resizerShouldNotify(e)&&this._notifyDescendant(e)}),this),this._fireResize())},assignParentResizable:function(e){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=e,e&&-1===e._interestedResizables.indexOf(this)&&(e._interestedResizables.push(this),e._subscribeIronResize(this))},stopResizeNotificationsFor:function(e){var t=this._interestedResizables.indexOf(e);t>-1&&(this._interestedResizables.splice(t,1),this._unsubscribeIronResize(e))},_subscribeIronResize:function(e){e.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(e){e.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(e){return!0},_onDescendantIronResize:function(e){this._notifyingDescendant?e.stopPropagation():_||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(e){var t=Ui(e).rootTarget;t!==this&&(t.assignParentResizable(this),this._notifyDescendant(t),e.stopPropagation())},_parentResizableChanged:function(e){e&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(e){this.isAttached&&(this._notifyingDescendant=!0,e.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var e=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",(function t(){document.removeEventListener("readystatechange",t),e()}))}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach((function(e){e!==this&&e._findParent()}),this):(rr.forEach((function(e){e!==this&&e._findParent()}),this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?rr.delete(this):rr.add(this)}};
/**
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/var cr=Element.prototype,dr=cr.matches||cr.matchesSelector||cr.mozMatchesSelector||cr.msMatchesSelector||cr.oMatchesSelector||cr.webkitMatchesSelector;const hr=new class{getTabbableNodes(e){var t=[];return this._collectTabbableNodes(e,t)?this._sortByTabIndex(t):t}isFocusable(e){return dr.call(e,"input, select, textarea, button, object")?dr.call(e,":not([disabled])"):dr.call(e,"a[href], area[href], iframe, [tabindex], [contentEditable]")}isTabbable(e){return this.isFocusable(e)&&dr.call(e,':not([tabindex="-1"])')&&this._isVisible(e)}_normalizedTabIndex(e){if(this.isFocusable(e)){var t=e.getAttribute("tabindex")||0;return Number(t)}return-1}_collectTabbableNodes(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var n=e;if(!this._isVisible(n))return!1;var i,s=this._normalizedTabIndex(n),a=s>0;s>=0&&t.push(n),i="content"===n.localName||"slot"===n.localName?Ui(n).getDistributedNodes():Ui(n.root||n).children;for(var o=0;o<i.length;o++)a=this._collectTabbableNodes(i[o],t)||a;return a}_isVisible(e){var t=e.style;return"hidden"!==t.visibility&&"none"!==t.display&&("hidden"!==(t=window.getComputedStyle(e)).visibility&&"none"!==t.display)}_sortByTabIndex(e){var t=e.length;if(t<2)return e;var n=Math.ceil(t/2),i=this._sortByTabIndex(e.slice(0,n)),s=this._sortByTabIndex(e.slice(n));return this._mergeSortByTabIndex(i,s)}_mergeSortByTabIndex(e,t){for(var n=[];e.length>0&&t.length>0;)this._hasLowerTabOrder(e[0],t[0])?n.push(t.shift()):n.push(e.shift());return n.concat(e,t)}_hasLowerTabOrder(e,t){var n=Math.max(e.tabIndex,0),i=Math.max(t.tabIndex,0);return 0===n||0===i?i>n:n>i}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/ma({_template:za`
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--iron-overlay-backdrop-background-color, #000);
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply --iron-overlay-backdrop;
      }

      :host(.opened) {
        opacity: var(--iron-overlay-backdrop-opacity, 0.6);
        pointer-events: auto;
        @apply --iron-overlay-backdrop-opened;
      }
    </style>

    <slot></slot>
`,is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Ui(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||Ui(this.parentNode).removeChild(this)},_onTransitionend:function(e){e&&e.target===this&&this.complete()},_openedChanged:function(e){if(e)this.prepare();else{var t=window.getComputedStyle(this);"0s"!==t.transitionDuration&&0!=t.opacity||this.complete()}this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null,this.toggleClass("opened",this.opened)}.bind(this)))}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
var pr={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},ur={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},mr={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},gr=/[a-z0-9*]/,_r=/U\+/,fr=/^arrow/,br=/^space(bar)?/,vr=/^escape$/;function yr(e,t){var n="";if(e){var i=e.toLowerCase();" "===i||br.test(i)?n="space":vr.test(i)?n="esc":1==i.length?t&&!gr.test(i)||(n=i):n=fr.test(i)?i.replace("arrow",""):"multiply"==i?"*":i}return n}function wr(e,t){return e.key?yr(e.key,t):e.detail&&e.detail.key?yr(e.detail.key,t):(n=e.keyIdentifier,i="",n&&(n in pr?i=pr[n]:_r.test(n)?(n=parseInt(n.replace("U+","0x"),16),i=String.fromCharCode(n).toLowerCase()):i=n.toLowerCase()),i||function(e){var t="";return Number(e)&&(t=e>=65&&e<=90?String.fromCharCode(32+e):e>=112&&e<=123?"f"+(e-112+1):e>=48&&e<=57?String(e-48):e>=96&&e<=105?String(e-96):ur[e]),t}(e.keyCode)||"");var n,i}function Cr(e,t){return wr(t,e.hasModifiers)===e.key&&(!e.hasModifiers||!!t.shiftKey==!!e.shiftKey&&!!t.ctrlKey==!!e.ctrlKey&&!!t.altKey==!!e.altKey&&!!t.metaKey==!!e.metaKey)}function Er(e){return e.trim().split(" ").map((function(e){return function(e){return 1===e.length?{combo:e,key:e,event:"keydown"}:e.split("+").reduce((function(e,t){var n=t.split(":"),i=n[0],s=n[1];return i in mr?(e[mr[i]]=!0,e.hasModifiers=!0):(e.key=i,e.event=s||"keydown"),e}),{combo:e.split(":").shift()})}(e)}))}const Sr={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(e,t){this._imperativeKeyBindings[e]=t,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(e,t){for(var n=Er(t),i=0;i<n.length;++i)if(Cr(n[i],e))return!0;return!1},_collectKeyBindings:function(){var e=this.behaviors.map((function(e){return e.keyBindings}));return-1===e.indexOf(this.keyBindings)&&e.push(this.keyBindings),e},_prepKeyBindings:function(){for(var e in this._keyBindings={},this._collectKeyBindings().forEach((function(e){for(var t in e)this._addKeyBinding(t,e[t])}),this),this._imperativeKeyBindings)this._addKeyBinding(e,this._imperativeKeyBindings[e]);for(var t in this._keyBindings)this._keyBindings[t].sort((function(e,t){var n=e[0].hasModifiers;return n===t[0].hasModifiers?0:n?-1:1}))},_addKeyBinding:function(e,t){Er(e).forEach((function(e){this._keyBindings[e.event]=this._keyBindings[e.event]||[],this._keyBindings[e.event].push([e,t])}),this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach((function(e){var t=this._keyBindings[e],n=this._onKeyBindingEvent.bind(this,t);this._boundKeyHandlers.push([this.keyEventTarget,e,n]),this.keyEventTarget.addEventListener(e,n)}),this)},_unlistenKeyEventListeners:function(){for(var e,t,n,i;this._boundKeyHandlers.length;)t=(e=this._boundKeyHandlers.pop())[0],n=e[1],i=e[2],t.removeEventListener(n,i)},_onKeyBindingEvent:function(e,t){if(this.stopKeyboardEventPropagation&&t.stopPropagation(),!t.defaultPrevented)for(var n=0;n<e.length;n++){var i=e[n][0],s=e[n][1];if(Cr(i,t)&&(this._triggerKeyHandler(i,s,t),t.defaultPrevented))return}},_triggerKeyHandler:function(e,t,n){var i=Object.create(e);i.keyboardEvent=n;var s=new CustomEvent(e.event,{detail:i,cancelable:!0});this[t].call(this,s),s.defaultPrevented&&n.preventDefault()}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const xr=new class{constructor(){this._overlays=[],this._minimumZ=101,this._backdropElement=null,In(document.documentElement,"tap",(function(){})),document.addEventListener("tap",this._onCaptureClick.bind(this),!0),document.addEventListener("focus",this._onCaptureFocus.bind(this),!0),document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)}get backdropElement(){return this._backdropElement||(this._backdropElement=document.createElement("iron-overlay-backdrop")),this._backdropElement}get deepActiveElement(){var e=document.activeElement;for(e&&e instanceof Element!=!1||(e=document.body);e.root&&Ui(e.root).activeElement;)e=Ui(e.root).activeElement;return e}_bringOverlayAtIndexToFront(e){var t=this._overlays[e];if(t){var n=this._overlays.length-1,i=this._overlays[n];if(i&&this._shouldBeBehindOverlay(t,i)&&n--,!(e>=n)){var s=Math.max(this.currentOverlayZ(),this._minimumZ);for(this._getZ(t)<=s&&this._applyOverlayZ(t,s);e<n;)this._overlays[e]=this._overlays[e+1],e++;this._overlays[n]=t}}}addOrRemoveOverlay(e){e.opened?this.addOverlay(e):this.removeOverlay(e)}addOverlay(e){var t=this._overlays.indexOf(e);if(t>=0)return this._bringOverlayAtIndexToFront(t),void this.trackBackdrop();var n=this._overlays.length,i=this._overlays[n-1],s=Math.max(this._getZ(i),this._minimumZ),a=this._getZ(e);if(i&&this._shouldBeBehindOverlay(e,i)){this._applyOverlayZ(i,s),n--;var o=this._overlays[n-1];s=Math.max(this._getZ(o),this._minimumZ)}a<=s&&this._applyOverlayZ(e,s),this._overlays.splice(n,0,e),this.trackBackdrop()}removeOverlay(e){var t=this._overlays.indexOf(e);-1!==t&&(this._overlays.splice(t,1),this.trackBackdrop())}currentOverlay(){var e=this._overlays.length-1;return this._overlays[e]}currentOverlayZ(){return this._getZ(this.currentOverlay())}ensureMinimumZ(e){this._minimumZ=Math.max(this._minimumZ,e)}focusOverlay(){var e=this.currentOverlay();e&&e._applyFocus()}trackBackdrop(){var e=this._overlayWithBackdrop();(e||this._backdropElement)&&(this.backdropElement.style.zIndex=this._getZ(e)-1,this.backdropElement.opened=!!e,this.backdropElement.prepare())}getBackdrops(){for(var e=[],t=0;t<this._overlays.length;t++)this._overlays[t].withBackdrop&&e.push(this._overlays[t]);return e}backdropZ(){return this._getZ(this._overlayWithBackdrop())-1}_overlayWithBackdrop(){for(var e=this._overlays.length-1;e>=0;e--)if(this._overlays[e].withBackdrop)return this._overlays[e]}_getZ(e){var t=this._minimumZ;if(e){var n=Number(e.style.zIndex||window.getComputedStyle(e).zIndex);n==n&&(t=n)}return t}_setZ(e,t){e.style.zIndex=t}_applyOverlayZ(e,t){this._setZ(e,t+2)}_overlayInPath(e){e=e||[];for(var t=0;t<e.length;t++)if(e[t]._manager===this)return e[t]}_onCaptureClick(e){var t=this._overlays.length-1;if(-1!==t)for(var n,i=Ui(e).path;(n=this._overlays[t])&&this._overlayInPath(i)!==n&&(n._onCaptureClick(e),n.allowClickThrough);)t--}_onCaptureFocus(e){var t=this.currentOverlay();t&&t._onCaptureFocus(e)}_onCaptureKeyDown(e){var t=this.currentOverlay();t&&(Sr.keyboardEventMatchesKeys(e,"esc")?t._onCaptureEsc(e):Sr.keyboardEventMatchesKeys(e,"tab")&&t._onCaptureTab(e))}_shouldBeBehindOverlay(e,t){return!e.alwaysOnTop&&t.alwaysOnTop}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/var Ar,Pr,kr={pageX:0,pageY:0},Tr=null,Ir=[],Rr=["wheel","mousewheel","DOMMouseScroll","touchstart","touchmove"];function Lr(e){Or.indexOf(e)>=0||(0===Or.length&&function(){Ar=Ar||$r.bind(void 0);for(var e=0,t=Rr.length;e<t;e++)document.addEventListener(Rr[e],Ar,{capture:!0,passive:!1})}(),Or.push(e),Pr=Or[Or.length-1],Nr=[],Mr=[])}function Dr(e){var t=Or.indexOf(e);-1!==t&&(Or.splice(t,1),Pr=Or[Or.length-1],Nr=[],Mr=[],0===Or.length&&function(){for(var e=0,t=Rr.length;e<t;e++)document.removeEventListener(Rr[e],Ar,{capture:!0,passive:!1})}())}const Or=[];let Nr=null,Mr=null;function $r(e){if(e.cancelable&&function(e){var t=Ui(e).rootTarget;"touchmove"!==e.type&&Tr!==t&&(Tr=t,Ir=function(e){for(var t=[],n=e.indexOf(Pr),i=0;i<=n;i++)if(e[i].nodeType===Node.ELEMENT_NODE){var s=e[i],a=s.style;"scroll"!==a.overflow&&"auto"!==a.overflow&&(a=window.getComputedStyle(s)),"scroll"!==a.overflow&&"auto"!==a.overflow||t.push(s)}return t}(Ui(e).path));if(!Ir.length)return!0;if("touchstart"===e.type)return!1;var n=function(e){var t={deltaX:e.deltaX,deltaY:e.deltaY};if("deltaX"in e);else if("wheelDeltaX"in e&&"wheelDeltaY"in e)t.deltaX=-e.wheelDeltaX,t.deltaY=-e.wheelDeltaY;else if("wheelDelta"in e)t.deltaX=0,t.deltaY=-e.wheelDelta;else if("axis"in e)t.deltaX=1===e.axis?e.detail:0,t.deltaY=2===e.axis?e.detail:0;else if(e.targetTouches){var n=e.targetTouches[0];t.deltaX=kr.pageX-n.pageX,t.deltaY=kr.pageY-n.pageY}return t}
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/(e);return!function(e,t,n){if(!t&&!n)return;for(var i=Math.abs(n)>=Math.abs(t),s=0;s<e.length;s++){var a=e[s];if(i?n<0?a.scrollTop>0:a.scrollTop<a.scrollHeight-a.clientHeight:t<0?a.scrollLeft>0:a.scrollLeft<a.scrollWidth-a.clientWidth)return a}}(Ir,n.deltaX,n.deltaY)}(e)&&e.preventDefault(),e.targetTouches){var t=e.targetTouches[0];kr.pageX=t.pageX,kr.pageY=t.pageY}}const Br={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},scrollAction:{type:String},_manager:{type:Object,value:xr},_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},observers:["__updateScrollObservers(isAttached, opened, scrollAction)"],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Ui(this).querySelector("[autofocus]")||this},get _focusableNodes(){return hr.getTabbableNodes(this)},ready:function(){this.__isAnimating=!1,this.__shouldRemoveTabIndex=!1,this.__firstFocusableNode=this.__lastFocusableNode=null,this.__rafs={},this.__restoreFocusNode=null,this.__scrollTop=this.__scrollLeft=null,this.__onCaptureScroll=this.__onCaptureScroll.bind(this),this.__rootNodes=null,this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened),this._observer=Ui(this).observeNodes(this._onNodesChange)},detached:function(){for(var e in this._observer&&Ui(this).unobserveNodes(this._observer),this._observer=null,this.__rafs)null!==this.__rafs[e]&&cancelAnimationFrame(this.__rafs[e]);this.__rafs={},this._manager.removeOverlay(this),this.__isAnimating&&(this.opened?this._finishRenderOpened():(this._applyFocus(),this._finishRenderClosed()))},toggle:function(){this._setCanceled(!1),this.opened=!this.opened},open:function(){this._setCanceled(!1),this.opened=!0},close:function(){this._setCanceled(!1),this.opened=!1},cancel:function(e){this.fire("iron-overlay-canceled",e,{cancelable:!0}).defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(e){e?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"),this.isAttached&&(this.__isAnimating=!0,this.__deraf("__openedChanged",this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute("tabindex")?(this.setAttribute("tabindex","-1"),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute("tabindex"),this.__shouldRemoveTabIndex=!1),this.opened&&this.isAttached&&this._manager.trackBackdrop()},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement,this._preparePositioning(),this.refit(),this._finishPositioning(),this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize(),this.__isAnimating=!1,this.fire("iron-overlay-opened")},_finishRenderClosed:function(){this.style.display="none",this.style.zIndex="",this.notifyResize(),this.__isAnimating=!1,this.fire("iron-overlay-closed",this.closingReason)},_preparePositioning:function(){this.style.transition=this.style.webkitTransition="none",this.style.transform=this.style.webkitTransform="none",this.style.display=""},_finishPositioning:function(){this.style.display="none",this.scrollTop=this.scrollTop,this.style.transition=this.style.webkitTransition="",this.style.transform=this.style.webkitTransform="",this.style.display="",this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{if(this.restoreFocusOnClose&&this.__restoreFocusNode){var e=this._manager.deepActiveElement;(e===document.body||Fr(this,e))&&this.__restoreFocusNode.focus()}this.__restoreFocusNode=null,this._focusNode.blur(),this._focusedChild=null}},_onCaptureClick:function(e){this.noCancelOnOutsideClick||this.cancel(e)},_onCaptureFocus:function(e){if(this.withBackdrop){var t=Ui(e).path;-1===t.indexOf(this)?(e.stopPropagation(),this._applyFocus()):this._focusedChild=t[0]}},_onCaptureEsc:function(e){this.noCancelOnEscKey||this.cancel(e)},_onCaptureTab:function(e){if(this.withBackdrop){this.__ensureFirstLastFocusables();var t=e.shiftKey,n=t?this.__firstFocusableNode:this.__lastFocusableNode,i=t?this.__lastFocusableNode:this.__firstFocusableNode,s=!1;if(n===i)s=!0;else{var a=this._manager.deepActiveElement;s=a===n||a===this}s&&(e.preventDefault(),this._focusedChild=i,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__deraf("refit",this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){var e=this._focusableNodes;this.__firstFocusableNode=e[0],this.__lastFocusableNode=e[e.length-1]},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),this._manager.addOverlay(this),this._applyFocus(),this._renderOpened()):(this._manager.removeOverlay(this),this._applyFocus(),this._renderClosed())},__deraf:function(e,t){var n=this.__rafs;null!==n[e]&&cancelAnimationFrame(n[e]),n[e]=requestAnimationFrame(function(){n[e]=null,t.call(this)}.bind(this))},__updateScrollObservers:function(e,t,n){e&&t&&this.__isValidScrollAction(n)?("lock"===n&&(this.__saveScrollPosition(),Lr(this)),this.__addScrollListeners()):(Dr(this),this.__removeScrollListeners())},__addScrollListeners:function(){if(!this.__rootNodes){if(this.__rootNodes=[],_)for(var e=this;e;)e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host&&this.__rootNodes.push(e),e=e.host||e.assignedSlot||e.parentNode;this.__rootNodes.push(document)}this.__rootNodes.forEach((function(e){e.addEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})}),this)},__removeScrollListeners:function(){this.__rootNodes&&this.__rootNodes.forEach((function(e){e.removeEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})}),this),this.isAttached||(this.__rootNodes=null)},__isValidScrollAction:function(e){return"lock"===e||"refit"===e||"cancel"===e},__onCaptureScroll:function(e){if(!(this.__isAnimating||Ui(e).path.indexOf(this)>=0))switch(this.scrollAction){case"lock":this.__restoreScrollPosition();break;case"refit":this.__deraf("refit",this.refit);break;case"cancel":this.cancel(e)}},__saveScrollPosition:function(){document.scrollingElement?(this.__scrollTop=document.scrollingElement.scrollTop,this.__scrollLeft=document.scrollingElement.scrollLeft):(this.__scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this.__scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))},__restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this.__scrollTop,document.scrollingElement.scrollLeft=this.__scrollLeft):(document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop,document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft)}},Fr=(e,t)=>{for(let i=t;i;i=(n=i).assignedSlot||n.parentNode||n.host)if(i===e)return!0;var n;return!1},Ur=[or,lr,Br],Hr=document.createElement("template");Hr.innerHTML='<dom-module id="shared-styles">\n  <template>\n    <style>\n\n      /* CSS reset */\n\n      html, body, button, div, span, applet, object, iframe, h1, h2, h3,\n      h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite,\n      code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub,\n      sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form,\n      label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article,\n      aside, canvas, details, embed, figure, figcaption, footer, header, hgroup,\n      main, menu, nav, output, ruby, section, summary, time, mark, audio, video {\n        border: 0;\n        box-sizing: border-box;\n        font-size: 100%;\n        font: inherit;\n        margin: 0;\n        padding: 0;\n        vertical-align: baseline;\n      }\n      *::after,\n      *::before {\n        box-sizing: border-box;\n      }\n      input {\n        background-color: var(--background-color-primary);\n        border: 1px solid var(--border-color);\n        border-radius: var(--border-radius);\n        box-sizing: border-box;\n        color: var(--primary-text-color);\n        margin: 0;\n        padding: var(--spacing-s);\n      }\n      iron-autogrow-textarea {\n        background-color: inherit;\n        color: var(--primary-text-color);\n        border: 1px solid var(--border-color);\n        border-radius: var(--border-radius);\n        padding: 0;\n        box-sizing: border-box;\n        /* iron-autogrow-textarea has a "-webkit-appearance: textarea" :host\n           css rule, which prevents overriding the border color. Clear that. */\n        -webkit-appearance: none;\n\n        --iron-autogrow-textarea: {\n          box-sizing: border-box;\n          padding: var(--spacing-s);\n        };\n      }\n      a {\n        color: var(--link-color);\n      }\n      input,\n      textarea,\n      select,\n      button {\n        font: inherit;\n      }\n      ol, ul {\n        list-style: none;\n      }\n      blockquote, q {\n        quotes: none;\n      }\n      blockquote:before, blockquote:after,\n      q:before, q:after {\n        content: \'\';\n        content: none;\n      }\n      table {\n        border-collapse: collapse;\n        border-spacing: 0;\n      }\n\n      /* Fonts */\n\n      .font-normal {\n        font-size: var(--font-size-normal);\n        font-weight: var(--font-weight-normal);\n        line-height: var(--line-height-normal);\n      }\n      .font-small {\n        font-size: var(--font-size-small);\n        font-weight: var(--font-weight-normal);\n        line-height: var(--line-height-small);\n      }\n      h1, .font-h1 {\n        font-family: var(--header-font-family);\n        font-size: var(--font-size-h1);\n        font-weight: var(--font-weight-h1);\n        line-height: var(--line-height-h1);\n      }\n      h2, .font-h2 {\n        font-family: var(--header-font-family);\n        font-size: var(--font-size-h2);\n        font-weight: var(--font-weight-h2);\n        line-height: var(--line-height-h2);\n      }\n      h3, .font-h3 {\n        font-family: var(--header-font-family);\n        font-size: var(--font-size-h3);\n        font-weight: var(--font-weight-h3);\n        line-height: var(--line-height-h3);\n      }\n      iron-icon {\n        color: var(--deemphasized-text-color);\n        --iron-icon-height: 20px;\n        --iron-icon-width: 20px;\n      }\n\n      /* Stopgap solution until we remove hidden$ attributes. */\n\n      [hidden] {\n        display: none !important;\n      }\n      .separator {\n        border-left: 1px solid var(--border-color);\n        height: 20px;\n        margin: 0 8px;\n      }\n      .separator.transparent {\n        border-color: transparent;\n      }\n      paper-toggle-button {\n        --paper-toggle-button-checked-bar-color: var(--link-color);\n        --paper-toggle-button-checked-button-color: var(--link-color);\n      }\n      paper-tabs {\n        font-size: var(--font-size-h3);\n        font-weight: var(--font-weight-h3);\n        line-height: var(--line-height-h3);\n        --paper-font-common-base: {\n          font-family: var(--header-font-family);\n          -webkit-font-smoothing: initial;\n        };\n        --paper-tab-content-focused: {\n          /* paper-tabs uses 700 here, which can look awkward */\n          font-weight: var(--font-weight-h3);\n        };\n        --paper-tab-content-unselected: {\n          /* paper-tabs uses 0.8 here, but we want to control the color directly */\n          opacity: 1;\n          color: var(--deemphasized-text-color);\n        };\n      }\n      iron-autogrow-textarea {\n        /** This is needed for firefox */\n        --iron-autogrow-textarea_-_white-space: pre-wrap;\n      }\n      strong {\n        font-weight: var(--font-weight-bold);\n      }\n\n      /** BEGIN: loading spiner */\n      .loadingSpin {\n        border: 2px solid var(--disabled-button-background-color);\n        border-top: 2px solid var(--primary-button-background-color);\n        border-radius: 50%;\n        width: 10px;\n        height: 10px;\n        animation: spin 2s linear infinite;\n        margin-right: var(--spacing-s);\n      }\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n      /** END: loading spiner */\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Hr.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jr=za`
  <style include="shared-styles">
    :host {
      background: var(--dialog-background-color);
      border-radius: var(--border-radius);
      box-shadow: var(--elevation-level-5);
    }

    @media screen and (max-width: 50em) {
      :host {
        height: 100%;
        left: 0;
        position: fixed;
        right: 0;
        top: 0;
        border-radius: 0;
        box-shadow: none;
      }
    }
  </style>
  <slot></slot>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Gr extends(ra([Ur],Zn(na(Ka)))){static get template(){return jr}static get is(){return"gr-overlay"}static get properties(){return{_fullScreenOpen:{type:Boolean,value:!1}}}created(){super.created(),this.addEventListener("iron-overlay-closed",()=>this._close()),this.addEventListener("iron-overlay-cancelled",()=>this._close())}open(...e){return new Promise((t,n)=>{Br.open.apply(this,e),this._isMobile()&&(this.dispatchEvent(new CustomEvent("fullscreen-overlay-opened",{composed:!0,bubbles:!0})),this._fullScreenOpen=!0),this._awaitOpen(t,n)})}_isMobile(){return window.matchMedia("(max-width: 50em)")}_close(){this._fullScreenOpen&&(this.dispatchEvent(new CustomEvent("fullscreen-overlay-closed",{composed:!0,bubbles:!0})),this._fullScreenOpen=!1)}setFocusStops(e){this.__firstFocusableNode=e.start,this.__lastFocusableNode=e.end}_awaitOpen(e,t){let n=0;const i=()=>{this.async(()=>{"none"!==this.style.display?e.call(this):n++<10?i.call(this):t(new Error("gr-overlay _awaitOpen failed to resolve"))},5)};i.call(this)}_id(){return this.getAttribute("id")||"global"}}customElements.define(Gr.is,Gr);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vr=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <gr-overlay id="overlay" with-backdrop="">
    <slot></slot>
  </gr-overlay>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;!function(e){class t extends(Zn(na(Ka))){static get template(){return Vr}static get is(){return"gr-plugin-popup"}get opened(){return this.$.overlay.opened}open(){return this.$.overlay.open()}close(){this.$.overlay.close()}}customElements.define(t.is,t)}(window);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zr=document.createElement("template");function Wr(e,t){this.plugin=e,this._openingPromise=null,this._popup=null,this._moduleName=t||null}zr.innerHTML='<dom-module id="gr-popup-interface">\n  \n</dom-module>',document.head.appendChild(zr.content),Wr.prototype._getElement=function(){return Ui(this._popup)},Wr.prototype.open=function(){return this._openingPromise||(this._openingPromise=this.plugin.hook("plugin-overlay").getLastAttached().then(e=>{const t=document.createElement("gr-plugin-popup");if(this._moduleName){Ui(t).appendChild(document.createElement(this._moduleName)).plugin=this.plugin}return this._popup=Ui(e).appendChild(t),Ii(),this._popup.open().then(()=>this)})),this._openingPromise},Wr.prototype.close=function(){this._popup&&(this._popup.close(),this._openingPromise=null)};
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const qr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,Kr={normalize(e){const t=this._getContentTextParent(e.startContainer),n=e.startOffset+this._getTextOffset(t,e.startContainer),i=this._getContentTextParent(e.endContainer);return{startContainer:t,startOffset:n,endContainer:i,endOffset:e.endOffset+this._getTextOffset(i,e.endContainer)}},_getContentTextParent(e){let t=e;for("#text"===t.nodeName&&(t=t.parentElement);t&&!t.classList.contains("contentText");){if(null===t.parentElement)return e;t=t.parentElement}return t},_getTextOffset(e,t){let n=0,i=[e];for(;i.length;){const e=i.pop();if(e===t)break;if(e&&e.childNodes&&0!==e.childNodes.length){const t=[];for(const n of e.childNodes)t.push(n);t.reverse(),i=i.concat(t)}else n+=this._getLength(e)}return n},_getLength:e=>e?e.textContent.replace(qr,"_").length:0},Yr={computePluralString(e,t){return this.computeString(e,t)+(e>1?"s":"")},computeString:(e,t)=>0===e?"":e+" "+t,computeShortString:(e,t)=>0===e?"":e+t},Xr={REVIEWER:"reviewers",CC:"ccs",ANY:"any"};class Jr{static create(e,t,n){switch(n){case Xr.REVIEWER:return new Jr(e,t,n=>e.getChangeSuggestedReviewers(t,n));case Xr.CC:return new Jr(e,t,n=>e.getChangeSuggestedCCs(t,n));case Xr.ANY:return new Jr(e,t,n=>e.getSuggestedAccounts(`cansee:${t} ${n}`));default:throw new Error(`Unknown users type: ${n}`)}}constructor(e,t,n){this._changeNumber=t,this._apiCall=n,this._restAPI=e}init(){if(this._initPromise)return this._initPromise;const e=this._restAPI.getConfig().then(e=>{this._config=e}),t=this._restAPI.getLoggedIn().then(e=>{this._loggedIn=e});return this._initPromise=Promise.all([e,t]).then(()=>{this._initialized=!0}),this._initPromise}getSuggestions(e){return this._initialized&&this._loggedIn?this._apiCall(e).then(e=>e||[]):Promise.resolve([])}makeSuggestionItem(e){return e.account?{name:uo.getAccountDisplayName(this._config,e.account),value:e}:e.group?{name:uo.getGroupDisplayName(e.group),value:e}:e._account_id?{name:uo.getAccountDisplayName(this._config,e),value:{account:e,count:1}}:void 0}}var Zr,Qr;function el(){return Zr.apply(null,arguments)}function tl(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function nl(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function il(e){return void 0===e}function sl(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function al(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function ol(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function rl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ll(e,t){for(var n in t)rl(t,n)&&(e[n]=t[n]);return rl(t,"toString")&&(e.toString=t.toString),rl(t,"valueOf")&&(e.valueOf=t.valueOf),e}function cl(e,t,n,i){return yd(e,t,n,i,!0).utc()}function dl(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function hl(e){if(null==e._isValid){var t=dl(e),n=Qr.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function pl(e){var t=cl(NaN);return null!=e?ll(dl(t),e):dl(t).userInvalidated=!0,t}Qr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var ul=el.momentProperties=[];function ml(e,t){var n,i,s;if(il(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),il(t._i)||(e._i=t._i),il(t._f)||(e._f=t._f),il(t._l)||(e._l=t._l),il(t._strict)||(e._strict=t._strict),il(t._tzm)||(e._tzm=t._tzm),il(t._isUTC)||(e._isUTC=t._isUTC),il(t._offset)||(e._offset=t._offset),il(t._pf)||(e._pf=dl(t)),il(t._locale)||(e._locale=t._locale),ul.length>0)for(n=0;n<ul.length;n++)il(s=t[i=ul[n]])||(e[i]=s);return e}var gl=!1;function _l(e){ml(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===gl&&(gl=!0,el.updateOffset(this),gl=!1)}function fl(e){return e instanceof _l||null!=e&&null!=e._isAMomentObject}function bl(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function vl(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=bl(t)),n}function yl(e,t,n){var i,s=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(i=0;i<s;i++)(n&&e[i]!==t[i]||!n&&vl(e[i])!==vl(t[i]))&&o++;return o+a}function wl(e){!1===el.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function Cl(e,t){var n=!0;return ll((function(){if(null!=el.deprecationHandler&&el.deprecationHandler(null,e),n){for(var i,s=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var o in i+="\n["+a+"] ",arguments[0])i+=o+": "+arguments[0][o]+", ";i=i.slice(0,-2)}else i=arguments[a];s.push(i)}wl(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var El,Sl={};function xl(e,t){null!=el.deprecationHandler&&el.deprecationHandler(e,t),Sl[e]||(wl(t),Sl[e]=!0)}function Al(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function Pl(e,t){var n,i=ll({},e);for(n in t)rl(t,n)&&(nl(e[n])&&nl(t[n])?(i[n]={},ll(i[n],e[n]),ll(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)rl(e,n)&&!rl(t,n)&&nl(e[n])&&(i[n]=ll({},i[n]));return i}function kl(e){null!=e&&this.set(e)}el.suppressDeprecationWarnings=!1,el.deprecationHandler=null,El=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)rl(e,t)&&n.push(t);return n};var Tl={};function Il(e,t){var n=e.toLowerCase();Tl[n]=Tl[n+"s"]=Tl[t]=e}function Rl(e){return"string"==typeof e?Tl[e]||Tl[e.toLowerCase()]:void 0}function Ll(e){var t,n,i={};for(n in e)rl(e,n)&&(t=Rl(n))&&(i[t]=e[n]);return i}var Dl={};function Ol(e,t){Dl[e]=t}function Nl(e,t,n){var i=""+Math.abs(e),s=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var Ml=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$l=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bl={},Fl={};function Ul(e,t,n,i){var s=i;"string"==typeof i&&(s=function(){return this[i]()}),e&&(Fl[e]=s),t&&(Fl[t[0]]=function(){return Nl(s.apply(this,arguments),t[1],t[2])}),n&&(Fl[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function Hl(e,t){return e.isValid()?(t=jl(t,e.localeData()),Bl[t]=Bl[t]||function(e){var t,n,i,s=e.match(Ml);for(t=0,n=s.length;t<n;t++)Fl[s[t]]?s[t]=Fl[s[t]]:s[t]=(i=s[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,a="";for(i=0;i<n;i++)a+=Al(s[i])?s[i].call(t,e):s[i];return a}}(t),Bl[t](e)):e.localeData().invalidDate()}function jl(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for($l.lastIndex=0;n>=0&&$l.test(e);)e=e.replace($l,i),$l.lastIndex=0,n-=1;return e}var Gl=/\d/,Vl=/\d\d/,zl=/\d{3}/,Wl=/\d{4}/,ql=/[+-]?\d{6}/,Kl=/\d\d?/,Yl=/\d\d\d\d?/,Xl=/\d\d\d\d\d\d?/,Jl=/\d{1,3}/,Zl=/\d{1,4}/,Ql=/[+-]?\d{1,6}/,ec=/\d+/,tc=/[+-]?\d+/,nc=/Z|[+-]\d\d:?\d\d/gi,ic=/Z|[+-]\d\d(?::?\d\d)?/gi,sc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ac={};function oc(e,t,n){ac[e]=Al(t)?t:function(e,i){return e&&n?n:t}}function rc(e,t){return rl(ac,e)?ac[e](t._strict,t._locale):new RegExp(lc(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,s){return t||n||i||s}))))}function lc(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var cc={};function dc(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),sl(t)&&(i=function(e,n){n[t]=vl(e)}),n=0;n<e.length;n++)cc[e[n]]=i}function hc(e,t){dc(e,(function(e,n,i,s){i._w=i._w||{},t(e,i._w,i,s)}))}function pc(e,t,n){null!=t&&rl(cc,e)&&cc[e](t,n._a,n,e)}function uc(e){return mc(e)?366:365}function mc(e){return e%4==0&&e%100!=0||e%400==0}Ul("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),Ul(0,["YY",2],0,(function(){return this.year()%100})),Ul(0,["YYYY",4],0,"year"),Ul(0,["YYYYY",5],0,"year"),Ul(0,["YYYYYY",6,!0],0,"year"),Il("year","y"),Ol("year",1),oc("Y",tc),oc("YY",Kl,Vl),oc("YYYY",Zl,Wl),oc("YYYYY",Ql,ql),oc("YYYYYY",Ql,ql),dc(["YYYYY","YYYYYY"],0),dc("YYYY",(function(e,t){t[0]=2===e.length?el.parseTwoDigitYear(e):vl(e)})),dc("YY",(function(e,t){t[0]=el.parseTwoDigitYear(e)})),dc("Y",(function(e,t){t[0]=parseInt(e,10)})),el.parseTwoDigitYear=function(e){return vl(e)+(vl(e)>68?1900:2e3)};var gc,_c=fc("FullYear",!0);function fc(e,t){return function(n){return null!=n?(vc(this,e,n),el.updateOffset(this,t),this):bc(this,e)}}function bc(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function vc(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&mc(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),yc(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function yc(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?mc(e)?29:28:31-i%7%2}gc=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},Ul("M",["MM",2],"Mo",(function(){return this.month()+1})),Ul("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),Ul("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),Il("month","M"),Ol("month",8),oc("M",Kl),oc("MM",Kl,Vl),oc("MMM",(function(e,t){return t.monthsShortRegex(e)})),oc("MMMM",(function(e,t){return t.monthsRegex(e)})),dc(["M","MM"],(function(e,t){t[1]=vl(e)-1})),dc(["MMM","MMMM"],(function(e,t,n,i){var s=n._locale.monthsParse(e,i,n._strict);null!=s?t[1]=s:dl(n).invalidMonth=e}));var wc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Cc="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Ec="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Sc(e,t,n){var i,s,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=cl([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=gc.call(this._shortMonthsParse,o))?s:null:-1!==(s=gc.call(this._longMonthsParse,o))?s:null:"MMM"===t?-1!==(s=gc.call(this._shortMonthsParse,o))?s:-1!==(s=gc.call(this._longMonthsParse,o))?s:null:-1!==(s=gc.call(this._longMonthsParse,o))?s:-1!==(s=gc.call(this._shortMonthsParse,o))?s:null}function xc(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=vl(t);else if(!sl(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),yc(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ac(e){return null!=e?(xc(this,e),el.updateOffset(this,!0),this):bc(this,"Month")}var Pc=sc;var kc=sc;function Tc(){function e(e,t){return t.length-e.length}var t,n,i=[],s=[],a=[];for(t=0;t<12;t++)n=cl([2e3,t]),i.push(this.monthsShort(n,"")),s.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),s.sort(e),a.sort(e),t=0;t<12;t++)i[t]=lc(i[t]),s[t]=lc(s[t]);for(t=0;t<24;t++)a[t]=lc(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ic(e,t,n,i,s,a,o){var r;return e<100&&e>=0?(r=new Date(e+400,t,n,i,s,a,o),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,n,i,s,a,o),r}function Rc(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Lc(e,t,n){var i=7+t-n;return-((7+Rc(e,0,i).getUTCDay()-t)%7)+i-1}function Dc(e,t,n,i,s){var a,o,r=1+7*(t-1)+(7+n-i)%7+Lc(e,i,s);return r<=0?o=uc(a=e-1)+r:r>uc(e)?(a=e+1,o=r-uc(e)):(a=e,o=r),{year:a,dayOfYear:o}}function Oc(e,t,n){var i,s,a=Lc(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?i=o+Nc(s=e.year()-1,t,n):o>Nc(e.year(),t,n)?(i=o-Nc(e.year(),t,n),s=e.year()+1):(s=e.year(),i=o),{week:i,year:s}}function Nc(e,t,n){var i=Lc(e,t,n),s=Lc(e+1,t,n);return(uc(e)-i+s)/7}Ul("w",["ww",2],"wo","week"),Ul("W",["WW",2],"Wo","isoWeek"),Il("week","w"),Il("isoWeek","W"),Ol("week",5),Ol("isoWeek",5),oc("w",Kl),oc("ww",Kl,Vl),oc("W",Kl),oc("WW",Kl,Vl),hc(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=vl(e)}));function Mc(e,t){return e.slice(t,7).concat(e.slice(0,t))}Ul("d",0,"do","day"),Ul("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),Ul("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),Ul("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),Ul("e",0,0,"weekday"),Ul("E",0,0,"isoWeekday"),Il("day","d"),Il("weekday","e"),Il("isoWeekday","E"),Ol("day",11),Ol("weekday",11),Ol("isoWeekday",11),oc("d",Kl),oc("e",Kl),oc("E",Kl),oc("dd",(function(e,t){return t.weekdaysMinRegex(e)})),oc("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),oc("dddd",(function(e,t){return t.weekdaysRegex(e)})),hc(["dd","ddd","dddd"],(function(e,t,n,i){var s=n._locale.weekdaysParse(e,i,n._strict);null!=s?t.d=s:dl(n).invalidWeekday=e})),hc(["d","e","E"],(function(e,t,n,i){t[i]=vl(e)}));var $c="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Bc="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Fc="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Uc(e,t,n){var i,s,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=cl([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=gc.call(this._weekdaysParse,o))?s:null:"ddd"===t?-1!==(s=gc.call(this._shortWeekdaysParse,o))?s:null:-1!==(s=gc.call(this._minWeekdaysParse,o))?s:null:"dddd"===t?-1!==(s=gc.call(this._weekdaysParse,o))?s:-1!==(s=gc.call(this._shortWeekdaysParse,o))?s:-1!==(s=gc.call(this._minWeekdaysParse,o))?s:null:"ddd"===t?-1!==(s=gc.call(this._shortWeekdaysParse,o))?s:-1!==(s=gc.call(this._weekdaysParse,o))?s:-1!==(s=gc.call(this._minWeekdaysParse,o))?s:null:-1!==(s=gc.call(this._minWeekdaysParse,o))?s:-1!==(s=gc.call(this._weekdaysParse,o))?s:-1!==(s=gc.call(this._shortWeekdaysParse,o))?s:null}var Hc=sc;var jc=sc;var Gc=sc;function Vc(){function e(e,t){return t.length-e.length}var t,n,i,s,a,o=[],r=[],l=[],c=[];for(t=0;t<7;t++)n=cl([2e3,1]).day(t),i=this.weekdaysMin(n,""),s=this.weekdaysShort(n,""),a=this.weekdays(n,""),o.push(i),r.push(s),l.push(a),c.push(i),c.push(s),c.push(a);for(o.sort(e),r.sort(e),l.sort(e),c.sort(e),t=0;t<7;t++)r[t]=lc(r[t]),l[t]=lc(l[t]),c[t]=lc(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function zc(){return this.hours()%12||12}function Wc(e,t){Ul(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function qc(e,t){return t._meridiemParse}Ul("H",["HH",2],0,"hour"),Ul("h",["hh",2],0,zc),Ul("k",["kk",2],0,(function(){return this.hours()||24})),Ul("hmm",0,0,(function(){return""+zc.apply(this)+Nl(this.minutes(),2)})),Ul("hmmss",0,0,(function(){return""+zc.apply(this)+Nl(this.minutes(),2)+Nl(this.seconds(),2)})),Ul("Hmm",0,0,(function(){return""+this.hours()+Nl(this.minutes(),2)})),Ul("Hmmss",0,0,(function(){return""+this.hours()+Nl(this.minutes(),2)+Nl(this.seconds(),2)})),Wc("a",!0),Wc("A",!1),Il("hour","h"),Ol("hour",13),oc("a",qc),oc("A",qc),oc("H",Kl),oc("h",Kl),oc("k",Kl),oc("HH",Kl,Vl),oc("hh",Kl,Vl),oc("kk",Kl,Vl),oc("hmm",Yl),oc("hmmss",Xl),oc("Hmm",Yl),oc("Hmmss",Xl),dc(["H","HH"],3),dc(["k","kk"],(function(e,t,n){var i=vl(e);t[3]=24===i?0:i})),dc(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),dc(["h","hh"],(function(e,t,n){t[3]=vl(e),dl(n).bigHour=!0})),dc("hmm",(function(e,t,n){var i=e.length-2;t[3]=vl(e.substr(0,i)),t[4]=vl(e.substr(i)),dl(n).bigHour=!0})),dc("hmmss",(function(e,t,n){var i=e.length-4,s=e.length-2;t[3]=vl(e.substr(0,i)),t[4]=vl(e.substr(i,2)),t[5]=vl(e.substr(s)),dl(n).bigHour=!0})),dc("Hmm",(function(e,t,n){var i=e.length-2;t[3]=vl(e.substr(0,i)),t[4]=vl(e.substr(i))})),dc("Hmmss",(function(e,t,n){var i=e.length-4,s=e.length-2;t[3]=vl(e.substr(0,i)),t[4]=vl(e.substr(i,2)),t[5]=vl(e.substr(s))}));var Kc,Yc=fc("Hours",!0),Xc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Cc,monthsShort:Ec,week:{dow:0,doy:6},weekdays:$c,weekdaysMin:Fc,weekdaysShort:Bc,meridiemParse:/[ap]\.?m?\.?/i},Jc={},Zc={};function Qc(e){return e?e.toLowerCase().replace("_","-"):e}function ed(e){var t=null;if(!Jc[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Kc._abbr,require("./locale/"+e),td(t)}catch(e){}return Jc[e]}function td(e,t){var n;return e&&((n=il(t)?id(e):nd(e,t))?Kc=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Kc._abbr}function nd(e,t){if(null!==t){var n,i=Xc;if(t.abbr=e,null!=Jc[e])xl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Jc[e]._config;else if(null!=t.parentLocale)if(null!=Jc[t.parentLocale])i=Jc[t.parentLocale]._config;else{if(null==(n=ed(t.parentLocale)))return Zc[t.parentLocale]||(Zc[t.parentLocale]=[]),Zc[t.parentLocale].push({name:e,config:t}),null;i=n._config}return Jc[e]=new kl(Pl(i,t)),Zc[e]&&Zc[e].forEach((function(e){nd(e.name,e.config)})),td(e),Jc[e]}return delete Jc[e],null}function id(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Kc;if(!tl(e)){if(t=ed(e))return t;e=[e]}return function(e){for(var t,n,i,s,a=0;a<e.length;){for(t=(s=Qc(e[a]).split("-")).length,n=(n=Qc(e[a+1]))?n.split("-"):null;t>0;){if(i=ed(s.slice(0,t).join("-")))return i;if(n&&n.length>=t&&yl(s,n,!0)>=t-1)break;t--}a++}return Kc}(e)}function sd(e){var t,n=e._a;return n&&-2===dl(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>yc(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,dl(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),dl(e)._overflowWeeks&&-1===t&&(t=7),dl(e)._overflowWeekday&&-1===t&&(t=8),dl(e).overflow=t),e}function ad(e,t,n){return null!=e?e:null!=t?t:n}function od(e){var t,n,i,s,a,o=[];if(!e._d){for(i=function(e){var t=new Date(el.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,i,s,a,o,r,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,o=4,n=ad(t.GG,e._a[0],Oc(wd(),1,4).year),i=ad(t.W,1),((s=ad(t.E,1))<1||s>7)&&(l=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var c=Oc(wd(),a,o);n=ad(t.gg,e._a[0],c.year),i=ad(t.w,c.week),null!=t.d?((s=t.d)<0||s>6)&&(l=!0):null!=t.e?(s=t.e+a,(t.e<0||t.e>6)&&(l=!0)):s=a}i<1||i>Nc(n,a,o)?dl(e)._overflowWeeks=!0:null!=l?dl(e)._overflowWeekday=!0:(r=Dc(n,i,s,a,o),e._a[0]=r.year,e._dayOfYear=r.dayOfYear)}(e),null!=e._dayOfYear&&(a=ad(e._a[0],i[0]),(e._dayOfYear>uc(a)||0===e._dayOfYear)&&(dl(e)._overflowDayOfYear=!0),n=Rc(a,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Rc:Ic).apply(null,o),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(dl(e).weekdayMismatch=!0)}}var rd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ld=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cd=/Z|[+-]\d\d(?::?\d\d)?/,dd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],hd=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pd=/^\/?Date\((\-?\d+)/i;function ud(e){var t,n,i,s,a,o,r=e._i,l=rd.exec(r)||ld.exec(r);if(l){for(dl(e).iso=!0,t=0,n=dd.length;t<n;t++)if(dd[t][1].exec(l[1])){s=dd[t][0],i=!1!==dd[t][2];break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,n=hd.length;t<n;t++)if(hd[t][1].exec(l[3])){a=(l[2]||" ")+hd[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!cd.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=s+(a||"")+(o||""),bd(e)}else e._isValid=!1}var md=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function gd(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var _d={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fd(e){var t,n,i,s,a,o,r,l=md.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){var c=(t=l[4],n=l[3],i=l[2],s=l[5],a=l[6],o=l[7],r=[gd(t),Ec.indexOf(n),parseInt(i,10),parseInt(s,10),parseInt(a,10)],o&&r.push(parseInt(o,10)),r);if(!function(e,t,n){return!e||Bc.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(dl(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],c,e))return;e._a=c,e._tzm=function(e,t,n){if(e)return _d[e];if(t)return 0;var i=parseInt(n,10),s=i%100;return 60*((i-s)/100)+s}(l[8],l[9],l[10]),e._d=Rc.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),dl(e).rfc2822=!0}else e._isValid=!1}function bd(e){if(e._f!==el.ISO_8601)if(e._f!==el.RFC_2822){e._a=[],dl(e).empty=!0;var t,n,i,s,a,o=""+e._i,r=o.length,l=0;for(i=jl(e._f,e._locale).match(Ml)||[],t=0;t<i.length;t++)s=i[t],(n=(o.match(rc(s,e))||[])[0])&&((a=o.substr(0,o.indexOf(n))).length>0&&dl(e).unusedInput.push(a),o=o.slice(o.indexOf(n)+n.length),l+=n.length),Fl[s]?(n?dl(e).empty=!1:dl(e).unusedTokens.push(s),pc(s,n,e)):e._strict&&!n&&dl(e).unusedTokens.push(s);dl(e).charsLeftOver=r-l,o.length>0&&dl(e).unusedInput.push(o),e._a[3]<=12&&!0===dl(e).bigHour&&e._a[3]>0&&(dl(e).bigHour=void 0),dl(e).parsedDateParts=e._a.slice(0),dl(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),od(e),sd(e)}else fd(e);else ud(e)}function vd(e){var t=e._i,n=e._f;return e._locale=e._locale||id(e._l),null===t||void 0===n&&""===t?pl({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),fl(t)?new _l(sd(t)):(al(t)?e._d=t:tl(n)?function(e){var t,n,i,s,a;if(0===e._f.length)return dl(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)a=0,t=ml({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],bd(t),hl(t)&&(a+=dl(t).charsLeftOver,a+=10*dl(t).unusedTokens.length,dl(t).score=a,(null==i||a<i)&&(i=a,n=t));ll(e,n||t)}(e):n?bd(e):function(e){var t=e._i;il(t)?e._d=new Date(el.now()):al(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=pd.exec(e._i);null===t?(ud(e),!1===e._isValid&&(delete e._isValid,fd(e),!1===e._isValid&&(delete e._isValid,el.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):tl(t)?(e._a=ol(t.slice(0),(function(e){return parseInt(e,10)})),od(e)):nl(t)?function(e){if(!e._d){var t=Ll(e._i);e._a=ol([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),od(e)}}(e):sl(t)?e._d=new Date(t):el.createFromInputFallback(e)}(e),hl(e)||(e._d=null),e))}function yd(e,t,n,i,s){var a,o={};return!0!==n&&!1!==n||(i=n,n=void 0),(nl(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||tl(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=n,o._i=e,o._f=t,o._strict=i,(a=new _l(sd(vd(o))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function wd(e,t,n,i){return yd(e,t,n,i,!1)}el.createFromInputFallback=Cl("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),el.ISO_8601=function(){},el.RFC_2822=function(){};var Cd=Cl("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=wd.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:pl()})),Ed=Cl("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=wd.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:pl()}));function Sd(e,t){var n,i;if(1===t.length&&tl(t[0])&&(t=t[0]),!t.length)return wd();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var xd=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ad(e){var t=Ll(e),n=t.year||0,i=t.quarter||0,s=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===gc.call(xd,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<xd.length;++i)if(e[xd[i]]){if(n)return!1;parseFloat(e[xd[i]])!==vl(e[xd[i]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*r*60*60,this._days=+o+7*a,this._months=+s+3*i+12*n,this._data={},this._locale=id(),this._bubble()}function Pd(e){return e instanceof Ad}function kd(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Td(e,t){Ul(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+Nl(~~(e/60),2)+t+Nl(~~e%60,2)}))}Td("Z",":"),Td("ZZ",""),oc("Z",ic),oc("ZZ",ic),dc(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Rd(ic,e)}));var Id=/([\+\-]|\d\d)/gi;function Rd(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Id)||["-",0,0],s=60*i[1]+vl(i[2]);return 0===s?0:"+"===i[0]?s:-s}function Ld(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(fl(e)||al(e)?e.valueOf():wd(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),el.updateOffset(n,!1),n):wd(e).local()}function Dd(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Od(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}el.updateOffset=function(){};var Nd=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Md=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $d(e,t){var n,i,s,a=e,o=null;return Pd(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:sl(e)?(a={},t?a[t]=e:a.milliseconds=e):(o=Nd.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:vl(o[2])*n,h:vl(o[3])*n,m:vl(o[4])*n,s:vl(o[5])*n,ms:vl(kd(1e3*o[6]))*n}):(o=Md.exec(e))?(n="-"===o[1]?-1:1,a={y:Bd(o[2],n),M:Bd(o[3],n),w:Bd(o[4],n),d:Bd(o[5],n),h:Bd(o[6],n),m:Bd(o[7],n),s:Bd(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Ld(t,e),e.isBefore(t)?n=Fd(e,t):((n=Fd(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(wd(a.from),wd(a.to)),(a={}).ms=s.milliseconds,a.M=s.months),i=new Ad(a),Pd(e)&&rl(e,"_locale")&&(i._locale=e._locale),i}function Bd(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Fd(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ud(e,t){return function(n,i){var s;return null===i||isNaN(+i)||(xl(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=i,i=s),Hd(this,$d(n="string"==typeof n?+n:n,i),e),this}}function Hd(e,t,n,i){var s=t._milliseconds,a=kd(t._days),o=kd(t._months);e.isValid()&&(i=null==i||i,o&&xc(e,bc(e,"Month")+o*n),a&&vc(e,"Date",bc(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&el.updateOffset(e,a||o))}$d.fn=Ad.prototype,$d.invalid=function(){return $d(NaN)};var jd=Ud(1,"add"),Gd=Ud(-1,"subtract");function Vd(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function zd(e){var t;return void 0===e?this._locale._abbr:(null!=(t=id(e))&&(this._locale=t),this)}el.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",el.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wd=Cl("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function qd(){return this._locale}function Kd(e,t){return(e%t+t)%t}function Yd(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function Xd(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function Jd(e,t){Ul(0,[e,e.length],0,t)}function Zd(e,t,n,i,s){var a;return null==e?Oc(this,i,s).year:(t>(a=Nc(e,i,s))&&(t=a),Qd.call(this,e,t,n,i,s))}function Qd(e,t,n,i,s){var a=Dc(e,t,n,i,s),o=Rc(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Ul(0,["gg",2],0,(function(){return this.weekYear()%100})),Ul(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Jd("gggg","weekYear"),Jd("ggggg","weekYear"),Jd("GGGG","isoWeekYear"),Jd("GGGGG","isoWeekYear"),Il("weekYear","gg"),Il("isoWeekYear","GG"),Ol("weekYear",1),Ol("isoWeekYear",1),oc("G",tc),oc("g",tc),oc("GG",Kl,Vl),oc("gg",Kl,Vl),oc("GGGG",Zl,Wl),oc("gggg",Zl,Wl),oc("GGGGG",Ql,ql),oc("ggggg",Ql,ql),hc(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=vl(e)})),hc(["gg","GG"],(function(e,t,n,i){t[i]=el.parseTwoDigitYear(e)})),Ul("Q",0,"Qo","quarter"),Il("quarter","Q"),Ol("quarter",7),oc("Q",Gl),dc("Q",(function(e,t){t[1]=3*(vl(e)-1)})),Ul("D",["DD",2],"Do","date"),Il("date","D"),Ol("date",9),oc("D",Kl),oc("DD",Kl,Vl),oc("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),dc(["D","DD"],2),dc("Do",(function(e,t){t[2]=vl(e.match(Kl)[0])}));var eh=fc("Date",!0);Ul("DDD",["DDDD",3],"DDDo","dayOfYear"),Il("dayOfYear","DDD"),Ol("dayOfYear",4),oc("DDD",Jl),oc("DDDD",zl),dc(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=vl(e)})),Ul("m",["mm",2],0,"minute"),Il("minute","m"),Ol("minute",14),oc("m",Kl),oc("mm",Kl,Vl),dc(["m","mm"],4);var th=fc("Minutes",!1);Ul("s",["ss",2],0,"second"),Il("second","s"),Ol("second",15),oc("s",Kl),oc("ss",Kl,Vl),dc(["s","ss"],5);var nh,ih=fc("Seconds",!1);for(Ul("S",0,0,(function(){return~~(this.millisecond()/100)})),Ul(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),Ul(0,["SSS",3],0,"millisecond"),Ul(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),Ul(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),Ul(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),Ul(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),Ul(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),Ul(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Il("millisecond","ms"),Ol("millisecond",16),oc("S",Jl,Gl),oc("SS",Jl,Vl),oc("SSS",Jl,zl),nh="SSSS";nh.length<=9;nh+="S")oc(nh,ec);function sh(e,t){t[6]=vl(1e3*("0."+e))}for(nh="S";nh.length<=9;nh+="S")dc(nh,sh);var ah=fc("Milliseconds",!1);Ul("z",0,0,"zoneAbbr"),Ul("zz",0,0,"zoneName");var oh=_l.prototype;function rh(e){return e}oh.add=jd,oh.calendar=function(e,t){var n=e||wd(),i=Ld(n,this).startOf("day"),s=el.calendarFormat(this,i)||"sameElse",a=t&&(Al(t[s])?t[s].call(this,n):t[s]);return this.format(a||this.localeData().calendar(s,this,wd(n)))},oh.clone=function(){return new _l(this)},oh.diff=function(e,t,n){var i,s,a;if(!this.isValid())return NaN;if(!(i=Ld(e,this)).isValid())return NaN;switch(s=6e4*(i.utcOffset()-this.utcOffset()),t=Rl(t)){case"year":a=Vd(this,i)/12;break;case"month":a=Vd(this,i);break;case"quarter":a=Vd(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-s)/864e5;break;case"week":a=(this-i-s)/6048e5;break;default:a=this-i}return n?a:bl(a)},oh.endOf=function(e){var t;if(void 0===(e=Rl(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?Xd:Yd;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Kd(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Kd(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Kd(t,1e3)-1}return this._d.setTime(t),el.updateOffset(this,!0),this},oh.format=function(e){e||(e=this.isUtc()?el.defaultFormatUtc:el.defaultFormat);var t=Hl(this,e);return this.localeData().postformat(t)},oh.from=function(e,t){return this.isValid()&&(fl(e)&&e.isValid()||wd(e).isValid())?$d({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},oh.fromNow=function(e){return this.from(wd(),e)},oh.to=function(e,t){return this.isValid()&&(fl(e)&&e.isValid()||wd(e).isValid())?$d({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},oh.toNow=function(e){return this.to(wd(),e)},oh.get=function(e){return Al(this[e=Rl(e)])?this[e]():this},oh.invalidAt=function(){return dl(this).overflow},oh.isAfter=function(e,t){var n=fl(e)?e:wd(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Rl(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},oh.isBefore=function(e,t){var n=fl(e)?e:wd(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Rl(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},oh.isBetween=function(e,t,n,i){var s=fl(e)?e:wd(e),a=fl(t)?t:wd(t);return!!(this.isValid()&&s.isValid()&&a.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(s,n):!this.isBefore(s,n))&&(")"===i[1]?this.isBefore(a,n):!this.isAfter(a,n)))},oh.isSame=function(e,t){var n,i=fl(e)?e:wd(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=Rl(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},oh.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},oh.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},oh.isValid=function(){return hl(this)},oh.lang=Wd,oh.locale=zd,oh.localeData=qd,oh.max=Ed,oh.min=Cd,oh.parsingFlags=function(){return ll({},dl(this))},oh.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:Dl[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=Ll(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(Al(this[e=Rl(e)]))return this[e](t);return this},oh.startOf=function(e){var t;if(void 0===(e=Rl(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?Xd:Yd;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Kd(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Kd(t,6e4);break;case"second":t=this._d.valueOf(),t-=Kd(t,1e3)}return this._d.setTime(t),el.updateOffset(this,!0),this},oh.subtract=Gd,oh.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},oh.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},oh.toDate=function(){return new Date(this.valueOf())},oh.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Hl(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Al(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Hl(n,"Z")):Hl(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},oh.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+s)},oh.toJSON=function(){return this.isValid()?this.toISOString():null},oh.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},oh.unix=function(){return Math.floor(this.valueOf()/1e3)},oh.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},oh.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},oh.year=_c,oh.isLeapYear=function(){return mc(this.year())},oh.weekYear=function(e){return Zd.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},oh.isoWeekYear=function(e){return Zd.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},oh.quarter=oh.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},oh.month=Ac,oh.daysInMonth=function(){return yc(this.year(),this.month())},oh.week=oh.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},oh.isoWeek=oh.isoWeeks=function(e){var t=Oc(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},oh.weeksInYear=function(){var e=this.localeData()._week;return Nc(this.year(),e.dow,e.doy)},oh.isoWeeksInYear=function(){return Nc(this.year(),1,4)},oh.date=eh,oh.day=oh.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},oh.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},oh.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},oh.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},oh.hour=oh.hours=Yc,oh.minute=oh.minutes=th,oh.second=oh.seconds=ih,oh.millisecond=oh.milliseconds=ah,oh.utcOffset=function(e,t,n){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Rd(ic,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Dd(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Hd(this,$d(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,el.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:Dd(this)},oh.utc=function(e){return this.utcOffset(0,e)},oh.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Dd(this),"m")),this},oh.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Rd(nc,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},oh.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?wd(e).utcOffset():0,(this.utcOffset()-e)%60==0)},oh.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},oh.isLocal=function(){return!!this.isValid()&&!this._isUTC},oh.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},oh.isUtc=Od,oh.isUTC=Od,oh.zoneAbbr=function(){return this._isUTC?"UTC":""},oh.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},oh.dates=Cl("dates accessor is deprecated. Use date instead.",eh),oh.months=Cl("months accessor is deprecated. Use month instead",Ac),oh.years=Cl("years accessor is deprecated. Use year instead",_c),oh.zone=Cl("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),oh.isDSTShifted=Cl("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!il(this._isDSTShifted))return this._isDSTShifted;var e={};if(ml(e,this),(e=vd(e))._a){var t=e._isUTC?cl(e._a):wd(e._a);this._isDSTShifted=this.isValid()&&yl(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var lh=kl.prototype;function ch(e,t,n,i){var s=id(),a=cl().set(i,t);return s[n](a,e)}function dh(e,t,n){if(sl(e)&&(t=e,e=void 0),e=e||"",null!=t)return ch(e,t,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=ch(e,i,n,"month");return s}function hh(e,t,n,i){"boolean"==typeof e?(sl(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,sl(t)&&(n=t,t=void 0),t=t||"");var s,a=id(),o=e?a._week.dow:0;if(null!=n)return ch(t,(n+o)%7,i,"day");var r=[];for(s=0;s<7;s++)r[s]=ch(t,(s+o)%7,i,"day");return r}lh.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return Al(i)?i.call(t,n):i},lh.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},lh.invalidDate=function(){return this._invalidDate},lh.ordinal=function(e){return this._ordinal.replace("%d",e)},lh.preparse=rh,lh.postformat=rh,lh.relativeTime=function(e,t,n,i){var s=this._relativeTime[n];return Al(s)?s(e,t,n,i):s.replace(/%d/i,e)},lh.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return Al(n)?n(t):n.replace(/%s/i,t)},lh.set=function(e){var t,n;for(n in e)Al(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},lh.months=function(e,t){return e?tl(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||wc).test(t)?"format":"standalone"][e.month()]:tl(this._months)?this._months:this._months.standalone},lh.monthsShort=function(e,t){return e?tl(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[wc.test(t)?"format":"standalone"][e.month()]:tl(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},lh.monthsParse=function(e,t,n){var i,s,a;if(this._monthsParseExact)return Sc.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=cl([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},lh.monthsRegex=function(e){return this._monthsParseExact?(rl(this,"_monthsRegex")||Tc.call(this),e?this._monthsStrictRegex:this._monthsRegex):(rl(this,"_monthsRegex")||(this._monthsRegex=kc),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},lh.monthsShortRegex=function(e){return this._monthsParseExact?(rl(this,"_monthsRegex")||Tc.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(rl(this,"_monthsShortRegex")||(this._monthsShortRegex=Pc),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},lh.week=function(e){return Oc(e,this._week.dow,this._week.doy).week},lh.firstDayOfYear=function(){return this._week.doy},lh.firstDayOfWeek=function(){return this._week.dow},lh.weekdays=function(e,t){var n=tl(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Mc(n,this._week.dow):e?n[e.day()]:n},lh.weekdaysMin=function(e){return!0===e?Mc(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},lh.weekdaysShort=function(e){return!0===e?Mc(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},lh.weekdaysParse=function(e,t,n){var i,s,a;if(this._weekdaysParseExact)return Uc.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=cl([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},lh.weekdaysRegex=function(e){return this._weekdaysParseExact?(rl(this,"_weekdaysRegex")||Vc.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(rl(this,"_weekdaysRegex")||(this._weekdaysRegex=Hc),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},lh.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(rl(this,"_weekdaysRegex")||Vc.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(rl(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jc),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},lh.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(rl(this,"_weekdaysRegex")||Vc.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(rl(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Gc),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},lh.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},lh.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},td("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===vl(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),el.lang=Cl("moment.lang is deprecated. Use moment.locale instead.",td),el.langData=Cl("moment.langData is deprecated. Use moment.localeData instead.",id);var ph=Math.abs;function uh(e,t,n,i){var s=$d(t,n);return e._milliseconds+=i*s._milliseconds,e._days+=i*s._days,e._months+=i*s._months,e._bubble()}function mh(e){return e<0?Math.floor(e):Math.ceil(e)}function gh(e){return 4800*e/146097}function _h(e){return 146097*e/4800}function fh(e){return function(){return this.as(e)}}var bh=fh("ms"),vh=fh("s"),yh=fh("m"),wh=fh("h"),Ch=fh("d"),Eh=fh("w"),Sh=fh("M"),xh=fh("Q"),Ah=fh("y");function Ph(e){return function(){return this.isValid()?this._data[e]:NaN}}var kh=Ph("milliseconds"),Th=Ph("seconds"),Ih=Ph("minutes"),Rh=Ph("hours"),Lh=Ph("days"),Dh=Ph("months"),Oh=Ph("years");var Nh=Math.round,Mh={ss:44,s:45,m:45,h:22,d:26,M:11};function $h(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}var Bh=Math.abs;function Fh(e){return(e>0)-(e<0)||+e}function Uh(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Bh(this._milliseconds)/1e3,i=Bh(this._days),s=Bh(this._months);e=bl(n/60),t=bl(e/60),n%=60,e%=60;var a=bl(s/12),o=s%=12,r=i,l=t,c=e,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var p=h<0?"-":"",u=Fh(this._months)!==Fh(h)?"-":"",m=Fh(this._days)!==Fh(h)?"-":"",g=Fh(this._milliseconds)!==Fh(h)?"-":"";return p+"P"+(a?u+a+"Y":"")+(o?u+o+"M":"")+(r?m+r+"D":"")+(l||c||d?"T":"")+(l?g+l+"H":"")+(c?g+c+"M":"")+(d?g+d+"S":"")}var Hh=Ad.prototype;Hh.isValid=function(){return this._isValid},Hh.abs=function(){var e=this._data;return this._milliseconds=ph(this._milliseconds),this._days=ph(this._days),this._months=ph(this._months),e.milliseconds=ph(e.milliseconds),e.seconds=ph(e.seconds),e.minutes=ph(e.minutes),e.hours=ph(e.hours),e.months=ph(e.months),e.years=ph(e.years),this},Hh.add=function(e,t){return uh(this,e,t,1)},Hh.subtract=function(e,t){return uh(this,e,t,-1)},Hh.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=Rl(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+gh(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(_h(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Hh.asMilliseconds=bh,Hh.asSeconds=vh,Hh.asMinutes=yh,Hh.asHours=wh,Hh.asDays=Ch,Hh.asWeeks=Eh,Hh.asMonths=Sh,Hh.asQuarters=xh,Hh.asYears=Ah,Hh.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*vl(this._months/12):NaN},Hh._bubble=function(){var e,t,n,i,s,a=this._milliseconds,o=this._days,r=this._months,l=this._data;return a>=0&&o>=0&&r>=0||a<=0&&o<=0&&r<=0||(a+=864e5*mh(_h(r)+o),o=0,r=0),l.milliseconds=a%1e3,e=bl(a/1e3),l.seconds=e%60,t=bl(e/60),l.minutes=t%60,n=bl(t/60),l.hours=n%24,o+=bl(n/24),r+=s=bl(gh(o)),o-=mh(_h(s)),i=bl(r/12),r%=12,l.days=o,l.months=r,l.years=i,this},Hh.clone=function(){return $d(this)},Hh.get=function(e){return e=Rl(e),this.isValid()?this[e+"s"]():NaN},Hh.milliseconds=kh,Hh.seconds=Th,Hh.minutes=Ih,Hh.hours=Rh,Hh.days=Lh,Hh.weeks=function(){return bl(this.days()/7)},Hh.months=Dh,Hh.years=Oh,Hh.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var i=$d(e).abs(),s=Nh(i.as("s")),a=Nh(i.as("m")),o=Nh(i.as("h")),r=Nh(i.as("d")),l=Nh(i.as("M")),c=Nh(i.as("y")),d=s<=Mh.ss&&["s",s]||s<Mh.s&&["ss",s]||a<=1&&["m"]||a<Mh.m&&["mm",a]||o<=1&&["h"]||o<Mh.h&&["hh",o]||r<=1&&["d"]||r<Mh.d&&["dd",r]||l<=1&&["M"]||l<Mh.M&&["MM",l]||c<=1&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=n,$h.apply(null,d)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Hh.toISOString=Uh,Hh.toString=Uh,Hh.toJSON=Uh,Hh.locale=zd,Hh.localeData=qd,Hh.toIsoString=Cl("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Uh),Hh.lang=Wd,Ul("X",0,0,"unix"),Ul("x",0,0,"valueOf"),oc("x",tc),oc("X",/[+-]?\d+(\.\d{1,3})?/),dc("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),dc("x",(function(e,t,n){n._d=new Date(vl(e))})),el.version="2.24.0",Zr=wd,el.fn=oh,el.min=function(){var e=[].slice.call(arguments,0);return Sd("isBefore",e)},el.max=function(){var e=[].slice.call(arguments,0);return Sd("isAfter",e)},el.now=function(){return Date.now?Date.now():+new Date},el.utc=cl,el.unix=function(e){return wd(1e3*e)},el.months=function(e,t){return dh(e,t,"months")},el.isDate=al,el.locale=td,el.invalid=pl,el.duration=$d,el.isMoment=fl,el.weekdays=function(e,t,n){return hh(e,t,n,"weekdays")},el.parseZone=function(){return wd.apply(null,arguments).parseZone()},el.localeData=id,el.isDuration=Pd,el.monthsShort=function(e,t){return dh(e,t,"monthsShort")},el.weekdaysMin=function(e,t,n){return hh(e,t,n,"weekdaysMin")},el.defineLocale=nd,el.updateLocale=function(e,t){if(null!=t){var n,i,s=Xc;null!=(i=ed(e))&&(s=i._config),(n=new kl(t=Pl(s,t))).parentLocale=Jc[e],Jc[e]=n,td(e)}else null!=Jc[e]&&(null!=Jc[e].parentLocale?Jc[e]=Jc[e].parentLocale:null!=Jc[e]&&delete Jc[e]);return Jc[e]},el.locales=function(){return El(Jc)},el.weekdaysShort=function(e,t,n){return hh(e,t,n,"weekdaysShort")},el.normalizeUnits=Rl,el.relativeTimeRounding=function(e){return void 0===e?Nh:"function"==typeof e&&(Nh=e,!0)},el.relativeTimeThreshold=function(e,t){return void 0!==Mh[e]&&(void 0===t?Mh[e]:(Mh[e]=t,"s"===e&&(Mh.ss=t-1),!0))},el.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},el.prototype=oh,el.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var jh=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Gh=np,Vh=Yh,zh=function(e){return Xh(Yh(e))},Wh=Xh,qh=tp,Kh=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Yh(e){for(var t,n=[],i=0,s=0,a="";null!=(t=Kh.exec(e));){var o=t[0],r=t[1],l=t.index;if(a+=e.slice(s,l),s=l+o.length,r)a+=r[1];else{a&&(n.push(a),a="");var c=t[2],d=t[3],h=t[4],p=t[5],u=t[6],m=t[7],g="+"===u||"*"===u,_="?"===u||"*"===u,f=c||"/",b=h||p||(m?".*":"[^"+f+"]+?");n.push({name:d||i++,prefix:c||"",delimiter:f,optional:_,repeat:g,pattern:Zh(b)})}}return s<e.length&&(a+=e.substr(s)),a&&n.push(a),n}function Xh(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^"+e[n].pattern+"$"));return function(n){for(var i="",s=n||{},a=0;a<e.length;a++){var o=e[a];if("string"!=typeof o){var r,l=s[o.name];if(null==l){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to be defined')}if(jh(l)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but received "'+l+'"');if(0===l.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var c=0;c<l.length;c++){if(r=encodeURIComponent(l[c]),!t[a].test(r))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but received "'+r+'"');i+=(0===c?o.prefix:o.delimiter)+r}}else{if(r=encodeURIComponent(l),!t[a].test(r))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but received "'+r+'"');i+=o.prefix+r}}else i+=o}return i}}function Jh(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function Zh(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Qh(e,t){return e.keys=t,e}function ep(e){return e.sensitive?"":"i"}function tp(e,t){for(var n=(t=t||{}).strict,i=!1!==t.end,s="",a=e[e.length-1],o="string"==typeof a&&/\/$/.test(a),r=0;r<e.length;r++){var l=e[r];if("string"==typeof l)s+=Jh(l);else{var c=Jh(l.prefix),d=l.pattern;l.repeat&&(d+="(?:"+c+d+")*"),s+=d=l.optional?c?"(?:"+c+"("+d+"))?":"("+d+")?":c+"("+d+")"}}return n||(s=(o?s.slice(0,-2):s)+"(?:\\/(?=$))?"),s+=i?"$":n&&o?"":"(?=\\/|$)",new RegExp("^"+s,ep(t))}function np(e,t,n){return jh(t=t||[])?n||(n={}):(n=t,t=[]),e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Qh(e,t)}(e,t):jh(e)?function(e,t,n){for(var i=[],s=0;s<e.length;s++)i.push(np(e[s],t,n).source);return Qh(new RegExp("(?:"+i.join("|")+")",ep(n)),t)}(e,t,n):function(e,t,n){for(var i=Yh(e),s=tp(i,n),a=0;a<i.length;a++)"string"!=typeof i[a]&&t.push(i[a]);return Qh(s,t)}(e,t,n)}Gh.parse=Vh,Gh.compile=zh,Gh.tokensToFunction=Wh,Gh.tokensToRegExp=qh;var ip,sp="undefined"!=typeof document,ap="undefined"!=typeof window,op="undefined"!=typeof history,rp="undefined"!=typeof process,lp=sp&&document.ontouchstart?"touchstart":"click",cp=ap&&!(!window.history.location&&!window.location);function dp(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function hp(e,t){if("function"==typeof e)return hp.call(this,"*",e);if("function"==typeof t)for(var n=new mp(e,null,this),i=1;i<arguments.length;++i)this.callbacks.push(n.middleware(arguments[i]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function pp(e){if(!e.handled){var t=this._window;(this._hashbang?cp&&this._getBase()+t.location.hash.replace("#!",""):cp&&t.location.pathname+t.location.search)!==e.canonicalPath&&(this.stop(),e.handled=!1,cp&&(t.location.href=e.canonicalPath))}}function up(e,t,n){var i=this.page=n||hp,s=i._window,a=i._hashbang,o=i._getBase();"/"===e[0]&&0!==e.indexOf(o)&&(e=o+(a?"#!":"")+e);var r=e.indexOf("?");this.canonicalPath=e;var l=new RegExp("^"+o.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=e.replace(l,"")||"/",a&&(this.path=this.path.replace("#!","")||"/"),this.title=sp&&s.document.title,this.state=t||{},this.state.path=e,this.querystring=~r?i._decodeURLEncodedURIComponent(e.slice(r+1)):"",this.pathname=i._decodeURLEncodedURIComponent(~r?e.slice(0,r):e),this.params={},this.hash="",!a){if(!~this.path.indexOf("#"))return;var c=this.path.split("#");this.path=this.pathname=c[0],this.hash=i._decodeURLEncodedURIComponent(c[1])||"",this.querystring=this.querystring.split("#")[0]}}function mp(e,t,n){this.page=n||gp;var i=t||{};i.strict=i.strict||n._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=Gh(this.path,this.keys=[],i)}dp.prototype.configure=function(e){var t=e||{};this._window=t.window||ap&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&ap,this._click=!1!==t.click&&sp,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):ap&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(lp,this.clickHandler,!1):sp&&n.document.removeEventListener(lp,this.clickHandler,!1),this._hashbang&&ap&&!op?n.addEventListener("hashchange",this._onpopstate,!1):ap&&n.removeEventListener("hashchange",this._onpopstate,!1)},dp.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},dp.prototype._getBase=function(){var e=this._base;if(e)return e;var t=ap&&this._window&&this._window.location;return ap&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},dp.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},dp.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,cp){var i=this._window.location;n=this._hashbang&&~i.hash.indexOf("#!")?i.hash.substr(2)+i.search:this._hashbang?i.search+i.hash:i.pathname+i.search+i.hash}this.replace(n,null,!0,t.dispatch)}},dp.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(lp,this.clickHandler,!1),ap&&e.removeEventListener("popstate",this._onpopstate,!1),ap&&e.removeEventListener("hashchange",this._onpopstate,!1)}},dp.prototype.show=function(e,t,n,i){var s=new up(e,t,this),a=this.prevContext;return this.prevContext=s,this.current=s.path,!1!==n&&this.dispatch(s,a),!1!==s.handled&&!1!==i&&s.pushState(),s},dp.prototype.back=function(e,t){var n=this;if(this.len>0){var i=this._window;op&&i.history.back(),this.len--}else e?setTimeout((function(){n.show(e,t)})):setTimeout((function(){n.show(n._getBase(),t)}))},dp.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&hp.call(this,e,(function(e){setTimeout((function(){n.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){n.replace(e)}),0)},dp.prototype.replace=function(e,t,n,i){var s=new up(e,t,this),a=this.prevContext;return this.prevContext=s,this.current=s.path,s.init=n,s.save(),!1!==i&&this.dispatch(s,a),s},dp.prototype.dispatch=function(e,t){var n=0,i=0,s=this;function a(){var t=s.callbacks[n++];if(e.path===s.current)return t?void t(e,a):pp.call(s,e);e.handled=!1}t?function e(){var n=s.exits[i++];if(!n)return a();n(t,e)}():a()},dp.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new mp(e,null,this),i=1;i<arguments.length;++i)this.exits.push(n.middleware(arguments[i]))},dp.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var i=0;i<n.length;i++)if(n[i].nodeName&&"A"===n[i].nodeName.toUpperCase()&&n[i].href){t=n[i];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var s="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var a=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==a)&&!(a&&a.indexOf("mailto:")>-1)&&(s?!t.target.baseVal:!t.target)&&(s||this.sameOrigin(t.href))){var o=s?t.href.baseVal:t.pathname+t.search+(t.hash||"");o="/"!==o[0]?"/"+o:o,rp&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var r=o,l=this._getBase();0===o.indexOf(l)&&(o=o.substr(l.length)),this._hashbang&&(o=o.replace("#!","")),(!l||r!==o||cp&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(r))}}}}},dp.prototype._onpopstate=(ip=!1,ap?(sp&&"complete"===document.readyState?ip=!0:window.addEventListener("load",(function(){setTimeout((function(){ip=!0}),0)})),function(e){if(ip)if(e.state){var t=e.state.path;this.replace(t,e.state)}else if(cp){var n=this._window.location;this.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}):function(){}),dp.prototype._which=function(e){return null==(e=e||ap&&this._window.event).which?e.button:e.which},dp.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&cp)return new URL(e,t.location.toString());if(sp){var n=t.document.createElement("a");return n.href=e,n}},dp.prototype.sameOrigin=function(e){if(!e||!cp)return!1;var t=this._toURL(e),n=this._window.location;return n.protocol===t.protocol&&n.hostname===t.hostname&&n.port===t.port},dp.prototype._samePath=function(e){if(!cp)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},dp.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},up.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,op&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},up.prototype.save=function(){var e=this.page;op&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},mp.prototype.middleware=function(e){var t=this;return function(n,i){if(t.match(n.path,n.params))return e(n,i);i()}},mp.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),s=~i?e.slice(0,i):e,a=this.regexp.exec(decodeURIComponent(s));if(!a)return!1;for(var o=1,r=a.length;o<r;++o){var l=n[o-1],c=this.page._decodeURLEncodedURIComponent(a[o]);void 0===c&&hasOwnProperty.call(t,l.name)||(t[l.name]=c)}return!0};var gp=function e(){var t=new dp;function n(){return hp.apply(t,arguments)}return n.callbacks=t.callbacks,n.exits=t.exits,n.base=t.base.bind(t),n.strict=t.strict.bind(t),n.start=t.start.bind(t),n.stop=t.stop.bind(t),n.show=t.show.bind(t),n.back=t.back.bind(t),n.redirect=t.redirect.bind(t),n.replace=t.replace.bind(t),n.dispatch=t.dispatch.bind(t),n.exit=t.exit.bind(t),n.configure=t.configure.bind(t),n.sameOrigin=t.sameOrigin.bind(t),n.clickHandler=t.clickHandler.bind(t),n.create=e,Object.defineProperty(n,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(n,"current",{get:function(){return t.current},set:function(e){t.current=e}}),n.Context=up,n.Route=mp,n}(),_p=gp,fp=gp;_p.default=fp;
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bp{constructor(){this._listenersMap=new Map}addListener(e,t){if(!e||!t)return void console.warn("A valid eventname and callback is required!");const n=this._listenersMap.get(e)||[];return n.push(t),this._listenersMap.set(e,n),()=>{this.off(e,t)}}on(e,t){return this.addListener(e,t)}once(e,t){const n=(...i)=>{t(...i),this.off(e,n)};return this.on(e,n)}removeListener(e,t){let n=this._listenersMap.get(e)||[];n=n.filter(e=>e!==t),this._listenersMap.set(e,n)}off(e,t){this.removeListener(e,t)}emit(e,t){const n=this._listenersMap.get(e)||[];for(const e of n)try{e(t)}catch(e){console.error(e)}return 0!==n.length}dispatch(e,t){return this.emit(e,t)}removeAllListeners(e){e?this._listenersMap.set(e,[]):this._listenersMap=new Map}}
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=new bp;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this._type=null,this._cachedTokenPromise=null,this._defaultOptions={},this._retriesLeft=2,this._status=yp.STATUS.UNDETERMINED,this._authCheckPromise=null,this._last_auth_check_time=Date.now()}get baseUrl(){return Go.getBaseUrl()}authCheck(){return(!this._authCheckPromise||Date.now()-this._last_auth_check_time>3e4)&&(this._authCheckPromise=fetch(`${this.baseUrl}/auth-check`),this._last_auth_check_time=Date.now()),this._authCheckPromise.then(e=>204===e.status?(this._setStatus(yp.STATUS.AUTHED),!0):(this._setStatus(yp.STATUS.NOT_AUTHED),!1)).catch(e=>(this._setStatus(yp.STATUS.ERROR),this._authCheckPromise=null,!1))}clearCache(){this._authCheckPromise=null}_setStatus(e){this._status!==e&&(this._status===yp.STATUS.AUTHED&&vp.emit("auth-error",{message:yp.CREDS_EXPIRED_MSG,action:"Refresh credentials"}),this._status=e)}get status(){return this._status}get isAuthed(){return this._status===yp.STATUS.AUTHED}_getToken(){return Promise.resolve(this._cachedTokenPromise)}setup(e,t){if(this._retriesLeft=2,e&&(this._type=yp.TYPE.ACCESS_TOKEN,this._cachedTokenPromise=null,this._getToken=e),this._defaultOptions={},t)for(const e of["credentials"])this._defaultOptions[e]=t[e]}fetch(e,t){const n=Object.assign({headers:new Headers},this._defaultOptions,t);return this._type===yp.TYPE.ACCESS_TOKEN?this._getAccessToken().then(t=>this._fetchWithAccessToken(e,n,t)):this._fetchWithXsrfToken(e,n)}_getCookie(e){const t=e+"=";let n="";return document.cookie.split(";").some(e=>{if((e=e.trim()).startsWith(t))return n=e.substring(t.length),!0}),n}_isTokenValid(e){if(!e)return!1;if(!e.access_token||!e.expires_at)return!1;const t=new Date(1e3*parseInt(e.expires_at,10));return!(Date.now()>=t.getTime())}_fetchWithXsrfToken(e,t){if(t.method&&"GET"!==t.method){const e=this._getCookie("XSRF_TOKEN");e&&t.headers.append("X-Gerrit-Auth",e)}return t.credentials="same-origin",fetch(e,t)}_getAccessToken(){return this._cachedTokenPromise||(this._cachedTokenPromise=this._getToken()),this._cachedTokenPromise.then(e=>this._isTokenValid(e)?(this._retriesLeft=2,e.access_token):this._retriesLeft>0?(this._retriesLeft--,this._cachedTokenPromise=null,this._getAccessToken()):null)}_fetchWithAccessToken(e,t,n){const i=[];if(n){i.push(`access_token=${n}`);const t=this.baseUrl,s=t?e.substring(e.indexOf(t)+t.length):e;s.startsWith("/a/")||(e=e.replace(s,"/a"+s))}const s=t.method||"GET";let a=t.headers.get("Content-Type");return!a&&t.body&&(a="application/json"),"GET"!==s&&(t.method="POST",i.push(`$m=${s}`),a||(a="text/plain")),a&&(t.headers.set("Content-Type","text/plain"),i.push(`$ct=${encodeURIComponent(a)}`)),i.length&&(e=e+(-1===e.indexOf("?")?"?":"&")+i.join("&")),fetch(e,t)}}yp.TYPE={XSRF_TOKEN:"xsrf_token",ACCESS_TOKEN:"access_token"},yp.STATUS={UNDETERMINED:0,AUTHED:1,NOT_AUTHED:2,ERROR:3},yp.CREDS_EXPIRED_MSG="Credentials expired.";const wp=new yp;
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Cp(e){this.plugin=e,e.on("admin-menu-links",this),this._menuLinks=[]}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ep(e,t,n,i,s,a){this._contentEl=e,this._lineNumberEl=t,this.line=n,this.path=i,this.changeNum=parseInt(s),this.patchNum=parseInt(a)}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Sp(e){this.plugin=e,e.on("annotatediff",this),this._annotationLayers=[],this._coverageProvider=null,this._addLayerFunc=e=>{}}function xp(e,t,n,i){this._path=e,this._changeNum=t,this._patchNum=n,this._addLayerFunc=i,this._listeners=[]}window.Gerrit=window.Gerrit||{},window.Gerrit.Auth=wp,Cp.prototype.addMenuLink=function(e,t,n){this._menuLinks.push({text:e,url:t,capability:n||null})},Cp.prototype.getMenuLinks=function(){return this._menuLinks.slice(0)},Ep.prototype.annotateRange=function(e,t,n,i){this._contentEl&&this._contentEl.getAttribute("data-side")==i&&go.annotateElement(this._contentEl,e,t,n.getClassName(this._contentEl))},Ep.prototype.annotateLineNumber=function(e,t){this._lineNumberEl&&this._lineNumberEl.classList.contains(t)&&e.apply(this._lineNumberEl)},Sp.prototype.addLayer=function(e){return this._addLayerFunc=e,this},Sp.prototype.addNotifier=function(e){return e(this.notify.bind(this)),this},Sp.prototype.setCoverageProvider=function(e){return this._coverageProvider&&console.warn("Overwriting an existing coverage provider."),this._coverageProvider=e,this},Sp.prototype.getCoverageProvider=function(){return this._coverageProvider},Sp.prototype.enableToggleCheckbox=function(e,t){return this.plugin.hook("annotation-toggler").onAttached(n=>{if(!n.content.hidden)return void console.error(n.content.id+" is already enabled. Cannot re-enable.");n.content.removeAttribute("hidden");const i=n.content.querySelector("#annotation-label");i.textContent=e||"Enable";const s=n.content.querySelector("#annotation-checkbox");t(s)}),this},Sp.prototype.notify=function(e,t,n,i){for(const s of this._annotationLayers)if(s._path===e){s.notifyListeners(t,n,i);break}},Sp.prototype.getLayer=function(e,t,n){const i=new xp(e,t,n,this._addLayerFunc);return this._annotationLayers.push(i),i},xp.prototype.addListener=function(e){this._listeners.push(e)},xp.prototype.annotate=function(e,t,n){const i=new Ep(e,t,n,this._path,this._changeNum,this._patchNum);this._addLayerFunc(i)},xp.prototype.notifyListeners=function(e,t,n){for(const i of this._listeners)i(e,t,n)};
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ap=document.createElement("template");function Pp(e){this._hook=null,this.plugin=e}Ap.innerHTML='<dom-module id="gr-change-metadata-api">\n  \n</dom-module>',document.head.appendChild(Ap.content),Pp.prototype._createHook=function(){this._hook=this.plugin.hook("change-metadata-item")},Pp.prototype.onLabelsChanged=function(e){return this._hook||this._createHook(),this._hook.onAttached(t=>this.plugin.attributeHelper(t).bind("labels",e)),this};
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class kp{constructor(e){this._restAPI=e}getSuggestions(e){return this._restAPI.getSuggestedAccounts(`${e}`).then(e=>e||[])}makeSuggestionItem(e){return{name:uo.getAccountDisplayName(null,e),value:{account:e,count:1}}}}
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._restAPI=e}getSuggestions(e){return this._restAPI.getSuggestedGroups(`${e}`).then(e=>{if(!e)return[];return Object.keys(e).map(t=>Object.assign({},e[t],{name:t}))})}makeSuggestionItem(e){return{name:e.name,value:{group:{name:e.name,id:e.id}}}}}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=document.createElement("template");function Rp(e){this.element=e,this._unsubscribers=[]}
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Lp;function Dp(){return Lp||(Lp=document.createElement("gr-rest-api-interface")),Lp}function Op(e){this.opt_prefix=e||""}Ip.innerHTML='<dom-module id="gr-event-helper">\n  \n</dom-module>',document.head.appendChild(Ip.content),Rp.prototype.on=function(e,t){return this._listen(this.element,t,{event:e})},Rp.prototype.onTap=function(e){return this._listen(this.element,e)},Rp.prototype.onClick=function(e){return this._listen(this.element,e)},Rp.prototype.captureTap=function(e){return this._listen(this.element.parentElement,e,{capture:!0})},Rp.prototype.captureClick=function(e){return this._listen(this.element.parentElement,e,{capture:!0})},Rp.prototype._listen=function(e,t,n){const i=n&&n.capture,s=n&&n.event||"click",a=e=>{if(-1!==e.path.indexOf(this.element)){let n=!0;try{n=t(e)}catch(e){console.warn(`Plugin error handing event: ${e}`)}!1===n&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}};e.addEventListener(s,a,i);const o=()=>e.removeEventListener(s,a,i);return this._unsubscribers.push(o),o},Op.prototype.getLoggedIn=function(){return Dp().getLoggedIn()},Op.prototype.getVersion=function(){return Dp().getVersion()},Op.prototype.getConfig=function(){return Dp().getConfig()},Op.prototype.invalidateReposCache=function(){Dp().invalidateReposCache()},Op.prototype.getAccount=function(){return Dp().getAccount()},Op.prototype.getAccountCapabilities=function(e){return Dp().getAccountCapabilities(e)},Op.prototype.getRepos=function(e,t,n){return Dp().getRepos(e,t,n)},Op.prototype.fetch=function(e,t,n,i,s){return Dp().send(e,this.opt_prefix+t,n,i,s)},Op.prototype.send=function(e,t,n,i,s){return this.fetch(e,t,n,i,s).then(e=>e.status<200||e.status>=300?e.text().then(t=>t?Promise.reject(new Error(t)):Promise.reject(new Error(e.status))):Dp().getResponseObject(e))},Op.prototype.get=function(e){return this.send("GET",e)},Op.prototype.post=function(e,t,n,i){return this.send("POST",e,t,n,i)},Op.prototype.put=function(e,t,n,i){return this.send("PUT",e,t,n,i)},Op.prototype.delete=function(e){return this.fetch("DELETE",e).then(e=>204!==e.status?e.text().then(t=>t?Promise.reject(new Error(t)):Promise.reject(new Error(e.status))):e)};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Np=za`
<custom-style>
  <style is="custom-style">
    [hidden] {
      display: none !important;
    }
  </style>
</custom-style>
<custom-style>
  <style is="custom-style">
    html {

      --layout: {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      };

      --layout-inline: {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      };

      --layout-horizontal: {
        @apply --layout;

        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      };

      --layout-horizontal-reverse: {
        @apply --layout;

        -ms-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
      };

      --layout-vertical: {
        @apply --layout;

        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      };

      --layout-vertical-reverse: {
        @apply --layout;

        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      };

      --layout-wrap: {
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
      };

      --layout-wrap-reverse: {
        -ms-flex-wrap: wrap-reverse;
        -webkit-flex-wrap: wrap-reverse;
        flex-wrap: wrap-reverse;
      };

      --layout-flex-auto: {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;
      };

      --layout-flex-none: {
        -ms-flex: none;
        -webkit-flex: none;
        flex: none;
      };

      --layout-flex: {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      };

      --layout-flex-2: {
        -ms-flex: 2;
        -webkit-flex: 2;
        flex: 2;
      };

      --layout-flex-3: {
        -ms-flex: 3;
        -webkit-flex: 3;
        flex: 3;
      };

      --layout-flex-4: {
        -ms-flex: 4;
        -webkit-flex: 4;
        flex: 4;
      };

      --layout-flex-5: {
        -ms-flex: 5;
        -webkit-flex: 5;
        flex: 5;
      };

      --layout-flex-6: {
        -ms-flex: 6;
        -webkit-flex: 6;
        flex: 6;
      };

      --layout-flex-7: {
        -ms-flex: 7;
        -webkit-flex: 7;
        flex: 7;
      };

      --layout-flex-8: {
        -ms-flex: 8;
        -webkit-flex: 8;
        flex: 8;
      };

      --layout-flex-9: {
        -ms-flex: 9;
        -webkit-flex: 9;
        flex: 9;
      };

      --layout-flex-10: {
        -ms-flex: 10;
        -webkit-flex: 10;
        flex: 10;
      };

      --layout-flex-11: {
        -ms-flex: 11;
        -webkit-flex: 11;
        flex: 11;
      };

      --layout-flex-12: {
        -ms-flex: 12;
        -webkit-flex: 12;
        flex: 12;
      };

      /* alignment in cross axis */

      --layout-start: {
        -ms-flex-align: start;
        -webkit-align-items: flex-start;
        align-items: flex-start;
      };

      --layout-center: {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      };

      --layout-end: {
        -ms-flex-align: end;
        -webkit-align-items: flex-end;
        align-items: flex-end;
      };

      --layout-baseline: {
        -ms-flex-align: baseline;
        -webkit-align-items: baseline;
        align-items: baseline;
      };

      /* alignment in main axis */

      --layout-start-justified: {
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
      };

      --layout-center-justified: {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      };

      --layout-end-justified: {
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;
      };

      --layout-around-justified: {
        -ms-flex-pack: distribute;
        -webkit-justify-content: space-around;
        justify-content: space-around;
      };

      --layout-justified: {
        -ms-flex-pack: justify;
        -webkit-justify-content: space-between;
        justify-content: space-between;
      };

      --layout-center-center: {
        @apply --layout-center;
        @apply --layout-center-justified;
      };

      /* self alignment */

      --layout-self-start: {
        -ms-align-self: flex-start;
        -webkit-align-self: flex-start;
        align-self: flex-start;
      };

      --layout-self-center: {
        -ms-align-self: center;
        -webkit-align-self: center;
        align-self: center;
      };

      --layout-self-end: {
        -ms-align-self: flex-end;
        -webkit-align-self: flex-end;
        align-self: flex-end;
      };

      --layout-self-stretch: {
        -ms-align-self: stretch;
        -webkit-align-self: stretch;
        align-self: stretch;
      };

      --layout-self-baseline: {
        -ms-align-self: baseline;
        -webkit-align-self: baseline;
        align-self: baseline;
      };

      /* multi-line alignment in main axis */

      --layout-start-aligned: {
        -ms-flex-line-pack: start;  /* IE10 */
        -ms-align-content: flex-start;
        -webkit-align-content: flex-start;
        align-content: flex-start;
      };

      --layout-end-aligned: {
        -ms-flex-line-pack: end;  /* IE10 */
        -ms-align-content: flex-end;
        -webkit-align-content: flex-end;
        align-content: flex-end;
      };

      --layout-center-aligned: {
        -ms-flex-line-pack: center;  /* IE10 */
        -ms-align-content: center;
        -webkit-align-content: center;
        align-content: center;
      };

      --layout-between-aligned: {
        -ms-flex-line-pack: justify;  /* IE10 */
        -ms-align-content: space-between;
        -webkit-align-content: space-between;
        align-content: space-between;
      };

      --layout-around-aligned: {
        -ms-flex-line-pack: distribute;  /* IE10 */
        -ms-align-content: space-around;
        -webkit-align-content: space-around;
        align-content: space-around;
      };

      /*******************************
                Other Layout
      *******************************/

      --layout-block: {
        display: block;
      };

      --layout-invisible: {
        visibility: hidden !important;
      };

      --layout-relative: {
        position: relative;
      };

      --layout-fit: {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-scroll: {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
      };

      --layout-fullbleed: {
        margin: 0;
        height: 100vh;
      };

      /* fixed position */

      --layout-fixed-top: {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
      };

      --layout-fixed-right: {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
      };

      --layout-fixed-bottom: {
        position: fixed;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-fixed-left: {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
      };

    }
  </style>
</custom-style>`;Np.setAttribute("style","display: none;"),document.head.appendChild(Np.content);var Mp=document.createElement("style");Mp.textContent="[hidden] { display: none !important; }",document.head.appendChild(Mp);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const $p=za`
<custom-style>
  <style is="custom-style">
    html {

      --shadow-transition: {
        transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      };

      --shadow-none: {
        box-shadow: none;
      };

      /* from http://codepen.io/shyndman/pen/c5394ddf2e8b2a5c9185904b57421cdb */

      --shadow-elevation-2dp: {
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);
      };

      --shadow-elevation-3dp: {
        box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-4dp: {
        box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-6dp: {
        box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-8dp: {
        box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-12dp: {
        box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-16dp: {
        box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-24dp: {
        box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);
      };
    }
  </style>
</custom-style>`;$p.setAttribute("style","display: none;"),document.head.appendChild($p.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Bp=za`
<dom-module id="paper-material-styles">
  <template>
    <style>
      html {
        --paper-material: {
          display: block;
          position: relative;
        };
        --paper-material-elevation-1: {
          @apply --shadow-elevation-2dp;
        };
        --paper-material-elevation-2: {
          @apply --shadow-elevation-4dp;
        };
        --paper-material-elevation-3: {
          @apply --shadow-elevation-6dp;
        };
        --paper-material-elevation-4: {
          @apply --shadow-elevation-8dp;
        };
        --paper-material-elevation-5: {
          @apply --shadow-elevation-16dp;
        };
      }
      .paper-material {
        @apply --paper-material;
      }
      .paper-material[elevation="1"] {
        @apply --paper-material-elevation-1;
      }
      .paper-material[elevation="2"] {
        @apply --paper-material-elevation-2;
      }
      .paper-material[elevation="3"] {
        @apply --paper-material-elevation-3;
      }
      .paper-material[elevation="4"] {
        @apply --paper-material-elevation-4;
      }
      .paper-material[elevation="5"] {
        @apply --paper-material-elevation-5;
      }

      /* Duplicate the styles because of https://github.com/webcomponents/shadycss/issues/193 */
      :host {
        --paper-material: {
          display: block;
          position: relative;
        };
        --paper-material-elevation-1: {
          @apply --shadow-elevation-2dp;
        };
        --paper-material-elevation-2: {
          @apply --shadow-elevation-4dp;
        };
        --paper-material-elevation-3: {
          @apply --shadow-elevation-6dp;
        };
        --paper-material-elevation-4: {
          @apply --shadow-elevation-8dp;
        };
        --paper-material-elevation-5: {
          @apply --shadow-elevation-16dp;
        };
      }
      :host(.paper-material) {
        @apply --paper-material;
      }
      :host(.paper-material[elevation="1"]) {
        @apply --paper-material-elevation-1;
      }
      :host(.paper-material[elevation="2"]) {
        @apply --paper-material-elevation-2;
      }
      :host(.paper-material[elevation="3"]) {
        @apply --paper-material-elevation-3;
      }
      :host(.paper-material[elevation="4"]) {
        @apply --paper-material-elevation-4;
      }
      :host(.paper-material[elevation="5"]) {
        @apply --paper-material-elevation-5;
      }
    </style>
  </template>
</dom-module>`;Bp.setAttribute("style","display: none;"),document.head.appendChild(Bp.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Fp={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(e){this._setFocused("focus"===e.type)},_disabledChanged:function(e,t){this.setAttribute("aria-disabled",e?"true":"false"),this.style.pointerEvents=e?"none":"",e?(this._oldTabIndex=this.getAttribute("tabindex"),this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(null===this._oldTabIndex?this.removeAttribute("tabindex"):this.setAttribute("tabindex",this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}},Up={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(e){this._detectKeyboardFocus(e),e||this._setPressed(!1)},_detectKeyboardFocus:function(e){this._setReceivedFocusFromKeyboard(!this.pointerDown&&e)},_userActivate:function(e){this.active!==e&&(this.active=e,this.fire("change"))},_downHandler:function(e){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(e){var t=e.detail.keyboardEvent,n=Ui(t).localTarget;this.isLightDescendant(n)||(t.preventDefault(),t.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(e){var t=e.detail.keyboardEvent,n=Ui(t).localTarget;this.isLightDescendant(n)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async((function(){this.click()}),1)},_pressedChanged:function(e){this._changedButtonState()},_ariaActiveAttributeChanged:function(e,t){t&&t!=e&&this.hasAttribute(t)&&this.removeAttribute(t)},_activeChanged:function(e,t){this.toggles?this.setAttribute(this.ariaActiveAttribute,e?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Hp=[Sr,Up];
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
var jp={distance:function(e,t,n,i){var s=e-n,a=t-i;return Math.sqrt(s*s+a*a)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function Gp(e){this.element=e,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function Vp(e){this.element=e,this.color=window.getComputedStyle(e).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),Ui(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}Gp.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(e,t){var n=jp.distance(e,t,0,0),i=jp.distance(e,t,this.width,0),s=jp.distance(e,t,0,this.height),a=jp.distance(e,t,this.width,this.height);return Math.max(n,i,s,a)}},Vp.MAX_RADIUS=300,Vp.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var e;return this.mouseDownStart?(e=jp.now()-this.mouseDownStart,this.mouseUpStart&&(e-=this.mouseUpElapsed),e):0},get mouseUpElapsed(){return this.mouseUpStart?jp.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var e=this.containerMetrics.width*this.containerMetrics.width,t=this.containerMetrics.height*this.containerMetrics.height,n=1.1*Math.min(Math.sqrt(e+t),Vp.MAX_RADIUS)+5,i=1.1-n/Vp.MAX_RADIUS*.2,s=this.mouseInteractionSeconds/i,a=n*(1-Math.pow(80,-s));return Math.abs(a)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var e=.3*this.mouseUpElapsedSeconds,t=this.opacity;return Math.max(0,Math.min(e,t))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,Vp.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,Vp.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new Gp(this.element)},draw:function(){var e,t,n;this.wave.style.opacity=this.opacity,e=this.radius/(this.containerMetrics.size/2),t=this.xNow-this.containerMetrics.width/2,n=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+t+"px, "+n+"px)",this.waveContainer.style.transform="translate3d("+t+"px, "+n+"px, 0)",this.wave.style.webkitTransform="scale("+e+","+e+")",this.wave.style.transform="scale3d("+e+","+e+",1)"},downAction:function(e){var t=this.containerMetrics.width/2,n=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=jp.now(),this.center?(this.xStart=t,this.yStart=n,this.slideDistance=jp.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=e?e.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=e?e.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=t,this.yEnd=n,this.slideDistance=jp.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(e){this.isMouseDown&&(this.mouseUpStart=jp.now())},remove:function(){Ui(Ui(this.waveContainer).parentNode).removeChild(this.waveContainer)}},ma({_template:za`
    <style>
      :host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }
    </style>

    <div id="background"></div>
    <div id="waves"></div>
`,is:"paper-ripple",behaviors:[Sr],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){11==Ui(this).parentNode.nodeType?this.keyEventTarget=Ui(this).getOwnerRoot().host:this.keyEventTarget=Ui(this).parentNode;var e=this.keyEventTarget;this.listen(e,"up","uiUpAction"),this.listen(e,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var e=0;e<this.ripples.length;++e)if(!this.ripples[e].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async((function(){this.upAction()}),1)},uiDownAction:function(e){this.noink||this.downAction(e)},downAction:function(e){this.holdDown&&this.ripples.length>0||(this.addRipple().downAction(e),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(e){this.noink||this.upAction(e)},upAction:function(e){this.holdDown||(this.ripples.forEach((function(t){t.upAction(e)})),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor="",this.fire("transitionend")},addRipple:function(){var e=new Vp(this);return Ui(this.$.waves).appendChild(e.waveContainer),this.$.background.style.backgroundColor=e.color,this.ripples.push(e),this._setAnimating(!0),e},removeRipple:function(e){var t=this.ripples.indexOf(e);t<0||(this.ripples.splice(t,1),e.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var e,t;for(e=0;e<this.ripples.length;++e)(t=this.ripples[e]).draw(),this.$.background.style.opacity=t.outerOpacity,t.isOpacityFullyDecayed&&!t.isRestingAtMaxRadius&&this.removeRipple(t);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},animateRipple:function(){return this.animate()},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(e,t){void 0!==t&&(e?this.downAction():this.upAction())}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const zp={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(e){Up._downHandler.call(this,e),this.pressed&&this.ensureRipple(e)},ensureRipple:function(e){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var t=this._rippleContainer||this.root;if(t&&Ui(t).appendChild(this._ripple),e){var n=Ui(this._rippleContainer||this),i=Ui(e).rootTarget;n.deepContains(i)&&this._ripple.uiDownAction(e)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(e){this.hasRipple()&&(this._ripple.noink=e)}},Wp={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var e=1;this.disabled?e=0:this.active||this.pressed?e=4:this.receivedFocusFromKeyboard&&(e=3),this._setElevation(e)},_computeKeyboardClass:function(e){this.toggleClass("keyboard-focus",e)},_spaceKeyDownHandler:function(e){Up._spaceKeyDownHandler.call(this,e),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(e){Up._spaceKeyUpHandler.call(this,e),this.hasRipple()&&this._ripple.uiUpAction()}},qp=[Hp,Fp,zp,Wp],Kp=za`
  <style include="paper-material-styles">
    /* Need to specify the same specificity as the styles imported from paper-material. */
    :host {
      @apply --layout-inline;
      @apply --layout-center-center;
      position: relative;
      box-sizing: border-box;
      min-width: 5.14em;
      margin: 0 0.29em;
      background: transparent;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      -webkit-tap-highlight-color: transparent;
      font: inherit;
      text-transform: uppercase;
      outline-width: 0;
      border-radius: 3px;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-user-select: none;
      user-select: none;
      cursor: pointer;
      z-index: 0;
      padding: 0.7em 0.57em;

      @apply --paper-font-common-base;
      @apply --paper-button;
    }

    :host([elevation="1"]) {
      @apply --paper-material-elevation-1;
    }

    :host([elevation="2"]) {
      @apply --paper-material-elevation-2;
    }

    :host([elevation="3"]) {
      @apply --paper-material-elevation-3;
    }

    :host([elevation="4"]) {
      @apply --paper-material-elevation-4;
    }

    :host([elevation="5"]) {
      @apply --paper-material-elevation-5;
    }

    :host([hidden]) {
      display: none !important;
    }

    :host([raised].keyboard-focus) {
      font-weight: bold;
      @apply --paper-button-raised-keyboard-focus;
    }

    :host(:not([raised]).keyboard-focus) {
      font-weight: bold;
      @apply --paper-button-flat-keyboard-focus;
    }

    :host([disabled]) {
      background: none;
      color: #a8a8a8;
      cursor: auto;
      pointer-events: none;

      @apply --paper-button-disabled;
    }

    :host([disabled][raised]) {
      background: #eaeaea;
    }


    :host([animated]) {
      @apply --shadow-transition;
    }

    paper-ripple {
      color: var(--paper-button-ink-color);
    }
  </style>

  <slot></slot>`;
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/Kp.setAttribute("strip-whitespace",""),ma({_template:Kp,is:"paper-button",behaviors:[qp],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Wp._calculateElevation.apply(this):this._setElevation(0)}});
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yp="timing-report",Xp="UI Latency",Jp="RPC Timing",Zp="App Started",Qp="lifecycle",eu="Plugins installed",tu="lifecycle",nu="Extension detected",iu="nav-report",su="Location Changed",au="Page",ou="error",ru="exception",lu="error",cu="Error Dialog",du="ChangeDisplayed",hu="ChangeFullyLoaded",pu="DashboardDisplayed",uu="DiffViewOnlyContent",mu="DiffViewDisplayed",gu="DiffViewFullyLoaded",_u="FileListDisplayed",fu="PluginsLoaded",bu="StartupChangeDisplayed",vu="StartupChangeFullyLoaded",yu="StartupDashboardDisplayed",wu="StartupDiffViewOnlyContent",Cu="StartupDiffViewDisplayed",Eu="StartupDiffViewFullyLoaded",Su="StartupFileListDisplayed",xu="WebComponentsReady",Au="MetricsPluginLoaded",Pu={};Pu[fu]=0,Pu[Au]=0,Pu[bu]=0,Pu[vu]=0,Pu[yu]=0,Pu[wu]=0,Pu[Cu]=0,Pu[Eu]=0,Pu[Su]=0,Pu[Zp]=0,Pu[xu]=0;let ku=[],Tu=[];let Iu=void 0;const Ru=function(e,t,n,i,s,a){if(e&&e(t,n,i,s,a),a){i=i||a.lineNumber,s=s||a.columnNumber;let e=t;if(a.stack){const t=a.stack.split("\n");e=t.slice(0,Math.min(3,t.length)).join("\n")}t=e||a.toString()}const o={url:n,line:i,column:s,error:a};return Du.prototype.reporter(ou,ru,t,o),!0},Lu=function(e){const t=e||window;t.onerror=Ru.bind(null,t.onerror),t.addEventListener("unhandledrejection",e=>{const t=e.reason.message,n={error:e.reason};Du.prototype.reporter(ou,ru,t,n)})};if(Lu(),window.PerformanceObserver){if((PerformanceObserver.supportedEntryTypes||[]).includes("longtask")){new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>200&&Du.prototype.reporter(Yp,Xp,`Task ${t.name}`,Math.round(t.duration),{},!1)}).observe({entryTypes:["longtask"]})}}document.addEventListener("visibilitychange",()=>{const e=`Visibility changed to ${document.visibilityState}`;Du.prototype.reporter("interaction",void 0,e,void 0,{},!0)});let Du=ma({is:"gr-reporting",properties:{category:String,_baselines:{type:Object,value:Pu},_timers:{type:Object,value:{timeBetweenDraftActions:null}}},get performanceTiming(){return window.performance.timing},get slowRpcSnapshot(){return Tu.slice()},now:()=>Math.round(window.performance.now()),_arePluginsLoaded(){return this._baselines&&!this._baselines.hasOwnProperty(fu)},_isMetricsPluginLoaded(){return this._arePluginsLoaded()||this._baselines&&!this._baselines.hasOwnProperty(Au)},reporter(e,t,n,i,s,a){const o=this._createEventInfo(e,t,n,i,s);e===ou&&t===ru&&console.error(i&&i.error||n),this._isMetricsPluginLoaded()&&!ku.length?this._reportEvent(o,a):(ku.push([o,a]),this._isMetricsPluginLoaded()&&(ku.forEach(([e,t])=>{this._reportEvent(e,t)}),ku=[]))},_reportEvent(e,t){const{type:n,value:i,name:s}=e;document.dispatchEvent(new CustomEvent(n,{detail:e})),t||n!==ou&&(void 0!==i?console.log(`Reporting: ${s}: ${i}`):console.log(`Reporting: ${s}`))},_createEventInfo(t,n,i,s,a){const o={type:t,category:n,name:i,value:s,eventStart:this.now()};"object"==typeof a&&0!==Object.entries(a).length&&(o.eventDetails=JSON.stringify(a)),Iu&&(o.repoName=Iu);const r="hidden"===document.visibilityState;void 0!==r&&(o.inBackgroundTab=r);const l=e.flagsService.enabledExperiments;return l.length&&(o.enabledExperiments=JSON.stringify(l)),o},appStarted(){this.timeEnd(Zp),this._reportNavResTimes()},_reportNavResTimes(){Object.keys(this.performanceTiming.toJSON()).forEach(e=>this._reportPerformanceTiming(e))},_reportPerformanceTiming(e,t){const n=this.performanceTiming[e];if(n>0){const i=n-this.performanceTiming.navigationStart;this.reporter(Yp,Xp,`NavResTime - ${e}`,i,t,!0)}},beforeLocationChanged(){for(const e of Object.keys(this._baselines))delete this._baselines[e];this.time(du),this.time(hu),this.time(pu),this.time(uu),this.time(mu),this.time(gu),this.time(_u),Iu=void 0,Tu=[]},locationChanged(e){this.reporter(iu,su,au,e)},dashboardDisplayed(){this._baselines.hasOwnProperty(yu)?this.timeEnd(yu,this._pageLoadDetails()):this.timeEnd(pu,this._pageLoadDetails())},changeDisplayed(){this._baselines.hasOwnProperty(bu)?this.timeEnd(bu,this._pageLoadDetails()):this.timeEnd(du,this._pageLoadDetails())},changeFullyLoaded(){this._baselines.hasOwnProperty(vu)?this.timeEnd(vu):this.timeEnd(hu)},diffViewDisplayed(){this._baselines.hasOwnProperty(Cu)?this.timeEnd(Cu,this._pageLoadDetails()):this.timeEnd(mu,this._pageLoadDetails())},diffViewFullyLoaded(){this._baselines.hasOwnProperty(Eu)?this.timeEnd(Eu):this.timeEnd(gu)},diffViewContentDisplayed(){this._baselines.hasOwnProperty(wu)?this.timeEnd(wu):this.timeEnd(uu)},fileListDisplayed(){this._baselines.hasOwnProperty(Su)?this.timeEnd(Su):this.timeEnd(_u)},_pageLoadDetails(){const e={rpcList:this.slowRpcSnapshot};if(window.screen&&(e.screenSize={width:window.screen.width,height:window.screen.height}),document&&document.documentElement&&(e.viewport={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),window.performance&&window.performance.memory){const t=e=>Math.round(e/1048576*100)/100;e.usedJSHeapSizeMb=t(window.performance.memory.usedJSHeapSize)}return e},reportExtension(e){this.reporter(tu,nu,e)},pluginLoaded(e){e.startsWith("metrics-")&&this.timeEnd(Au)},pluginsLoaded(e){this.timeEnd(fu),this.reporter(Qp,eu,eu,void 0,{pluginsList:e||[]},!0)},time(e){this._baselines[e]=this.now(),window.performance.mark(`${e}-start`)},timeEnd(e,t){if(!this._baselines.hasOwnProperty(e))return;const n=this._baselines[e];delete this._baselines[e],this._reportTiming(e,this.now()-n,t),0!==n?window.performance.measure(e,`${e}-start`):window.performance.measure(e)},timeEndWithAverage(e,t,n){if(!this._baselines.hasOwnProperty(e))return;const i=this._baselines[e];if(this.timeEnd(e),!n)return;const s=this.now()-i;this._reportTiming(t,s/n)},_reportTiming(e,t,n){this.reporter(Yp,Xp,e,t,n)},getTimer(e){let t,n=!1,i=null;const s={reset:()=>(n=!1,t=this.now(),s),end:()=>{if(n)throw new Error(`Timer for "${e}" already ended.`);n=!0;const a=this.now()-t;return i&&a>i?s:(this._reportTiming(e,a),s)},withMaximum:e=>(i=e,s)};return s.reset()},reportRpcTiming(e,t){this.reporter(Yp,Jp,"RPC-"+e,t,{},!0),t>=500&&Tu.push({anonymizedUrl:e,elapsed:t})},reportInteraction(e,t){this.reporter("interaction",this.category,e,void 0,t,!0)},recordDraftInteraction(){const e=this._timers.timeBetweenDraftActions;e?e.end().reset():this._timers.timeBetweenDraftActions=this.getTimer("TimeBetweenDraftActions").withMaximum(12e4)},reportErrorDialog(e){this.reporter(lu,cu,"ErrorDialog: "+e,{error:new Error(e)})},setRepoName(e){Iu=e}});window.GrReporting=Du,window.GrReporting._catchErrors=Lu,window.GrReporting.STARTUP_TIMERS=Object.assign({},Pu);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ou=za`
  <style include="shared-styles">
    /* general styles for all buttons */
    :host {
      --background-color: var(
        --button-background-color,
        var(--default-button-background-color)
      );
      --text-color: var(--default-button-text-color);
      display: inline-block;
      position: relative;
    }
    :host([hidden]) {
      display: none;
    }
    :host([no-uppercase]) paper-button {
      text-transform: none;
    }
    paper-button {
      /* The next lines contains a copy of paper-button style.
          Without a copy, the @apply works incorrectly with Polymer 2.
          @apply is deprecated and is not recommended to use. It is expected
          that @apply will be replaced with the ::part CSS pseudo-element.
          After replacecment copied lines can be removed.
        */
      @apply --layout-inline;
      @apply --layout-center-center;
      position: relative;
      box-sizing: border-box;
      min-width: 5.14em;
      margin: 0 0.29em;
      background: transparent;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      -webkit-tap-highlight-color: transparent;
      font: inherit;
      text-transform: uppercase;
      outline-width: 0;
      border-radius: var(--border-radius);
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-user-select: none;
      user-select: none;
      cursor: pointer;
      z-index: 0;
      padding: var(--spacing-m);

      @apply --paper-font-common-base;
      @apply --paper-button;
      /* End of copy*/

      /* paper-button sets this to anti-aliased, which appears different than
          bold font elsewhere on macOS. */
      -webkit-font-smoothing: initial;
      align-items: center;
      background-color: var(--background-color);
      color: var(--text-color);
      display: flex;
      font-family: inherit;
      justify-content: center;
      margin: var(--margin, 0);
      min-width: var(--border, 0);
      padding: var(--padding, 4px 8px);
      @apply --gr-button;
    }
    /* https://github.com/PolymerElements/paper-button/blob/2.x/paper-button.html */
    /* BEGIN: Copy from paper-button */
    paper-button[elevation='1'] {
      @apply --paper-material-elevation-1;
    }
    paper-button[elevation='2'] {
      @apply --paper-material-elevation-2;
    }
    paper-button[elevation='3'] {
      @apply --paper-material-elevation-3;
    }
    paper-button[elevation='4'] {
      @apply --paper-material-elevation-4;
    }
    paper-button[elevation='5'] {
      @apply --paper-material-elevation-5;
    }
    /* END: Copy from paper-button */
    paper-button:hover {
      background: linear-gradient(rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)),
        var(--background-color);
    }

    /* Some mobile browsers treat focused element as hovered element.
      As a result, element remains hovered after click (has grey background in default theme).
      Use @media (hover:none) to remove background if
      user's primary input mechanism can't hover over elements.
      See: https://developer.mozilla.org/en-US/docs/Web/CSS/@media/hover

      Note 1: not all browsers support this media query
      (see https://caniuse.com/#feat=css-media-interaction).
      If browser doesn't support it, then the whole content of @media .. is ignored.
      This is why the default behavior is placed outside of @media.
      */
    @media (hover: none) {
      paper-button:hover {
        background: transparent;
      }
    }

    :host([primary]) {
      --background-color: var(--primary-button-background-color);
      --text-color: var(--primary-button-text-color);
    }
    :host([link][primary]) {
      --text-color: var(--primary-button-background-color);
    }

    /* Keep below color definition for primary so that this takes precedence
        when disabled. */
    :host([disabled]),
    :host([loading]) {
      --background-color: var(--disabled-button-background-color);
      --text-color: var(--deemphasized-text-color);
      cursor: default;
    }

    /* Styles for link buttons specifically */
    :host([link]) {
      --background-color: transparent;
      --margin: 0;
      --padding: 5px 4px;
    }
    :host([disabled][link]),
    :host([loading][link]) {
      --background-color: transparent;
      --text-color: var(--deemphasized-text-color);
      cursor: default;
    }

    /* Styles for the optional down arrow */
    :host(:not([down-arrow])) .downArrow {
      display: none;
    }
    :host([down-arrow]) .downArrow {
      border-top: 0.36em solid #ccc;
      border-left: 0.36em solid transparent;
      border-right: 0.36em solid transparent;
      margin-bottom: var(--spacing-xxs);
      margin-left: var(--spacing-m);
      transition: border-top-color 200ms;
    }
    :host([down-arrow]) paper-button:hover .downArrow {
      border-top-color: var(--deemphasized-text-color);
    }
  </style>
  <paper-button raised="[[!link]]" disabled="[[_disabled]]" tabindex="-1">
    <template is="dom-if" if="[[loading]]">
      <span class="loadingSpin"></span>
    </template>
    <slot></slot>
    <i class="downArrow"></i>
  </paper-button>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Nu=za`
  <style include="shared-styles">
    :host {
      --gr-tooltip-arrow-size: 0.5em;
      --gr-tooltip-arrow-center-offset: 0;

      background-color: var(--tooltip-background-color);
      box-shadow: var(--elevation-level-2);
      color: var(--tooltip-text-color);
      font-size: var(--font-size-small);
      position: absolute;
      z-index: 1000;
      max-width: var(--tooltip-max-width);
    }
    :host .tooltip {
      padding: var(--spacing-m) var(--spacing-l);
    }
    :host .arrowPositionBelow,
    :host([position-below]) .arrowPositionAbove {
      display: none;
    }
    :host([position-below]) .arrowPositionBelow {
      display: initial;
    }
    .arrow {
      border-left: var(--gr-tooltip-arrow-size) solid transparent;
      border-right: var(--gr-tooltip-arrow-size) solid transparent;
      height: 0;
      position: absolute;
      left: calc(50% - var(--gr-tooltip-arrow-size));
      margin-left: var(--gr-tooltip-arrow-center-offset);
      width: 0;
    }
    .arrowPositionAbove {
      border-top: var(--gr-tooltip-arrow-size) solid
        var(--tooltip-background-color);
      bottom: calc(-1 * var(--gr-tooltip-arrow-size));
    }
    .arrowPositionBelow {
      border-bottom: var(--gr-tooltip-arrow-size) solid
        var(--tooltip-background-color);
      top: calc(-1 * var(--gr-tooltip-arrow-size));
    }
  </style>
  <div class="tooltip">
    <i class="arrowPositionBelow arrow"></i>
    [[text]]
    <i class="arrowPositionAbove arrow"></i>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Mu extends(Zn(na(Ka))){static get template(){return Nu}static get is(){return"gr-tooltip"}static get properties(){return{text:String,maxWidth:{type:String,observer:"_updateWidth"},positionBelow:{type:Boolean,reflectToAttribute:!0}}}_updateWidth(e){this.updateStyles({"--tooltip-max-width":e})}}customElements.define(Mu.is,Mu);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $u=()=>document.body
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Bu={properties:{hasTooltip:{type:Boolean,observer:"_setupTooltipListeners"},positionBelow:{type:Boolean,value:!1,reflectToAttribute:!0},_isTouchDevice:{type:Boolean,value:()=>"ontouchstart"in document.documentElement},_tooltip:Object,_titleText:String,_hasSetupTooltipListeners:{type:Boolean,value:!1}},detached(){this._handleHideTooltip(),this.removeEventListener("mouseenter",this._mouseenterHandler)},_setupTooltipListeners(){if(this._mouseenterHandler||(this._mouseenterHandler=this._handleShowTooltip.bind(this)),!this.hasTooltip)return this.removeEventListener("mouseenter",this._mouseenterHandler),void(this._hasSetupTooltipListeners=!1);this._hasSetupTooltipListeners||(this._hasSetupTooltipListeners=!0,this.addEventListener("mouseenter",this._mouseenterHandler))},_handleShowTooltip(e){if(this._isTouchDevice)return;if(!this.hasAttribute("title")||""===this.getAttribute("title")||this._tooltip)return;this._titleText=this.getAttribute("title"),this.setAttribute("title","");const t=document.createElement("gr-tooltip");t.text=this._titleText,t.maxWidth=this.getAttribute("max-width"),t.positionBelow=this.getAttribute("position-below"),t.style.visibility="hidden",$u().appendChild(t),this._positionTooltip(t),t.style.visibility=null,this._tooltip=t,this.listen(window,"scroll","_handleWindowScroll"),this.listen(this,"mouseleave","_handleHideTooltip"),this.listen(this,"click","_handleHideTooltip")},_handleHideTooltip(e){this._isTouchDevice||this.hasAttribute("title")&&null!=this._titleText&&(this.unlisten(window,"scroll","_handleWindowScroll"),this.unlisten(this,"mouseleave","_handleHideTooltip"),this.unlisten(this,"click","_handleHideTooltip"),this.setAttribute("title",this._titleText),this._tooltip&&this._tooltip.parentNode&&this._tooltip.parentNode.removeChild(this._tooltip),this._tooltip=null)},_handleWindowScroll(e){this._tooltip&&this._positionTooltip(this._tooltip)},_positionTooltip(e){Ii();const t=this.getBoundingClientRect(),n=e.getBoundingClientRect(),i=e.parentElement.getBoundingClientRect(),s=t.top-i.top,a=t.left-i.left+(t.width-n.width)/2,o=i.width-a-n.width;a<0?e.updateStyles({"--gr-tooltip-arrow-center-offset":a+"px"}):o<0&&e.updateStyles({"--gr-tooltip-arrow-center-offset":-.5*o+"px"}),e.style.left=Math.max(0,a)+"px",this.positionBelow?e.style.top=s+t.height+7.2+"px":(e.style.top=Math.max(0,s)+"px",e.style.transform="translateY(calc(-100% - 7.2px))")}};window.Gerrit=window.Gerrit||{},window.Gerrit.TooltipBehavior=Bu;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fu={ACTIONS:"Actions",DIFFS:"Diffs",EVERYWHERE:"Everywhere",FILE_LIST:"File list",NAVIGATION:"Navigation",REPLY_DIALOG:"Reply dialog"},Uu={OPEN_SHORTCUT_HELP_DIALOG:"OPEN_SHORTCUT_HELP_DIALOG",GO_TO_USER_DASHBOARD:"GO_TO_USER_DASHBOARD",GO_TO_OPENED_CHANGES:"GO_TO_OPENED_CHANGES",GO_TO_MERGED_CHANGES:"GO_TO_MERGED_CHANGES",GO_TO_ABANDONED_CHANGES:"GO_TO_ABANDONED_CHANGES",GO_TO_WATCHED_CHANGES:"GO_TO_WATCHED_CHANGES",CURSOR_NEXT_CHANGE:"CURSOR_NEXT_CHANGE",CURSOR_PREV_CHANGE:"CURSOR_PREV_CHANGE",OPEN_CHANGE:"OPEN_CHANGE",NEXT_PAGE:"NEXT_PAGE",PREV_PAGE:"PREV_PAGE",TOGGLE_CHANGE_REVIEWED:"TOGGLE_CHANGE_REVIEWED",TOGGLE_CHANGE_STAR:"TOGGLE_CHANGE_STAR",REFRESH_CHANGE_LIST:"REFRESH_CHANGE_LIST",OPEN_REPLY_DIALOG:"OPEN_REPLY_DIALOG",OPEN_DOWNLOAD_DIALOG:"OPEN_DOWNLOAD_DIALOG",EXPAND_ALL_MESSAGES:"EXPAND_ALL_MESSAGES",COLLAPSE_ALL_MESSAGES:"COLLAPSE_ALL_MESSAGES",UP_TO_DASHBOARD:"UP_TO_DASHBOARD",UP_TO_CHANGE:"UP_TO_CHANGE",TOGGLE_DIFF_MODE:"TOGGLE_DIFF_MODE",REFRESH_CHANGE:"REFRESH_CHANGE",EDIT_TOPIC:"EDIT_TOPIC",NEXT_LINE:"NEXT_LINE",PREV_LINE:"PREV_LINE",VISIBLE_LINE:"VISIBLE_LINE",NEXT_CHUNK:"NEXT_CHUNK",PREV_CHUNK:"PREV_CHUNK",EXPAND_ALL_DIFF_CONTEXT:"EXPAND_ALL_DIFF_CONTEXT",NEXT_COMMENT_THREAD:"NEXT_COMMENT_THREAD",PREV_COMMENT_THREAD:"PREV_COMMENT_THREAD",EXPAND_ALL_COMMENT_THREADS:"EXPAND_ALL_COMMENT_THREADS",COLLAPSE_ALL_COMMENT_THREADS:"COLLAPSE_ALL_COMMENT_THREADS",LEFT_PANE:"LEFT_PANE",RIGHT_PANE:"RIGHT_PANE",TOGGLE_LEFT_PANE:"TOGGLE_LEFT_PANE",NEW_COMMENT:"NEW_COMMENT",SAVE_COMMENT:"SAVE_COMMENT",OPEN_DIFF_PREFS:"OPEN_DIFF_PREFS",TOGGLE_DIFF_REVIEWED:"TOGGLE_DIFF_REVIEWED",NEXT_FILE:"NEXT_FILE",PREV_FILE:"PREV_FILE",NEXT_FILE_WITH_COMMENTS:"NEXT_FILE_WITH_COMMENTS",PREV_FILE_WITH_COMMENTS:"PREV_FILE_WITH_COMMENTS",NEXT_UNREVIEWED_FILE:"NEXT_UNREVIEWED_FILE",CURSOR_NEXT_FILE:"CURSOR_NEXT_FILE",CURSOR_PREV_FILE:"CURSOR_PREV_FILE",OPEN_FILE:"OPEN_FILE",TOGGLE_FILE_REVIEWED:"TOGGLE_FILE_REVIEWED",TOGGLE_ALL_INLINE_DIFFS:"TOGGLE_ALL_INLINE_DIFFS",TOGGLE_INLINE_DIFF:"TOGGLE_INLINE_DIFF",OPEN_FIRST_FILE:"OPEN_FIRST_FILE",OPEN_LAST_FILE:"OPEN_LAST_FILE",SEARCH:"SEARCH",SEND_REPLY:"SEND_REPLY",EMOJI_DROPDOWN:"EMOJI_DROPDOWN",TOGGLE_BLAME:"TOGGLE_BLAME"},Hu=new Map;function ju(e,t,n){Hu.has(t)||Hu.set(t,[]),Hu.get(t).push({shortcut:e,text:n})}ju(Uu.SEARCH,Fu.EVERYWHERE,"Search"),ju(Uu.OPEN_SHORTCUT_HELP_DIALOG,Fu.EVERYWHERE,"Show this dialog"),ju(Uu.GO_TO_USER_DASHBOARD,Fu.EVERYWHERE,"Go to User Dashboard"),ju(Uu.GO_TO_OPENED_CHANGES,Fu.EVERYWHERE,"Go to Opened Changes"),ju(Uu.GO_TO_MERGED_CHANGES,Fu.EVERYWHERE,"Go to Merged Changes"),ju(Uu.GO_TO_ABANDONED_CHANGES,Fu.EVERYWHERE,"Go to Abandoned Changes"),ju(Uu.GO_TO_WATCHED_CHANGES,Fu.EVERYWHERE,"Go to Watched Changes"),ju(Uu.CURSOR_NEXT_CHANGE,Fu.ACTIONS,"Select next change"),ju(Uu.CURSOR_PREV_CHANGE,Fu.ACTIONS,"Select previous change"),ju(Uu.OPEN_CHANGE,Fu.ACTIONS,"Show selected change"),ju(Uu.NEXT_PAGE,Fu.ACTIONS,"Go to next page"),ju(Uu.PREV_PAGE,Fu.ACTIONS,"Go to previous page"),ju(Uu.OPEN_REPLY_DIALOG,Fu.ACTIONS,"Open reply dialog to publish comments and add reviewers"),ju(Uu.OPEN_DOWNLOAD_DIALOG,Fu.ACTIONS,"Open download overlay"),ju(Uu.EXPAND_ALL_MESSAGES,Fu.ACTIONS,"Expand all messages"),ju(Uu.COLLAPSE_ALL_MESSAGES,Fu.ACTIONS,"Collapse all messages"),ju(Uu.REFRESH_CHANGE,Fu.ACTIONS,"Reload the change at the latest patch"),ju(Uu.TOGGLE_CHANGE_REVIEWED,Fu.ACTIONS,"Mark/unmark change as reviewed"),ju(Uu.TOGGLE_FILE_REVIEWED,Fu.ACTIONS,"Toggle review flag on selected file"),ju(Uu.REFRESH_CHANGE_LIST,Fu.ACTIONS,"Refresh list of changes"),ju(Uu.TOGGLE_CHANGE_STAR,Fu.ACTIONS,"Star/unstar change"),ju(Uu.EDIT_TOPIC,Fu.ACTIONS,"Add a change topic"),ju(Uu.NEXT_LINE,Fu.DIFFS,"Go to next line"),ju(Uu.PREV_LINE,Fu.DIFFS,"Go to previous line"),ju(Uu.VISIBLE_LINE,Fu.DIFFS,"Move cursor to currently visible code"),ju(Uu.NEXT_CHUNK,Fu.DIFFS,"Go to next diff chunk"),ju(Uu.PREV_CHUNK,Fu.DIFFS,"Go to previous diff chunk"),ju(Uu.EXPAND_ALL_DIFF_CONTEXT,Fu.DIFFS,"Expand all diff context"),ju(Uu.NEXT_COMMENT_THREAD,Fu.DIFFS,"Go to next comment thread"),ju(Uu.PREV_COMMENT_THREAD,Fu.DIFFS,"Go to previous comment thread"),ju(Uu.EXPAND_ALL_COMMENT_THREADS,Fu.DIFFS,"Expand all comment threads"),ju(Uu.COLLAPSE_ALL_COMMENT_THREADS,Fu.DIFFS,"Collapse all comment threads"),ju(Uu.LEFT_PANE,Fu.DIFFS,"Select left pane"),ju(Uu.RIGHT_PANE,Fu.DIFFS,"Select right pane"),ju(Uu.TOGGLE_LEFT_PANE,Fu.DIFFS,"Hide/show left diff"),ju(Uu.NEW_COMMENT,Fu.DIFFS,"Draft new comment"),ju(Uu.SAVE_COMMENT,Fu.DIFFS,"Save comment"),ju(Uu.OPEN_DIFF_PREFS,Fu.DIFFS,"Show diff preferences"),ju(Uu.TOGGLE_DIFF_REVIEWED,Fu.DIFFS,"Mark/unmark file as reviewed"),ju(Uu.TOGGLE_DIFF_MODE,Fu.DIFFS,"Toggle unified/side-by-side diff"),ju(Uu.NEXT_UNREVIEWED_FILE,Fu.DIFFS,"Mark file as reviewed and go to next unreviewed file"),ju(Uu.TOGGLE_BLAME,Fu.DIFFS,"Toggle blame"),ju(Uu.NEXT_FILE,Fu.NAVIGATION,"Go to next file"),ju(Uu.PREV_FILE,Fu.NAVIGATION,"Go to previous file"),ju(Uu.NEXT_FILE_WITH_COMMENTS,Fu.NAVIGATION,"Go to next file that has comments"),ju(Uu.PREV_FILE_WITH_COMMENTS,Fu.NAVIGATION,"Go to previous file that has comments"),ju(Uu.OPEN_FIRST_FILE,Fu.NAVIGATION,"Go to first file"),ju(Uu.OPEN_LAST_FILE,Fu.NAVIGATION,"Go to last file"),ju(Uu.UP_TO_DASHBOARD,Fu.NAVIGATION,"Up to dashboard"),ju(Uu.UP_TO_CHANGE,Fu.NAVIGATION,"Up to change"),ju(Uu.CURSOR_NEXT_FILE,Fu.FILE_LIST,"Select next file"),ju(Uu.CURSOR_PREV_FILE,Fu.FILE_LIST,"Select previous file"),ju(Uu.OPEN_FILE,Fu.FILE_LIST,"Go to selected file"),ju(Uu.TOGGLE_ALL_INLINE_DIFFS,Fu.FILE_LIST,"Show/hide all inline diffs"),ju(Uu.TOGGLE_INLINE_DIFF,Fu.FILE_LIST,"Show/hide selected inline diff"),ju(Uu.SEND_REPLY,Fu.REPLY_DIALOG,"Send reply"),ju(Uu.EMOJI_DROPDOWN,Fu.REPLY_DIALOG,"Emoji dropdown");const Gu=function(e){return(e=Ui(e.detail?e.detail.keyboardEvent:e)).event&&(e=e.event),e};class Vu{constructor(){this.activeHosts=new Map,this.bindings=new Map,this.listeners=new Set}bindShortcut(e,...t){this.bindings.set(e,t)}getBindingsForShortcut(e){return this.bindings.get(e)}attachHost(e){if(!e.keyboardShortcuts)return;const t=e.keyboardShortcuts();return this.activeHosts.set(e,new Map(Object.entries(t))),this.notifyListeners(),t}detachHost(e){return!!this.activeHosts.delete(e)&&(this.notifyListeners(),!0)}addListener(e){this.listeners.add(e),e(this.directoryView())}removeListener(e){return this.listeners.delete(e)}getDescription(e,t){const n=Hu.get(e).find(e=>e.shortcut==t);return n?n.text:""}getShortcut(e){const t=this.bindings.get(e);return t?this.describeBinding(t):""}activeShortcutsBySection(){const e=new Set;this.activeHosts.forEach(t=>{t.forEach((t,n)=>e.add(n))});const t=new Map;return Hu.forEach((n,i)=>{n.forEach(n=>{e.has(n.shortcut)&&(t.has(i)||t.set(i,[]),t.get(i).push(n))})}),t}directoryView(){const e=new Map;return this.activeShortcutsBySection().forEach((t,n)=>{const i=[];t.forEach(e=>{const t=this.describeBindings(e.shortcut);t&&this.distributeBindingDesc(t).forEach(t=>{i.push({binding:t,text:e.text})})}),e.set(n,i)}),e}distributeBindingDesc(e){if(1===e.length||this.comboSetDisplayWidth(e)<21)return[e];const t=[e[0]];for(let n=1;n<e.length;n++)if(t.push(e[n]),this.comboSetDisplayWidth(t)>=21)return t.pop(),[t].concat(this.distributeBindingDesc(e.slice(n)))}comboSetDisplayWidth(e){return e.reduce((e,t)=>e+(e=>e.reduce((e,t)=>e+t.length,0))(t),0)+2*(e.length-1)}describeBindings(e){const t=this.bindings.get(e);return t?"GO_KEY"===t[0]?[["g"].concat(t.slice(1))]:t.filter(e=>"DOC_ONLY"!==e).map(e=>this.describeBinding(e)):null}describeBinding(e){return 1===e.length?[e]:e.split(":")[0].split("+").map(e=>{switch(e){case"shift":return"Shift";case"meta":return"Meta";case"ctrl":return"Ctrl";case"enter":return"Enter";case"up":return"↑";case"down":return"↓";case"left":return"←";case"right":return"→";default:return e}})}notifyListeners(){const e=this.directoryView();this.listeners.forEach(t=>t(e))}}const zu=new Vu,Wu=[Sr,{DOC_ONLY:"DOC_ONLY",GO_KEY:"GO_KEY",Shortcut:Uu,ShortcutSection:Fu,properties:{_shortcut_go_key_last_pressed:{type:Number,value:null},_shortcut_go_table:{type:Array,value:()=>new Map}},modifierPressed:e=>(e=Gu(e)).altKey||e.ctrlKey||e.metaKey||e.shiftKey,isModifierPressed:(e,t)=>Gu(e)[t],shouldSuppressKeyboardShortcut(e){e=Gu(e);const t=Ui(e).rootTarget.tagName;if("INPUT"===t||"TEXTAREA"===t||13===e.keyCode&&"A"===t)return!0;for(let t=0;e.path&&t<e.path.length;t++)if("GR-OVERLAY"===e.path[t].tagName)return!0;return this.dispatchEvent(new CustomEvent("shortcut-triggered",{detail:{event:e,goKey:this._inGoKeyMode()},composed:!0,bubbles:!0})),!1},getKeyboardEvent:e=>Gu(e),getRootTarget:e=>Ui(Gu(e)).rootTarget,bindShortcut(e,...t){zu.bindShortcut(e,...t)},createTitle(e,t){const n=zu.getDescription(t,e),i=zu.getShortcut(e);return n&&i?`${n} (shortcut: ${i})`:""},_addOwnKeyBindings(e,t){const n=zu.getBindingsForShortcut(e);n&&"DOC_ONLY"!==n[0]&&("GO_KEY"===n[0]?this._shortcut_go_table.set(n[1],t):this.addOwnKeyBinding(n.join(" "),t))},attached(){const e=zu.attachHost(this);if(e){for(const t of Object.keys(e))this._addOwnKeyBindings(t,e[t]);this._shortcut_go_table.size>0&&(this.addOwnKeyBinding("g:keydown","_handleGoKeyDown"),this.addOwnKeyBinding("g:keyup","_handleGoKeyUp"),this._shortcut_go_table.forEach((e,t)=>{this.addOwnKeyBinding(t,"_handleGoAction")}))}},detached(){zu.detachHost(this)&&this.removeOwnKeyBindings()},keyboardShortcuts:()=>({}),addKeyboardShortcutDirectoryListener(e){zu.addListener(e)},removeKeyboardShortcutDirectoryListener(e){zu.removeListener(e)},_handleGoKeyDown(e){this.modifierPressed(e)||(this._shortcut_go_key_last_pressed=Date.now())},_handleGoKeyUp(e){this._shortcut_go_key_last_pressed=null},_inGoKeyMode(){return this._shortcut_go_key_last_pressed&&Date.now()-this._shortcut_go_key_last_pressed<=1e3},_handleGoAction(e){if(!this._inGoKeyMode()||!this._shortcut_go_table.has(e.detail.key)||this.shouldSuppressKeyboardShortcut(e))return;e.preventDefault(),this[this._shortcut_go_table.get(e.detail.key)](e)}}],qu={DOC_ONLY:"DOC_ONLY",GO_KEY:"GO_KEY",Shortcut:Uu,ShortcutManager:Vu,ShortcutSection:Fu,bindShortcut(e,...t){zu.bindShortcut(e,...t)}};window.Gerrit=window.Gerrit||{},window.Gerrit.KeyboardShortcutBehavior=Wu,window.Gerrit.KeyboardShortcutBinder=qu;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ku extends(ra([Wu,Bu],Zn(na(Ka)))){static get template(){return Ou}static get is(){return"gr-button"}static get properties(){return{tooltip:String,downArrow:{type:Boolean,reflectToAttribute:!0},link:{type:Boolean,value:!1,reflectToAttribute:!0},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},noUppercase:{type:Boolean,value:!1},loading:{type:Boolean,value:!1,reflectToAttribute:!0},_disabled:{type:Boolean,computed:"_computeDisabled(disabled, loading)"},_initialTabindex:{type:String,value:"0"}}}created(){super.created(),this._initialTabindex=this.getAttribute("tabindex")||"0",this.addEventListener("click",e=>this._handleAction(e)),this.addEventListener("keydown",e=>this._handleKeydown(e))}ready(){super.ready(),this._ensureAttribute("role","button"),this._ensureAttribute("tabindex","0")}_handleAction(e){if(this._disabled)return e.preventDefault(),e.stopPropagation(),void e.stopImmediatePropagation();this.$.reporting.reportInteraction("button-click",{path:sr.getEventPath(e)})}_disabledChanged(e){this.setAttribute("tabindex",e?"-1":this._initialTabindex),this.updateStyles()}_computeDisabled(e,t){return e||t}_handleKeydown(e){this.modifierPressed(e)||13!==(e=this.getKeyboardEvent(e)).keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.click())}}customElements.define(Ku.is,Ku);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yu=za`
  <style include="shared-styles">
    :host {
      display: block;
      margin-bottom: var(--spacing-xxl);
    }
  </style>
  <h3>[[title]]</h3>
  <gr-button
    title$="[[tooltip]]"
    disabled$="[[disabled]]"
    on-click="_onCommandTap"
  >
    [[title]]
  </gr-button>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Xu extends(Zn(na(Ka))){static get template(){return Yu}static get is(){return"gr-repo-command"}static get properties(){return{title:String,disabled:Boolean,tooltip:String}}_onCommandTap(){this.dispatchEvent(new CustomEvent("command-tap",{bubbles:!0,composed:!0}))}}customElements.define(Xu.is,Xu),
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ma({_template:za`
    <gr-repo-command title="[[title]]">
    </gr-repo-command>
`,is:"gr-plugin-repo-command",properties:{title:String,repoName:String,config:Object}});
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ju=document.createElement("template");function Zu(e){this._hook=null,this.plugin=e}Ju.innerHTML='<dom-module id="gr-repo-api">\n  \n</dom-module>',document.head.appendChild(Ju.content),Zu.prototype._createHook=function(e){this._hook=this.plugin.hook("repo-command").onAttached(t=>{const n=document.createElement("gr-plugin-repo-command");n.title=e,t.appendChild(n)})},Zu.prototype.createCommand=function(e,t){return this._hook?(console.warn("Already set up."),this._hook):(this._createHook(e),this._hook.onAttached(e=>{!1===t(e.repoName,e.config)&&(e.hidden=!0)}),this)},Zu.prototype.onTap=function(e){return this._hook?(this._hook.onAttached(t=>{this.plugin.eventHelper(t).on("command-tap",e)}),this):(console.warn("Call createCommand first."),this)};
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qu=za`
  <style>
    :host {
      display: block;
      margin-bottom: var(--spacing-xxl);
    }
  </style>
  <h2 id="[[anchor]]">[[title]]</h2>
  <slot></slot>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class em extends(Zn(na(Ka))){static get template(){return Qu}static get is(){return"gr-settings-item"}static get properties(){return{anchor:String,title:String}}}customElements.define(em.is,em);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tm=document.createElement("template");tm.innerHTML='<dom-module id="gr-page-nav-styles">\n  <template>\n    <style>\n      .navStyles ul {\n        padding: var(--spacing-l) 0;\n      }\n      .navStyles li {\n        border-bottom: 1px solid transparent;\n        border-top: 1px solid transparent;\n        display: block;\n        padding: 0 var(--spacing-xl);\n      }\n      .navStyles li a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      .navStyles .subsectionItem {\n        padding-left: var(--spacing-xxl);\n      }\n      .navStyles .hideSubsection {\n        display: none;\n      }\n      .navStyles li.sectionTitle {\n        padding: 0 var(--spacing-xxl) 0 var(--spacing-l);\n      }\n      .navStyles li.sectionTitle:not(:first-child) {\n        margin-top: var(--spacing-l);\n      }\n      .navStyles .title {\n        font-weight: var(--font-weight-bold);\n        margin: var(--spacing-s) 0;\n      }\n      .navStyles .selected {\n        background-color: var(--view-background-color);\n        border-bottom: 1px solid var(--border-color);\n        border-top: 1px solid var(--border-color);\n        font-weight: var(--font-weight-bold);\n      }\n      .navStyles a {\n        color: var(--primary-text-color);\n        display: inline-block;\n        margin: var(--spacing-s) 0;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(tm.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nm=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-page-nav-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="navStyles">
    <li><a href$="[[href]]">[[title]]</a></li>
  </div>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class im extends(Zn(na(Ka))){static get template(){return nm}static get is(){return"gr-settings-menu-item"}static get properties(){return{href:String,title:String}}}customElements.define(im.is,im);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Settings
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sm=document.createElement("template");function am(e){this._title="(no title)",this._token=e.getPluginName()+Math.random().toString(36).substr(5),this.plugin=e}sm.innerHTML='<dom-module id="gr-settings-api">\n  \n</dom-module>',document.head.appendChild(sm.content),am.prototype.title=function(e){return this._title=e,this},am.prototype.token=function(e){return this._token=e,this},am.prototype.module=function(e){return this._moduleName=e,this},am.prototype.build=function(){if(!this._moduleName)throw new Error("Settings screen custom element not defined!");const e=`x/${this.plugin.getPluginName()}/${this._token}`;return this.plugin.hook("settings-menu-item").onAttached(t=>{const n=document.createElement("gr-settings-menu-item");n.title=this._title,n.href=`#${e}`,t.appendChild(n)}),this.plugin.hook("settings-screen").onAttached(t=>{const n=document.createElement("gr-settings-item");n.title=this._title,n.anchor=e,n.appendChild(document.createElement(this._moduleName)),t.appendChild(n)})};
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let om=0;function rm(e){this._rulesStr=e,this._className=`__pg_js_api_class_${om}`,om++}function lm(){}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function cm(e,t,n,i){this.action=t,this.plugin=e,this.change=n,this.revision=i,this._popups=[]}rm.prototype.getClassName=function(e){let t=Polymer.Settings.useShadow?e.getRootNode():document.body;if(t===document&&(t=document.head),t.__pg_js_api_style_tags||(t.__pg_js_api_style_tags={}),!t.__pg_js_api_style_tags[this._className]){const e=document.createElement("style");e.innerHTML=`.${this._className} { ${this._rulesStr} }`,t.appendChild(e),t.__pg_js_api_style_tags[this._className]=!0}return this._className},rm.prototype.apply=function(e){e.classList.add(this.getClassName(e))},lm.prototype.css=function(e){return new rm(e)},cm.prototype.popup=function(e){this._popups.push(this.plugin.deprecated.popup(e))},cm.prototype.hide=function(){for(const e of this._popups)e.close();this._popups.splice(0)},cm.prototype.refresh=function(){window.location.reload()},cm.prototype.textfield=function(){return document.createElement("paper-input")},cm.prototype.br=function(){return document.createElement("br")},cm.prototype.msg=function(e){const t=document.createElement("gr-label");return Polymer.dom(t).appendChild(document.createTextNode(e)),t},cm.prototype.div=function(...e){const t=document.createElement("div");for(const n of e)Polymer.dom(t).appendChild(n);return t},cm.prototype.button=function(e,t){const n=t&&t.onclick,i=document.createElement("gr-button");return Polymer.dom(i).appendChild(document.createTextNode(e)),n&&this.plugin.eventHelper(i).onTap(n),i},cm.prototype.checkbox=function(){const e=document.createElement("input");return e.type="checkbox",e},cm.prototype.label=function(e,t){return this.div(e,this.msg(t))},cm.prototype.prependLabel=function(e,t){return this.label(t,e)},cm.prototype.call=function(e,t){this.action.__url?this.plugin.restApi().send(this.action.method,this.action.__url,e).then(t).catch(e=>{document.dispatchEvent(new CustomEvent("show-alert",{detail:{message:`Plugin network error: ${e}`}}))}):console.warn(`Unable to ${this.action.method} to ${this.action.__key}!`)};
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const dm=()=>{console.warn("Use of uninitialized routing")},hm=/\$\{user\}/g,pm=[{name:"Has draft comments",query:"has:draft",selfOnly:!0,hideIfEmpty:!0,suffixForDashboard:"limit:10"},{name:"Assigned reviews",query:"assignee:${user} (-is:wip OR owner:self OR assignee:self) is:open -is:ignored",hideIfEmpty:!0,suffixForDashboard:"limit:25"},{name:"Work in progress",query:"is:open owner:${user} is:wip",selfOnly:!0,hideIfEmpty:!0,suffixForDashboard:"limit:25"},{name:"Outgoing reviews",query:"is:open owner:${user} -is:wip -is:ignored",isOutgoing:!0,suffixForDashboard:"limit:25"},{name:"Incoming reviews",query:"is:open -owner:${user} -is:wip -is:ignored (reviewer:${user} OR assignee:${user})",suffixForDashboard:"limit:25"},{name:"CCed on",query:"is:open -is:ignored cc:${user}",suffixForDashboard:"limit:10"},{name:"Recently closed",query:"is:closed -is:ignored (-is:wip OR owner:self) (owner:${user} OR reviewer:${user} OR assignee:${user} OR cc:${user})",suffixForDashboard:"-age:4w limit:10"}],um={View:{ADMIN:"admin",AGREEMENTS:"agreements",CHANGE:"change",DASHBOARD:"dashboard",DIFF:"diff",DOCUMENTATION_SEARCH:"documentation-search",EDIT:"edit",GROUP:"group",PLUGIN_SCREEN:"plugin-screen",REPO:"repo",ROOT:"root",SEARCH:"search",SETTINGS:"settings"},GroupDetailView:{MEMBERS:"members",LOG:"log"},RepoDetailView:{ACCESS:"access",BRANCHES:"branches",COMMANDS:"commands",DASHBOARDS:"dashboards",TAGS:"tags"},WeblinkType:{CHANGE:"change",FILE:"file",PATCHSET:"patchset"},_navigate:dm,_generateUrl:dm,_generateWeblinks:dm,mapCommentlinks:dm,_checkPatchRange(e,t){if(t&&!e)throw new Error("Cannot use base patch number without patch number.")},setup(e,t,n,i){this._navigate=e,this._generateUrl=t,this._generateWeblinks=n,this.mapCommentlinks=i},destroy(){this._navigate=dm,this._generateUrl=dm,this._generateWeblinks=dm,this.mapCommentlinks=dm},_getUrlFor(e){return this._generateUrl(e)},getUrlForSearchQuery(e,t){return this._getUrlFor({view:um.View.SEARCH,query:e,offset:t})},getUrlForProjectChanges(e,t,n){return this._getUrlFor({view:um.View.SEARCH,project:e,statuses:t?["open"]:[],host:n})},getUrlForBranch(e,t,n,i){return this._getUrlFor({view:um.View.SEARCH,branch:e,project:t,statuses:n?[n]:void 0,host:i})},getUrlForTopic(e,t){return this._getUrlFor({view:um.View.SEARCH,topic:e,statuses:["open","merged"],host:t})},getUrlForHashtag(e){return this._getUrlFor({view:um.View.SEARCH,hashtag:e,statuses:["open","merged"]})},navigateToStatusSearch(e){this._navigate(this._getUrlFor({view:um.View.SEARCH,statuses:[e]}))},navigateToSearchQuery(e,t){return this._navigate(this.getUrlForSearchQuery(e,t))},navigateToUserDashboard(){return this._navigate(this.getUrlForUserDashboard("self"))},getUrlForChange(e,t,n,i,s){return"PARENT"===n&&(n=void 0),this._checkPatchRange(t,n),this._getUrlFor({view:um.View.CHANGE,changeNum:e._number,project:e.project,patchNum:t,basePatchNum:n,edit:i,host:e.internalHost||void 0,messageHash:s})},getUrlForChangeById(e,t,n){return this._getUrlFor({view:um.View.CHANGE,changeNum:e,project:t,patchNum:n})},navigateToChange(e,t,n,i){this._navigate(this.getUrlForChange(e,t,n,i))},getUrlForDiff(e,t,n,i,s){return this.getUrlForDiffById(e._number,e.project,t,n,i,s)},getUrlForDiffById(e,t,n,i,s,a,o){return"PARENT"===s&&(s=void 0),this._checkPatchRange(i,s),this._getUrlFor({view:um.View.DIFF,changeNum:e,project:t,path:n,patchNum:i,basePatchNum:s,lineNum:a,leftSide:o})},getEditUrlForDiff(e,t,n){return this.getEditUrlForDiffById(e._number,e.project,t,n)},getEditUrlForDiffById(e,t,n,i){return this._getUrlFor({view:um.View.EDIT,changeNum:e,project:t,path:n,patchNum:i||"edit"})},navigateToDiff(e,t,n,i){this._navigate(this.getUrlForDiff(e,t,n,i))},getUrlForOwner(e){return this._getUrlFor({view:um.View.SEARCH,owner:e})},getUrlForUserDashboard(e){return this._getUrlFor({view:um.View.DASHBOARD,user:e})},getUrlForRoot(){return this._getUrlFor({view:um.View.ROOT})},getUrlForRepoDashboard(e,t){return this._getUrlFor({view:um.View.DASHBOARD,repo:e,dashboard:t})},navigateToRelativeUrl(e){if(!e.startsWith("/"))throw new Error("navigateToRelativeUrl with non-relative URL");this._navigate(e)},getUrlForRepo(e){return this._getUrlFor({view:um.View.REPO,repoName:e})},navigateToRepo(e){this._navigate(this.getUrlForRepo(e))},getUrlForRepoTags(e){return this._getUrlFor({view:um.View.REPO,repoName:e,detail:um.RepoDetailView.TAGS})},getUrlForRepoBranches(e){return this._getUrlFor({view:um.View.REPO,repoName:e,detail:um.RepoDetailView.BRANCHES})},getUrlForRepoAccess(e){return this._getUrlFor({view:um.View.REPO,repoName:e,detail:um.RepoDetailView.ACCESS})},getUrlForRepoCommands(e){return this._getUrlFor({view:um.View.REPO,repoName:e,detail:um.RepoDetailView.COMMANDS})},getUrlForRepoDashboards(e){return this._getUrlFor({view:um.View.REPO,repoName:e,detail:um.RepoDetailView.DASHBOARDS})},getUrlForGroup(e){return this._getUrlFor({view:um.View.GROUP,groupId:e})},getUrlForGroupLog(e){return this._getUrlFor({view:um.View.GROUP,groupId:e,detail:um.GroupDetailView.LOG})},getUrlForGroupMembers(e){return this._getUrlFor({view:um.View.GROUP,groupId:e,detail:um.GroupDetailView.MEMBERS})},getUrlForSettings(){return this._getUrlFor({view:um.View.SETTINGS})},getFileWebLinks(e,t,n,i){const s={type:um.WeblinkType.FILE,repo:e,commit:t,file:n};return i&&(s.options=i),[].concat(this._generateWeblinks(s))},getPatchSetWeblink(e,t,n){const i={type:um.WeblinkType.PATCHSET,repo:e,commit:t};n&&(i.options=n);const s=this._generateWeblinks(i);return Array.isArray(s)?s.pop():s},getChangeWeblinks(e,t,n){const i={type:um.WeblinkType.CHANGE,repo:e,commit:t};return n&&(i.options=n),[].concat(this._generateWeblinks(i))},getUserDashboard:(e="self",t=pm,n="")=>({title:n,sections:t=t.filter(t=>"self"===e||!t.selfOnly).map(t=>Object.assign({},t,{name:t.name,query:t.query.replace(hm,e)}))})},mm="left",gm="right";function _m(e,t){return!e&&!t||!(!e||!t)&&(e.start_line===t.start_line&&e.start_character===t.start_character&&e.end_line===t.end_line&&e.end_character===t.end_character)}
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=["autogenerated:gerrit:newWipPatchSet","autogenerated:gerrit:setWorkInProgress"],bm=["autogenerated:gerrit:setReadyForReview"],vm={EDIT_NAME:"edit",PARENT_NAME:"PARENT",patchNumEquals:(e,t)=>e+""==t+"",isMergeParent:e=>"-"===(e+"")[0],getRevisionByPatchNum(e,t){for(const n of Object.values(e||{}))if(vm.patchNumEquals(n._number,t))return n},findEditParentRevision(e){const t=e.find(e=>e._number===vm.EDIT_NAME);return t&&e.find(e=>e._number===t.basePatchNum)||null},findEditParentPatchNum(e){const t=vm.findEditParentRevision(e);return t?t._number:-1},sortRevisions(e){const t=vm.findEditParentPatchNum(e),n=e=>e._number===vm.EDIT_NAME?2*t:2*(e._number-1)+1;return e.sort((e,t)=>n(t)-n(e))},computeAllPatchSets(e){if(!e)return[];let t=[];if(e.revisions&&Object.keys(e.revisions).length){const n=Object.keys(e.revisions).map(t=>Object.assign({sha:t},e.revisions[t]));t=vm.sortRevisions(n).map(e=>({num:e._number,desc:e.description,sha:e.sha}))}return vm._computeWipForPatchSets(e,t)},_computeWipForPatchSets(e,t){if(!e.messages||!e.messages.length)return t;const n={};let i=e.work_in_progress;for(let t=0;t<e.messages.length;t++){const s=e.messages[t];fm.includes(s.tag)?i=!0:bm.includes(s.tag)&&(i=!1),!1!==n[s._revision_number]&&(n[s._revision_number]=i)}for(let e=0;e<t.length;e++)t[e].wip=n[t[e].num];return t},computeLatestPatchNum(e){if(e&&e.length)return e[0].num===vm.EDIT_NAME?e[1].num:e[0].num},hasEditBasedOnCurrentPatchSet:e=>!(!e||e.length<2)&&e[0].num===vm.EDIT_NAME,hasEditPatchsetLoaded(e){const t=e.base;return!!t&&(t.patchNum===vm.EDIT_NAME||t.basePatchNum===vm.EDIT_NAME)},fetchChangeUpdates(e,t){const n=vm.computeLatestPatchNum(vm.computeAllPatchSets(e));return t.getChangeDetail(e._number).then(t=>{if(!t){const e=new Error("Unable to check for latest patchset.");return Promise.reject(e)}return{isLatest:vm.computeLatestPatchNum(vm.computeAllPatchSets(t))<=n,newStatus:e.status!==t.status?t.status:null,newMessages:e.messages.length<t.messages.length}})},findSortedIndex:(e,t)=>(t=t||[]).findIndex(t=>t._number+""==e+""),getParentIndex:e=>-parseInt(e+"",10)};
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ym(e){this._change=e}window.Gerrit=window.Gerrit||{},window.Gerrit.PatchSetBehavior=vm,ym.prototype.getMaxParents=function(){return this._change&&this._change.revisions?Object.values(this._change.revisions).reduce((e,t)=>Math.max(t.commit.parents.length,e),0):0},ym.prototype.getParentCountMap=function(){const e={};return this._change&&this._change.revisions?(Object.values(this._change.revisions).forEach(t=>{e[t._number]=t.commit.parents.length}),e):{}},ym.prototype.getParentCount=function(e){return this.getParentCountMap()[e]},ym.prototype.getParentId=function(e,t){return Object.values(this._change.revisions).find(t=>vm.patchNumEquals(t._number,e)).commit.parents[t].commit};
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wm={COVERED:"COVERED",NOT_COVERED:"NOT_COVERED",PARTIALLY_COVERED:"PARTIALLY_COVERED",NOT_INSTRUMENTED:"NOT_INSTRUMENTED"},Cm=window.Gerrit||{};Cm.Range,Cm.HoveredRange,Cm.CoverageRange,Cm.PatchRange,Cm.ChangeFetchRequest,Cm.Change,Cm.SendRequest,Cm.ChangeSendRequest,Cm.FetchRequest,Cm.FetchJSONRequest,Cm.PushCertificateValidation,Cm.LayoutStats,Cm.CommentMeta,Cm.CommentsBySide,Cm.IntralineInfo,Cm.DiffChunk,Cm.LineOfInterest,Cm.CommentLinkItem,Cm.GrSuggestionItem,Cm.GrSuggestionsProvider,Cm.Comment;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Em=void 0;function Sm(e){Em=e}function xm(){return Em}
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.addEventListener("WebComponentsReady",()=>{const e=document.createElement("div");e.setAttribute("style","width:100px;height:100px;overflow:scroll"),document.body.appendChild(e),Em=e.offsetWidth===e.clientWidth,e.remove()});
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Am=document.createElement("template");Am.innerHTML="<custom-style><style is=\"custom-style\">\nhtml {\n  /**\n   * When adding a new color variable make sure to also add it to the other\n   * theme files in the same directory.\n   *\n   * For colors prefer lower case hex colors.\n   *\n   * Note that plugins might be using these variables, so removing a variable\n   * can be a breaking change that should go into the release notes.\n   */\n\n  /* text colors */\n  --primary-text-color: black;\n  --link-color: #2a66d9;\n  --comment-text-color: black;\n  --deemphasized-text-color: #5F6368;\n  --default-button-text-color: #2a66d9;\n  --error-text-color: red;\n  --primary-button-text-color: white;\n    /* Used on text color for change list that doesn't need user's attention. */\n  --reviewed-text-color: black;\n  --tooltip-text-color: white;\n  --vote-text-color-recommended: #388e3c;\n  --vote-text-color-disliked: #d32f2f;\n\n  /* background colors */\n  /* primary background colors */\n  --background-color-primary: #ffffff;\n  --background-color-secondary: #f8f9fa;\n  --background-color-tertiary: #f1f3f4;\n  /* directly derived from primary background colors */\n  --chip-background-color: var(--background-color-tertiary);\n  --default-button-background-color: var(--background-color-primary);\n  --dialog-background-color: var(--background-color-primary);\n  --dropdown-background-color: var(--background-color-primary);\n  --expanded-background-color: var(--background-color-tertiary);\n  --select-background-color: var(--background-color-secondary);\n  --shell-command-background-color: var(--background-color-secondary);\n  --shell-command-decoration-background-color: var(--background-color-tertiary);\n  --table-header-background-color: var(--background-color-secondary);\n  --table-subheader-background-color: var(--background-color-tertiary);\n  --view-background-color: var(--background-color-primary);\n  /* unique background colors */\n  --assignee-highlight-color: #fcfad6;\n  --edit-mode-background-color: #ebf5fb;\n  --emphasis-color: #fff9c4;\n  --hover-background-color: rgba(161, 194, 250, 0.2);\n  --disabled-button-background-color: #e8eaed;\n  --primary-button-background-color: #2a66d9;\n  --selection-background-color: rgba(161, 194, 250, 0.1);\n  --tooltip-background-color: #333;\n  /* comment background colors */\n  --comment-background-color: #e8eaed;\n  --robot-comment-background-color: #e8f0fe;\n  --unresolved-comment-background-color: #fef7e0;\n  /* vote background colors */\n  --vote-color-approved: #9fcc6b;\n  --vote-color-disliked: #f7c4cb;\n  --vote-color-neutral: #ebf5fb;\n  --vote-color-recommended: #c9dfaf;\n  --vote-color-rejected: #f7a1ad;\n\n  /* misc colors */\n  --border-color: #e8e8e8;\n  --comment-separator-color: #dadce0;\n\n  /* fonts */\n  --font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  --header-font-family: 'Open Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  --monospace-font-family: 'Roboto Mono', 'SF Mono', 'Lucida Console', Monaco, monospace;\n  --font-size-code: 12px;     /* 12px mono */\n  --font-size-mono: .929rem;  /* 13px mono */\n  --font-size-small: .857rem; /* 12px */\n  --font-size-normal: 1rem;   /* 14px */\n  --font-size-h3: 1.143rem;   /* 16px */\n  --font-size-h2: 1.429rem;   /* 20px */\n  --font-size-h1: 1.714rem;   /* 24px */\n  --line-height-code: 1.334;      /* 16px */\n  --line-height-mono: 1.286rem;   /* 18px */\n  --line-height-small: 1.143rem;  /* 16px */\n  --line-height-normal: 1.429rem; /* 20px */\n  --line-height-h3: 1.714rem;     /* 24px */\n  --line-height-h2: 2rem;         /* 28px */\n  --line-height-h1: 2.286rem;     /* 32px */\n  --font-weight-normal: 400; /* 400 is the same as 'normal' */\n  --font-weight-bold: 500;\n  --font-weight-h1: 400;\n  --font-weight-h2: 400;\n  --font-weight-h3: 400;\n\n  /* spacing */\n  --spacing-xxs: 1px;\n  --spacing-xs: 2px;\n  --spacing-s: 4px;\n  --spacing-m: 8px;\n  --spacing-l: 12px;\n  --spacing-xl: 16px;\n  --spacing-xxl: 24px;\n\n  /* header and footer */\n  --footer-background-color: transparent;\n  --footer-border-top: none;\n  --header-background-color: var(--background-color-tertiary);\n  --header-border-bottom: 1px solid var(--border-color);\n  --header-border-image: '';\n  --header-box-shadow: none;\n  --header-padding: 0 var(--spacing-l);\n  --header-icon-size: 0em;\n  --header-icon: none;\n  --header-text-color: black;\n  --header-title-content: 'Gerrit';\n  --header-title-font-size: 1.75rem;\n\n  /* diff colors */\n  --dark-add-highlight-color: #aaf2aa;\n  --dark-rebased-add-highlight-color: #d7d7f9;\n  --dark-rebased-remove-highlight-color: #f7e8b7;\n  --dark-remove-highlight-color: #ffcdd2;\n  --diff-blank-background-color: var(--background-color-secondary);\n  --diff-context-control-background-color: #fff7d4;\n  --diff-context-control-border-color: #f6e6a5;\n  --diff-context-control-color: var(--deemphasized-text-color);\n  --diff-highlight-range-color: rgba(255, 213, 0, 0.5);\n  --diff-highlight-range-hover-color: rgba(255, 255, 0, 0.5);\n  --diff-selection-background-color: #c7dbf9;\n  --diff-tab-indicator-color: var(--deemphasized-text-color);\n  --diff-trailing-whitespace-indicator: #ff9ad2;\n  --light-add-highlight-color: #d8fed8;\n  --light-rebased-add-highlight-color: #eef;\n  --light-remove-add-highlight-color: #fff8dc;\n  --light-remove-highlight-color: #ffebee;\n  --coverage-covered: #e0f2f1;\n  --coverage-not-covered: #ffd1a4;\n\n  /* syntax colors */\n  --syntax-attr-color: #219;\n  --syntax-attribute-color: var(--primary-text-color);\n  --syntax-built_in-color: #30a;\n  --syntax-comment-color: #3f7f5f;\n  --syntax-default-color: var(--primary-text-color);\n  --syntax-doctag-weight: bold;\n  --syntax-function-color: var(--primary-text-color);\n  --syntax-keyword-color: #9e0069;\n  --syntax-link-color: #219;\n  --syntax-literal-color: #219;\n  --syntax-meta-color: #ff1717;\n  --syntax-meta-keyword-color: #219;\n  --syntax-number-color: #164;\n  --syntax-params-color: var(--primary-text-color);\n  --syntax-regexp-color: #fa8602;\n  --syntax-selector-attr-color: #fa8602;\n  --syntax-selector-class-color: #164;\n  --syntax-selector-id-color: #2a00ff;\n  --syntax-selector-pseudo-color: #fa8602;\n  --syntax-string-color: #2a00ff;\n  --syntax-tag-color: #170;\n  --syntax-template-tag-color: #fa8602;\n  --syntax-template-variable-color: #0000c0;\n  --syntax-title-color: #0000c0;\n  --syntax-type-color: #2a66d9;\n  --syntax-variable-color: var(--primary-text-color);\n\n  /* elevation */\n  --elevation-level-1: 0px 1px 2px 0px rgba(60, 64, 67, .30), 0px 1px 3px 1px rgba(60, 64, 67, .15);\n  --elevation-level-2: 0px 1px 2px 0px rgba(60, 64, 67, .30), 0px 2px 6px 2px rgba(60, 64, 67, .15);\n  --elevation-level-3: 0px 1px 3px 0px rgba(60, 64, 67, .30), 0px 4px 8px 3px rgba(60, 64, 67, .15);\n  --elevation-level-4: 0px 2px 3px 0px rgba(60, 64, 67, .30), 0px 6px 10px 4px rgba(60, 64, 67, .15);\n  --elevation-level-5: 0px 4px 4px 0px rgba(60, 64, 67, .30), 0px 8px 12px 6px rgba(60, 64, 67, .15);\n\n  /* misc */\n  --border-radius: 4px;\n  --reply-overlay-z-index: 1000;\n\n  /* paper and iron component overrides */\n  --iron-overlay-backdrop-background-color: black;\n  --iron-overlay-backdrop-opacity: 0.32;\n  --iron-overlay-backdrop: {\n    transition: none;\n  };\n}\n@media screen and (max-width: 50em) {\n  html {\n    --spacing-xxs: 1px;\n    --spacing-xs: 1px;\n    --spacing-s: 2px;\n    --spacing-m: 4px;\n    --spacing-l: 8px;\n    --spacing-xl: 12px;\n    --spacing-xxl: 16px;\n  }\n}\n</style></custom-style>",document.head.appendChild(Am.content);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Pm=document.createElement("template");Pm.innerHTML="<dom-module id=\"gr-menu-page-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n      }\n      main {\n        margin: var(--spacing-xxl) auto;\n        max-width: 50em;\n      }\n      .mainHeader {\n        margin-left: 14em;\n        padding: var(--spacing-l) 0 var(--spacing-l) var(--spacing-xxl);\n      }\n      main.table,\n      .mainHeader {\n        margin-top: 0;\n        margin-right: 0;\n        margin-left: 14em;\n        max-width: none;\n      }\n      h2.edited:after {\n        color: var(--deemphasized-text-color);\n        content: ' *';\n      }\n      .loading {\n        color: var(--deemphasized-text-color);\n        padding: var(--spacing-l);\n      }\n      @media only screen and (max-width: 67em) {\n        main {\n          margin: var(--spacing-xxl) 0 var(--spacing-xxl) 15em;\n        }\n        main.table {\n          margin-left: 14em;\n        }\n      }\n      @media only screen and (max-width: 53em) {\n        .loading {\n          padding: 0 var(--spacing-l);\n        }\n        main {\n          margin: var(--spacing-xxl) var(--spacing-l);\n        }\n        main.table {\n          margin: 0;\n        }\n        .mainHeader {\n          margin-left: 0;\n          padding: var(--spacing-m) 0 var(--spacing-m) var(--spacing-l);\n        }\n      }\n    </style>\n  </template>\n</dom-module>",document.head.appendChild(Pm.content),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        position: fixed;
      }

      #contentWrapper ::slotted(*) {
        overflow: auto;
      }

      #contentWrapper.animating ::slotted(*) {
        overflow: hidden;
        pointer-events: none;
      }
    </style>

    <div id="contentWrapper">
      <slot id="content" name="dropdown-content"></slot>
    </div>
`,is:"iron-dropdown",behaviors:[Fp,Sr,Ur,[{properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(e,t){for(var n in t)e[n]=t[n]},_cloneConfig:function(e){var t={isClone:!0};return this._copyProperties(t,e),t},_getAnimationConfigRecursive:function(e,t,n){var i;if(this.animationConfig)if(this.animationConfig.value&&"function"==typeof this.animationConfig.value)this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));else if(i=e?this.animationConfig[e]:this.animationConfig,Array.isArray(i)||(i=[i]),i)for(var s,a=0;s=i[a];a++)if(s.animatable)s.animatable._getAnimationConfigRecursive(s.type||e,t,n);else if(s.id){var o=t[s.id];o?(o.isClone||(t[s.id]=this._cloneConfig(o),o=t[s.id]),this._copyProperties(o,s)):t[s.id]=s}else n.push(s)},getAnimationConfig:function(e){var t={},n=[];for(var i in this._getAnimationConfigRecursive(e,t,n),t)n.push(t[i]);return n}},{_configureAnimations:function(e){var t=[],n=[];if(e.length>0)for(let t,i=0;t=e[i];i++){let e=document.createElement(t.name);if(e.isNeonAnimation){let i=null;e.configure||(e.configure=function(e){return null}),i=e.configure(t),n.push({result:i,config:t,neonAnimation:e})}else console.warn(this.is+":",t.name,"not found!")}for(var i=0;i<n.length;i++){let e=n[i].result,s=n[i].config,a=n[i].neonAnimation;try{"function"!=typeof e.cancel&&(e=document.timeline.play(e))}catch(t){e=null,console.warn("Couldnt play","(",s.name,").",t)}e&&t.push({neonAnimation:a,config:s,animation:e})}return t},_shouldComplete:function(e){for(var t=!0,n=0;n<e.length;n++)if("finished"!=e[n].animation.playState){t=!1;break}return t},_complete:function(e){for(var t=0;t<e.length;t++)e[t].neonAnimation.complete(e[t].config);for(t=0;t<e.length;t++)e[t].animation.cancel()},playAnimation:function(e,t){var n=this.getAnimationConfig(e);if(n){this._active=this._active||{},this._active[e]&&(this._complete(this._active[e]),delete this._active[e]);var i=this._configureAnimations(n);if(0!=i.length){this._active[e]=i;for(var s=0;s<i.length;s++)i[s].animation.onfinish=function(){this._shouldComplete(i)&&(this._complete(i),delete this._active[e],this.fire("neon-animation-finish",t,{bubbles:!1}))}.bind(this)}else this.fire("neon-animation-finish",t,{bubbles:!1})}},cancelAnimation:function(){for(var e in this._active){var t=this._active[e];for(var n in t)t[n].animation.cancel()}this._active={}}}]],properties:{horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1,observer:"_allowOutsideScrollChanged"}},listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},observers:["_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"],get containedElement(){for(var e=Ui(this.$.content).getDistributedNodes(),t=0,n=e.length;t<n;t++)if(e[t].nodeType===Node.ELEMENT_NODE)return e[t]},ready:function(){this.scrollAction||(this.scrollAction=this.allowOutsideScroll?"refit":"lock"),this._readied=!0},attached:function(){this.sizingTarget&&this.sizingTarget!==this||(this.sizingTarget=this.containedElement||this)},detached:function(){this.cancelAnimation()},_openedChanged:function(){this.opened&&this.disabled?this.cancel():(this.cancelAnimation(),this._updateAnimationConfig(),Br._openedChanged.apply(this,arguments))},_renderOpened:function(){!this.noAnimations&&this.animationConfig.open?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("open")):Br._renderOpened.apply(this,arguments)},_renderClosed:function(){!this.noAnimations&&this.animationConfig.close?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("close")):Br._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove("animating"),this.opened?this._finishRenderOpened():this._finishRenderClosed()},_updateAnimationConfig:function(){for(var e=this.containedElement,t=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),n=0;n<t.length;n++)t[n].node=e;this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function(){this.isAttached&&this.notifyResize()},_allowOutsideScrollChanged:function(e){this._readied&&(e?this.scrollAction&&"lock"!==this.scrollAction||(this.scrollAction="refit"):this.scrollAction="lock")},_applyFocus:function(){var e=this.focusTarget||this.containedElement;e&&this.opened&&!this.noAutoFocus?e.focus():Br._applyFocus.apply(this,arguments)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const km=za`
<custom-style>
  <style is="custom-style">
    html {

      /* Material Design color palette for Google products */

      --google-red-100: #f4c7c3;
      --google-red-300: #e67c73;
      --google-red-500: #db4437;
      --google-red-700: #c53929;

      --google-blue-100: #c6dafc;
      --google-blue-300: #7baaf7;
      --google-blue-500: #4285f4;
      --google-blue-700: #3367d6;

      --google-green-100: #b7e1cd;
      --google-green-300: #57bb8a;
      --google-green-500: #0f9d58;
      --google-green-700: #0b8043;

      --google-yellow-100: #fce8b2;
      --google-yellow-300: #f7cb4d;
      --google-yellow-500: #f4b400;
      --google-yellow-700: #f09300;

      --google-grey-100: #f5f5f5;
      --google-grey-300: #e0e0e0;
      --google-grey-500: #9e9e9e;
      --google-grey-700: #616161;

      /* Material Design color palette from online spec document */

      --paper-red-50: #ffebee;
      --paper-red-100: #ffcdd2;
      --paper-red-200: #ef9a9a;
      --paper-red-300: #e57373;
      --paper-red-400: #ef5350;
      --paper-red-500: #f44336;
      --paper-red-600: #e53935;
      --paper-red-700: #d32f2f;
      --paper-red-800: #c62828;
      --paper-red-900: #b71c1c;
      --paper-red-a100: #ff8a80;
      --paper-red-a200: #ff5252;
      --paper-red-a400: #ff1744;
      --paper-red-a700: #d50000;

      --paper-pink-50: #fce4ec;
      --paper-pink-100: #f8bbd0;
      --paper-pink-200: #f48fb1;
      --paper-pink-300: #f06292;
      --paper-pink-400: #ec407a;
      --paper-pink-500: #e91e63;
      --paper-pink-600: #d81b60;
      --paper-pink-700: #c2185b;
      --paper-pink-800: #ad1457;
      --paper-pink-900: #880e4f;
      --paper-pink-a100: #ff80ab;
      --paper-pink-a200: #ff4081;
      --paper-pink-a400: #f50057;
      --paper-pink-a700: #c51162;

      --paper-purple-50: #f3e5f5;
      --paper-purple-100: #e1bee7;
      --paper-purple-200: #ce93d8;
      --paper-purple-300: #ba68c8;
      --paper-purple-400: #ab47bc;
      --paper-purple-500: #9c27b0;
      --paper-purple-600: #8e24aa;
      --paper-purple-700: #7b1fa2;
      --paper-purple-800: #6a1b9a;
      --paper-purple-900: #4a148c;
      --paper-purple-a100: #ea80fc;
      --paper-purple-a200: #e040fb;
      --paper-purple-a400: #d500f9;
      --paper-purple-a700: #aa00ff;

      --paper-deep-purple-50: #ede7f6;
      --paper-deep-purple-100: #d1c4e9;
      --paper-deep-purple-200: #b39ddb;
      --paper-deep-purple-300: #9575cd;
      --paper-deep-purple-400: #7e57c2;
      --paper-deep-purple-500: #673ab7;
      --paper-deep-purple-600: #5e35b1;
      --paper-deep-purple-700: #512da8;
      --paper-deep-purple-800: #4527a0;
      --paper-deep-purple-900: #311b92;
      --paper-deep-purple-a100: #b388ff;
      --paper-deep-purple-a200: #7c4dff;
      --paper-deep-purple-a400: #651fff;
      --paper-deep-purple-a700: #6200ea;

      --paper-indigo-50: #e8eaf6;
      --paper-indigo-100: #c5cae9;
      --paper-indigo-200: #9fa8da;
      --paper-indigo-300: #7986cb;
      --paper-indigo-400: #5c6bc0;
      --paper-indigo-500: #3f51b5;
      --paper-indigo-600: #3949ab;
      --paper-indigo-700: #303f9f;
      --paper-indigo-800: #283593;
      --paper-indigo-900: #1a237e;
      --paper-indigo-a100: #8c9eff;
      --paper-indigo-a200: #536dfe;
      --paper-indigo-a400: #3d5afe;
      --paper-indigo-a700: #304ffe;

      --paper-blue-50: #e3f2fd;
      --paper-blue-100: #bbdefb;
      --paper-blue-200: #90caf9;
      --paper-blue-300: #64b5f6;
      --paper-blue-400: #42a5f5;
      --paper-blue-500: #2196f3;
      --paper-blue-600: #1e88e5;
      --paper-blue-700: #1976d2;
      --paper-blue-800: #1565c0;
      --paper-blue-900: #0d47a1;
      --paper-blue-a100: #82b1ff;
      --paper-blue-a200: #448aff;
      --paper-blue-a400: #2979ff;
      --paper-blue-a700: #2962ff;

      --paper-light-blue-50: #e1f5fe;
      --paper-light-blue-100: #b3e5fc;
      --paper-light-blue-200: #81d4fa;
      --paper-light-blue-300: #4fc3f7;
      --paper-light-blue-400: #29b6f6;
      --paper-light-blue-500: #03a9f4;
      --paper-light-blue-600: #039be5;
      --paper-light-blue-700: #0288d1;
      --paper-light-blue-800: #0277bd;
      --paper-light-blue-900: #01579b;
      --paper-light-blue-a100: #80d8ff;
      --paper-light-blue-a200: #40c4ff;
      --paper-light-blue-a400: #00b0ff;
      --paper-light-blue-a700: #0091ea;

      --paper-cyan-50: #e0f7fa;
      --paper-cyan-100: #b2ebf2;
      --paper-cyan-200: #80deea;
      --paper-cyan-300: #4dd0e1;
      --paper-cyan-400: #26c6da;
      --paper-cyan-500: #00bcd4;
      --paper-cyan-600: #00acc1;
      --paper-cyan-700: #0097a7;
      --paper-cyan-800: #00838f;
      --paper-cyan-900: #006064;
      --paper-cyan-a100: #84ffff;
      --paper-cyan-a200: #18ffff;
      --paper-cyan-a400: #00e5ff;
      --paper-cyan-a700: #00b8d4;

      --paper-teal-50: #e0f2f1;
      --paper-teal-100: #b2dfdb;
      --paper-teal-200: #80cbc4;
      --paper-teal-300: #4db6ac;
      --paper-teal-400: #26a69a;
      --paper-teal-500: #009688;
      --paper-teal-600: #00897b;
      --paper-teal-700: #00796b;
      --paper-teal-800: #00695c;
      --paper-teal-900: #004d40;
      --paper-teal-a100: #a7ffeb;
      --paper-teal-a200: #64ffda;
      --paper-teal-a400: #1de9b6;
      --paper-teal-a700: #00bfa5;

      --paper-green-50: #e8f5e9;
      --paper-green-100: #c8e6c9;
      --paper-green-200: #a5d6a7;
      --paper-green-300: #81c784;
      --paper-green-400: #66bb6a;
      --paper-green-500: #4caf50;
      --paper-green-600: #43a047;
      --paper-green-700: #388e3c;
      --paper-green-800: #2e7d32;
      --paper-green-900: #1b5e20;
      --paper-green-a100: #b9f6ca;
      --paper-green-a200: #69f0ae;
      --paper-green-a400: #00e676;
      --paper-green-a700: #00c853;

      --paper-light-green-50: #f1f8e9;
      --paper-light-green-100: #dcedc8;
      --paper-light-green-200: #c5e1a5;
      --paper-light-green-300: #aed581;
      --paper-light-green-400: #9ccc65;
      --paper-light-green-500: #8bc34a;
      --paper-light-green-600: #7cb342;
      --paper-light-green-700: #689f38;
      --paper-light-green-800: #558b2f;
      --paper-light-green-900: #33691e;
      --paper-light-green-a100: #ccff90;
      --paper-light-green-a200: #b2ff59;
      --paper-light-green-a400: #76ff03;
      --paper-light-green-a700: #64dd17;

      --paper-lime-50: #f9fbe7;
      --paper-lime-100: #f0f4c3;
      --paper-lime-200: #e6ee9c;
      --paper-lime-300: #dce775;
      --paper-lime-400: #d4e157;
      --paper-lime-500: #cddc39;
      --paper-lime-600: #c0ca33;
      --paper-lime-700: #afb42b;
      --paper-lime-800: #9e9d24;
      --paper-lime-900: #827717;
      --paper-lime-a100: #f4ff81;
      --paper-lime-a200: #eeff41;
      --paper-lime-a400: #c6ff00;
      --paper-lime-a700: #aeea00;

      --paper-yellow-50: #fffde7;
      --paper-yellow-100: #fff9c4;
      --paper-yellow-200: #fff59d;
      --paper-yellow-300: #fff176;
      --paper-yellow-400: #ffee58;
      --paper-yellow-500: #ffeb3b;
      --paper-yellow-600: #fdd835;
      --paper-yellow-700: #fbc02d;
      --paper-yellow-800: #f9a825;
      --paper-yellow-900: #f57f17;
      --paper-yellow-a100: #ffff8d;
      --paper-yellow-a200: #ffff00;
      --paper-yellow-a400: #ffea00;
      --paper-yellow-a700: #ffd600;

      --paper-amber-50: #fff8e1;
      --paper-amber-100: #ffecb3;
      --paper-amber-200: #ffe082;
      --paper-amber-300: #ffd54f;
      --paper-amber-400: #ffca28;
      --paper-amber-500: #ffc107;
      --paper-amber-600: #ffb300;
      --paper-amber-700: #ffa000;
      --paper-amber-800: #ff8f00;
      --paper-amber-900: #ff6f00;
      --paper-amber-a100: #ffe57f;
      --paper-amber-a200: #ffd740;
      --paper-amber-a400: #ffc400;
      --paper-amber-a700: #ffab00;

      --paper-orange-50: #fff3e0;
      --paper-orange-100: #ffe0b2;
      --paper-orange-200: #ffcc80;
      --paper-orange-300: #ffb74d;
      --paper-orange-400: #ffa726;
      --paper-orange-500: #ff9800;
      --paper-orange-600: #fb8c00;
      --paper-orange-700: #f57c00;
      --paper-orange-800: #ef6c00;
      --paper-orange-900: #e65100;
      --paper-orange-a100: #ffd180;
      --paper-orange-a200: #ffab40;
      --paper-orange-a400: #ff9100;
      --paper-orange-a700: #ff6500;

      --paper-deep-orange-50: #fbe9e7;
      --paper-deep-orange-100: #ffccbc;
      --paper-deep-orange-200: #ffab91;
      --paper-deep-orange-300: #ff8a65;
      --paper-deep-orange-400: #ff7043;
      --paper-deep-orange-500: #ff5722;
      --paper-deep-orange-600: #f4511e;
      --paper-deep-orange-700: #e64a19;
      --paper-deep-orange-800: #d84315;
      --paper-deep-orange-900: #bf360c;
      --paper-deep-orange-a100: #ff9e80;
      --paper-deep-orange-a200: #ff6e40;
      --paper-deep-orange-a400: #ff3d00;
      --paper-deep-orange-a700: #dd2c00;

      --paper-brown-50: #efebe9;
      --paper-brown-100: #d7ccc8;
      --paper-brown-200: #bcaaa4;
      --paper-brown-300: #a1887f;
      --paper-brown-400: #8d6e63;
      --paper-brown-500: #795548;
      --paper-brown-600: #6d4c41;
      --paper-brown-700: #5d4037;
      --paper-brown-800: #4e342e;
      --paper-brown-900: #3e2723;

      --paper-grey-50: #fafafa;
      --paper-grey-100: #f5f5f5;
      --paper-grey-200: #eeeeee;
      --paper-grey-300: #e0e0e0;
      --paper-grey-400: #bdbdbd;
      --paper-grey-500: #9e9e9e;
      --paper-grey-600: #757575;
      --paper-grey-700: #616161;
      --paper-grey-800: #424242;
      --paper-grey-900: #212121;

      --paper-blue-grey-50: #eceff1;
      --paper-blue-grey-100: #cfd8dc;
      --paper-blue-grey-200: #b0bec5;
      --paper-blue-grey-300: #90a4ae;
      --paper-blue-grey-400: #78909c;
      --paper-blue-grey-500: #607d8b;
      --paper-blue-grey-600: #546e7a;
      --paper-blue-grey-700: #455a64;
      --paper-blue-grey-800: #37474f;
      --paper-blue-grey-900: #263238;

      /* opacity for dark text on a light background */
      --dark-divider-opacity: 0.12;
      --dark-disabled-opacity: 0.38; /* or hint text or icon */
      --dark-secondary-opacity: 0.54;
      --dark-primary-opacity: 0.87;

      /* opacity for light text on a dark background */
      --light-divider-opacity: 0.12;
      --light-disabled-opacity: 0.3; /* or hint text or icon */
      --light-secondary-opacity: 0.7;
      --light-primary-opacity: 1.0;

    }

  </style>
</custom-style>
`;km.setAttribute("style","display: none;"),document.head.appendChild(km.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Tm=za`
<custom-style>
  <style is="custom-style">
    html {
      /*
       * You can use these generic variables in your elements for easy theming.
       * For example, if all your elements use \`--primary-text-color\` as its main
       * color, then switching from a light to a dark theme is just a matter of
       * changing the value of \`--primary-text-color\` in your application.
       */
      --primary-text-color: var(--light-theme-text-color);
      --primary-background-color: var(--light-theme-background-color);
      --secondary-text-color: var(--light-theme-secondary-color);
      --disabled-text-color: var(--light-theme-disabled-color);
      --divider-color: var(--light-theme-divider-color);
      --error-color: var(--paper-deep-orange-a700);

      /*
       * Primary and accent colors. Also see color.js for more colors.
       */
      --primary-color: var(--paper-indigo-500);
      --light-primary-color: var(--paper-indigo-100);
      --dark-primary-color: var(--paper-indigo-700);

      --accent-color: var(--paper-pink-a200);
      --light-accent-color: var(--paper-pink-a100);
      --dark-accent-color: var(--paper-pink-a400);


      /*
       * Material Design Light background theme
       */
      --light-theme-background-color: #ffffff;
      --light-theme-base-color: #000000;
      --light-theme-text-color: var(--paper-grey-900);
      --light-theme-secondary-color: #737373;  /* for secondary text and icons */
      --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
      --light-theme-divider-color: #dbdbdb;

      /*
       * Material Design Dark background theme
       */
      --dark-theme-background-color: var(--paper-grey-900);
      --dark-theme-base-color: #ffffff;
      --dark-theme-text-color: #ffffff;
      --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
      --dark-theme-disabled-color: #646464;  /* disabled/hint text */
      --dark-theme-divider-color: #3c3c3c;

      /*
       * Deprecated values because of their confusing names.
       */
      --text-primary-color: var(--dark-theme-text-color);
      --default-primary-color: var(--primary-color);
    }
  </style>
</custom-style>`;
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
if(Tm.setAttribute("style","display: none;"),document.head.appendChild(Tm.content),!window.polymerSkipLoadingFontRoboto){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.crossOrigin="anonymous",e.href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic",document.head.appendChild(e)}
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const Im=za`<custom-style>
  <style is="custom-style">
    html {

      /* Shared Styles */
      --paper-font-common-base: {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-code: {
        font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-expensive-kerning: {
        text-rendering: optimizeLegibility;
      };

      --paper-font-common-nowrap: {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      };

      /* Material Font Styles */

      --paper-font-display4: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 112px;
        font-weight: 300;
        letter-spacing: -.044em;
        line-height: 120px;
      };

      --paper-font-display3: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 56px;
        font-weight: 400;
        letter-spacing: -.026em;
        line-height: 60px;
      };

      --paper-font-display2: {
        @apply --paper-font-common-base;

        font-size: 45px;
        font-weight: 400;
        letter-spacing: -.018em;
        line-height: 48px;
      };

      --paper-font-display1: {
        @apply --paper-font-common-base;

        font-size: 34px;
        font-weight: 400;
        letter-spacing: -.01em;
        line-height: 40px;
      };

      --paper-font-headline: {
        @apply --paper-font-common-base;

        font-size: 24px;
        font-weight: 400;
        letter-spacing: -.012em;
        line-height: 32px;
      };

      --paper-font-title: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
      };

      --paper-font-subhead: {
        @apply --paper-font-common-base;

        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
      };

      --paper-font-body2: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-body1: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
      };

      --paper-font-caption: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.011em;
        line-height: 20px;
      };

      --paper-font-menu: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 13px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-button: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.018em;
        line-height: 24px;
        text-transform: uppercase;
      };

      --paper-font-code2: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 700;
        line-height: 20px;
      };

      --paper-font-code1: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
      };

    }

  </style>
</custom-style>`;Im.setAttribute("style","display: none;"),document.head.appendChild(Im.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Rm=document.createElement("template");Rm.setAttribute("style","display: none;"),Rm.innerHTML="<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>",document.head.appendChild(Rm.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style include="paper-item-shared-styles">
      :host {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-subhead;

        @apply --paper-item;
      }
    </style>
    <slot></slot>
`,is:"paper-item",behaviors:[[Hp,Fp,{hostAttributes:{role:"option",tabindex:"0"}}]]});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
class Lm{constructor(e){this.selection=[],this.selectCallback=e}get(){return this.multi?this.selection.slice():this.selection[0]}clear(e){this.selection.slice().forEach((function(t){(!e||e.indexOf(t)<0)&&this.setItemSelected(t,!1)}),this)}isSelected(e){return this.selection.indexOf(e)>=0}setItemSelected(e,t){if(null!=e&&t!==this.isSelected(e)){if(t)this.selection.push(e);else{var n=this.selection.indexOf(e);n>=0&&this.selection.splice(n,1)}this.selectCallback&&this.selectCallback(e,t)}}select(e){this.multi?this.toggle(e):this.get()!==e&&(this.setItemSelected(this.get(),!1),this.setItemSelected(e,!0))}toggle(e){this.setItemSelected(e,!this.isSelected(e))}}
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Dm={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:["_updateAttrForSelected(attrForSelected)","_updateSelected(selected)","_checkFallback(fallbackSelection)"],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Lm(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Ui(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(e){return this.items?this.items.indexOf(e):-1},select:function(e){this.selected=e},selectPrevious:function(){var e=this.items.length,t=e-1;void 0!==this.selected&&(t=(Number(this._valueToIndex(this.selected))-1+e)%e),this.selected=this._indexToValue(t)},selectNext:function(){var e=0;void 0!==this.selected&&(e=(Number(this._valueToIndex(this.selected))+1)%this.items.length),this.selected=this._indexToValue(e)},selectIndex:function(e){this.select(this._indexToValue(e))},forceSynchronousItemUpdate:function(){this._observer&&"function"==typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(e){this.listen(this,e,"_activateHandler")},_removeListener:function(e){this.unlisten(this,e,"_activateHandler")},_activateEventChanged:function(e,t){this._removeListener(t),this._addListener(e)},_updateItems:function(){var e=Ui(this).queryDistributedElements(this.selectable||"*");e=Array.prototype.filter.call(e,this._bindFilterItem),this._setItems(e)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(e){if(this.items){var t=this._valueToItem(this.selected);t?this._selection.select(t):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(e){return!this._excludedLocalNames[e.localName]},_valueToItem:function(e){return null==e?null:this.items[this._valueToIndex(e)]},_valueToIndex:function(e){if(!this.attrForSelected)return Number(e);for(var t,n=0;t=this.items[n];n++)if(this._valueForItem(t)==e)return n},_indexToValue:function(e){if(!this.attrForSelected)return e;var t=this.items[e];return t?this._valueForItem(t):void 0},_valueForItem:function(e){if(!e)return null;if(!this.attrForSelected){var t=this.indexOf(e);return-1===t?null:t}var n=e[Le(this.attrForSelected)];return null!=n?n:e.getAttribute(this.attrForSelected)},_applySelection:function(e,t){this.selectedClass&&this.toggleClass(this.selectedClass,t,e),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,t,e),this._selectionChange(),this.fire("iron-"+(t?"select":"deselect"),{item:e})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(e){return Ui(e).observeNodes((function(e){this._updateItems(),this._updateSelected(),this.fire("iron-items-changed",e,{bubbles:!1,cancelable:!1})}))},_activateHandler:function(e){for(var t=e.target,n=this.items;t&&t!=this;){var i=n.indexOf(t);if(i>=0){var s=this._indexToValue(i);return void this._itemActivate(s,t)}t=t.parentNode}},_itemActivate:function(e,t){this.fire("iron-activate",{selected:e,item:t},{cancelable:!0}).defaultPrevented||this.select(e)}},Om={properties:{multi:{type:Boolean,value:!1,observer:"multiChanged"},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:["_updateSelected(selectedValues.splices)"],select:function(e){this.multi?this._toggleSelected(e):this.selected=e},multiChanged:function(e){this._selection.multi=e,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&this.selectedItems.length>0&&(this.selectedValues=this.selectedItems.map((function(e){return this._indexToValue(this.indexOf(e))}),this).filter((function(e){return null!=e}),this)):Dm._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(e){e=e||[];var t=(this._valuesToItems(e)||[]).filter((function(e){return null!=e}));this._selection.clear(t);for(var n=0;n<t.length;n++)this._selection.setItemSelected(t[n],!0);this.fallbackSelection&&!this._selection.get().length&&(this._valueToItem(this.fallbackSelection)&&this.select(this.fallbackSelection))},_selectionChange:function(){var e=this._selection.get();this.multi?(this._setSelectedItems(e),this._setSelectedItem(e.length?e[0]:null)):null!=e?(this._setSelectedItems([e]),this._setSelectedItem(e)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(e){var t=this.selectedValues.indexOf(e);t<0?this.push("selectedValues",e):this.splice("selectedValues",t,1)},_valuesToItems:function(e){return null==e?null:e.map((function(e){return this._valueToItem(e)}),this)}},Nm=[Dm,Om],Mm={properties:{focusedItem:{observer:"_focusedItemChanged",readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:"_disabledChanged"}},_MODIFIER_KEYS:["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"],_SEARCH_RESET_TIMEOUT_MS:1e3,_previousTabIndex:0,hostAttributes:{role:"menu"},observers:["_updateMultiselectable(multi)"],listeners:{focus:"_onFocus",keydown:"_onKeydown","iron-items-changed":"_onIronItemsChanged"},keyBindings:{up:"_onUpKey",down:"_onDownKey",esc:"_onEscKey","shift+tab:keydown":"_onShiftTabDown"},attached:function(){this._resetTabindices()},select:function(e){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var t=this._valueToItem(e);t&&t.hasAttribute("disabled")||(this._setFocusedItem(t),Om.select.apply(this,arguments))},_resetTabindices:function(){var e=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach((function(t){t.setAttribute("tabindex",t===e?"0":"-1"),t.setAttribute("aria-selected",this._selection.isSelected(t))}),this)},_updateMultiselectable:function(e){e?this.setAttribute("aria-multiselectable","true"):this.removeAttribute("aria-multiselectable")},_focusWithKeyboardEvent:function(e){if(-1===this._MODIFIER_KEYS.indexOf(e.key)){this.cancelDebouncer("_clearSearchText");for(var t,n=this._searchText||"",i=(n+=(e.key&&1==e.key.length?e.key:String.fromCharCode(e.keyCode)).toLocaleLowerCase()).length,s=0;t=this.items[s];s++)if(!t.hasAttribute("disabled")){var a=this.attrForItemTitle||"textContent",o=(t[a]||t.getAttribute(a)||"").trim();if(!(o.length<i)&&o.slice(0,i).toLocaleLowerCase()==n){this._setFocusedItem(t);break}}this._searchText=n,this.debounce("_clearSearchText",this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)}},_clearSearchText:function(){this._searchText=""},_focusPrevious:function(){for(var e=this.items.length,t=Number(this.indexOf(this.focusedItem)),n=1;n<e+1;n++){var i=this.items[(t-n+e)%e];if(!i.hasAttribute("disabled")){var s=Ui(i).getOwnerRoot()||document;if(this._setFocusedItem(i),Ui(s).activeElement==i)return}}},_focusNext:function(){for(var e=this.items.length,t=Number(this.indexOf(this.focusedItem)),n=1;n<e+1;n++){var i=this.items[(t+n)%e];if(!i.hasAttribute("disabled")){var s=Ui(i).getOwnerRoot()||document;if(this._setFocusedItem(i),Ui(s).activeElement==i)return}}},_applySelection:function(e,t){t?e.setAttribute("aria-selected","true"):e.setAttribute("aria-selected","false"),Dm._applySelection.apply(this,arguments)},_focusedItemChanged:function(e,t){t&&t.setAttribute("tabindex","-1"),!e||e.hasAttribute("disabled")||this.disabled||(e.setAttribute("tabindex","0"),e.focus())},_onIronItemsChanged:function(e){e.detail.addedNodes.length&&this._resetTabindices()},_onShiftTabDown:function(e){var t=this.getAttribute("tabindex");Mm._shiftTabPressed=!0,this._setFocusedItem(null),this.setAttribute("tabindex","-1"),this.async((function(){this.setAttribute("tabindex",t),Mm._shiftTabPressed=!1}),1)},_onFocus:function(e){if(!Mm._shiftTabPressed){var t=Ui(e).rootTarget;(t===this||void 0===t.tabIndex||this.isLightDescendant(t))&&(this._defaultFocusAsync=this.async((function(){var e=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null),e?this._setFocusedItem(e):this.items[0]&&this._focusNext()})))}},_onUpKey:function(e){this._focusPrevious(),e.detail.keyboardEvent.preventDefault()},_onDownKey:function(e){this._focusNext(),e.detail.keyboardEvent.preventDefault()},_onEscKey:function(e){var t=this.focusedItem;t&&t.blur()},_onKeydown:function(e){this.keyboardEventMatchesKeys(e,"up down esc")||this._focusWithKeyboardEvent(e),e.stopPropagation()},_activateHandler:function(e){Dm._activateHandler.call(this,e),e.stopPropagation()},_disabledChanged:function(e){e?(this._previousTabIndex=this.hasAttribute("tabindex")?this.tabIndex:0,this.removeAttribute("tabindex")):this.hasAttribute("tabindex")||this.setAttribute("tabindex",this._previousTabIndex)},_shiftTabPressed:!1},$m=[Nm,Sr,Mm];
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/function Bm(e){return"function"==typeof e}let Fm;
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-listbox-background-color, var(--primary-background-color));
        color: var(--paper-listbox-color, var(--primary-text-color));

        @apply --paper-listbox;
      }
    </style>

    <slot></slot>
`,is:"paper-listbox",behaviors:[$m],hostAttributes:{role:"listbox"}}),Fm=Array.isArray?Array.isArray:e=>"[object Array]"===Object.prototype.toString.call(e);const Um=Fm;let Hm,jm,Gm=0;var Vm=function(e,t){Jm[Gm]=e,Jm[Gm+1]=t,Gm+=2,2===Gm&&(jm?jm(Zm):Qm())};const zm="undefined"!=typeof window?window:void 0,Wm=zm||{},qm=Wm.MutationObserver||Wm.WebKitMutationObserver,Km="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Ym="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function Xm(){const e=setTimeout;return()=>e(Zm,1)}const Jm=new Array(1e3);function Zm(){for(let e=0;e<Gm;e+=2){(0,Jm[e])(Jm[e+1]),Jm[e]=void 0,Jm[e+1]=void 0}Gm=0}let Qm;function eg(e,t){const n=this,i=new this.constructor(ig);void 0===i[ng]&&fg(i);const{_state:s}=n;if(s){const e=arguments[s-1];Vm(()=>gg(s,i,e,n._result))}else hg(n,i,e,t);return i}function tg(e){if(e&&"object"==typeof e&&e.constructor===this)return e;let t=new this(ig);return rg(t,e),t}Qm=Km?()=>process.nextTick(Zm):qm?function(){let e=0;const t=new qm(Zm),n=document.createTextNode("");return t.observe(n,{characterData:!0}),()=>{n.data=e=++e%2}}():Ym?function(){const e=new MessageChannel;return e.port1.onmessage=Zm,()=>e.port2.postMessage(0)}():void 0===zm&&"function"==typeof require?function(){try{const e=require("vertx");return Hm=e.runOnLoop||e.runOnContext,function(){Hm(Zm)}}catch(e){return Xm()}}():Xm();const ng=Math.random().toString(36).substring(16);function ig(){}const sg=new ug;function ag(e){try{return e.then}catch(e){return sg.error=e,sg}}function og(e,t,n){t.constructor===e.constructor&&n===eg&&t.constructor.resolve===tg?function(e,t){1===t._state?cg(e,t._result):2===t._state?dg(e,t._result):hg(t,void 0,t=>rg(e,t),t=>dg(e,t))}(e,t):n===sg?dg(e,sg.error):void 0===n?cg(e,t):Bm(n)?function(e,t,n){Vm(e=>{var i=!1,s=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,n=>{i||(i=!0,t!==n?rg(e,n):cg(e,n))},t=>{i||(i=!0,dg(e,t))},e._label);!i&&s&&(i=!0,dg(e,s))},e)}(e,t,n):cg(e,t)}function rg(e,t){var n;e===t?dg(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?og(e,t,ag(t)):cg(e,t)}function lg(e){e._onerror&&e._onerror(e._result),pg(e)}function cg(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&Vm(pg,e))}function dg(e,t){void 0===e._state&&(e._state=2,e._result=t,Vm(lg,e))}function hg(e,t,n,i){let{_subscribers:s}=e,{length:a}=s;e._onerror=null,s[a]=t,s[a+1]=n,s[a+2]=i,0===a&&e._state&&Vm(pg,e)}function pg(e){let t=e._subscribers,n=e._state;if(0===t.length)return;let i,s,a=e._result;for(let e=0;e<t.length;e+=3)i=t[e],s=t[e+n],i?gg(n,i,s,a):s(a);e._subscribers.length=0}function ug(){this.error=null}const mg=new ug;function gg(e,t,n,i){let s,a,o,r,l=Bm(n);if(l){if(s=function(e,t){try{return e(t)}catch(e){return mg.error=e,mg}}(n,i),s===mg?(r=!0,a=s.error,s=null):o=!0,t===s)return void dg(t,new TypeError("A promises callback cannot return that same promise."))}else s=i,o=!0;void 0!==t._state||(l&&o?rg(t,s):r?dg(t,a):1===e?cg(t,s):2===e&&dg(t,s))}let _g=0;function fg(e){e[ng]=_g++,e._state=void 0,e._result=void 0,e._subscribers=[]}function bg(e,t){this._instanceConstructor=e,this.promise=new e(ig),this.promise[ng]||fg(this.promise),Um(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?cg(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&cg(this.promise,this._result))):dg(this.promise,new Error("Array Methods must be provided an Array"))}function vg(e){this[ng]=_g++,this._result=this._state=void 0,this._subscribers=[],ig!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof vg?function(e,t){try{t((function(t){rg(e,t)}),(function(t){dg(e,t)}))}catch(t){dg(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function yg(){let e;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}let t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=vg}bg.prototype._enumerate=function(){let{length:e,_input:t}=this;for(let n=0;void 0===this._state&&n<e;n++)this._eachEntry(t[n],n)},bg.prototype._eachEntry=function(e,t){let n=this._instanceConstructor,{resolve:i}=n;if(i===tg){let i=ag(e);if(i===eg&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===vg){let s=new n(ig);og(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n(t=>t(e)),t)}else this._willSettleAt(i(e),t)},bg.prototype._settledAt=function(e,t,n){let{promise:i}=this;void 0===i._state&&(this._remaining--,2===e?dg(i,n):this._result[t]=n),0===this._remaining&&cg(i,this._result)},bg.prototype._willSettleAt=function(e,t){let n=this;hg(e,void 0,e=>n._settledAt(1,t,e),e=>n._settledAt(2,t,e))},vg.all=function(e){return new bg(this,e).promise},vg.race=function(e){let t=this;return Um(e)?new t((n,i)=>{let s=e.length;for(let a=0;a<s;a++)t.resolve(e[a]).then(n,i)}):new t((e,t)=>t(new TypeError("You must pass an array to race.")))},vg.resolve=tg,vg.reject=function(e){let t=new this(ig);return dg(t,e),t},vg._setScheduler=function(e){jm=e},vg._setAsap=function(e){Vm=e},vg._asap=Vm,vg.prototype={constructor:vg,then:eg,catch(e){return this.then(null,e)}},yg(),vg.polyfill=yg,vg.Promise=vg;var wg="URLSearchParams"in self,Cg="Symbol"in self&&"iterator"in Symbol,Eg="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),Sg="FormData"in self,xg="ArrayBuffer"in self;if(xg)var Ag=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Pg=ArrayBuffer.isView||function(e){return e&&Ag.indexOf(Object.prototype.toString.call(e))>-1};function kg(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function Tg(e){return"string"!=typeof e&&(e=String(e)),e}function Ig(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Cg&&(t[Symbol.iterator]=function(){return t}),t}function Rg(e){this.map={},e instanceof Rg?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Lg(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Dg(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Og(e){var t=new FileReader,n=Dg(t);return t.readAsArrayBuffer(e),n}function Ng(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Mg(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Eg&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Sg&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:wg&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():xg&&Eg&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Ng(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):xg&&(ArrayBuffer.prototype.isPrototypeOf(e)||Pg(e))?this._bodyArrayBuffer=Ng(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):wg&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Eg&&(this.blob=function(){var e=Lg(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Lg(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Og)}),this.text=function(){var e=Lg(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=Dg(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Sg&&(this.formData=function(){return this.text().then(Fg)}),this.json=function(){return this.text().then(JSON.parse)},this}Rg.prototype.append=function(e,t){e=kg(e),t=Tg(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Rg.prototype.delete=function(e){delete this.map[kg(e)]},Rg.prototype.get=function(e){return e=kg(e),this.has(e)?this.map[e]:null},Rg.prototype.has=function(e){return this.map.hasOwnProperty(kg(e))},Rg.prototype.set=function(e,t){this.map[kg(e)]=Tg(t)},Rg.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Rg.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Ig(e)},Rg.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Ig(e)},Rg.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Ig(e)},Cg&&(Rg.prototype[Symbol.iterator]=Rg.prototype.entries);var $g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Bg(e,t){var n,i,s=(t=t||{}).body;if(e instanceof Bg){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Rg(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Rg(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),$g.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function Fg(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(s))}})),t}function Ug(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new Rg(t.headers),this.url=t.url||"",this._initBody(e)}Bg.prototype.clone=function(){return new Bg(this,{body:this._bodyInit})},Mg.call(Bg.prototype),Mg.call(Ug.prototype),Ug.prototype.clone=function(){return new Ug(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Rg(this.headers),url:this.url})},Ug.error=function(){var e=new Ug(null,{status:0,statusText:""});return e.type="error",e};var Hg=[301,302,303,307,308];Ug.redirect=function(e,t){if(-1===Hg.indexOf(t))throw new RangeError("Invalid status code");return new Ug(null,{status:t,headers:{location:e}})};var jg=self.DOMException;try{new jg}catch(e){(jg=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),jg.prototype.constructor=jg}function Gg(e,t){return new Promise((function(n,i){var s=new Bg(e,t);if(s.signal&&s.signal.aborted)return i(new jg("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Rg,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var s=n.join(":").trim();t.append(i,s)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var s="response"in a?a.response:a.responseText;n(new Ug(s,i))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new jg("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&Eg&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",o)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}Gg.polyfill=!0,self.fetch||(self.fetch=Gg,self.Headers=Rg,self.Request=Bg,self.Response=Ug)
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;const Vg={COMMIT_MESSAGE_PATH:"/COMMIT_MSG",MERGE_LIST_PATH:"/MERGE_LIST",specialFilePathCompare(e,t){if(e===Vg.COMMIT_MESSAGE_PATH)return-1;if(t===Vg.COMMIT_MESSAGE_PATH)return 1;if(e===Vg.MERGE_LIST_PATH)return-1;if(t===Vg.MERGE_LIST_PATH)return 1;const n=e.lastIndexOf("."),i=e.substr(n+1),s=e.substr(0,n)||e,a=t.lastIndexOf("."),o=t.substr(a+1),r=t.substr(0,a)||t,l=["h","hxx","hpp"];if(s.length>0&&s===r){if(l.includes(i)&&l.includes(o))return e.localeCompare(t);if(l.includes(i))return-1;if(l.includes(o))return 1}return s.localeCompare(r)||e.localeCompare(t)},computeDisplayPath:e=>e===Vg.COMMIT_MESSAGE_PATH?"Commit message":e===Vg.MERGE_LIST_PATH?"Merge list":e,isMagicPath:e=>!!e&&(e===Vg.COMMIT_MESSAGE_PATH||e===Vg.MERGE_LIST_PATH),computeTruncatedPath:e=>Vg.truncatePath(Vg.computeDisplayPath(e)),truncatePath(e,t){const n=t||1,i=e.split("/");if(i.length<=n)return e;const s=i.length-n;return`…/${i.slice(s).join("/")}`}};window.Gerrit=window.Gerrit||{},window.Gerrit.PathListBehavior=Vg;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zg=[{ChangeDiffType:{ADDED:"ADDED",COPIED:"COPIED",DELETED:"DELETED",MODIFIED:"MODIFIED",RENAMED:"RENAMED",REWRITE:"REWRITE"},ChangeStatus:{ABANDONED:"ABANDONED",MERGED:"MERGED",NEW:"NEW"},ListChangesOption:{LABELS:0,DETAILED_LABELS:8,CURRENT_REVISION:1,ALL_REVISIONS:2,CURRENT_COMMIT:3,ALL_COMMITS:4,CURRENT_FILES:5,ALL_FILES:6,DETAILED_ACCOUNTS:7,MESSAGES:9,CURRENT_ACTIONS:10,REVIEWED:11,DOWNLOAD_COMMANDS:13,WEB_LINKS:14,CHECK:15,CHANGE_ACTIONS:16,COMMIT_FOOTERS:17,PUSH_CERTIFICATES:18,REVIEWER_UPDATES:19,SUBMITTABLE:20,TRACKING_IDS:21,SKIP_MERGEABLE:22,SKIP_DIFFSTAT:23},listChangesOptionsToHex(...e){let t=0;for(let n=0;n<e.length;n++)t|=1<<e[n];return t.toString(16)},changeBaseURL(e,t,n){let i=this.getBaseUrl()+"/changes/"+encodeURIComponent(e)+"~"+t;return n&&(i+="/revisions/"+n),i},changePath(e){return this.getBaseUrl()+"/c/"+e},changeIsOpen(e){return e&&e.status===this.ChangeStatus.NEW},changeStatuses(e,t){const n=[];return e.status===this.ChangeStatus.MERGED?n.push("Merged"):e.status===this.ChangeStatus.ABANDONED?n.push("Abandoned"):(!1===e.mergeable||t&&!1===t.mergeable)&&n.push("Merge Conflict"),e.work_in_progress&&n.push("WIP"),e.is_private&&n.push("Private"),n.length||!t?n:(e.submittable&&t.submitEnabled?n.push("Ready to submit"):n.push("Active"),n)},changeStatusString(e){return this.changeStatuses(e).join(", ")}},Go];window.Gerrit=window.Gerrit||{},window.Gerrit.RESTClientBehavior=zg;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wg="SIDE_BY_SIDE",qg="UNIFIED_DIFF",Kg="sendDiffDraft",Yg="Saving draft resulted in HTTP 200 (OK) but expected HTTP 201 (Created)",Xg=/^set-cookie$/i;class Jg extends(ra([Vg,vm,zg],Zn(na(Ka)))){static get is(){return"gr-rest-api-interface"}constructor(){super(),this.JSON_PREFIX=")]}'"}static get properties(){return{_cache:{type:Object,value:new Uo},_sharedFetchPromises:{type:Object,value:new Ho},_pendingRequests:{type:Object,value:{}},_etags:{type:Object,value:new $o},_projectLookup:{type:Object,value:{}}}}created(){super.created(),this._auth=wp,this._initRestApiHelper()}_initRestApiHelper(){this._restApiHelper||this._cache&&this._auth&&this._sharedFetchPromises&&(this._restApiHelper=new jo(this._cache,this._auth,this._sharedFetchPromises,this))}_fetchSharedCacheURL(e){return this._restApiHelper.fetchCacheURL(e)}getResponseObject(e){return this._restApiHelper.getResponseObject(e)}getConfig(e){return e?this._restApiHelper.fetchJSON({url:"/config/server/info",reportUrlAsIs:!0}):this._fetchSharedCacheURL({url:"/config/server/info",reportUrlAsIs:!0})}getRepo(e,t){return this._fetchSharedCacheURL({url:"/projects/"+encodeURIComponent(e),errFn:t,anonymizedUrl:"/projects/*"})}getProjectConfig(e,t){return this._fetchSharedCacheURL({url:"/projects/"+encodeURIComponent(e)+"/config",errFn:t,anonymizedUrl:"/projects/*/config"})}getRepoAccess(e){return this._fetchSharedCacheURL({url:"/access/?project="+encodeURIComponent(e),anonymizedUrl:"/access/?project=*"})}getRepoDashboards(e,t){return this._fetchSharedCacheURL({url:`/projects/${encodeURIComponent(e)}/dashboards?inherited`,errFn:t,anonymizedUrl:"/projects/*/dashboards?inherited"})}saveRepoConfig(e,t,n){const i=`/projects/${encodeURIComponent(e)}/config`;return this._cache.delete(i),this._restApiHelper.send({method:"PUT",url:i,body:t,errFn:n,anonymizedUrl:"/projects/*/config"})}runRepoGC(e,t){if(!e)return"";const n=encodeURIComponent(e);return this._restApiHelper.send({method:"POST",url:`/projects/${n}/gc`,body:"",errFn:t,anonymizedUrl:"/projects/*/gc"})}createRepo(e,t){if(!e.name)return"";const n=encodeURIComponent(e.name);return this._restApiHelper.send({method:"PUT",url:`/projects/${n}`,body:e,errFn:t,anonymizedUrl:"/projects/*"})}createGroup(e,t){if(!e.name)return"";const n=encodeURIComponent(e.name);return this._restApiHelper.send({method:"PUT",url:`/groups/${n}`,body:e,errFn:t,anonymizedUrl:"/groups/*"})}getGroupConfig(e,t){return this._restApiHelper.fetchJSON({url:`/groups/${encodeURIComponent(e)}/detail`,errFn:t,anonymizedUrl:"/groups/*/detail"})}deleteRepoBranches(e,t,n){if(!e||!t)return"";const i=encodeURIComponent(e),s=encodeURIComponent(t);return this._restApiHelper.send({method:"DELETE",url:`/projects/${i}/branches/${s}`,body:"",errFn:n,anonymizedUrl:"/projects/*/branches/*"})}deleteRepoTags(e,t,n){if(!e||!t)return"";const i=encodeURIComponent(e),s=encodeURIComponent(t);return this._restApiHelper.send({method:"DELETE",url:`/projects/${i}/tags/${s}`,body:"",errFn:n,anonymizedUrl:"/projects/*/tags/*"})}createRepoBranch(e,t,n,i){if(!e||!t||!n)return"";const s=encodeURIComponent(e),a=encodeURIComponent(t);return this._restApiHelper.send({method:"PUT",url:`/projects/${s}/branches/${a}`,body:n,errFn:i,anonymizedUrl:"/projects/*/branches/*"})}createRepoTag(e,t,n,i){if(!e||!t||!n)return"";const s=encodeURIComponent(e),a=encodeURIComponent(t);return this._restApiHelper.send({method:"PUT",url:`/projects/${s}/tags/${a}`,body:n,errFn:i,anonymizedUrl:"/projects/*/tags/*"})}getIsGroupOwner(e){const t={url:`/groups/?owned&g=${encodeURIComponent(e)}`,anonymizedUrl:"/groups/owned&g=*"};return this._fetchSharedCacheURL(t).then(t=>t.hasOwnProperty(e))}getGroupMembers(e,t){const n=encodeURIComponent(e);return this._restApiHelper.fetchJSON({url:`/groups/${n}/members/`,errFn:t,anonymizedUrl:"/groups/*/members"})}getIncludedGroup(e){return this._restApiHelper.fetchJSON({url:`/groups/${encodeURIComponent(e)}/groups/`,anonymizedUrl:"/groups/*/groups"})}saveGroupName(e,t){const n=encodeURIComponent(e);return this._restApiHelper.send({method:"PUT",url:`/groups/${n}/name`,body:{name:t},anonymizedUrl:"/groups/*/name"})}saveGroupOwner(e,t){const n=encodeURIComponent(e);return this._restApiHelper.send({method:"PUT",url:`/groups/${n}/owner`,body:{owner:t},anonymizedUrl:"/groups/*/owner"})}saveGroupDescription(e,t){const n=encodeURIComponent(e);return this._restApiHelper.send({method:"PUT",url:`/groups/${n}/description`,body:{description:t},anonymizedUrl:"/groups/*/description"})}saveGroupOptions(e,t){const n=encodeURIComponent(e);return this._restApiHelper.send({method:"PUT",url:`/groups/${n}/options`,body:t,anonymizedUrl:"/groups/*/options"})}getGroupAuditLog(e,t){return this._fetchSharedCacheURL({url:"/groups/"+e+"/log.audit",errFn:t,anonymizedUrl:"/groups/*/log.audit"})}saveGroupMembers(e,t){const n=encodeURIComponent(e),i=encodeURIComponent(t);return this._restApiHelper.send({method:"PUT",url:`/groups/${n}/members/${i}`,parseResponse:!0,anonymizedUrl:"/groups/*/members/*"})}saveIncludedGroup(e,t,n){const i={method:"PUT",url:`/groups/${encodeURIComponent(e)}/groups/${encodeURIComponent(t)}`,errFn:n,anonymizedUrl:"/groups/*/groups/*"};return this._restApiHelper.send(i).then(e=>{if(e.ok)return this.getResponseObject(e)})}deleteGroupMembers(e,t){const n=encodeURIComponent(e),i=encodeURIComponent(t);return this._restApiHelper.send({method:"DELETE",url:`/groups/${n}/members/${i}`,anonymizedUrl:"/groups/*/members/*"})}deleteIncludedGroup(e,t){const n=encodeURIComponent(e),i=encodeURIComponent(t);return this._restApiHelper.send({method:"DELETE",url:`/groups/${n}/groups/${i}`,anonymizedUrl:"/groups/*/groups/*"})}getVersion(){return this._fetchSharedCacheURL({url:"/config/server/version",reportUrlAsIs:!0})}getDiffPreferences(){return this.getLoggedIn().then(e=>e?this._fetchSharedCacheURL({url:"/accounts/self/preferences.diff",reportUrlAsIs:!0}):Promise.resolve({auto_hide_diff_table_header:!0,context:10,cursor_blink_rate:0,font_size:12,ignore_whitespace:"IGNORE_NONE",intraline_difference:!0,line_length:100,line_wrapping:!1,show_line_endings:!0,show_tabs:!0,show_whitespace_errors:!0,syntax_highlighting:!0,tab_size:8,theme:"DEFAULT"}))}getEditPreferences(){return this.getLoggedIn().then(e=>e?this._fetchSharedCacheURL({url:"/accounts/self/preferences.edit",reportUrlAsIs:!0}):Promise.resolve({auto_close_brackets:!1,cursor_blink_rate:0,hide_line_numbers:!1,hide_top_menu:!1,indent_unit:2,indent_with_tabs:!1,key_map_type:"DEFAULT",line_length:100,line_wrapping:!1,match_brackets:!0,show_base:!1,show_tabs:!0,show_whitespace_errors:!0,syntax_highlighting:!0,tab_size:8,theme:"DEFAULT"}))}savePreferences(e,t){return e.download_scheme&&(e.download_scheme=e.download_scheme.toLowerCase()),this._restApiHelper.send({method:"PUT",url:"/accounts/self/preferences",body:e,errFn:t,reportUrlAsIs:!0})}saveDiffPreferences(e,t){return this._cache.delete("/accounts/self/preferences.diff"),this._restApiHelper.send({method:"PUT",url:"/accounts/self/preferences.diff",body:e,errFn:t,reportUrlAsIs:!0})}saveEditPreferences(e,t){return this._cache.delete("/accounts/self/preferences.edit"),this._restApiHelper.send({method:"PUT",url:"/accounts/self/preferences.edit",body:e,errFn:t,reportUrlAsIs:!0})}getAccount(){return this._fetchSharedCacheURL({url:"/accounts/self/detail",reportUrlAsIs:!0,errFn:e=>{e&&403!==e.status||this._cache.delete("/accounts/self/detail")}})}getAvatarChangeUrl(){return this._fetchSharedCacheURL({url:"/accounts/self/avatar.change.url",reportUrlAsIs:!0,errFn:e=>{e&&403!==e.status||this._cache.delete("/accounts/self/avatar.change.url")}})}getExternalIds(){return this._restApiHelper.fetchJSON({url:"/accounts/self/external.ids",reportUrlAsIs:!0})}deleteAccountIdentity(e){return this._restApiHelper.send({method:"POST",url:"/accounts/self/external.ids:delete",body:e,parseResponse:!0,reportUrlAsIs:!0})}getAccountDetails(e){return this._restApiHelper.fetchJSON({url:`/accounts/${encodeURIComponent(e)}/detail`,anonymizedUrl:"/accounts/*/detail"})}getAccountEmails(){return this._fetchSharedCacheURL({url:"/accounts/self/emails",reportUrlAsIs:!0})}addAccountEmail(e,t){return this._restApiHelper.send({method:"PUT",url:"/accounts/self/emails/"+encodeURIComponent(e),errFn:t,anonymizedUrl:"/account/self/emails/*"})}deleteAccountEmail(e,t){return this._restApiHelper.send({method:"DELETE",url:"/accounts/self/emails/"+encodeURIComponent(e),errFn:t,anonymizedUrl:"/accounts/self/email/*"})}setPreferredAccountEmail(e,t){const n={method:"PUT",url:`/accounts/self/emails/${encodeURIComponent(e)}/preferred`,errFn:t,anonymizedUrl:"/accounts/self/emails/*/preferred"};return this._restApiHelper.send(n).then(()=>{const t=this._cache.get("/accounts/self/emails");if(t){const n=t.map(t=>t.email===e?{email:e,preferred:!0}:{email:e});this._cache.set("/accounts/self/emails",n)}})}_updateCachedAccount(e){const t=this._cache.get("/accounts/self/detail");t&&this._cache.set("/accounts/self/detail",Object.assign({},t,e))}setAccountName(e,t){const n={method:"PUT",url:"/accounts/self/name",body:{name:e},errFn:t,parseResponse:!0,reportUrlAsIs:!0};return this._restApiHelper.send(n).then(e=>this._updateCachedAccount({name:e}))}setAccountUsername(e,t){const n={method:"PUT",url:"/accounts/self/username",body:{username:e},errFn:t,parseResponse:!0,reportUrlAsIs:!0};return this._restApiHelper.send(n).then(e=>this._updateCachedAccount({username:e}))}setAccountDisplayName(e,t){const n={method:"PUT",url:"/accounts/self/displayname",body:{display_name:e},errFn:t,parseResponse:!0,reportUrlAsIs:!0};return this._restApiHelper.send(n).then(e=>this._updateCachedAccount({displayName:e}))}setAccountStatus(e,t){const n={method:"PUT",url:"/accounts/self/status",body:{status:e},errFn:t,parseResponse:!0,reportUrlAsIs:!0};return this._restApiHelper.send(n).then(e=>this._updateCachedAccount({status:e}))}getAccountStatus(e){return this._restApiHelper.fetchJSON({url:`/accounts/${encodeURIComponent(e)}/status`,anonymizedUrl:"/accounts/*/status"})}getAccountGroups(){return this._restApiHelper.fetchJSON({url:"/accounts/self/groups",reportUrlAsIs:!0})}getAccountAgreements(){return this._restApiHelper.fetchJSON({url:"/accounts/self/agreements",reportUrlAsIs:!0})}saveAccountAgreement(e){return this._restApiHelper.send({method:"PUT",url:"/accounts/self/agreements",body:e,reportUrlAsIs:!0})}getAccountCapabilities(e){let t="";return e&&(t="?q="+e.map(e=>encodeURIComponent(e)).join("&q=")),this._fetchSharedCacheURL({url:"/accounts/self/capabilities"+t,anonymizedUrl:"/accounts/self/capabilities?q=*"})}getLoggedIn(){return this._auth.authCheck()}getIsAdmin(){return this.getLoggedIn().then(e=>e?this.getAccountCapabilities():Promise.resolve()).then(e=>e&&e.administrateServer)}getDefaultPreferences(){return this._fetchSharedCacheURL({url:"/config/server/preferences",reportUrlAsIs:!0})}getPreferences(){return this.getLoggedIn().then(e=>{if(e){const e={url:"/accounts/self/preferences",reportUrlAsIs:!0};return this._fetchSharedCacheURL(e).then(e=>(this._isNarrowScreen()?e.default_diff_view=qg:e.default_diff_view=e.diff_view,Promise.resolve(e)))}return Promise.resolve({changes_per_page:25,default_diff_view:this._isNarrowScreen()?qg:Wg,diff_view:"SIDE_BY_SIDE",size_bar_in_change_table:!0})})}getWatchedProjects(){return this._fetchSharedCacheURL({url:"/accounts/self/watched.projects",reportUrlAsIs:!0})}saveWatchedProjects(e,t){return this._restApiHelper.send({method:"POST",url:"/accounts/self/watched.projects",body:e,errFn:t,parseResponse:!0,reportUrlAsIs:!0})}deleteWatchedProjects(e,t){return this._restApiHelper.send({method:"POST",url:"/accounts/self/watched.projects:delete",body:e,errFn:t,reportUrlAsIs:!0})}_isNarrowScreen(){return window.innerWidth<850}getChanges(e,t,n,i){return this.getConfig(!1).then(s=>{const a=i||this._getChangesOptionsHex(s);"n,z"===n&&(n=0);const o={O:a,S:n||0};return e&&(o.n=e),t&&t.length>0&&(o.q=t),{url:"/changes/",params:o,reportUrlAsIs:!0}}).then(e=>this._restApiHelper.fetchJSON(e)).then(e=>{const n=e=>{for(const t of e||[])this._maybeInsertInLookup(t)};if(t instanceof Array){1===t.length&&(e=[e]);for(const t of e)n(t)}else n(e);return e})}_maybeInsertInLookup(e){e&&e.project&&e._number&&this.setInProjectLookup(e._number,e.project)}getChangeActionURL(e,t,n){return this._changeBaseURL(e,t).then(e=>e+n)}getChangeDetail(e,t,n){return this.getConfig(!1).then(i=>{const s=this._getChangeOptionsHex(i);return this._getChangeDetail(e,s,t,n).then(ar.parse)})}_getChangesOptionsHex(e){const t=[this.ListChangesOption.LABELS,this.ListChangesOption.DETAILED_ACCOUNTS];return e&&e.change&&e.change.enable_attention_set?t.push(this.ListChangesOption.DETAILED_LABELS):t.push(this.ListChangesOption.REVIEWED),this.listChangesOptionsToHex(...t)}_getChangeOptionsHex(e){if(window.DEFAULT_DETAIL_HEXES&&window.DEFAULT_DETAIL_HEXES.changePage&&(!e.receive||!e.receive.enable_signed_push))return window.DEFAULT_DETAIL_HEXES.changePage;const t=[this.ListChangesOption.ALL_COMMITS,this.ListChangesOption.ALL_REVISIONS,this.ListChangesOption.CHANGE_ACTIONS,this.ListChangesOption.DETAILED_LABELS,this.ListChangesOption.DOWNLOAD_COMMANDS,this.ListChangesOption.MESSAGES,this.ListChangesOption.SUBMITTABLE,this.ListChangesOption.WEB_LINKS,this.ListChangesOption.SKIP_DIFFSTAT];return e.receive&&e.receive.enable_signed_push&&t.push(this.ListChangesOption.PUSH_CERTIFICATES),this.listChangesOptionsToHex(...t)}getDiffChangeDetail(e,t,n){let i="";return i=window.DEFAULT_DETAIL_HEXES&&window.DEFAULT_DETAIL_HEXES.diffPage?window.DEFAULT_DETAIL_HEXES.diffPage:this.listChangesOptionsToHex(this.ListChangesOption.ALL_COMMITS,this.ListChangesOption.ALL_REVISIONS,this.ListChangesOption.SKIP_DIFFSTAT),this._getChangeDetail(e,i,t,n)}_getChangeDetail(e,t,n,i){return this.getChangeActionURL(e,null,"/detail").then(e=>{const s=this._restApiHelper.urlWithParams(e,t),a={url:e,errFn:n,cancelCondition:i,params:{O:t},fetchOptions:this._etags.getOptions(s),anonymizedUrl:"/changes/*~*/detail?O="+t};return this._restApiHelper.fetchRawJSON(a).then(e=>{if(e&&304===e.status)return Promise.resolve(this._restApiHelper.parsePrefixedJSON(this._etags.getCachedPayload(s)));if(e&&!e.ok)return void(n?n.call(null,e):this.dispatchEvent(new CustomEvent("server-error",{detail:{request:a,response:e},composed:!0,bubbles:!0})));return(e?this._restApiHelper.readResponsePayload(e):Promise.resolve(null)).then(t=>t?(this._etags.collect(s,e,t.raw),this._maybeInsertInLookup(t.parsed),t.parsed):null)})})}getChangeCommitInfo(e,t){return this._getChangeURLAndFetch({changeNum:e,endpoint:"/commit?links",patchNum:t,reportEndpointAsIs:!0})}getChangeFiles(e,t,n){let i=void 0;return this.isMergeParent(t.basePatchNum)?i={parent:this.getParentIndex(t.basePatchNum)}:this.patchNumEquals(t.basePatchNum,"PARENT")||(i={base:t.basePatchNum}),this._getChangeURLAndFetch({changeNum:e,endpoint:"/files",patchNum:t.patchNum,params:i,reportEndpointAsIs:!0})}getChangeEditFiles(e,t){let n="/edit?list",i=n;return"PARENT"!==t.basePatchNum&&(n+="&base="+encodeURIComponent(t.basePatchNum+""),i+="&base=*"),this._getChangeURLAndFetch({changeNum:e,endpoint:n,anonymizedEndpoint:i})}queryChangeFiles(e,t,n){return this._getChangeURLAndFetch({changeNum:e,endpoint:`/files?q=${encodeURIComponent(n)}`,patchNum:t,anonymizedEndpoint:"/files?q=*"})}getChangeOrEditFiles(e,t){return this.patchNumEquals(t.patchNum,this.EDIT_NAME)?this.getChangeEditFiles(e,t).then(e=>e.files):this.getChangeFiles(e,t)}getChangeRevisionActions(e,t){const n={changeNum:e,endpoint:"/actions",patchNum:t,reportEndpointAsIs:!0};return this._getChangeURLAndFetch(n)}getChangeSuggestedReviewers(e,t,n){return this._getChangeSuggestedGroup("REVIEWER",e,t,n)}getChangeSuggestedCCs(e,t,n){return this._getChangeSuggestedGroup("CC",e,t,n)}_getChangeSuggestedGroup(e,t,n,i){const s={n:6,"reviewer-state":e};return n&&(s.q=n),this._getChangeURLAndFetch({changeNum:t,endpoint:"/suggest_reviewers",errFn:i,params:s,reportEndpointAsIs:!0})}getChangeIncludedIn(e){return this._getChangeURLAndFetch({changeNum:e,endpoint:"/in",reportEndpointAsIs:!0})}_computeFilter(e){return e=e&&e.startsWith("^")?"&r="+encodeURIComponent(e):e?"&m="+encodeURIComponent(e):""}_getGroupsUrl(e,t,n){return`/groups/?n=${t+1}&S=${n||0}`+this._computeFilter(e)}_getReposUrl(e,t,n){const i=/[@.\-\s\/_]/g,s=n||0;if(e&&!e.includes(":")&&e.match(i)){const t=e;e="",t.split(i).forEach(t=>{t&&(e+=(""===e?"inname:":" AND inname:")+t)})}return e||(e="state:active OR state:read-only"),e=e.trim(),`/projects/?n=${t+1}&S=${s}`+`&query=${encodeURIComponent(e)}`}invalidateGroupsCache(){this._restApiHelper.invalidateFetchPromisesPrefix("/groups/?")}invalidateReposCache(){this._restApiHelper.invalidateFetchPromisesPrefix("/projects/?")}invalidateAccountsCache(){this._restApiHelper.invalidateFetchPromisesPrefix("/accounts/")}getGroups(e,t,n){const i=this._getGroupsUrl(e,t,n);return this._fetchSharedCacheURL({url:i,anonymizedUrl:"/groups/?*"})}getRepos(e,t,n){const i=this._getReposUrl(e,t,n);return this._fetchSharedCacheURL({url:i,anonymizedUrl:"/projects/?*"})}setRepoHead(e,t){return this._restApiHelper.send({method:"PUT",url:`/projects/${encodeURIComponent(e)}/HEAD`,body:{ref:t},anonymizedUrl:"/projects/*/HEAD"})}getRepoBranches(e,t,n,i,s){const a=i||0,o=n+1;e=this._computeFilter(e);const r=`/projects/${t=encodeURIComponent(t)}/branches?n=${o}&S=${a}${e}`;return this._restApiHelper.fetchJSON({url:r,errFn:s,anonymizedUrl:"/projects/*/branches?*"})}getRepoTags(e,t,n,i,s){const a=i||0,o=`/projects/${encodeURIComponent(t)}/tags`+`?n=${n+1}&S=${a}`+this._computeFilter(e);return this._restApiHelper.fetchJSON({url:o,errFn:s,anonymizedUrl:"/projects/*/tags"})}getPlugins(e,t,n,i){const s=`/plugins/?all&n=${t+1}&S=${n||0}${this._computeFilter(e)}`;return this._restApiHelper.fetchJSON({url:s,errFn:i,anonymizedUrl:"/plugins/?all"})}getRepoAccessRights(e,t){return this._restApiHelper.fetchJSON({url:`/projects/${encodeURIComponent(e)}/access`,errFn:t,anonymizedUrl:"/projects/*/access"})}setRepoAccessRights(e,t){return this._restApiHelper.send({method:"POST",url:`/projects/${encodeURIComponent(e)}/access`,body:t,anonymizedUrl:"/projects/*/access"})}setRepoAccessRightsForReview(e,t){return this._restApiHelper.send({method:"PUT",url:`/projects/${encodeURIComponent(e)}/access:review`,body:t,parseResponse:!0,anonymizedUrl:"/projects/*/access:review"})}getSuggestedGroups(e,t,n){const i={s:e};return t&&(i.n=t),this._restApiHelper.fetchJSON({url:"/groups/",errFn:n,params:i,reportUrlAsIs:!0})}getSuggestedProjects(e,t,n){const i={m:e,n:25,type:"ALL"};return t&&(i.n=t),this._restApiHelper.fetchJSON({url:"/projects/",errFn:n,params:i,reportUrlAsIs:!0})}getSuggestedAccounts(e,t,n){if(!e)return Promise.resolve([]);const i={suggest:null,q:e};return t&&(i.n=t),this._restApiHelper.fetchJSON({url:"/accounts/",errFn:n,params:i,anonymizedUrl:"/accounts/?n=*"})}addChangeReviewer(e,t){return this._sendChangeReviewerRequest("POST",e,t)}removeChangeReviewer(e,t){return this._sendChangeReviewerRequest("DELETE",e,t)}_sendChangeReviewerRequest(e,t,n){return this.getChangeActionURL(t,null,"/reviewers").then(t=>{let i;switch(e){case"POST":i={reviewer:n};break;case"DELETE":t+="/"+encodeURIComponent(n);break;default:throw Error("Unsupported HTTP method: "+e)}return this._restApiHelper.send({method:e,url:t,body:i})})}getRelatedChanges(e,t){return this._getChangeURLAndFetch({changeNum:e,endpoint:"/related",patchNum:t,reportEndpointAsIs:!0})}getChangesSubmittedTogether(e){return this._getChangeURLAndFetch({changeNum:e,endpoint:"/submitted_together?o=NON_VISIBLE_CHANGES",reportEndpointAsIs:!0})}getChangeConflicts(e){const t={O:this.listChangesOptionsToHex(this.ListChangesOption.CURRENT_REVISION,this.ListChangesOption.CURRENT_COMMIT),q:"status:open conflicts:"+e};return this._restApiHelper.fetchJSON({url:"/changes/",params:t,anonymizedUrl:"/changes/conflicts:*"})}getChangeCherryPicks(e,t,n){const i={O:this.listChangesOptionsToHex(this.ListChangesOption.CURRENT_REVISION,this.ListChangesOption.CURRENT_COMMIT),q:["project:"+e,"change:"+t,"-change:"+n,"-is:abandoned"].join(" ")};return this._restApiHelper.fetchJSON({url:"/changes/",params:i,anonymizedUrl:"/changes/change:*"})}getChangesWithSameTopic(e,t){const n={O:this.listChangesOptionsToHex(this.ListChangesOption.LABELS,this.ListChangesOption.CURRENT_REVISION,this.ListChangesOption.CURRENT_COMMIT,this.ListChangesOption.DETAILED_LABELS),q:["status:open","-change:"+t,`topic:"${e}"`].join(" ")};return this._restApiHelper.fetchJSON({url:"/changes/",params:n,anonymizedUrl:"/changes/topic:*"})}getReviewedFiles(e,t){return this._getChangeURLAndFetch({changeNum:e,endpoint:"/files?reviewed",patchNum:t,reportEndpointAsIs:!0})}saveFileReviewed(e,t,n,i,s){return this._getChangeURLAndSend({changeNum:e,method:i?"PUT":"DELETE",patchNum:t,endpoint:`/files/${encodeURIComponent(n)}/reviewed`,errFn:s,anonymizedEndpoint:"/files/*/reviewed"})}saveChangeReview(e,t,n,i){const s=[this.awaitPendingDiffDrafts(),this.getChangeActionURL(e,t,"/review")];return Promise.all(s).then(([,e])=>this._restApiHelper.send({method:"POST",url:e,body:n,errFn:i}))}getChangeEdit(e,t){const n=t?{"download-commands":!0}:null;return this.getLoggedIn().then(t=>!!t&&this._getChangeURLAndFetch({changeNum:e,endpoint:"/edit/",params:n,reportEndpointAsIs:!0},!0))}createChange(e,t,n,i,s,a,o,r){return this._restApiHelper.send({method:"POST",url:"/changes/",body:{project:e,branch:t,subject:n,topic:i,is_private:s,work_in_progress:a,base_change:o,base_commit:r},parseResponse:!0,reportUrlAsIs:!0})}getFileContent(e,t,n){return(this.patchNumEquals(n,this.EDIT_NAME)?this._getFileInChangeEdit(e,t):this._getFileInRevision(e,t,n,e=>(e&&404!==e.status&&this.dispatchEvent(new CustomEvent("server-error",{detail:{res:e},composed:!0,bubbles:!0})),e))).then(e=>{if(!e.ok)return e;const t=e.headers.get("X-FYI-Content-Type");return this.getResponseObject(e).then(e=>({content:e,type:t,ok:!0}))})}_getFileInRevision(e,t,n,i){return this._getChangeURLAndSend({changeNum:e,method:"GET",patchNum:n,endpoint:`/files/${encodeURIComponent(t)}/content`,errFn:i,headers:{Accept:"application/json"},anonymizedEndpoint:"/files/*/content"})}_getFileInChangeEdit(e,t){return this._getChangeURLAndSend({changeNum:e,method:"GET",endpoint:"/edit/"+encodeURIComponent(t),headers:{Accept:"application/json"},anonymizedEndpoint:"/edit/*"})}rebaseChangeEdit(e){return this._getChangeURLAndSend({changeNum:e,method:"POST",endpoint:"/edit:rebase",reportEndpointAsIs:!0})}deleteChangeEdit(e){return this._getChangeURLAndSend({changeNum:e,method:"DELETE",endpoint:"/edit",reportEndpointAsIs:!0})}restoreFileInChangeEdit(e,t){return this._getChangeURLAndSend({changeNum:e,method:"POST",endpoint:"/edit",body:{restore_path:t},reportEndpointAsIs:!0})}renameFileInChangeEdit(e,t,n){return this._getChangeURLAndSend({changeNum:e,method:"POST",endpoint:"/edit",body:{old_path:t,new_path:n},reportEndpointAsIs:!0})}deleteFileInChangeEdit(e,t){return this._getChangeURLAndSend({changeNum:e,method:"DELETE",endpoint:"/edit/"+encodeURIComponent(t),anonymizedEndpoint:"/edit/*"})}saveChangeEdit(e,t,n){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:"/edit/"+encodeURIComponent(t),body:n,contentType:"text/plain",anonymizedEndpoint:"/edit/*"})}saveFileUploadChangeEdit(e,t,n){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:"/edit/"+encodeURIComponent(t),body:{binary_content:n},anonymizedEndpoint:"/edit/*"})}getRobotCommentFixPreview(e,t,n){return this._getChangeURLAndFetch({changeNum:e,patchNum:t,endpoint:`/fixes/${encodeURIComponent(n)}/preview`,reportEndpointAsId:!0})}applyFixSuggestion(e,t,n){return this._getChangeURLAndSend({method:"POST",changeNum:e,patchNum:t,endpoint:`/fixes/${encodeURIComponent(n)}/apply`,reportEndpointAsId:!0})}saveChangeCommitMessageEdit(e,t){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:"/edit:message",body:{message:t},reportEndpointAsIs:!0})}publishChangeEdit(e){return this._getChangeURLAndSend({changeNum:e,method:"POST",endpoint:"/edit:publish",reportEndpointAsIs:!0})}putChangeCommitMessage(e,t){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:"/message",body:{message:t},reportEndpointAsIs:!0})}deleteChangeCommitMessage(e,t){return this._getChangeURLAndSend({changeNum:e,method:"DELETE",endpoint:"/messages/"+t,reportEndpointAsIs:!0})}saveChangeStarred(e,t){return this.getFromProjectLookup(e).then(n=>{const i="/accounts/self/starred.changes/"+(n?encodeURIComponent(n)+"~":"")+e;return this._restApiHelper.send({method:t?"PUT":"DELETE",url:i,anonymizedUrl:"/accounts/self/starred.changes/*"})})}saveChangeReviewed(e,t){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:t?"/reviewed":"/unreviewed"})}send(e,t,n,i,s,a){return this._restApiHelper.send({method:e,url:t,body:n,errFn:i,contentType:s,headers:a})}getDiff(e,t,n,i,s,a){const o={context:"ALL",intraline:null,whitespace:s||"IGNORE_NONE"};this.isMergeParent(t)?o.parent=this.getParentIndex(t):this.patchNumEquals(t,"PARENT")||(o.base=t);const r={changeNum:e,endpoint:`/files/${encodeURIComponent(i)}/diff`,patchNum:n,errFn:a,params:o,anonymizedEndpoint:"/files/*/diff"};return n===this.EDIT_NAME&&(r.fetchOptions||(r.fetchOptions={}),r.fetchOptions.headers||(r.fetchOptions.headers=new Headers),r.fetchOptions.headers.append("Cache-Control","no-cache")),this._getChangeURLAndFetch(r)}getDiffComments(e,t,n,i){return this._getDiffComments(e,"/comments",t,n,i)}getDiffRobotComments(e,t,n,i){return this._getDiffComments(e,"/robotcomments",t,n,i)}getDiffDrafts(e,t,n,i){return this.getLoggedIn().then(s=>s?this._getDiffComments(e,"/drafts",t,n,i):Promise.resolve({}))}_setRange(e,t){if(t.in_reply_to&&!t.range)for(let n=0;n<e.length;n++)if(e[n].id===t.in_reply_to){t.range=e[n].range;break}return t}_setRanges(e){(e=e||[]).sort((e,t)=>sr.parseDate(e.updated)-sr.parseDate(t.updated));for(const t of e)this._setRange(e,t);return e}_getDiffComments(e,t,n,i,s){const a=n=>this._getChangeURLAndFetch({changeNum:e,endpoint:t,patchNum:n,reportEndpointAsIs:!0},!0);if(!n&&!i&&!s)return a();function o(e){return"PARENT"==e.side}function r(e){return"PARENT"!=e.side}function l(e){e.path=s}const c=[];let d,h,p;return p=a(i).then(e=>{d=e[s]||[],d=this._setRanges(d),"PARENT"==n&&(h=d.filter(o),h.forEach(l)),d=d.filter(r),d.forEach(l)}),c.push(p),"PARENT"!=n&&(p=a(n).then(e=>{h=(e[s]||[]).filter(r),h=this._setRanges(h),h.forEach(l)}),c.push(p)),Promise.all(c).then(()=>Promise.resolve({baseComments:h,comments:d}))}_getDiffCommentsFetchURL(e,t,n){return this._changeBaseURL(e,n).then(e=>e+t)}saveDiffDraft(e,t,n){return this._sendDiffDraftRequest("PUT",e,t,n)}deleteDiffDraft(e,t,n){return this._sendDiffDraftRequest("DELETE",e,t,n)}hasPendingDiffDrafts(){const e=this._pendingRequests[Kg];return e&&e.length}awaitPendingDiffDrafts(){return Promise.all(this._pendingRequests[Kg]||[]).then(()=>{this._pendingRequests[Kg]=[]})}_sendDiffDraftRequest(e,t,n,i){const s=!i.id&&"PUT"===e;let a,o="/drafts",r=o;i.id&&(o+="/"+i.id,r+="/*"),"PUT"===e&&(a=i),this._pendingRequests[Kg]||(this._pendingRequests[Kg]=[]);const l={changeNum:t,method:e,patchNum:n,endpoint:o,body:a,anonymizedEndpoint:r},c=this._getChangeURLAndSend(l);return this._pendingRequests[Kg].push(c),s?this._failForCreate200(c):c}getCommitInfo(e,t){return this._restApiHelper.fetchJSON({url:"/projects/"+encodeURIComponent(e)+"/commits/"+encodeURIComponent(t),anonymizedUrl:"/projects/*/comments/*"})}_fetchB64File(e){return this._restApiHelper.fetch({url:this.getBaseUrl()+e}).then(e=>{if(!e.ok)return Promise.reject(new Error(e.statusText));const t=e.headers.get("X-FYI-Content-Type");return e.text().then(e=>({body:e,type:t}))})}getB64FileContents(e,t,n,i){const s="number"==typeof i?"?parent="+i:"";return this._changeBaseURL(e,t).then(e=>(e=`${e}/files/${encodeURIComponent(n)}/content${s}`,this._fetchB64File(e)))}getImagesForDiff(e,t,n){let i,s;return i=t.meta_a&&t.meta_a.content_type.startsWith("image/")?"PARENT"===n.basePatchNum?this.getB64FileContents(e,n.patchNum,t.meta_a.name,1):this.getB64FileContents(e,n.basePatchNum,t.meta_a.name):Promise.resolve(null),s=t.meta_b&&t.meta_b.content_type.startsWith("image/")?this.getB64FileContents(e,n.patchNum,t.meta_b.name):Promise.resolve(null),Promise.all([i,s]).then(e=>{const n=e[0],i=e[1];return n&&(n._expectedType=t.meta_a.content_type,n._name=t.meta_a.name),i&&(i._expectedType=t.meta_b.content_type,i._name=t.meta_b.name),{baseImage:n,revisionImage:i}})}_changeBaseURL(e,t,n){return(n?Promise.resolve(n):this.getFromProjectLookup(e)).then(n=>{let i=`/changes/${encodeURIComponent(n)}~${e}`;return t&&(i+=`/revisions/${t}`),i})}setChangeTopic(e,t){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:"/topic",body:{topic:t},parseResponse:!0,reportUrlAsIs:!0})}setChangeHashtag(e,t){return this._getChangeURLAndSend({changeNum:e,method:"POST",endpoint:"/hashtags",body:t,parseResponse:!0,reportUrlAsIs:!0})}deleteAccountHttpPassword(){return this._restApiHelper.send({method:"DELETE",url:"/accounts/self/password.http",reportUrlAsIs:!0})}generateAccountHttpPassword(){return this._restApiHelper.send({method:"PUT",url:"/accounts/self/password.http",body:{generate:!0},parseResponse:!0,reportUrlAsIs:!0})}getAccountSSHKeys(){return this._fetchSharedCacheURL({url:"/accounts/self/sshkeys",reportUrlAsIs:!0})}addAccountSSHKey(e){const t={method:"POST",url:"/accounts/self/sshkeys",body:e,contentType:"text/plain",reportUrlAsIs:!0};return this._restApiHelper.send(t).then(e=>e.status<200&&e.status>=300?Promise.reject(new Error("error")):this.getResponseObject(e)).then(e=>e.valid?e:Promise.reject(new Error("error")))}deleteAccountSSHKey(e){return this._restApiHelper.send({method:"DELETE",url:"/accounts/self/sshkeys/"+e,anonymizedUrl:"/accounts/self/sshkeys/*"})}getAccountGPGKeys(){return this._restApiHelper.fetchJSON({url:"/accounts/self/gpgkeys",reportUrlAsIs:!0})}addAccountGPGKey(e){const t={method:"POST",url:"/accounts/self/gpgkeys",body:e,reportUrlAsIs:!0};return this._restApiHelper.send(t).then(e=>e.status<200&&e.status>=300?Promise.reject(new Error("error")):this.getResponseObject(e)).then(e=>e||Promise.reject(new Error("error")))}deleteAccountGPGKey(e){return this._restApiHelper.send({method:"DELETE",url:"/accounts/self/gpgkeys/"+e,anonymizedUrl:"/accounts/self/gpgkeys/*"})}deleteVote(e,t,n){return this._getChangeURLAndSend({changeNum:e,method:"DELETE",endpoint:`/reviewers/${t}/votes/${encodeURIComponent(n)}`,anonymizedEndpoint:"/reviewers/*/votes/*"})}setDescription(e,t,n){return this._getChangeURLAndSend({changeNum:e,method:"PUT",patchNum:t,endpoint:"/description",body:{description:n},reportUrlAsIs:!0})}confirmEmail(e){const t={method:"PUT",url:"/config/server/email.confirm",body:{token:e},reportUrlAsIs:!0};return this._restApiHelper.send(t).then(e=>204===e.status?"Email confirmed successfully.":null)}getCapabilities(e){return this._restApiHelper.fetchJSON({url:"/config/server/capabilities",errFn:e,reportUrlAsIs:!0})}getTopMenus(e){return this._fetchSharedCacheURL({url:"/config/server/top-menus",errFn:e,reportUrlAsIs:!0})}setAssignee(e,t){return this._getChangeURLAndSend({changeNum:e,method:"PUT",endpoint:"/assignee",body:{assignee:t},reportUrlAsIs:!0})}deleteAssignee(e){return this._getChangeURLAndSend({changeNum:e,method:"DELETE",endpoint:"/assignee",reportUrlAsIs:!0})}probePath(e){return fetch(new Request(e,{method:"HEAD"})).then(e=>e.ok)}startWorkInProgress(e,t){const n={};t&&(n.message=t);const i={changeNum:e,method:"POST",endpoint:"/wip",body:n,reportUrlAsIs:!0};return this._getChangeURLAndSend(i).then(e=>{if(204===e.status)return"Change marked as Work In Progress."})}startReview(e,t,n){return this._getChangeURLAndSend({changeNum:e,method:"POST",endpoint:"/ready",body:t,errFn:n,reportUrlAsIs:!0})}deleteComment(e,t,n,i){return this._getChangeURLAndSend({changeNum:e,method:"POST",patchNum:t,endpoint:`/comments/${n}/delete`,body:{reason:i},parseResponse:!0,anonymizedEndpoint:"/comments/*/delete"})}getChange(e,t){return this._restApiHelper.fetchJSON({url:`/changes/?q=change:${e}`,errFn:t,anonymizedUrl:"/changes/?q=change:*"}).then(e=>e&&e.length?e[0]:null)}setInProjectLookup(e,t){this._projectLookup[e]&&this._projectLookup[e]!==t&&console.warn("Change set with multiple project nums.One of them must be invalid."),this._projectLookup[e]=t}getFromProjectLookup(e){const t=this._projectLookup[e];if(t)return Promise.resolve(t);return this.getChange(e,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(t=>{if(t&&t.project)return this.setInProjectLookup(e,t.project),t.project})}_getChangeURLAndSend(e){const t=e.patchNum?"/changes/*~*/revisions/*":"/changes/*~*",n=e.reportEndpointAsIs?e.endpoint:e.anonymizedEndpoint;return this._changeBaseURL(e.changeNum,e.patchNum).then(i=>this._restApiHelper.send({method:e.method,url:i+e.endpoint,body:e.body,errFn:e.errFn,contentType:e.contentType,headers:e.headers,parseResponse:e.parseResponse,anonymizedUrl:n?t+n:void 0}))}_getChangeURLAndFetch(e,t){const n=e.reportEndpointAsIs?e.endpoint:e.anonymizedEndpoint,i=e.patchNum?"/changes/*~*/revisions/*":"/changes/*~*";return this._changeBaseURL(e.changeNum,e.patchNum).then(s=>this._restApiHelper.fetchJSON({url:s+e.endpoint,errFn:e.errFn,params:e.params,fetchOptions:e.fetchOptions,anonymizedUrl:n?i+n:void 0},t))}executeChangeAction(e,t,n,i,s,a){return this._getChangeURLAndSend({changeNum:e,method:t,patchNum:i,endpoint:n,body:s,errFn:a})}getBlame(e,t,n,i){const s=encodeURIComponent(n);return this._getChangeURLAndFetch({changeNum:e,endpoint:`/files/${s}/blame`,patchNum:t,params:i?{base:"t"}:void 0,anonymizedEndpoint:"/files/*/blame"})}_failForCreate200(e){return e.then(e=>{if(200===e.status){const t=Array.from(e.headers.entries()).reduce((e,[t,n])=>(Xg.test(t)||(e[t]=n),e),{});throw new Error([Yg,JSON.stringify(t)].join("\n"))}return e})}getDashboard(e,t,n){const i="/projects/"+encodeURIComponent(e)+"/dashboards/"+encodeURIComponent(t);return this._fetchSharedCacheURL({url:i,errFn:n,anonymizedUrl:"/projects/*/dashboards/*"})}getDocumentationSearches(e){e=e.trim();const t=encodeURIComponent(e);return this._fetchSharedCacheURL({url:`/Documentation/?q=${t}`,anonymizedUrl:"/Documentation/?*"})}getMergeable(e){return this._getChangeURLAndFetch({changeNum:e,endpoint:"/revisions/current/mergeable",parseResponse:!0,reportEndpointAsIs:!0})}deleteDraftComments(e){return this._restApiHelper.send({method:"POST",url:"/accounts/self/drafts:delete",body:{query:e}})}}customElements.define(Jg.is,Jg);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zg=za`
  <style include="shared-styles">
    :host {
      color: inherit;
      display: inline;
    }
  </style>
  <span>
    [[_computeDateStr(dateStr, _timeFormat, _dateFormat, _relative,
    showDateAndTime)]]
  </span>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Qg=864e5,e_="h:mm A",t_="h:mm:ss A",n_="HH:mm",i_="HH:mm:ss",s_={short:"MMM DD",full:"MMM DD, YYYY"},a_={short:"MM/DD",full:"MM/DD/YY"},o_={short:"MM-DD",full:"YYYY-MM-DD"},r_={short:"DD. MMM",full:"DD.MM.YYYY"},l_={short:"DD/MM",full:"DD/MM/YYYY"};class c_ extends(ra([Bu],Zn(na(Ka)))){static get template(){return Zg}static get is(){return"gr-date-formatter"}static get properties(){return{dateStr:{type:String,value:null,notify:!0},showDateAndTime:{type:Boolean,value:!1},hasTooltip:Boolean,title:{type:String,reflectToAttribute:!0,computed:"_computeFullDateStr(dateStr, _timeFormat, _dateFormat)"},_dateFormat:Object,_timeFormat:String,_relative:Boolean}}attached(){super.attached(),this._loadPreferences()}_getUtcOffsetString(){return" UTC"+el().format("Z")}_loadPreferences(){return this._getLoggedIn().then(e=>e?Promise.all([this._loadTimeFormat(),this._loadRelative()]):(this._timeFormat=n_,this._dateFormat=s_,void(this._relative=!1)))}_loadTimeFormat(){return this._getPreferences().then(e=>{const t=e&&e.time_format,n=e&&e.date_format;this._decideTimeFormat(t),this._decideDateFormat(n)})}_decideTimeFormat(e){switch(e){case"HHMM_12":this._timeFormat=e_;break;case"HHMM_24":this._timeFormat=n_;break;default:throw Error("Invalid time format: "+e)}}_decideDateFormat(e){switch(e){case"STD":this._dateFormat=s_;break;case"US":this._dateFormat=a_;break;case"ISO":this._dateFormat=o_;break;case"EURO":this._dateFormat=r_;break;case"UK":this._dateFormat=l_;break;default:throw Error("Invalid date format: "+e)}}_loadRelative(){return this._getPreferences().then(e=>{this._relative=!(!e||!e.relative_date_in_change_table)})}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_getPreferences(){return this.$.restAPI.getPreferences()}_isWithinDay(e,t){return-t.diff(e)<Qg&&t.day()===e.getDay()}_isWithinHalfYear(e,t){const n=-t.diff(e);return(t.day()!==e.getDay()||n>=Qg)&&n<180*Qg}_computeDateStr(e,t,n,i,s){if(!e||!t||!n)return"";const a=el(sr.parseDate(e));if(!a.isValid())return"";if(i){const e=a.fromNow();return"a few seconds ago"===e?"just now":e}const o=new Date;let r=n.full;return this._isWithinDay(o,a)?r=t:(this._isWithinHalfYear(o,a)&&(r=n.short),this.showDateAndTime&&(r=`${r} ${t}`)),a.format(r)}_timeToSecondsFormat(e){return e===e_?t_:i_}_computeFullDateStr(e,t,n){if([e,t,n].some(e=>void 0===e))return;if(!e)return"";const i=el(sr.parseDate(e));if(!i.isValid())return"";let s=n.full+", ";return s+=this._timeToSecondsFormat(t),i.format(s)+this._getUtcOffsetString()}}customElements.define(c_.is,c_);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const d_=document.createElement("template");d_.innerHTML='<dom-module id="gr-select">\n  <slot></slot>\n  \n</dom-module>',document.head.appendChild(d_.content);class h_ extends(Zn(na(Ka))){static get is(){return"gr-select"}static get properties(){return{bindValue:{type:String,notify:!0,observer:"_updateValue"}}}get nativeSelect(){return this.querySelector("select")}_updateValue(){void 0!==this.bindValue&&(this.nativeSelect.value=this.bindValue,this.async(()=>{this.nativeSelect.value=this.bindValue},1))}_valueChanged(){this.bindValue=this.nativeSelect.value}focus(){this.nativeSelect.focus()}created(){super.created(),this.addEventListener("change",()=>this._valueChanged()),this.addEventListener("dom-change",()=>this._updateValue())}ready(){super.ready(),null==this.bindValue&&this.nativeSelect.options.length>0&&(this.bindValue=this.nativeSelect.value)}}customElements.define(h_.is,h_);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const p_=za`
  <style include="shared-styles">
    :host {
      display: inline-block;
    }
    #triggerText {
      -moz-user-select: text;
      -ms-user-select: text;
      -webkit-user-select: text;
      user-select: text;
    }
    .dropdown-trigger {
      cursor: pointer;
      padding: 0;
    }
    .dropdown-content {
      background-color: var(--dropdown-background-color);
      box-shadow: var(--elevation-level-2);
      max-height: 70vh;
      margin-top: var(--spacing-xxl);
      min-width: 266px;
      @apply --dropdown-content-style;
    }
    paper-listbox {
      --paper-listbox: {
        padding: 0;
      }
    }
    paper-item {
      cursor: pointer;
      flex-direction: column;
      font-size: inherit;
      /* This variable was introduced in Dec 2019. We keep both min-height
         * rules around, because --paper-item-min-height is not yet upstreamed.
         */
      --paper-item-min-height: 0;
      --paper-item: {
        min-height: 0;
        padding: 10px 16px;
      }
      --paper-item-focused-before: {
        background-color: var(--selection-background-color);
      }
      --paper-item-focused: {
        background-color: var(--selection-background-color);
      }
    }
    paper-item:hover {
      background-color: var(--hover-background-color);
    }
    paper-item:not(:last-of-type) {
      border-bottom: 1px solid var(--border-color);
    }
    .bottomContent {
      color: var(--deemphasized-text-color);
    }
    .bottomContent,
    .topContent {
      display: flex;
      justify-content: space-between;
      flex-direction: row;
      width: 100%;
    }
    gr-button {
      --gr-button: {
        @apply --trigger-style;
      }
    }
    gr-date-formatter {
      color: var(--deemphasized-text-color);
      margin-left: var(--spacing-xxl);
      white-space: nowrap;
    }
    gr-select {
      display: none;
    }
    /* Because the iron dropdown 'area' includes the trigger, and the entire
       width of the dropdown, we want to treat tapping the area above the
       dropdown content as if it is tapping whatever content is underneath it.
       The next two styles allow this to happen. */
    iron-dropdown {
      max-width: none;
      pointer-events: none;
    }
    paper-listbox {
      pointer-events: auto;
    }
    @media only screen and (max-width: 50em) {
      gr-select {
        display: inline;
        @apply --gr-select-style;
      }
      gr-button,
      iron-dropdown {
        display: none;
      }
      select {
        @apply --native-select-style;
      }
    }
  </style>
  <gr-button
    disabled="[[disabled]]"
    down-arrow=""
    link=""
    id="trigger"
    class="dropdown-trigger"
    on-click="_showDropdownTapHandler"
    slot="dropdown-trigger"
  >
    <span id="triggerText">[[text]]</span>
  </gr-button>
  <iron-dropdown
    id="dropdown"
    vertical-align="top"
    allow-outside-scroll="true"
    on-click="_handleDropdownClick"
  >
    <paper-listbox
      class="dropdown-content"
      slot="dropdown-content"
      attr-for-selected="data-value"
      selected="{{value}}"
      on-tap="_handleDropdownTap"
    >
      <template
        is="dom-repeat"
        items="[[items]]"
        initial-count="[[initialCount]]"
      >
        <paper-item disabled="[[item.disabled]]" data-value$="[[item.value]]">
          <div class="topContent">
            <div>[[item.text]]</div>
            <template is="dom-if" if="[[item.date]]">
              <gr-date-formatter date-str="[[item.date]]"></gr-date-formatter>
            </template>
          </div>
          <template is="dom-if" if="[[item.bottomText]]">
            <div class="bottomContent">
              <div>[[item.bottomText]]</div>
            </div>
          </template>
        </paper-item>
      </template>
    </paper-listbox>
  </iron-dropdown>
  <gr-select bind-value="{{value}}">
    <select>
      <template is="dom-repeat" items="[[items]]">
        <option disabled$="[[item.disabled]]" value="[[item.value]]">
          [[_computeMobileText(item)]]
        </option>
      </template>
    </select>
  </gr-select>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class u_ extends(Zn(na(Ka))){static get template(){return p_}static get is(){return"gr-dropdown-list"}static get properties(){return{initialCount:Number,items:Object,text:String,disabled:{type:Boolean,value:!1},value:{type:String,notify:!0}}}static get observers(){return["_handleValueChange(value, items)"]}_handleDropdownClick(e){this.async(()=>{this.$.dropdown.close()},1)}_showDropdownTapHandler(e){this._open()}_open(){this.$.dropdown.open()}_computeMobileText(e){return e.mobileText?e.mobileText:e.text}_handleValueChange(e,t){if([e,t].some(e=>void 0===e))return;if(!e)return;const n=t.find(t=>t.value+""==e+"");n&&(this.text=n.triggerText?n.triggerText:n.text,this.dispatchEvent(new CustomEvent("value-change",{detail:{value:e},bubbles:!1})))}}customElements.define(u_.is,u_);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
class m_{constructor(e){m_[" "](e),this.type=e&&e.type||"default",this.key=e&&e.key,e&&"value"in e&&(this.value=e.value)}get value(){var e=this.type,t=this.key;if(e&&t)return m_.types[e]&&m_.types[e][t]}set value(e){var t=this.type,n=this.key;t&&n&&(t=m_.types[t]=m_.types[t]||{},null==e?delete t[n]:t[n]=e)}get list(){if(this.type){var e=m_.types[this.type];return e?Object.keys(e).map((function(e){return g_[this.type][e]}),this):[]}}byKey(e){return this.key=e,this.value}}m_[" "]=function(){},m_.types={};var g_=m_.types;ma({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function(e,t,n){var i=new m_({type:e,key:t});return void 0!==n&&n!==i.value?i.value=n:this.value!==i.value&&(this.value=i.value),i},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(e){e&&(this.value=this)},byKey:function(e){return new m_({type:this.type,key:e}).value}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;

        vertical-align: middle;

        fill: var(--iron-icon-fill-color, currentcolor);
        stroke: var(--iron-icon-stroke-color, none);

        width: var(--iron-icon-width, 24px);
        height: var(--iron-icon-height, 24px);
        @apply --iron-icon;
      }

      :host([hidden]) {
        display: none;
      }
    </style>
`,is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:lo.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(e){var t=(e||"").split(":");this._iconName=t.pop(),this._iconsetName=t.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(e){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Ui(this.root).removeChild(this._img),""===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon"))):(this._iconset&&this._iconset.removeIcon(this),this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Ui(this.root).appendChild(this._img))}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new m_({type:"iconset",key:null,value:null})},attached:function(){this.style.display="none"},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map((function(e){return this.name+":"+e}),this)},applyIcon:function(e,t){this.removeIcon(e);var n=this._cloneIcon(t,this.rtlMirroring&&this._targetIsRTL(e));if(n){var i=Ui(e.root||e);return i.insertBefore(n,i.childNodes[0]),e._svgIcon=n}return null},removeIcon:function(e){e._svgIcon&&(Ui(e.root||e).removeChild(e._svgIcon),e._svgIcon=null)},_targetIsRTL:function(e){if(null==this.__targetIsRTL)if(this.useGlobalRtlAttribute){var t=document.body&&document.body.hasAttribute("dir")?document.body:document.documentElement;this.__targetIsRTL="rtl"===t.getAttribute("dir")}else e&&e.nodeType!==Node.ELEMENT_NODE&&(e=e.host),this.__targetIsRTL=e&&"rtl"===window.getComputedStyle(e).direction;return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null,this._meta.key=this.name,this._meta.value=this,this.async((function(){this.fire("iron-iconset-added",this,{node:window})}))},_createIconMap:function(){var e=Object.create(null);return Ui(this).querySelectorAll("[id]").forEach((function(t){e[t.id]=t})),e},_cloneIcon:function(e,t){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[e],this.size,t)},_prepareSvgClone:function(e,t,n){if(e){var i=e.cloneNode(!0),s=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=i.getAttribute("viewBox")||"0 0 "+t+" "+t,o="pointer-events: none; display: block; width: 100%; height: 100%;";return n&&i.hasAttribute("mirror-in-rtl")&&(o+="-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;"),s.setAttribute("viewBox",a),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("focusable","false"),s.style.cssText=o,s.appendChild(i).removeAttribute("id"),s}return null}});
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const __=document.createElement("template");__.innerHTML='<iron-iconset-svg name="gr-icons" size="24">\n  <svg>\n    <defs>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g>\n      \x3c!-- This SVG is a copy from material.io https://material.io/icons/#unfold_more --\x3e\n      <g id="unfold-more"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="deleteEdit"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/editor-icons.html --\x3e\n      <g id="publishEdit"><path d="M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/editor-icons.html --\x3e\n      <g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g>\n      \x3c!-- This SVG is a copy from material.io https://material.io/icons/#ic_hourglass_full--\x3e\n      <g id="hourglass"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z"></path><path d="M0 0h24v24H0V0z" fill="none"></path></g>\n      \x3c!-- This SVG is a copy from material.io https://material.io/icons/#mode_comment--\x3e\n      <g id="comment"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"></path><path d="M0 0h24v24H0z" fill="none"></path></g>\n      \x3c!-- This SVG is a copy from material.io https://material.io/icons/#calendar_today--\x3e\n      <g id="calendar"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path><path d="M0 0h24v24H0z" fill="none"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="side-by-side"><path d="M17.1578947,10.8888889 L2.84210526,10.8888889 C2.37894737,10.8888889 2,11.2888889 2,11.7777778 L2,17.1111111 C2,17.6 2.37894737,18 2.84210526,18 L17.1578947,18 C17.6210526,18 18,17.6 18,17.1111111 L18,11.7777778 C18,11.2888889 17.6210526,10.8888889 17.1578947,10.8888889 Z M17.1578947,2 L2.84210526,2 C2.37894737,2 2,2.4 2,2.88888889 L2,8.22222222 C2,8.71111111 2.37894737,9.11111111 2.84210526,9.11111111 L17.1578947,9.11111111 C17.6210526,9.11111111 18,8.71111111 18,8.22222222 L18,2.88888889 C18,2.4 17.6210526,2 17.1578947,2 Z M16.1973628,2 L2.78874238,2 C2.35493407,2 2,2.4 2,2.88888889 L2,8.22222222 C2,8.71111111 2.35493407,9.11111111 2.78874238,9.11111111 L16.1973628,9.11111111 C16.6311711,9.11111111 16.9861052,8.71111111 16.9861052,8.22222222 L16.9861052,2.88888889 C16.9861052,2.4 16.6311711,2 16.1973628,2 Z" id="Shape" transform="scale(1.2) translate(10.000000, 10.000000) rotate(-90.000000) translate(-10.000000, -10.000000)"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="unified"><path d="M4,2 L17,2 C18.1045695,2 19,2.8954305 19,4 L19,16 C19,17.1045695 18.1045695,18 17,18 L4,18 C2.8954305,18 2,17.1045695 2,16 L2,4 L2,4 C2,2.8954305 2.8954305,2 4,2 L4,2 Z M4,7 L4,9 L17,9 L17,7 L4,7 Z M4,11 L4,13 L17,13 L17,11 L4,11 Z" id="Combined-Shape" transform="scale(1.12, 1.2)"></path></g>\n      \x3c!-- This SVG is a copy from iron-icons https://github.com/PolymerElements/iron-icons/blob/master/iron-icons.js --\x3e\n      <g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="robot"><path d="M4.137453,5.61015591 L4.54835569,1.5340419 C4.5717665,1.30180904 4.76724872,1.12504213 5.00065859,1.12504213 C5.23327176,1.12504213 5.42730868,1.30282046 5.44761309,1.53454578 L5.76084628,5.10933916 C6.16304484,5.03749412 6.57714381,5 7,5 L17,5 C20.8659932,5 24,8.13400675 24,12 L24,15.1250421 C24,18.9910354 20.8659932,22.1250421 17,22.1250421 L7,22.1250421 C3.13400675,22.1250421 2.19029351e-15,18.9910354 0,15.1250421 L0,12 C-3.48556243e-16,9.15382228 1.69864167,6.70438358 4.137453,5.61015591 Z M5.77553049,6.12504213 C3.04904264,6.69038358 1,9.10590202 1,12 L1,15.1250421 C1,18.4387506 3.6862915,21.1250421 7,21.1250421 L17,21.1250421 C20.3137085,21.1250421 23,18.4387506 23,15.1250421 L23,12 C23,8.6862915 20.3137085,6 17,6 L7,6 C6.60617231,6 6.2212068,6.03794347 5.84855971,6.11037415 L5.84984496,6.12504213 L5.77553049,6.12504213 Z M6.93003717,6.95027711 L17.1232083,6.95027711 C19.8638332,6.95027711 22.0855486,9.17199258 22.0855486,11.9126175 C22.0855486,14.6532424 19.8638332,16.8749579 17.1232083,16.8749579 L6.93003717,16.8749579 C4.18941226,16.8749579 1.9676968,14.6532424 1.9676968,11.9126175 C1.9676968,9.17199258 4.18941226,6.95027711 6.93003717,6.95027711 Z M7.60124392,14.0779303 C9.03787127,14.0779303 10.2024878,12.9691885 10.2024878,11.6014862 C10.2024878,10.2337839 9.03787127,9.12504213 7.60124392,9.12504213 C6.16461657,9.12504213 5,10.2337839 5,11.6014862 C5,12.9691885 6.16461657,14.0779303 7.60124392,14.0779303 Z M16.617997,14.1098288 C18.0638768,14.1098288 19.2359939,12.9939463 19.2359939,11.6174355 C19.2359939,10.2409246 18.0638768,9.12504213 16.617997,9.12504213 C15.1721172,9.12504213 14,10.2409246 14,11.6174355 C14,12.9939463 15.1721172,14.1098288 16.617997,14.1098288 Z M9.79751216,18.1250421 L15,18.1250421 L15,19.1250421 C15,19.6773269 14.5522847,20.1250421 14,20.1250421 L10.7975122,20.1250421 C10.2452274,20.1250421 9.79751216,19.6773269 9.79751216,19.1250421 L9.79751216,18.1250421 Z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="abandon"><path d="M17.65675,17.65725 C14.77275,20.54125 10.23775,20.75625 7.09875,18.31525 L18.31475,7.09925 C20.75575,10.23825 20.54075,14.77325 17.65675,17.65725 M6.34275,6.34325 C9.22675,3.45925 13.76275,3.24425 16.90075,5.68525 L5.68475,16.90125 C3.24375,13.76325 3.45875,9.22725 6.34275,6.34325 M19.07075,4.92925 C15.16575,1.02425 8.83375,1.02425 4.92875,4.92925 C1.02375,8.83425 1.02375,15.16625 4.92875,19.07125 C8.83375,22.97625 15.16575,22.97625 19.07075,19.07125 C22.97575,15.16625 22.97575,8.83425 19.07075,4.92925"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="edit"><path d="M3,17.2525 L3,21.0025 L6.75,21.0025 L17.81,9.9425 L14.06,6.1925 L3,17.2525 L3,17.2525 Z M20.71,7.0425 C21.1,6.6525 21.1,6.0225 20.71,5.6325 L18.37,3.2925 C17.98,2.9025 17.35,2.9025 16.96,3.2925 L15.13,5.1225 L18.88,8.8725 L20.71,7.0425 L20.71,7.0425 Z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="rebase"><path d="M15.5759,19.4241 L14.5861,20.4146 L11.7574,23.2426 L10.3434,21.8286 L12.171569,20 L7.82933006,20 C7.41754308,21.1652555 6.30635522,22 5,22 C3.343,22 2,20.657 2,19 C2,17.6936448 2.83474451,16.5824569 4,16.1706699 L4,7.82933006 C2.83474451,7.41754308 2,6.30635522 2,5 C2,3.343 3.343,2 5,2 C6.30635522,2 7.41754308,2.83474451 7.82933006,4 L12.1715,4 L10.3431,2.1716 L11.7571,0.7576 L15.36365,4.3633 L16.0000001,4.99920039 C16.0004321,3.34256796 17.3432665,2 19,2 C20.657,2 22,3.343 22,5 C22,6.30635522 21.1652555,7.41754308 20,7.82933006 L20,16.1706699 C21.1652555,16.5824569 22,17.6936448 22,19 C22,20.657 20.657,22 19,22 C17.343,22 16,20.657 16,19 L15.5759,19.4241 Z M12.1715,18 L10.3431,16.1716 L11.7571,14.7576 L15.36365,18.3633 L16.0000001,18.9992004 C16.0003407,17.6931914 16.8349823,16.5823729 18,16.1706699 L18,7.82933006 C16.8347445,7.41754308 16,6.30635522 16,5 L15.5759,5.4241 L14.5861,6.4146 L11.7574,9.2426 L10.3434,7.8286 L12.171569,6 L7.82933006,6 C7.52807271,6.85248394 6.85248394,7.52807271 6,7.82933006 L6,16.1706699 C6.85248394,16.4719273 7.52807271,17.1475161 7.82933006,18 L12.1715,18 Z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="rebaseEdit"><path d="M15.5759,19.4241 L14.5861,20.4146 L11.7574,23.2426 L10.3434,21.8286 L12.171569,20 L7.82933006,20 C7.41754308,21.1652555 6.30635522,22 5,22 C3.343,22 2,20.657 2,19 C2,17.6936448 2.83474451,16.5824569 4,16.1706699 L4,7.82933006 C2.83474451,7.41754308 2,6.30635522 2,5 C2,3.343 3.343,2 5,2 C6.30635522,2 7.41754308,2.83474451 7.82933006,4 L12.1715,4 L10.3431,2.1716 L11.7571,0.7576 L15.36365,4.3633 L16.0000001,4.99920039 C16.0004321,3.34256796 17.3432665,2 19,2 C20.657,2 22,3.343 22,5 C22,6.30635522 21.1652555,7.41754308 20,7.82933006 L20,16.1706699 C21.1652555,16.5824569 22,17.6936448 22,19 C22,20.657 20.657,22 19,22 C17.343,22 16,20.657 16,19 L15.5759,19.4241 Z M12.1715,18 L10.3431,16.1716 L11.7571,14.7576 L15.36365,18.3633 L16.0000001,18.9992004 C16.0003407,17.6931914 16.8349823,16.5823729 18,16.1706699 L18,7.82933006 C16.8347445,7.41754308 16,6.30635522 16,5 L15.5759,5.4241 L14.5861,6.4146 L11.7574,9.2426 L10.3434,7.8286 L12.171569,6 L7.82933006,6 C7.52807271,6.85248394 6.85248394,7.52807271 6,7.82933006 L6,16.1706699 C6.85248394,16.4719273 7.52807271,17.1475161 7.82933006,18 L12.1715,18 Z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="restore"><path d="M12,8 L12,13 L16.28,15.54 L17,14.33 L13.5,12.25 L13.5,8 L12,8 Z M13,3 C8.03,3 4,7.03 4,12 L1,12 L4.89,15.89 L4.96,16.03 L9,12 L6,12 C6,8.13 9.13,5 13,5 C16.87,5 20,8.13 20,12 C20,15.87 16.87,19 13,19 C11.07,19 9.32,18.21 8.06,16.94 L6.64,18.36 C8.27,19.99 10.51,21 13,21 C17.97,21 22,16.97 22,12 C22,7.03 17.97,3 13,3 Z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="revert"><path d="M12.3,8.5 C9.64999995,8.5 7.24999995,9.49 5.39999995,11.1 L1.79999995,7.5 L1.79999995,16.5 L10.8,16.5 L7.17999995,12.88 C8.56999995,11.72 10.34,11 12.3,11 C15.84,11 18.85,13.31 19.9,16.5 L22.27,15.72 C20.88,11.53 16.95,8.5 12.3,8.5"></path></g>\n      <g id="revert_submission"><path d="M12.3,8.5 C9.64999995,8.5 7.24999995,9.49 5.39999995,11.1 L1.79999995,7.5 L1.79999995,16.5 L10.8,16.5 L7.17999995,12.88 C8.56999995,11.72 10.34,11 12.3,11 C15.84,11 18.85,13.31 19.9,16.5 L22.27,15.72 C20.88,11.53 16.95,8.5 12.3,8.5"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="stopEdit"><path d="M4 4 20 4 20 20 4 20z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="submit"><path d="M22.23,5 L11.65,15.58 L7.47000001,11.41 L6.06000001,12.82 L11.65,18.41 L23.649,6.41 L22.23,5 Z M16.58,5 L10.239,11.34 L11.65,12.75 L17.989,6.41 L16.58,5 Z M0.400000006,12.82 L5.99000001,18.41 L7.40000001,17 L1.82000001,11.41 L0.400000006,12.82 Z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="review"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g>\n      \x3c!-- This is a custom PolyGerrit SVG --\x3e\n      <g id="zeroState"><path d="M22 9V7h-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2v-2h-2V9h2zm-4 10H4V5h14v14zM6 13h5v4H6zm6-6h4v3h-4zM6 7h5v5H6zm6 4h4v6h-4z"></path></g>\n      \x3c!-- This SVG is an adaptation of material.io https://material.io/icons/#label_important--\x3e\n      <g id="attention"><path d="M5.5 19 l9 0 c.67 0 1.27 -.33 1.63 -.84 L20.5 12 l-4.37 -6.16 c-.36 -.51 -.96 -.84 -1.63 -.84 l-9 0 L9 12 z"></path></g>\n      \x3c!-- This SVG is a copy from material.io https://material.io/icons/#visibility--\x3e\n      <g id="ready"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></g>\n    </defs>\n  </svg>\n</iron-iconset-svg>',document.head.appendChild(__.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const f_={HISTORY:"history",LABEL_CHANGE:"labelchange",SHOW_CHANGE:"showchange",SUBMIT_CHANGE:"submitchange",SHOW_REVISION_ACTIONS:"show-revision-actions",COMMIT_MSG_EDIT:"commitmsgedit",COMMENT:"comment",REVERT:"revert",REVERT_SUBMISSION:"revert_submission",POST_REVERT:"postrevert",ANNOTATE_DIFF:"annotatediff",ADMIN_MENU_LINKS:"admin-menu-links",HIGHLIGHTJS_LOADED:"highlightjs-loaded"},b_={CHANGE_ACTIONS:"changeactions",REPLY_DIALOG:"replydialog"};class v_ extends(ra([vm],Zn(na(Ka)))){static get is(){return"gr-js-api-interface"}constructor(){super(),this.Element=b_,this.EventType=f_}static get properties(){return{_elements:{type:Object,value:{}},_eventCallbacks:{type:Object,value:{}}}}handleEvent(e,t){tr.awaitPluginsLoaded().then(()=>{switch(e){case f_.HISTORY:this._handleHistory(t);break;case f_.SHOW_CHANGE:this._handleShowChange(t);break;case f_.COMMENT:this._handleComment(t);break;case f_.LABEL_CHANGE:this._handleLabelChange(t);break;case f_.SHOW_REVISION_ACTIONS:this._handleShowRevisionActions(t);break;case f_.HIGHLIGHTJS_LOADED:this._handleHighlightjsLoaded(t);break;default:console.warn("handleEvent called with unsupported event type:",e)}})}addElement(e,t){this._elements[e]=t}getElement(e){return this._elements[e]}addEventCallback(e,t){this._eventCallbacks[e]||(this._eventCallbacks[e]=[]),this._eventCallbacks[e].push(t)}canSubmitChange(e,t){return!this._getEventCallbacks(f_.SUBMIT_CHANGE).some(n=>{try{return!1===n(e,t)}catch(e){console.error(e)}return!1})}_removeEventCallbacks(){for(const e in f_)f_.hasOwnProperty(e)&&(this._eventCallbacks[f_[e]]=[])}_handleHistory(e){for(const t of this._getEventCallbacks(f_.HISTORY))try{t(e.path)}catch(e){console.error(e)}}_handleShowChange(e){const t=Object.assign({},e.change,{get mergeable(){return console.warn("Accessing change.mergeable from SHOW_CHANGE is deprecated! Use info.mergeable instead."),e.info&&e.info.mergeable}}),n=e.patchNum,i=e.info;let s;for(const e of Object.values(t.revisions||{}))if(this.patchNumEquals(e._number,n)){s=e;break}for(const e of this._getEventCallbacks(f_.SHOW_CHANGE))try{e(t,s,i)}catch(e){console.error(e)}}_handleShowRevisionActions(e){const t=this._getEventCallbacks(f_.SHOW_REVISION_ACTIONS);for(const n of t)try{n(e.revisionActions,e.change)}catch(e){console.error(e)}}handleCommitMessage(e,t){for(const n of this._getEventCallbacks(f_.COMMIT_MSG_EDIT))try{n(e,t)}catch(e){console.error(e)}}_handleComment(e){for(const t of this._getEventCallbacks(f_.COMMENT))try{t(e.node)}catch(e){console.error(e)}}_handleLabelChange(e){for(const t of this._getEventCallbacks(f_.LABEL_CHANGE))try{t(e.change)}catch(e){console.error(e)}}_handleHighlightjsLoaded(e){for(const t of this._getEventCallbacks(f_.HIGHLIGHTJS_LOADED))try{t(e.hljs)}catch(e){console.error(e)}}modifyRevertMsg(e,t,n){for(const i of this._getEventCallbacks(f_.REVERT))try{t=i(e,t,n)}catch(e){console.error(e)}return t}modifyRevertSubmissionMsg(e,t,n){for(const i of this._getEventCallbacks(f_.REVERT_SUBMISSION))try{t=i(e,t,n)}catch(e){console.error(e)}return t}getDiffLayers(e,t,n){const i=[];for(const s of this._getEventCallbacks(f_.ANNOTATE_DIFF))try{const a=s.getLayer(e,t,n);i.push(a)}catch(e){console.error(e)}return i}getCoverageAnnotationApi(){return tr.awaitPluginsLoaded().then(()=>this._getEventCallbacks(f_.ANNOTATE_DIFF).find(e=>e.getCoverageProvider()))}getAdminMenuLinks(){const e=[];for(const t of this._getEventCallbacks(f_.ADMIN_MENU_LINKS))e.push(...t.getMenuLinks());return e}getLabelValuesPostRevert(e){let t={};for(const n of this._getEventCallbacks(f_.POST_REVERT))try{t=n(e)}catch(e){console.error(e)}return t}_getEventCallbacks(e){return this._eventCallbacks[e]||[]}}
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function y_(){window.Gerrit.flushPreinstalls&&window.Gerrit.flushPreinstalls()}customElements.define(v_.is,v_);function w_(){var e;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.Gerrit=window.Gerrit||{},y_(),(e=window.Gerrit).css=function(t){if(console.warn("Gerrit.css(rulesStr) is deprecated!","Use plugin.styles().css(rulesStr)"),!e._customStyleSheet){const t=document.createElement("style");document.head.appendChild(t),e._customStyleSheet=t.sheet}const n="__pg_js_api_class_"+e._customStyleSheet.cssRules.length;return e._customStyleSheet.insertRule("."+n+"{"+t+"}",0),n},e.install=function(e,t,n){tr.install(e,t,n)},e.getLoggedIn=function(){return console.warn("Gerrit.getLoggedIn() is deprecated! Use plugin.restApi().getLoggedIn()"),document.createElement("gr-rest-api-interface").getLoggedIn()},e.get=function(e,t){console.warn(".get() is deprecated! Use plugin.restApi().get()"),Xo("GET",e,t)},e.post=function(e,t,n){console.warn(".post() is deprecated! Use plugin.restApi().post()"),Xo("POST",e,n,t)},e.put=function(e,t,n){console.warn(".put() is deprecated! Use plugin.restApi().put()"),Xo("PUT",e,n,t)},e.delete=function(e,t){C_(e,t)},e.awaitPluginsLoaded=function(){return tr.awaitPluginsLoaded()},e._loadPlugins=function(e,t){tr.loadPlugins(e,t)},e._arePluginsLoaded=function(){return tr.arePluginsLoaded()},e._isPluginPreloaded=function(e){return tr.isPluginPreloaded(e)},e._isPluginEnabled=function(e){return tr.isPluginEnabled(e)},e._isPluginLoaded=function(e){return tr.isPluginLoaded(e)},e._eventEmitter=vp,["addListener","dispatch","emit","off","on","once","removeAllListeners","removeListener"].forEach(t=>{e[t]=vp[t].bind(vp)}),tr.installPreloadedPlugins()}function C_(e,t){return console.warn(".delete() is deprecated! Use plugin.restApi().delete()"),qo().send("DELETE",e).then(e=>204!==e.status?e.text().then(t=>t?Promise.reject(new Error(t)):Promise.reject(new Error(e.status))):(t&&t(e),e))}!function(e){const t={CHANGE_SCREEN_BELOW_COMMIT_INFO_BLOCK:"change-view-integration",CHANGE_SCREEN_BELOW_CHANGE_INFO_BLOCK:"change-metadata-item"},n="decorate",i="replace",s="style";function a(e){if(this._domHooks=new Oo(this),!e)return console.warn("Plugin not being loaded from /plugins base path.","Unable to determine name."),this;this.deprecated={_loadedGwt:o._loadedGwt.bind(this),install:o.install.bind(this),onAction:o.onAction.bind(this),panel:o.panel.bind(this),popup:o.popup.bind(this),screen:o.screen.bind(this),settingsScreen:o.settingsScreen.bind(this)},this._url=new URL(e),this._name=Yo(this._url)}a._sharedAPIElement=document.createElement("gr-js-api-interface"),a.prototype._name="",a.prototype.getPluginName=function(){return this._name},a.prototype.registerStyleModule=function(e,t){ir.registerModule(this,e,s,t)},a.prototype.registerCustomComponent=function(e,t,n){return this._registerCustomComponent(e,t,n)},a.prototype.registerDynamicCustomComponent=function(e,t,n){const i=`${e}-${this.getPluginName()}`;return this._registerCustomComponent(i,t,n,e)},a.prototype._registerCustomComponent=function(e,t,s,a){const o=s&&s.replace?i:n,r=this._domHooks.getDomHook(e,t),l=t||r.getModuleName();return ir.registerModule(this,e,o,l,r,a),r.getPublicAPI()},a.prototype.hook=function(e,t){return this.registerCustomComponent(e,void 0,t)},a.prototype.getServerInfo=function(){return document.createElement("gr-rest-api-interface").getConfig()},a.prototype.on=function(e,t){a._sharedAPIElement.addEventCallback(e,t)},a.prototype.url=function(t){const n="/plugins/"+this._name+(t||"/"),i=e.location.origin+`${Go.getBaseUrl()}${n}`;return e.location.origin===this._url.origin?i:"preloaded:"===this._url.protocol?e.ASSETS_PATH?`${e.ASSETS_PATH}${n}`:i:this._url.href.split("/plugins/"+this._name)[0]+n},a.prototype.screenUrl=function(e){const t=e?"/"+e:"";return`${location.origin}${Go.getBaseUrl()}/x/${this.getPluginName()}${t}`},a.prototype._send=function(e,t,n,i){return Xo(e,this.url(t),n,i)},a.prototype.get=function(e,t){return console.warn(".get() is deprecated! Use .restApi().get()"),this._send("GET",e,t)},a.prototype.post=function(e,t,n){return console.warn(".post() is deprecated! Use .restApi().post()"),this._send("POST",e,n,t)},a.prototype.put=function(e,t,n){return console.warn(".put() is deprecated! Use .restApi().put()"),this._send("PUT",e,n,t)},a.prototype.delete=function(e,t){return C_(this.url(e),t)},a.prototype.annotationApi=function(){return new Sp(this)},a.prototype.changeActions=function(){return new To(this,a._sharedAPIElement.getElement(a._sharedAPIElement.Element.CHANGE_ACTIONS))},a.prototype.changeReply=function(){return new Io(this)},a.prototype.theme=function(){return new Fo(this)},a.prototype.project=function(){return new Zu(this)},a.prototype.changeMetadata=function(){return new Pp(this)},a.prototype.admin=function(){return new Cp(this)},a.prototype.settings=function(){return new am(this)},a.prototype.styles=function(){return new lm},a.prototype.restApi=function(e){return new Op(e)},a.prototype.attributeHelper=function(e){return new fo(e)},a.prototype.eventHelper=function(e){return new Rp(e)},a.prototype.popup=function(e){if("string"!=typeof e)return void console.error(".popup(element) deprecated, use .popup(moduleName)!");return new Wr(this,e).open()},a.prototype.panel=function(){console.error(".panel() is deprecated! Use registerCustomComponent() instead.")},a.prototype.settingsScreen=function(){console.error(".settingsScreen() is deprecated! Use .settings() instead.")},a.prototype.screen=function(e,t){if(!t||"string"==typeof t)return this.registerCustomComponent(this._getScreenName(e),t);console.error(".screen(pattern, callback) deprecated, use .screen(screenName, opt_moduleName)!")},a.prototype._getScreenName=function(e){return`${this.getPluginName()}-screen-${e}`};const o={_loadedGwt:()=>{},install(){console.log("Installing deprecated APIs is deprecated!");for(const e in this.deprecated)"install"!==e&&(this[e]=this.deprecated[e])},popup(e){if(console.warn("plugin.deprecated.popup() is deprecated, use plugin.popup() insted!"),!e)throw new Error("Popup contents not found");const t=new Wr(this);return t.open().then(t=>t._getElement().appendChild(e)),t},onAction(e,t,n){console.warn("plugin.deprecated.onAction() is deprecated, use plugin.changeActions() instead!"),"change"===e||"revision"===e?this.on("showchange",(e,i)=>{const s=this.changeActions().getActionDetails(t);s?this.changeActions().addTapListener(s.__key,()=>{n(new cm(this,s,e,i))}):console.warn(`${this.getPluginName()} onAction error: ${t} not found!`)}):console.warn(`${e} actions are not supported.`)},screen(e,t){console.warn("plugin.deprecated.screen is deprecated, use plugin.screen instead!"),e instanceof RegExp?console.error("deprecated.screen() does not support RegExp. Please use strings for patterns."):this.hook(this._getScreenName(e)).onAttached(e=>{e.style.display="none",t({body:e,token:e.token,onUnload:()=>{},setTitle:()=>{},setWindowTitle:()=>{},show:()=>{e.style.display="initial"}})})},settingsScreen(e,t,n){console.warn(".settingsScreen() is deprecated! Use .settings() instead."),this.settings().title(t).token(e).module("div").build().onAttached(e=>{e.style.display="none";const t=e.querySelector("div");n({body:t,onUnload:()=>{},setTitle:()=>{},setWindowTitle:()=>{},show:()=>{e.style.display="initial"}})})},panel(e,n){console.warn(".panel() is deprecated! Use registerCustomComponent() instead.");const i=t[e];i?this.hook(i).onAttached(e=>n({body:e,p:{CHANGE_INFO:e.change,REVISION_INFO:e.revision},onUnload:()=>{}})):console.warn(`.panel ${e} not supported!`)}};e.Plugin=a}(window);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const E_=za`
  <style include="shared-styles">
    #nav {
      background-color: var(--table-header-background-color);
      border: 1px solid var(--border-color);
      border-top: none;
      height: 100%;
      position: absolute;
      top: 0;
      width: 14em;
    }
    #nav.pinned {
      position: fixed;
    }
    @media only screen and (max-width: 53em) {
      #nav {
        display: none;
      }
    }
  </style>
  <nav id="nav">
    <slot></slot>
  </nav>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class S_ extends(Zn(na(Ka))){static get template(){return E_}static get is(){return"gr-page-nav"}static get properties(){return{_headerHeight:Number}}attached(){super.attached(),this.listen(window,"scroll","_handleBodyScroll")}detached(){super.detached(),this.unlisten(window,"scroll","_handleBodyScroll")}_handleBodyScroll(){if(void 0===this._headerHeight){let e=this._getOffsetTop(this);for(let t=this.offsetParent;t;t=this._getOffsetParent(t))e+=this._getOffsetTop(t);this._headerHeight=e}this.$.nav.classList.toggle("pinned",this._getScrollY()>=this._headerHeight)}_getOffsetParent(e){return e&&e.offsetParent?e.offsetParent:""}_getOffsetTop(e){return e.offsetTop}_getScrollY(){return window.scrollY}}customElements.define(S_.is,S_);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const x_=document.createElement("template");x_.innerHTML='<dom-module id="gr-table-styles">\n  <template>\n    <style>\n      .genericList {\n        background-color: var(--background-color-primary);\n        border-collapse: collapse;\n        width: 100%;\n      }\n      .genericList th,\n      .genericList td {\n        padding: var(--spacing-m) 0;\n        vertical-align: middle;\n      }\n      .genericList tr {\n        border-bottom: 1px solid var(--border-color);\n      }\n      .genericList tr:hover {\n        background-color: var(--hover-background-color);\n      }\n      .genericList th {\n        white-space: nowrap;\n      }\n      .genericList th,\n      .genericList td {\n        padding-right: var(--spacing-l);\n      }\n      .genericList tr th:first-of-type,\n      .genericList tr td:first-of-type {\n        padding-left: var(--spacing-l);\n      }\n      .genericList tr:first-of-type {\n        border-top: 1px solid var(--border-color);\n      }\n      .genericList tr th:last-of-type,\n      .genericList tr td:last-of-type {\n        border-left: 1px solid var(--border-color);\n        text-align: center;\n        padding-left: var(--spacing-l);\n      }\n      .genericList tr th.delete,\n      .genericList tr td.delete {\n        padding-top: 0;\n        padding-bottom: 0;\n      }\n      .genericList tr th.delete,\n      .genericList tr td.delete,\n      .genericList tr.loadingMsg td,\n      .genericList tr.groupHeader td {\n        border-left: none;\n      }\n      .genericList .loading {\n        border: none;\n        display: none;\n      }\n      .genericList td {\n        flex-shrink: 0;\n      }\n      .genericList .topHeader,\n      .genericList .groupHeader {\n        color: var(--primary-text-color);\n        font-weight: var(--font-weight-bold);\n        text-align: left;\n        vertical-align: middle\n      }\n      .genericList .groupHeader {\n        background-color: var(--background-color-secondary);\n        font-family: var(--header-font-family);\n        font-size: var(--font-size-h3);\n        font-weight: var(--font-weight-h3);\n        line-height: var(--line-height-h3);\n      }\n      .genericList a {\n        color: var(--primary-text-color);\n        text-decoration: none;\n      }\n      .genericList a:hover {\n        text-decoration: underline;\n      }\n      .genericList .description {\n        width: 99%;\n      }\n      .genericList .loadingMsg {\n        color: var(--deemphasized-text-color);\n        display: block;\n        padding: var(--spacing-s) var(--spacing-l);\n      }\n      .genericList .loadingMsg:not(.loading) {\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(x_.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const A_=za`
  <style include="shared-styles">
    :host {
      color: var(--primary-text-color);
      display: block;
      max-height: 90vh;
      overflow: auto;
    }
    .container {
      display: flex;
      flex-direction: column;
      max-height: 90vh;
      padding: var(--spacing-xl);
    }
    header {
      flex-shrink: 0;
      padding-bottom: var(--spacing-xl);
    }
    main {
      display: flex;
      flex-shrink: 1;
      width: 100%;
      flex: 1;
      /* IMPORTANT: required for firefox */
      min-height: 0px;
    }
    main .overflow-container {
      flex: 1;
      overflow: auto;
    }
    footer {
      display: flex;
      flex-shrink: 0;
      justify-content: flex-end;
      padding-top: var(--spacing-xl);
    }
    gr-button {
      margin-left: var(--spacing-l);
    }
    .hidden {
      display: none;
    }
  </style>
  <div class="container" on-keydown="_handleKeydown">
    <header class="font-h3"><slot name="header"></slot></header>
    <main>
      <div class="overflow-container">
        <slot name="main"></slot>
      </div>
    </main>
    <footer>
      <slot name="footer"></slot>
      <gr-button
        id="cancel"
        class$="[[_computeCancelClass(cancelLabel)]]"
        link=""
        on-click="_handleCancelTap"
      >
        [[cancelLabel]]
      </gr-button>
      <gr-button
        id="confirm"
        link=""
        primary=""
        on-click="_handleConfirm"
        disabled="[[disabled]]"
        title$="[[confirmTooltip]]"
      >
        [[confirmLabel]]
      </gr-button>
    </footer>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class P_ extends(Zn(na(Ka))){static get template(){return A_}static get is(){return"gr-dialog"}static get properties(){return{confirmLabel:{type:String,value:"Confirm"},cancelLabel:{type:String,value:"Cancel"},disabled:{type:Boolean,value:!1},confirmOnEnter:{type:Boolean,value:!1},confirmTooltip:{type:String,observer:"_handleConfirmTooltipUpdate"}}}ready(){super.ready(),this._ensureAttribute("role","dialog")}_handleConfirmTooltipUpdate(e){e?this.$.confirm.setAttribute("has-tooltip",!0):this.$.confirm.removeAttribute("has-tooltip")}_handleConfirm(e){this.disabled||(e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{composed:!0,bubbles:!1})))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}_handleKeydown(e){this.confirmOnEnter&&13===e.keyCode&&this._handleConfirm(e)}resetFocus(){this.$.confirm.focus()}_computeCancelClass(e){return e.length?"":"hidden"}}customElements.define(P_.is,P_);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const k_=ma({_template:za`
    <style>
      :host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }
    </style>
    <div aria-live$="[[mode]]">[[_text]]</div>
`,is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){k_.instance||(k_.instance=this),document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(e){this._text="",this.async((function(){this._text=e}),100)},_onIronAnnounce:function(e){e.detail&&e.detail.text&&this.announce(e.detail.text)}});k_.instance=null,k_.requestAvailability=function(){k_.instance||(k_.instance=document.createElement("iron-a11y-announcer")),document.body.appendChild(k_.instance)};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
let T_=null;const I_={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:"_invalidChanged"}},registered:function(){T_=new m_({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},get _validator(){return T_&&T_.byKey(this.validator)},hasValidator:function(){return null!=this._validator},validate:function(e){return void 0===e&&void 0!==this.value?this.invalid=!this._getValidity(this.value):this.invalid=!this._getValidity(e),!this.invalid},_getValidity:function(e){return!this.hasValidator()||this._validator.validate(e)}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/ma({_template:za`
    <style>
      :host {
        display: inline-block;
      }
    </style>
    <slot id="content"></slot>
`,is:"iron-input",behaviors:[I_],properties:{bindValue:{type:String,value:""},value:{type:String,computed:"_computeValue(bindValue)"},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:["_bindValueChanged(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},created:function(){k_.requestAvailability(),this._previousValidInput="",this._patternAlreadyChecked=!1},attached:function(){this._observer=Ui(this).observeNodes(function(e){this._initSlottedInput()}.bind(this))},detached:function(){this._observer&&(Ui(this).unobserveNodes(this._observer),this._observer=null)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0],this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value),this.fire("iron-input-ready")},get _patternRegExp(){var e;if(this.allowedPattern)e=new RegExp(this.allowedPattern);else switch(this.inputElement.type){case"number":e=/[0-9.,e-]/}return e},_bindValueChanged:function(e,t){t&&(void 0===e?t.value=null:e!==t.value&&(this.inputElement.value=e),this.autoValidate&&this.validate(),this.fire("bind-value-changed",{value:e}))},_onInput:function(){this.allowedPattern&&!this._patternAlreadyChecked&&(this._checkPatternValidity()||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.inputElement.value=this._previousValidInput));this.bindValue=this._previousValidInput=this.inputElement.value,this._patternAlreadyChecked=!1},_isPrintable:function(e){var t=8==e.keyCode||9==e.keyCode||13==e.keyCode||27==e.keyCode,n=19==e.keyCode||20==e.keyCode||45==e.keyCode||46==e.keyCode||144==e.keyCode||145==e.keyCode||e.keyCode>32&&e.keyCode<41||e.keyCode>111&&e.keyCode<124;return!(t||0==e.charCode&&n)},_onKeypress:function(e){if(this.allowedPattern||"number"===this.inputElement.type){var t=this._patternRegExp;if(t&&!(e.metaKey||e.ctrlKey||e.altKey)){this._patternAlreadyChecked=!0;var n=String.fromCharCode(e.charCode);this._isPrintable(e)&&!t.test(n)&&(e.preventDefault(),this._announceInvalidCharacter("Invalid character "+n+" not entered."))}}},_checkPatternValidity:function(){var e=this._patternRegExp;if(!e)return!0;for(var t=0;t<this.inputElement.value.length;t++)if(!e.test(this.inputElement.value[t]))return!1;return!0},validate:function(){if(!this.inputElement)return this.invalid=!1,!0;var e=this.inputElement.checkValidity();return e&&(this.required&&""===this.bindValue?e=!1:this.hasValidator()&&(e=I_.validate.call(this,this.bindValue))),this.invalid=!e,this.fire("iron-input-validate"),e},_announceInvalidCharacter:function(e){this.fire("iron-announce",{text:e})},_computeValue:function(e){return e}});
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const R_=za`
  <style include="shared-styles">
    #filter {
      max-width: 25em;
    }
    #filter:focus {
      outline: none;
    }
    #topContainer {
      align-items: center;
      display: flex;
      height: 3rem;
      justify-content: space-between;
      margin: 0 var(--spacing-l);
    }
    #createNewContainer:not(.show) {
      display: none;
    }
    a {
      color: var(--primary-text-color);
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    nav {
      align-items: center;
      display: flex;
      height: 3rem;
      justify-content: flex-end;
      margin-right: 20px;
    }
    nav,
    iron-icon {
      color: var(--deemphasized-text-color);
    }
    iron-icon {
      height: 1.85rem;
      margin-left: 16px;
      width: 1.85rem;
    }
  </style>
  <div id="topContainer">
    <div class="filterContainer">
      <label>Filter:</label>
      <iron-input type="text" bind-value="{{filter}}">
        <input
          is="iron-input"
          type="text"
          id="filter"
          bind-value="{{filter}}"
        />
      </iron-input>
    </div>
    <div id="createNewContainer" class$="[[_computeCreateClass(createNew)]]">
      <gr-button primary="" link="" id="createNew" on-click="_createNewItem">
        Create New
      </gr-button>
    </div>
  </div>
  <slot></slot>
  <nav>
    Page [[_computePage(offset, itemsPerPage)]]
    <a
      id="prevArrow"
      href$="[[_computeNavLink(offset, -1, itemsPerPage, filter, path)]]"
      hidden$="[[_hidePrevArrow(loading, offset)]]"
      hidden=""
    >
      <iron-icon icon="gr-icons:chevron-left"></iron-icon>
    </a>
    <a
      id="nextArrow"
      href$="[[_computeNavLink(offset, 1, itemsPerPage, filter, path)]]"
      hidden$="[[_hideNextArrow(loading, items)]]"
      hidden=""
    >
      <iron-icon icon="gr-icons:chevron-right"></iron-icon>
    </a>
  </nav>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,L_={encodeURL(e,t){let n=encodeURIComponent(encodeURIComponent(e));return n=n.replace(/%253A/g,":"),n=n.replace(/%2520/g,"+"),t&&(n=n.replace(/%252F/g,"/")),n},singleDecodeURL(e){const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)}};window.Gerrit=window.Gerrit||{},window.Gerrit.URLEncodingBehavior=L_;class D_ extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return R_}static get is(){return"gr-list-view"}static get properties(){return{createNew:Boolean,items:Array,itemsPerPage:Number,filter:{type:String,observer:"_filterChanged"},offset:Number,loading:Boolean,path:String}}detached(){super.detached(),this.cancelDebouncer("reload")}_filterChanged(e,t){(e||t)&&this._debounceReload(e)}_debounceReload(e){this.debounce("reload",()=>{if(e)return _p.show(`${this.path}/q/filter:`+this.encodeURL(e,!1));_p.show(this.path)},200)}_createNewItem(){this.dispatchEvent(new CustomEvent("create-clicked",{composed:!0,bubbles:!0}))}_computeNavLink(e,t,n,i,s){e=+(e||0);const a=Math.max(0,e+n*t);let o=this.getBaseUrl()+s;return i&&(o+="/q/filter:"+this.encodeURL(i,!1)),a>0&&(o+=","+a),o}_computeCreateClass(e){return e?"show":""}_hidePrevArrow(e,t){return e||0===t}_hideNextArrow(e,t){if(e||!t||!t.length)return!0;return t.length<this.itemsPerPage+1}_computePage(e,t){return e/t+1}}customElements.define(D_.is,D_);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const O_=document.createElement("template");O_.innerHTML='<dom-module id="gr-form-styles">\n  <template>\n    <style>\n      .gr-form-styles input {\n        background-color: var(--view-background-color);\n        color: var(--primary-text-color);\n      }\n      .gr-form-styles select {\n        background-color: var(--select-background-color);\n        color: var(--primary-text-color);\n      }\n      .gr-form-styles h1,\n      .gr-form-styles h2 {\n        margin-bottom: var(--spacing-s);\n      }\n      .gr-form-styles h4 {\n        font-weight: var(--font-weight-bold);\n      }\n      .gr-form-styles fieldset {\n        border: none;\n        margin-bottom: var(--spacing-xxl);\n      }\n      .gr-form-styles section {\n        display: flex;\n        margin: var(--spacing-s) 0;\n        min-height: 2em;\n      }\n      .gr-form-styles section * {\n        vertical-align: middle;\n      }\n      .gr-form-styles .title,\n      .gr-form-styles .value {\n        display: inline-block;\n      }\n      .gr-form-styles .title {\n        color: var(--deemphasized-text-color);\n        font-weight: var(--font-weight-bold);\n        padding-right: var(--spacing-m);\n        width: 15em;\n      }\n      .gr-form-styles th {\n        color: var(--deemphasized-text-color);\n        text-align: left;\n        vertical-align: bottom;\n      }\n      .gr-form-styles td,\n      .gr-form-styles tfoot th {\n        padding: var(--spacing-s) 0;\n        vertical-align: middle;\n      }\n      .gr-form-styles .emptyHeader {\n        text-align: right;\n      }\n      .gr-form-styles table {\n        width: 50em;\n      }\n      .gr-form-styles th:first-child,\n      .gr-form-styles td:first-child {\n        width: 15em;\n      }\n      .gr-form-styles th:first-child input,\n      .gr-form-styles td:first-child input {\n        width: 14em;\n      }\n      .gr-form-styles input:not([type="checkbox"]),\n      .gr-form-styles select,\n      .gr-form-styles textarea {\n        border: 1px solid var(--border-color);\n        border-radius: var(--border-radius);\n        padding: var(--spacing-s);\n      }\n      .gr-form-styles td:last-child {\n        width: 5em;\n      }\n      .gr-form-styles th:last-child gr-button,\n      .gr-form-styles td:last-child gr-button {\n        width: 100%;\n      }\n      .gr-form-styles iron-autogrow-textarea {\n        height: auto;\n        min-height: 4em;\n      }\n      .gr-form-styles gr-autocomplete {\n        width: 14em;\n      }\n      @media only screen and (max-width: 40em) {\n        .gr-form-styles section {\n          margin-bottom: var(--spacing-l);\n        }\n        .gr-form-styles .title,\n        .gr-form-styles .value {\n          display: block;\n        }\n        .gr-form-styles table {\n          width: 100%;\n        }\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(O_.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const N_=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    :host {
      display: inline-block;
    }
    input {
      width: 20em;
    }
  </style>
  <div class="gr-form-styles">
    <div id="form">
      <section>
        <span class="title">Group name</span>
        <iron-input bind-value="{{_name}}">
          <input is="iron-input" bind-value="{{_name}}" />
        </iron-input>
      </section>
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class M_ extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return N_}static get is(){return"gr-create-group-dialog"}static get properties(){return{params:Object,hasNewGroupName:{type:Boolean,notify:!0,value:!1},_name:Object,_groupCreated:{type:Boolean,value:!1}}}static get observers(){return["_updateGroupName(_name)"]}_computeGroupUrl(e){return this.getBaseUrl()+"/admin/groups/"+this.encodeURL(e,!0)}_updateGroupName(e){this.hasNewGroupName=!!e}handleCreateGroup(){return this.$.restAPI.createGroup({name:this._name}).then(e=>{if(201===e.status)return this._groupCreated=!0,this.$.restAPI.getGroupConfig(this._name).then(e=>{_p.show(this._computeGroupUrl(e.group_id))})})}}customElements.define(M_.is,M_);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $_=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <gr-list-view
    create-new="[[_createNewCapability]]"
    filter="[[_filter]]"
    items="[[_groups]]"
    items-per-page="[[_groupsPerPage]]"
    loading="[[_loading]]"
    offset="[[_offset]]"
    on-create-clicked="_handleCreateClicked"
    path="[[_path]]"
  >
    <table id="list" class="genericList">
      <tbody>
        <tr class="headerRow">
          <th class="name topHeader">Group Name</th>
          <th class="description topHeader">Group Description</th>
          <th class="visibleToAll topHeader">Visible To All</th>
        </tr>
        <tr id="loading" class$="loadingMsg [[computeLoadingClass(_loading)]]">
          <td>Loading...</td>
        </tr>
      </tbody>
      <tbody class$="[[computeLoadingClass(_loading)]]">
        <template is="dom-repeat" items="[[_shownGroups]]">
          <tr class="table">
            <td class="name">
              <a href$="[[_computeGroupUrl(item.id)]]">[[item.name]]</a>
            </td>
            <td class="description">[[item.description]]</td>
            <td class="visibleToAll">[[_visibleToAll(item)]]</td>
          </tr>
        </template>
      </tbody>
    </table>
  </gr-list-view>
  <gr-overlay id="createOverlay" with-backdrop="">
    <gr-dialog
      id="createDialog"
      class="confirmDialog"
      disabled="[[!_hasNewGroupName]]"
      confirm-label="Create"
      confirm-on-enter=""
      on-confirm="_handleCreateGroup"
      on-cancel="_handleCloseCreate"
    >
      <div class="header" slot="header">
        Create Group
      </div>
      <div class="main" slot="main">
        <gr-create-group-dialog
          has-new-group-name="{{_hasNewGroupName}}"
          params="[[params]]"
          id="createNewModal"
        ></gr-create-group-dialog>
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,B_=[{computeLoadingClass:e=>e?"loading":"",computeShownItems:e=>e.slice(0,25),getUrl(e,t){return this.getBaseUrl()+e+this.encodeURL(t,!0)},getFilterValue:e=>e&&e.filter||"",getOffsetValue:e=>e&&e.offset?e.offset:0},Go,L_];window.Gerrit=window.Gerrit||{},window.Gerrit.ListViewBehavior=B_;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class F_ extends(ra([B_],Zn(na(Ka)))){static get template(){return $_}static get is(){return"gr-admin-group-list"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},_offset:Number,_path:{type:String,readOnly:!0,value:"/admin/groups"},_hasNewGroupName:Boolean,_createNewCapability:{type:Boolean,value:!1},_groups:Array,_shownGroups:{type:Array,computed:"computeShownItems(_groups)"},_groupsPerPage:{type:Number,value:25},_loading:{type:Boolean,value:!0},_filter:String}}attached(){super.attached(),this._getCreateGroupCapability(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Groups"},composed:!0,bubbles:!0})),this._maybeOpenCreateOverlay(this.params)}_paramsChanged(e){return this._loading=!0,this._filter=this.getFilterValue(e),this._offset=this.getOffsetValue(e),this._getGroups(this._filter,this._groupsPerPage,this._offset)}_maybeOpenCreateOverlay(e){e&&e.openCreateModal&&this.$.createOverlay.open()}_computeGroupUrl(e){return um.getUrlForGroup(decodeURIComponent(e))}_getCreateGroupCapability(){return this.$.restAPI.getAccount().then(e=>{if(e)return this.$.restAPI.getAccountCapabilities(["createGroup"]).then(e=>{e.createGroup&&(this._createNewCapability=!0)})})}_getGroups(e,t,n){return this._groups=[],this.$.restAPI.getGroups(e,t,n).then(e=>{e&&(this._groups=Object.keys(e).map(t=>{const n=e[t];return n.name=t,n}),this._loading=!1)})}_refreshGroupsList(){return this.$.restAPI.invalidateGroupsCache(),this._getGroups(this._filter,this._groupsPerPage,this._offset)}_handleCreateGroup(){this.$.createNewModal.handleCreateGroup().then(()=>{this._refreshGroupsList()})}_handleCloseCreate(){this.$.createOverlay.close()}_handleCreateClicked(){this.$.createOverlay.open()}_visibleToAll(e){return!0===e.options.visible_to_all?"Y":"N"}}customElements.define(F_.is,F_),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        display: inline-block;
        position: relative;
        width: 400px;
        border: 1px solid;
        padding: 2px;
        -moz-appearance: textarea;
        -webkit-appearance: textarea;
        overflow: hidden;
      }

      .mirror-text {
        visibility: hidden;
        word-wrap: break-word;
        @apply --iron-autogrow-textarea;
      }

      .fit {
        @apply --layout-fit;
      }

      textarea {
        position: relative;
        outline: none;
        border: none;
        resize: none;
        background: inherit;
        color: inherit;
        /* see comments in template */
        width: 100%;
        height: 100%;
        font-size: inherit;
        font-family: inherit;
        line-height: inherit;
        text-align: inherit;
        @apply --iron-autogrow-textarea;
      }

      textarea::-webkit-input-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea:-moz-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea::-moz-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }

      textarea:-ms-input-placeholder {
        @apply --iron-autogrow-textarea-placeholder;
      }
    </style>

    <!-- the mirror sizes the input/textarea so it grows with typing -->
    <!-- use &#160; instead &nbsp; of to allow this element to be used in XHTML -->
    <div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div>

    <!-- size the input/textarea with a div, because the textarea has intrinsic size in ff -->
    <div class="textarea-container fit">
      <textarea id="textarea" name\$="[[name]]" aria-label\$="[[label]]" autocomplete\$="[[autocomplete]]" autofocus\$="[[autofocus]]" inputmode\$="[[inputmode]]" placeholder\$="[[placeholder]]" readonly\$="[[readonly]]" required\$="[[required]]" disabled\$="[[disabled]]" rows\$="[[rows]]" minlength\$="[[minlength]]" maxlength\$="[[maxlength]]"></textarea>
    </div>
`,is:"iron-autogrow-textarea",behaviors:[I_,Fp],properties:{value:{observer:"_valueChanged",type:String,notify:!0},bindValue:{observer:"_bindValueChanged",type:String,notify:!0},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number},label:{type:String}},listeners:{input:"_onInput"},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(e){this.$.textarea.selectionStart=e},set selectionEnd(e){this.$.textarea.selectionEnd=e},attached:function(){navigator.userAgent.match(/iP(?:[oa]d|hone)/)&&(this.$.textarea.style.marginLeft="-3px")},validate:function(){var e=this.$.textarea.validity.valid;return e&&(this.required&&""===this.value?e=!1:this.hasValidator()&&(e=I_.validate.call(this,this.value))),this.invalid=!e,this.fire("iron-input-validate"),e},_bindValueChanged:function(e){this.value=e},_valueChanged:function(e){var t=this.textarea;t&&(t.value!==e&&(t.value=e||0===e?e:""),this.bindValue=e,this.$.mirror.innerHTML=this._valueForMirror(),this.fire("bind-value-changed",{value:this.bindValue}))},_onInput:function(e){var t=Ui(e).path;this.value=t?t[0].value:e.target.value},_constrain:function(e){var t;for(e=e||[""],t=this.maxRows>0&&e.length>this.maxRows?e.slice(0,this.maxRows):e.slice(0);this.rows>0&&t.length<this.rows;)t.push("");return t.join("<br/>")+"&#160;"},_valueForMirror:function(){var e=this.textarea;if(e)return this.tokens=e&&e.value?e.value.replace(/&/gm,"&amp;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").split("\n"):[""],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)}});
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const U_=document.createElement("template");U_.innerHTML='<dom-module id="gr-subpage-styles">\n  <template>\n    <style>\n      main {\n        margin: var(--spacing-l);\n      }\n      .loading {\n        display: none;\n      }\n      #loading.loading {\n        display: block;\n      }\n      #loading:not(.loading) {\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(U_.content);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const H_={attached:function(){this.fire("addon-attached")},update:function(e){}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/ma({_template:za`
    <style>
      :host {
        display: inline-block;
        float: right;

        @apply --paper-font-caption;
        @apply --paper-input-char-counter;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:dir(rtl)) {
        float: left;
      }
    </style>

    <span>[[_charCounterStr]]</span>
`,is:"paper-input-char-counter",behaviors:[H_],properties:{_charCounterStr:{type:String,value:"0"}},update:function(e){if(e.inputElement){e.value=e.value||"";var t=e.value.toString().length.toString();e.inputElement.hasAttribute("maxlength")&&(t+="/"+e.inputElement.getAttribute("maxlength")),this._charCounterStr=t}}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const j_=za`
<custom-style>
  <style is="custom-style">
    html {
      --paper-input-container-shared-input-style: {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        margin: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        -webkit-appearance: none;
        text-align: inherit;
        vertical-align: var(--paper-input-container-input-align, bottom);

        @apply --paper-font-subhead;
      };
    }
  </style>
</custom-style>
`;j_.setAttribute("style","display: none;"),document.head.appendChild(j_.content),ma({_template:za`
    <style>
      :host {
        display: block;
        padding: 8px 0;
        @apply --paper-input-container;
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply --paper-input-container-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      [hidden] {
        display: none !important;
      }

      .floated-label-placeholder {
        @apply --paper-font-caption;
      }

      .underline {
        height: 2px;
        position: relative;
      }

      .focused-line {
        @apply --layout-fit;
        border-bottom: 2px solid var(--paper-input-container-focus-color, var(--primary-color));

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);

        @apply --paper-input-container-underline-focus;
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .underline.is-invalid .focused-line {
        border-color: var(--paper-input-container-invalid-color, var(--error-color));
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .unfocused-line {
        @apply --layout-fit;
        border-bottom: 1px solid var(--paper-input-container-color, var(--secondary-text-color));
        @apply --paper-input-container-underline;
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-input-container-color, var(--secondary-text-color));
        @apply --paper-input-container-underline-disabled;
      }

      .input-wrapper {
        @apply --layout-horizontal;
        @apply --layout-center;
        position: relative;
      }

      .input-content {
        @apply --layout-flex-auto;
        @apply --layout-relative;
        max-width: 100%;
      }

      .input-content ::slotted(label),
      .input-content ::slotted(.paper-input-label) {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, var(--secondary-text-color));
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply --paper-font-common-nowrap;
        @apply --paper-font-subhead;
        @apply --paper-input-container-label;
        @apply --paper-transition-easing;
      }


      .input-content ::slotted(label):before,
      .input-content ::slotted(.paper-input-label):before {
        @apply --paper-input-container-label-before;
      }

      .input-content ::slotted(label):after,
      .input-content ::slotted(.paper-input-label):after {
        @apply --paper-input-container-label-after;
      }

      .input-content.label-is-floating ::slotted(label),
      .input-content.label-is-floating ::slotted(.paper-input-label) {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply --paper-input-container-label-floating;
      }

      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(label),
      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label) {
        right: 0;
        left: auto;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted ::slotted(label),
      .input-content.label-is-highlighted ::slotted(.paper-input-label) {
        color: var(--paper-input-container-focus-color, var(--primary-color));

        @apply --paper-input-container-label-focus;
      }

      .input-content.is-invalid ::slotted(label),
      .input-content.is-invalid ::slotted(.paper-input-label) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .input-content.label-is-hidden ::slotted(label),
      .input-content.label-is-hidden ::slotted(.paper-input-label) {
        visibility: hidden;
      }

      .input-content ::slotted(input),
      .input-content ::slotted(iron-input),
      .input-content ::slotted(textarea),
      .input-content ::slotted(iron-autogrow-textarea),
      .input-content ::slotted(.paper-input-input) {
        @apply --paper-input-container-shared-input-style;
        /* The apply shim doesn't apply the nested color custom property,
          so we have to re-apply it here. */
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        @apply --paper-input-container-input;
      }

      .input-content ::slotted(input)::-webkit-outer-spin-button,
      .input-content ::slotted(input)::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      .input-content.focused ::slotted(input),
      .input-content.focused ::slotted(iron-input),
      .input-content.focused ::slotted(textarea),
      .input-content.focused ::slotted(iron-autogrow-textarea),
      .input-content.focused ::slotted(.paper-input-input) {
        @apply --paper-input-container-input-focus;
      }

      .input-content.is-invalid ::slotted(input),
      .input-content.is-invalid ::slotted(iron-input),
      .input-content.is-invalid ::slotted(textarea),
      .input-content.is-invalid ::slotted(iron-autogrow-textarea),
      .input-content.is-invalid ::slotted(.paper-input-input) {
        @apply --paper-input-container-input-invalid;
      }

      .prefix ::slotted(*) {
        display: inline-block;
        @apply --paper-font-subhead;
        @apply --layout-flex-none;
        @apply --paper-input-prefix;
      }

      .suffix ::slotted(*) {
        display: inline-block;
        @apply --paper-font-subhead;
        @apply --layout-flex-none;

        @apply --paper-input-suffix;
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::slotted(input) {
        min-width: 0;
      }

      .input-content ::slotted(textarea) {
        resize: none;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::slotted(*) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .add-on-content.is-highlighted ::slotted(*) {
        color: var(--paper-input-container-focus-color, var(--primary-color));
      }
    </style>

    <div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]">&nbsp;</div>

    <div class="input-wrapper">
      <span class="prefix"><slot name="prefix"></slot></span>

      <div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer">
        <slot name="label"></slot>
        <slot name="input"></slot>
      </div>

      <span class="suffix"><slot name="suffix"></slot></span>
    </div>

    <div class$="[[_computeUnderlineClass(focused,invalid)]]">
      <div class="unfocused-line"></div>
      <div class="focused-line"></div>
    </div>

    <div class$="[[_computeAddOnContentClass(focused,invalid)]]">
      <slot name="add-on"></slot>
    </div>
`,is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,iron-input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Le(this.attrForValue)},get _inputElement(){return Ui(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this.__isFirstValueUpdate=!0,this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput),this._inputElementValue&&""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(e){this._addons||(this._addons=[]);var t=e.target;-1===this._addons.indexOf(t)&&(this._addons.push(t),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(e){this._handleValueAndAutoValidate(e.target)},_onValueChanged:function(e){var t=e.target;this.__isFirstValueUpdate&&(this.__isFirstValueUpdate=!1,void 0===t.value||""===t.value)||this._handleValueAndAutoValidate(e.target)},_handleValue:function(e){var t=this._inputElementValue;t||0===t||"number"===e.type&&!e.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:e,value:t,invalid:this.invalid})},_handleValueAndAutoValidate:function(e){var t;this.autoValidate&&e&&(t=e.validate?e.validate(this._inputElementValue):e.checkValidity(),this.invalid=!t);this._handleValue(e)},_onIronInputValidate:function(e){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(e){for(var t,n=0;t=this._addons[n];n++)t.update(e)},_computeInputContentClass:function(e,t,n,i,s){var a="input-content";if(e)s&&(a+=" label-is-hidden"),i&&(a+=" is-invalid");else{var o=this.querySelector("label");t||s?(a+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",i?a+=" is-invalid":n&&(a+=" label-is-highlighted")):(o&&(this.$.labelAndInputContainer.style.position="relative"),i&&(a+=" is-invalid"))}return n&&(a+=" focused"),a},_computeUnderlineClass:function(e,t){var n="underline";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n},_computeAddOnContentClass:function(e,t){var n="add-on-content";return t?n+=" is-invalid":e&&(n+=" is-highlighted"),n}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, var(--error-color));

        @apply --paper-font-caption;
        @apply --paper-input-error;
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      }

      #a11yWrapper {
        visibility: hidden;
      }

      :host([invalid]) #a11yWrapper {
        visibility: visible;
      }
    </style>

    <!--
    If the paper-input-error element is directly referenced by an
    \`aria-describedby\` attribute, such as when used as a paper-input add-on,
    then applying \`visibility: hidden;\` to the paper-input-error element itself
    does not hide the error.

    For more information, see:
    https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_description
    -->
    <div id="a11yWrapper">
      <slot></slot>
    </div>
`,is:"paper-input-error",behaviors:[H_],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(e){this._setInvalid(e.invalid)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const G_={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1}},attached:function(){},detached:function(){}},V_={NextLabelID:1,NextAddonID:1,NextInputID:1},z_={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$||(this.$={}),this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId)),this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy(),!Ka&&this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(e,t){return e=e?e+" "+t:t},_onAddonAttached:function(e){var t=Ui(e).rootTarget;if(t.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,t.id);else{var n="paper-input-add-on-"+V_.NextAddonID++;t.id=n,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,n)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(e){Fp._focusBlurHandler.call(this,e),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(e){var t=this.getAttribute("tabindex");this._shiftTabPressed=!0,this.setAttribute("tabindex","-1"),this.async((function(){this.setAttribute("tabindex",t),this._shiftTabPressed=!1}),1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(e){try{var t=this.inputElement.selectionStart;this.value=e,this.inputElement.selectionStart=t,this.inputElement.selectionEnd=t}catch(t){this.value=e}},_computeAlwaysFloatLabel:function(e,t){return t||e},_updateAriaLabelledBy:function(){var e,t=Ui(this.root).querySelector("label");t?(t.id?e=t.id:(e="paper-input-label-"+V_.NextLabelID++,t.id=e),this._ariaLabelledBy=e):this._ariaLabelledBy=""},_generateInputId:function(){this._inputId&&""!==this._inputId||(this._inputId="input-"+V_.NextInputID++)},_onChange:function(e){this.shadowRoot&&this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var e=document.activeElement;e instanceof HTMLElement&&e!==document.body&&e!==document.documentElement||this._focusableElement.focus()}}};
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({is:"paper-input",_template:za`
    <style>
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input {
        /* Firefox sets a min-width on the input, which can cause layout issues */
        min-width: 0;
      }

      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.
      In 2.x the <iron-input> is distributed to paper-input-container, which styles
      it, but in order for this to work correctly, we need to reset some
      of the native input's properties to inherit (from the iron-input) */
      iron-input > input {
        @apply --paper-input-container-shared-input-style;
        font-family: inherit;
        font-weight: inherit;
        font-size: inherit;
        letter-spacing: inherit;
        word-spacing: inherit;
        line-height: inherit;
        text-shadow: inherit;
        color: inherit;
        cursor: inherit;
      }

      input:disabled {
        @apply --paper-input-container-input-disabled;
      }

      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      input::-webkit-clear-button {
        @apply --paper-input-container-input-webkit-clear;
      }

      input::-webkit-calendar-picker-indicator {
        @apply --paper-input-container-input-webkit-calendar-picker-indicator;
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-ms-clear {
        @apply --paper-input-container-ms-clear;
      }

      input::-ms-reveal {
        @apply --paper-input-container-ms-reveal;
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <slot name="prefix" slot="prefix"></slot>

      <label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label>

      <!-- Need to bind maxlength so that the paper-input-char-counter works correctly -->
      <iron-input bind-value="{{value}}" slot="input" class="input-element" id$="[[_inputId]]" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]">
        <input aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]" role$="[[inputRole]]" aria-haspopup$="[[inputAriaHaspopup]]">
      </iron-input>

      <slot name="suffix" slot="suffix"></slot>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter slot="add-on"></paper-input-char-counter>
      </template>

    </paper-input-container>
  `,behaviors:[[Fp,Sr,z_],G_],properties:{value:{type:String},inputRole:{type:String,value:void 0},inputAriaHaspopup:{type:String,value:void 0}},get _focusableElement(){return this.inputElement._inputElement},listeners:{"iron-input-ready":"_onIronInputReady"},_onIronInputReady:function(){this.$.nativeInput||(this.$.nativeInput=this.$$("input")),this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.$.nativeInput.type)&&(this.alwaysFloatLabel=!0),this.inputElement.bindValue&&this.$.container._handleValueAndAutoValidate(this.inputElement)}});
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const W_=za``
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,q_="never",K_="keep-visible";class Y_ extends(Zn(na(Ka))){static get template(){return W_}static get is(){return"gr-cursor-manager"}static get properties(){return{stops:{type:Array,value:()=>[],observer:"_updateIndex"},target:{type:Object,notify:!0,observer:"_scrollToTarget"},_targetHeight:Number,index:{type:Number,value:-1,notify:!0},cursorTargetClass:{type:String,value:null},scrollBehavior:{type:String,value:q_},focusOnMove:{type:Boolean,value:!1},scrollTopMargin:{type:Number,value:0}}}detached(){super.detached(),this.unsetCursor()}next(e,t,n){this._moveCursor(1,e,t,n)}previous(e){this._moveCursor(-1,e)}moveToVisibleArea(e){if(!this.stops||!this._isIntersectionObserverSupported())return;const t=e?this.stops.filter(e):this.stops,n=this._getWindowDims(),i=Math.round((n.innerHeight+this.scrollTopMargin)/2);let s=null,a=null,o=t.length;const r=new IntersectionObserver(e=>{e.forEach(e=>{if(r.unobserve(e.target),!(e.isIntersecting||e.intersectionRatio>0))return;const t=e.boundingClientRect.top+Math.round(e.boundingClientRect.height/2),n=Math.abs(t-i);(null===a||n<a)&&(s=e.target,a=n)}),o-=e.length,0==o&&s&&this.setCursor(s,!0)});t.forEach(e=>{r.observe(e)})}_isIntersectionObserverSupported(){return"IntersectionObserver"in window}setCursor(e,t){let n;t&&(n=this.scrollBehavior,this.scrollBehavior=q_),this.unsetCursor(),this.target=e,this._updateIndex(),this._decorateTarget(),t&&(this.scrollBehavior=n)}unsetCursor(){this._unDecorateTarget(),this.index=-1,this.target=null,this._targetHeight=null}isAtStart(){return 0===this.index}isAtEnd(){return this.index===this.stops.length-1}moveToStart(){this.stops.length&&this.setCursor(this.stops[0])}moveToEnd(){this.stops.length&&this.setCursor(this.stops[this.stops.length-1])}setCursorAtIndex(e,t){this.setCursor(this.stops[e],t)}_moveCursor(e,t,n,i){if(!this.stops.length)return void this.unsetCursor();this._unDecorateTarget();const s=this._getNextindex(e,t,i);let a=null;-1!==s&&(a=this.stops[s]),this.index=s,this.target=a,this.target&&(this._targetHeight=n?n(a):a.scrollHeight,this.focusOnMove&&this.target.focus(),this._decorateTarget())}_decorateTarget(){this.target&&this.cursorTargetClass&&this.target.classList.add(this.cursorTargetClass)}_unDecorateTarget(){this.target&&this.cursorTargetClass&&this.target.classList.remove(this.cursorTargetClass)}_getNextindex(e,t,n){if(!this.stops.length)return-1;let i=this.index;-1===this.index&&e<0&&(i=this.stops.length);do{i+=e}while((e>0||i>0)&&(e<0||i<this.stops.length-1)&&t&&!t(this.stops[i]));return i=Math.max(0,Math.min(this.stops.length-1,i)),t&&!t(this.stops[i])?e<0||n?0:e>0?this.stops.length-1:this.index:i}_updateIndex(){if(!this.target)return void(this.index=-1);const e=Array.prototype.indexOf.call(this.stops,this.target);-1===e?this.unsetCursor():this.index=e}_getTop(e){let t=e.offsetTop;for(let n=e.offsetParent;n;n=n.offsetParent)t+=n.offsetTop;return t}_targetIsVisible(e){const t=this._getWindowDims();return this.scrollBehavior===K_&&e>t.pageYOffset+this.scrollTopMargin&&e<t.pageYOffset+t.innerHeight}_calculateScrollToValue(e,t){const n=this._getWindowDims();return e+this.scrollTopMargin-n.innerHeight/3+t.offsetHeight/2}_scrollToTarget(){if(!this.target||this.scrollBehavior===q_)return;const e=this._getWindowDims(),t=this._getTop(this.target),n=!this._targetHeight||this._targetIsVisible(t+this._targetHeight),i=this._calculateScrollToValue(t,this.target);this._targetIsVisible(t)&&(n||i<e.scrollY)||window.scrollTo(e.scrollX,i)}_getWindowDims(){return{scrollX:window.scrollX,scrollY:window.scrollY,innerHeight:window.innerHeight,pageYOffset:window.pageYOffset}}}customElements.define(Y_.is,Y_);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const X_=za`
  <style include="shared-styles">
    :host {
      z-index: 100;
    }
    :host([is-hidden]) {
      display: none;
    }
    ul {
      list-style: none;
    }
    li {
      border-bottom: 1px solid var(--border-color);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-m) var(--spacing-l);
    }
    li:last-of-type {
      border: none;
    }
    li:focus {
      outline: none;
    }
    li:hover {
      background-color: var(--hover-background-color);
    }
    li.selected {
      background-color: var(--selection-background-color);
    }
    .dropdown-content {
      background: var(--dropdown-background-color);
      box-shadow: var(--elevation-level-2);
      border-radius: var(--border-radius);
      max-height: 50vh;
      overflow: auto;
    }
    @media only screen and (max-height: 35em) {
      .dropdown-content {
        max-height: 80vh;
      }
    }
    .label {
      color: var(--deemphasized-text-color);
      padding-left: var(--spacing-l);
    }
    .hide {
      display: none;
    }
  </style>
  <div
    class="dropdown-content"
    slot="dropdown-content"
    id="suggestions"
    role="listbox"
  >
    <ul>
      <template is="dom-repeat" items="[[suggestions]]">
        <li
          data-index$="[[index]]"
          data-value$="[[item.dataValue]]"
          tabindex="-1"
          aria-label$="[[item.name]]"
          class="autocompleteOption"
          role="option"
          on-click="_handleClickItem"
        >
          <span>[[item.text]]</span>
          <span class$="label [[_computeLabelClass(item)]]"
            >[[item.label]]</span
          >
        </li>
      </template>
    </ul>
  </div>
  <gr-cursor-manager
    id="cursor"
    index="{{index}}"
    cursor-target-class="selected"
    scroll-behavior="never"
    focus-on-move=""
    stops="[[_suggestionEls]]"
  ></gr-cursor-manager>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class J_ extends(ra([Wu,or],Zn(na(Ka)))){static get template(){return X_}static get is(){return"gr-autocomplete-dropdown"}static get properties(){return{index:Number,isHidden:{type:Boolean,value:!0,reflectToAttribute:!0},verticalOffset:{type:Number,value:null},horizontalOffset:{type:Number,value:null},suggestions:{type:Array,value:()=>[],observer:"_resetCursorStops"},_suggestionEls:Array}}get keyBindings(){return{up:"_handleUp",down:"_handleDown",enter:"_handleEnter",esc:"_handleEscape",tab:"_handleTab"}}close(){this.isHidden=!0}open(){this.isHidden=!1,this._resetCursorStops(),this.refit()}getCurrentText(){return this.getCursorTarget().dataset.value}_handleUp(e){this.isHidden||(e.preventDefault(),e.stopPropagation(),this.cursorUp())}_handleDown(e){this.isHidden||(e.preventDefault(),e.stopPropagation(),this.cursorDown())}cursorDown(){this.isHidden||this.$.cursor.next()}cursorUp(){this.isHidden||this.$.cursor.previous()}_handleTab(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("item-selected",{detail:{trigger:"tab",selected:this.$.cursor.target},composed:!0,bubbles:!0}))}_handleEnter(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("item-selected",{detail:{trigger:"enter",selected:this.$.cursor.target},composed:!0,bubbles:!0}))}_handleEscape(){this._fireClose(),this.close()}_handleClickItem(e){e.preventDefault(),e.stopPropagation();let t=e.target;for(;!t.classList.contains("autocompleteOption");){if(!t||t===this)return;t=t.parentElement}this.dispatchEvent(new CustomEvent("item-selected",{detail:{trigger:"click",selected:t},composed:!0,bubbles:!0}))}_fireClose(){this.dispatchEvent(new CustomEvent("dropdown-closed",{composed:!0,bubbles:!0}))}getCursorTarget(){return this.$.cursor.target}_resetCursorStops(){this.suggestions.length>0?this.isHidden||(Ii(),this._suggestionEls=Array.from(this.$.suggestions.querySelectorAll("li")),this._resetCursorIndex()):this._suggestionEls=[]}_resetCursorIndex(){this.$.cursor.setCursorAtIndex(0)}_computeLabelClass(e){return e.label?"":"hide"}}customElements.define(J_.is,J_);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Z_=za`
  <style include="shared-styles">
    .searchIcon {
      display: none;
    }
    .searchIcon.showSearchIcon {
      display: inline-block;
    }
    iron-icon {
      margin: 0 var(--spacing-xs);
      vertical-align: top;
    }
    paper-input.borderless {
      border: none;
      padding: 0;
    }
    paper-input {
      background-color: var(--view-background-color);
      color: var(--primary-text-color);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: var(--spacing-s);
      --paper-input-container: {
        padding: 0;
      }
      --paper-input-container-input: {
        font-size: var(--font-size-normal);
        line-height: var(--line-height-normal);
      }
      /* This is a hack for not being able to set height:0 on the underline
           of a paper-input 2.2.3 element. All the underline fixes below only
           actually work in 3.x.x, so the height must be adjusted directly as
           a workaround until we are on Polymer 3. */
      height: var(--line-height-normal);
      --paper-input-container-underline-height: 0;
      --paper-input-container-underline-wrapper-height: 0;
      --paper-input-container-underline-focus-height: 0;
      --paper-input-container-underline-legacy-height: 0;
      --paper-input-container-underline: {
        height: 0;
        display: none;
      }
      --paper-input-container-underline-focus: {
        height: 0;
        display: none;
      }
      --paper-input-container-underline-disabled: {
        height: 0;
        display: none;
      }
    }
    paper-input.warnUncommitted {
      --paper-input-container-input: {
        color: var(--error-text-color);
        font-size: inherit;
      }
    }
  </style>
  <paper-input
    no-label-float=""
    id="input"
    class$="[[_computeClass(borderless)]]"
    disabled$="[[disabled]]"
    value="{{text}}"
    placeholder="[[placeholder]]"
    on-keydown="_handleKeydown"
    on-focus="_onInputFocus"
    on-blur="_onInputBlur"
    autocomplete="off"
  >
    <!-- prefix as attribute is required to for polymer 1 -->
    <div slot="prefix" prefix="">
      <iron-icon
        icon="gr-icons:search"
        class$="searchIcon [[_computeShowSearchIconClass(showSearchIcon)]]"
      >
      </iron-icon>
    </div>
  </paper-input>
  <gr-autocomplete-dropdown
    vertical-align="top"
    vertical-offset="[[verticalOffset]]"
    horizontal-align="left"
    id="suggestions"
    on-item-selected="_handleItemSelect"
    on-keydown="_handleKeydown"
    suggestions="[[_suggestions]]"
    role="listbox"
    index="[[_index]]"
    position-target="[[_inputElement]]"
  >
  </gr-autocomplete-dropdown>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Q_=/(?:[^\s"]+|"[^"]*")+/g;class ef extends(ra([Wu],Zn(na(Ka)))){static get template(){return Z_}static get is(){return"gr-autocomplete"}static get properties(){return{query:{type:Function,value:()=>function(){return Promise.resolve([])}},threshold:{type:Number,value:1},allowNonSuggestedValues:Boolean,borderless:Boolean,disabled:Boolean,showSearchIcon:{type:Boolean,value:!1},verticalOffset:{type:Number,value:31},text:{type:String,value:"",notify:!0},placeholder:String,clearOnCommit:{type:Boolean,value:!1},tabComplete:{type:Boolean,value:!1},value:{type:String,notify:!0},multi:{type:Boolean,value:!1},warnUncommitted:{type:Boolean,value:!1},noDebounce:{type:Boolean,value:!1},_suggestions:{type:Array,value:()=>[]},_suggestionEls:{type:Array,value:()=>[]},_index:Number,_disableSuggestions:{type:Boolean,value:!1},_focused:{type:Boolean,value:!1},_selected:Object}}static get observers(){return["_maybeOpenDropdown(_suggestions, _focused)","_updateSuggestions(text, threshold, noDebounce)"]}get _nativeInput(){return this.$.input.$.nativeInput||this.$.input.inputElement}attached(){super.attached(),this.listen(document.body,"click","_handleBodyClick")}detached(){super.detached(),this.unlisten(document.body,"click","_handleBodyClick"),this.cancelDebouncer("update-suggestions")}get focusStart(){return this.$.input}focus(){this._nativeInput.focus()}selectAll(){const e=this._nativeInput;this.$.input.value&&e.setSelectionRange(0,this.$.input.value.length)}clear(){this.text=""}_handleItemSelect(e){"click"===e.detail.trigger&&(this._selected=e.detail.selected,this._commit())}get _inputElement(){return this.$&&this.$.input}setText(e){this._disableSuggestions=!0,this.text=e,this._disableSuggestions=!1}_onInputFocus(){this._focused=!0,this._updateSuggestions(this.text,this.threshold,this.noDebounce),this.$.input.classList.remove("warnUncommitted"),this.updateStyles()}_onInputBlur(){this.$.input.classList.toggle("warnUncommitted",this.warnUncommitted&&this.text.length&&!this._focused),this.updateStyles()}_updateSuggestions(e,t,n){if([e,t,n].some(e=>void 0===e))return;if(this._suggestions=[],this._disableSuggestions)return;if(e.length<t)return void(this.value="");if(!this._focused)return;const i=()=>{this.query(e).then(t=>{if(e===this.text){for(const e of t)e.text=e.name;this._suggestions=t,Ii(),-1===this._index&&(this.value="")}})};n?i():this.debounce("update-suggestions",i,200)}_maybeOpenDropdown(e,t){return e.length>0&&t?this.$.suggestions.open():this.$.suggestions.close()}_computeClass(e){return e?"borderless":""}_handleKeydown(e){switch(this._focused=!0,e.keyCode){case 38:e.preventDefault(),this.$.suggestions.cursorUp();break;case 40:e.preventDefault(),this.$.suggestions.cursorDown();break;case 27:e.preventDefault(),this._cancel();break;case 9:this._suggestions.length>0&&this.tabComplete?(e.preventDefault(),this._handleInputCommit(!0),this.focus()):this._focused=!1;break;case 13:if(this.modifierPressed(e))break;e.preventDefault(),this._handleInputCommit();break;default:this.focus(),this._suggestions=[]}this.dispatchEvent(new CustomEvent("input-keydown",{detail:{keyCode:e.keyCode,input:this.$.input},composed:!0,bubbles:!0}))}_cancel(){this._suggestions.length?this.set("_suggestions",[]):this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!0}))}_handleInputCommit(e){!this.allowNonSuggestedValues&&this.$.suggestions.isHidden||(this._selected=this.$.suggestions.getCursorTarget(),this._commit(e))}_updateValue(e,t){if(!e)return;const n=t[e.dataset.index].value;if(this.multi){const e=this.text.match(Q_);e[e.length-1]=n,this.value=e.join(" ")}else this.value=n}_handleBodyClick(e){const t=Ui(e).path;for(let e=0;e<t.length;e++)if(t[e]===this)return;this._focused=!1}_handleSuggestionTap(e){e.stopPropagation(),this.$.cursor.setCursor(e.target),this._commit()}_commit(e){this._suggestions.length>0?this._updateValue(this._selected,this._suggestions):this.value=this.text||"";const t=this.value;this.multi?this.setText(this.value):!this.clearOnCommit&&this._selected?this.setText(this._suggestions[this._selected.dataset.index].name):this.clear(),this._suggestions=[],e||this.dispatchEvent(new CustomEvent("commit",{detail:{value:t},composed:!0,bubbles:!0})),this._textChangedSinceCommit=!1}_computeShowSearchIconClass(e){return e?"showSearchIcon":""}}customElements.define(ef.is,ef);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tf=za`
  <style include="shared-styles">
    .text {
      align-items: center;
      display: flex;
      flex-wrap: wrap;
    }
    .copyText {
      flex-grow: 1;
      margin-right: var(--spacing-s);
    }
    .hideInput {
      display: none;
    }
    input#input {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      @apply --text-container-style;
      width: 100%;
    }
    /*
       * Typically icons are 20px, which is the normal line-height.
       * The copy icon is too prominent at 20px, so we choose 16px
       * here, but add 2x2px padding below, so the entire
       * component should still fit nicely into a normal inline
       * layout flow.
       */
    #icon {
      height: 16px;
      width: 16px;
    }
    gr-button {
      --gr-button: {
        padding: 2px;
      }
    }
  </style>
  <div class="text">
    <iron-input
      class="copyText"
      type="text"
      bind-value="[[text]]"
      on-tap="_handleInputClick"
      readonly=""
    >
      <input
        id="input"
        is="iron-input"
        class$="[[_computeInputClass(hideInput)]]"
        type="text"
        bind-value="[[text]]"
        on-click="_handleInputClick"
        readonly=""
      />
    </iron-input>
    <gr-button
      id="button"
      link=""
      has-tooltip="[[hasTooltip]]"
      class="copyToClipboard"
      title="[[buttonTitle]]"
      on-click="_copyToClipboard"
    >
      <iron-icon id="icon" icon="gr-icons:content-copy"></iron-icon>
    </gr-button>
  </div>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class nf extends(Zn(na(Ka))){static get template(){return tf}static get is(){return"gr-copy-clipboard"}static get properties(){return{text:String,buttonTitle:String,hasTooltip:{type:Boolean,value:!1},hideInput:{type:Boolean,value:!1}}}focusOnCopy(){this.$.button.focus()}_computeInputClass(e){return e?"hideInput":""}_handleInputClick(e){e.preventDefault(),Ui(e).rootTarget.select()}_copyToClipboard(e){e.preventDefault(),e.stopPropagation(),this.hideInput&&(this.$.input.style.display="block"),this.$.input.focus(),this.$.input.select(),document.execCommand("copy"),this.hideInput&&(this.$.input.style.display="none"),this.$.icon.icon="gr-icons:check",this.async(()=>this.$.icon.icon="gr-icons:content-copy",1e3)}}customElements.define(nf.is,nf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sf=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-subpage-styles">
    h3.edited:after {
      color: var(--deemphasized-text-color);
      content: ' *';
    }
    .inputUpdateBtn {
      margin-top: var(--spacing-s);
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <main class="gr-form-styles read-only">
    <div id="loading" class$="[[_computeLoadingClass(_loading)]]">
      Loading...
    </div>
    <div id="loadedContent" class$="[[_computeLoadingClass(_loading)]]">
      <h1 id="Title">[[_groupName]]</h1>
      <h2 id="configurations">General</h2>
      <div id="form">
        <fieldset>
          <h3 id="groupUUID">Group UUID</h3>
          <fieldset>
            <gr-copy-clipboard
              id="uuid"
              text="[[_getGroupUUID(_groupConfig.id)]]"
            ></gr-copy-clipboard>
          </fieldset>
          <h3 id="groupName" class$="[[_computeHeaderClass(_rename)]]">
            Group Name
          </h3>
          <fieldset>
            <span class="value">
              <gr-autocomplete
                id="groupNameInput"
                text="{{_groupConfig.name}}"
                disabled="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
              ></gr-autocomplete>
            </span>
            <span
              class="value"
              disabled$="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
            >
              <gr-button
                id="inputUpdateNameBtn"
                on-click="_handleSaveName"
                disabled="[[!_rename]]"
              >
                Rename Group</gr-button
              >
            </span>
          </fieldset>
          <h3 id="groupOwner" class$="[[_computeHeaderClass(_owner)]]">
            Owners
          </h3>
          <fieldset>
            <span class="value">
              <gr-autocomplete
                id="groupOwnerInput"
                text="{{_groupConfig.owner}}"
                value="{{_groupConfigOwner}}"
                query="[[_query]]"
                disabled="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
              >
              </gr-autocomplete>
            </span>
            <span
              class="value"
              disabled$="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
            >
              <gr-button
                id="inputUpdateOwnerBtn"
                on-click="_handleSaveOwner"
                disabled="[[!_owner]]"
              >
                Change Owners</gr-button
              >
            </span>
          </fieldset>
          <h3 class$="[[_computeHeaderClass(_description)]]">
            Description
          </h3>
          <fieldset>
            <div>
              <iron-autogrow-textarea
                class="description"
                autocomplete="on"
                bind-value="{{_groupConfig.description}}"
                disabled="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
              ></iron-autogrow-textarea>
            </div>
            <span
              class="value"
              disabled$="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
            >
              <gr-button
                on-click="_handleSaveDescription"
                disabled="[[!_description]]"
              >
                Save Description
              </gr-button>
            </span>
          </fieldset>
          <h3 id="options" class$="[[_computeHeaderClass(_options)]]">
            Group Options
          </h3>
          <fieldset id="visableToAll">
            <section>
              <span class="title">
                Make group visible to all registered users
              </span>
              <span class="value">
                <gr-select
                  id="visibleToAll"
                  bind-value="{{_groupConfig.options.visible_to_all}}"
                >
                  <select
                    disabled$="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
                  >
                    <template is="dom-repeat" items="[[_submitTypes]]">
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <span
              class="value"
              disabled$="[[_computeGroupDisabled(_groupOwner, _isAdmin, _groupIsInternal)]]"
            >
              <gr-button on-click="_handleSaveOptions" disabled="[[!_options]]">
                Save Group Options
              </gr-button>
            </span>
          </fieldset>
        </fieldset>
      </div>
    </div>
  </main>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,af=/^[\da-f]{40}$/,of={submitFalse:{value:!1,label:"False"},submitTrue:{value:!0,label:"True"}};class rf extends(Zn(na(Ka))){static get template(){return sf}static get is(){return"gr-group"}static get properties(){return{groupId:Number,_rename:{type:Boolean,value:!1},_groupIsInternal:Boolean,_description:{type:Boolean,value:!1},_owner:{type:Boolean,value:!1},_options:{type:Boolean,value:!1},_loading:{type:Boolean,value:!0},_groupConfig:Object,_groupConfigOwner:String,_groupName:Object,_groupOwner:{type:Boolean,value:!1},_submitTypes:{type:Array,value:()=>Object.values(of)},_query:{type:Function,value(){return this._getGroupSuggestions.bind(this)}},_isAdmin:{type:Boolean,value:!1}}}static get observers(){return["_handleConfigName(_groupConfig.name)","_handleConfigOwner(_groupConfig.owner, _groupConfigOwner)","_handleConfigDescription(_groupConfig.description)","_handleConfigOptions(_groupConfig.options.visible_to_all)"]}attached(){super.attached(),this._loadGroup()}_loadGroup(){if(!this.groupId)return;const e=[];return this.$.restAPI.getGroupConfig(this.groupId,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(t=>t&&t.name?(this._groupName=t.name,this._groupIsInternal=!!t.id.match(af),e.push(this.$.restAPI.getIsAdmin().then(e=>{this._isAdmin=!!e})),e.push(this.$.restAPI.getIsGroupOwner(t.name).then(e=>{this._groupOwner=!!e})),t.options.visible_to_all||(t.options.visible_to_all=!1),this._groupConfig=t,this.dispatchEvent(new CustomEvent("title-change",{detail:{title:t.name},composed:!0,bubbles:!0})),Promise.all(e).then(()=>{this._loading=!1})):Promise.resolve())}_computeLoadingClass(e){return e?"loading":""}_isLoading(){return this._loading||void 0===this._loading}_handleSaveName(){return this.$.restAPI.saveGroupName(this.groupId,this._groupConfig.name).then(e=>{200===e.status&&(this._groupName=this._groupConfig.name,this.dispatchEvent(new CustomEvent("name-changed",{detail:{name:this._groupConfig.name,external:this._groupIsExtenral},composed:!0,bubbles:!0})),this._rename=!1)})}_handleSaveOwner(){let e=this._groupConfig.owner;return this._groupConfigOwner&&(e=decodeURIComponent(this._groupConfigOwner)),this.$.restAPI.saveGroupOwner(this.groupId,e).then(e=>{this._owner=!1})}_handleSaveDescription(){return this.$.restAPI.saveGroupDescription(this.groupId,this._groupConfig.description).then(e=>{this._description=!1})}_handleSaveOptions(){const e={visible_to_all:this._groupConfig.options.visible_to_all};return this.$.restAPI.saveGroupOptions(this.groupId,e).then(e=>{this._options=!1})}_handleConfigName(){this._isLoading()||(this._rename=!0)}_handleConfigOwner(){this._isLoading()||(this._owner=!0)}_handleConfigDescription(){this._isLoading()||(this._description=!0)}_handleConfigOptions(){this._isLoading()||(this._options=!0)}_computeHeaderClass(e){return e?"edited":""}_getGroupSuggestions(e){return this.$.restAPI.getSuggestedGroups(e).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:n,value:decodeURIComponent(e[n].id)});return t})}_computeGroupDisabled(e,t,n){return!n||!t&&!e}_getGroupUUID(e){if(e)return e.match(af)?e:decodeURIComponent(e)}}customElements.define(rf.is,rf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lf=za`
  <style include="shared-styles">
    :host {
      display: inline-block;
      border-radius: 50%;
      background-size: cover;
      background-color: var(--avatar-background-color, #f1f2f3);
    }
  </style>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class cf extends(ra([Go],Zn(na(Ka)))){static get template(){return lf}static get is(){return"gr-avatar"}static get properties(){return{account:{type:Object,observer:"_accountChanged"},imageSize:{type:Number,value:16},_hasAvatars:{type:Boolean,value:!1}}}attached(){super.attached(),Promise.all([this._getConfig(),tr.awaitPluginsLoaded()]).then(([e])=>{this._hasAvatars=!!(e&&e.plugin&&e.plugin.has_avatars),this._updateAvatarURL()})}_getConfig(){return this.$.restAPI.getConfig()}_accountChanged(e){this._updateAvatarURL()}_updateAvatarURL(){if(!this._hasAvatars||!this.account)return void(this.hidden=!0);this.hidden=!1;const e=this._buildAvatarURL(this.account);e&&(this.style.backgroundImage='url("'+e+'")')}_getAccounts(e){return e._account_id||e.email||e.username||e.name}_buildAvatarURL(e){if(!e)return"";const t=e.avatars||[];for(let e=0;e<t.length;e++)if(t[e].height===this.imageSize)return t[e].url;return this.getBaseUrl()+"/accounts/"+encodeURIComponent(this._getAccounts(e))+"/avatar?s="+this.imageSize}}customElements.define(cf.is,cf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const df=e=>class extends e{static get properties(){return{_target:Object,_isShowing:{type:Boolean,value:!1},for:{type:String,observer:"_forChanged"},offset:{type:Number,value:14},position:{type:String,value:"right"},container:Object,containerId:{type:String,value:"gr-hovercard-container"}}}attached(){super.attached(),this._target||(this._target=this.target),this.listen(this._target,"mouseenter","showDelayed"),this.listen(this._target,"focus","showDelayed"),this.listen(this._target,"mouseleave","hide"),this.listen(this._target,"blur","hide"),this.listen(this._target,"click","hide")}created(){super.created(),this.addEventListener("mouseleave",e=>this.hide(e))}ready(){super.ready(),this.container=$u().querySelector("#"+this.containerId),this.container||(this.container=document.createElement("div"),this.container.setAttribute("id",this.containerId),$u().appendChild(this.container))}removeListeners(){this.unlisten(this._target,"mouseenter","show"),this.unlisten(this._target,"focus","show"),this.unlisten(this._target,"mouseleave","hide"),this.unlisten(this._target,"blur","hide"),this.unlisten(this._target,"click","hide")}get target(){const e=Ui(this).parentNode,t=Ui(this).getOwnerRoot();let n;return n=this.for?Ui(t).querySelector("#"+this.for):e.nodeType==Node.DOCUMENT_FRAGMENT_NODE?t.host:e,n}hide(e){this._isScheduledToShow=!1,this._isShowing&&(e.toElement===this||e.fromElement===this&&e.toElement===this._target||(this._isShowing=!1,this.classList.remove("hovered"),this.style.cssText="",this.$.container.setAttribute("tabindex",-1),this.container.contains(this)&&this.container.removeChild(this)))}showDelayed(){this.showDelayedBy(500)}showDelayedBy(e){this._isShowing||this._isScheduledToShow||(this._isScheduledToShow=!0,setTimeout(()=>{this._isScheduledToShow&&(this._isScheduledToShow=!1,this.show())},e))}show(){this._isShowing||(this._isShowing=!0,this.setAttribute("tabindex",0),this.container.appendChild(this),this.classList.add("hide"),this.classList.add("hovered"),this.updatePosition(),this.classList.remove("hide"))}updatePosition(){const e=new Set([this.position,"right","bottom-right","top-right","bottom","top","bottom-left","top-left","left"]);for(const t of e)if(this.updatePositionTo(t),this._isInsideViewport())return;console.warn("Could not find a visible position for the hovercard.")}_isInsideViewport(){const e=this.getBoundingClientRect();if(e.top<0)return!1;if(e.left<0)return!1;const t=document.documentElement.getBoundingClientRect();return!(e.bottom>t.height)&&!(e.right>t.width)}updatePositionTo(e){if(!this._target)return;this.style.cssText="";const t=document.documentElement.getBoundingClientRect(),n=this._target.getBoundingClientRect(),i=this.getBoundingClientRect(),s=n.left-t.left,a=n.top-t.top;let o,r;const l=this.offset+15;let c="";switch(e){case"top":o=s+(n.width-i.width)/2,r=a-i.height-this.offset,c+=`padding-bottom:${this.offset}px; margin-bottom:-${this.offset}px;`;break;case"bottom":o=s+(n.width-i.width)/2,r=a+n.height+this.offset,c+=`padding-top:${this.offset}px; margin-top:-${this.offset}px;`;break;case"left":o=s-i.width-this.offset,r=a+(n.height-i.height)/2,c+=`padding-right:${this.offset}px; margin-right:-${this.offset}px;`;break;case"right":o=s+n.width+this.offset,r=a+(n.height-i.height)/2,c+=`padding-left:${this.offset}px; margin-left:-${this.offset}px;`;break;case"bottom-right":o=s+n.width+this.offset,r=a+n.height+this.offset,c+=`padding-top:${l}px;`,c+=`padding-left:${l}px;`,c+=`margin-left:-${l}px;`,c+=`margin-top:-${l}px;`;break;case"bottom-left":o=s-i.width-this.offset,r=a+n.height+this.offset,c+=`padding-top:${l}px;`,c+=`padding-right:${l}px;`,c+=`margin-right:-${l}px;`,c+=`margin-top:-${l}px;`;break;case"top-left":o=s-i.width-this.offset,r=a-i.height-this.offset,c+=`padding-bottom:${l}px;`,c+=`padding-right:${l}px;`,c+=`margin-bottom:-${l}px;`,c+=`margin-right:-${l}px;`;break;case"top-right":o=s+n.width+this.offset,r=a-i.height-this.offset,c+=`padding-bottom:${l}px;`,c+=`padding-left:${l}px;`,c+=`margin-bottom:-${l}px;`,c+=`margin-left:-${l}px;`}c+=`left:${o}px; top:${r}px;`,this.style.cssText=c}_forChanged(){this._target=this.target}}
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,hf=document.createElement("dom-module");hf.innerHTML='<template>\n    <style include="shared-styles">\n      :host {\n        position: absolute;\n        display: none;\n        z-index: 200;\n      }\n      :host(.hovered) {\n        display: block;\n      }\n      :host(.hide) {\n        visibility: hidden;\n      }\n      /* You have to use a <div class="container"> in your hovercard in order\n         to pick up this consistent styling. */\n      #container {\n        background: var(--dialog-background-color);\n        border: 1px solid var(--border-color);\n        border-radius: var(--border-radius);\n        box-shadow: var(--elevation-level-5);\n      }\n    </style>\n  </template>',hf.register("gr-hovercard-shared-style");
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pf=za`
  <style include="gr-hovercard-shared-style">
    .top,
    .attention,
    .status,
    .voteable {
      padding: var(--spacing-s) var(--spacing-l);
    }
    .top {
      display: flex;
      padding-top: var(--spacing-xl);
      min-width: 300px;
    }
    gr-avatar {
      height: 48px;
      width: 48px;
      margin-right: var(--spacing-l);
    }
    .title,
    .email {
      color: var(--deemphasized-text-color);
    }
    .status iron-icon {
      width: 14px;
      height: 14px;
      vertical-align: top;
      position: relative;
      top: 2px;
    }
    .action {
      border-top: 1px solid var(--border-color);
      padding: var(--spacing-s) var(--spacing-l);
      --gr-button: {
        padding: var(--spacing-s) 0;
      }
    }
    :host(:not([attention])) .attention {
      display: none;
    }
    .attention {
      background-color: var(--emphasis-color);
    }
    .attention iron-icon {
      vertical-align: top;
    }
  </style>
  <div id="container" role="tooltip" tabindex="-1">
    <div class="top">
      <div class="avatar">
        <gr-avatar account="[[account]]" image-size="56"></gr-avatar>
      </div>
      <div class="account">
        <h3 class="name">[[account.name]]</h3>
        <div class="email">[[account.email]]</div>
      </div>
    </div>
    <template is="dom-if" if="[[account.status]]">
      <div class="status">
        <span class="title">
          <iron-icon icon="gr-icons:calendar"></iron-icon>
          Status:
        </span>
        <span class="value">[[account.status]]</span>
      </div>
    </template>
    <template is="dom-if" if="[[voteableText]]">
      <div class="voteable">
        <span class="title">Voteable:</span>
        <span class="value">[[voteableText]]</span>
      </div>
    </template>
    <div class="attention">
      <iron-icon icon="gr-icons:attention"></iron-icon>
      <span>It is this user's turn to take action.</span>
    </div>
  </div>
`
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class uf extends(Zn(df(na(Ka)))){static get template(){return pf}static get is(){return"gr-hovercard-account"}static get properties(){return{account:Object,voteableText:String,attention:{type:Boolean,value:!1,reflectToAttribute:!0}}}}customElements.define(uf.is,uf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mf=za`
  <style include="shared-styles">
    :host {
      display: inline;
      position: relative;
    }
    :host::after {
      content: var(--account-label-suffix);
    }
    :host(:not([blurred])) .overlay {
      display: none;
    }
    .overlay {
      position: absolute;
      pointer-events: none;
      height: var(--line-height-normal);
      right: 0;
      left: 0;
      background-color: var(--background-color-primary);
      opacity: 0.5;
    }
    gr-avatar {
      height: var(--line-height-normal);
      width: var(--line-height-normal);
      vertical-align: top;
    }
    .text {
      @apply --gr-account-label-text-style;
    }
    .text:hover {
      @apply --gr-account-label-text-hover-style;
    }
    iron-icon.attention {
      vertical-align: top;
    }
    iron-icon.status {
      width: 14px;
      height: 14px;
      vertical-align: top;
      position: relative;
      top: 2px;
    }
  </style>
  <div class="overlay"></div>
  <span>
    <gr-hovercard-account
      attention="[[showAttention]]"
      account="[[account]]"
      voteable-text="[[voteableText]]"
    >
    </gr-hovercard-account>
    <template is="dom-if" if="[[showAttention]]">
      <iron-icon class="attention" icon="gr-icons:attention"></iron-icon
      ><!--
   --></template
    ><!--
   --><template is="dom-if" if="[[!hideAvatar]]"
      ><!--
     --><gr-avatar account="[[account]]" image-size="32"></gr-avatar>
    </template>
    <span class="text">
      <span class="name"> [[_computeName(account, _serverConfig)]]</span>
      <template is="dom-if" if="[[!hideStatus]]">
        <template is="dom-if" if="[[account.status]]">
          <iron-icon class="status" icon="gr-icons:calendar"></iron-icon>
        </template>
      </template>
    </span>
  </span>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,gf={getUserName:(e,t)=>uo.getUserName(e,t),getDisplayName:(e,t)=>uo.getDisplayName(e,t),getGroupDisplayName:e=>uo.getGroupDisplayName(e)};window.Gerrit=window.Gerrit||{},window.Gerrit.DisplayNameBehavior=gf;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _f extends(ra([gf],Zn(na(Ka)))){static get template(){return mf}static get is(){return"gr-account-label"}static get properties(){return{account:Object,voteableText:String,showAttention:{type:Boolean,value:!1},hideAvatar:{type:Boolean,value:!1},hideStatus:{type:Boolean,value:!1},_serverConfig:{type:Object,value:null}}}ready(){super.ready(),this.$.restAPI.getConfig().then(e=>{this._serverConfig=e})}_computeName(e,t){return this.getDisplayName(t,e)}}customElements.define(_f.is,_f);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ff=za`
  <style include="shared-styles">
    :host {
      display: inline-block;
      /* Setting this really high, so all the following rules don't change
           anything, only if --account-max-length is actually set to something
           smaller like 20ch. */
      max-width: var(--account-max-length, 500px);
      overflow: hidden;
      text-overflow: ellipsis;
      vertical-align: top;
      white-space: nowrap;
    }
    a {
      color: var(--primary-text-color);
      text-decoration: none;
    }
    gr-account-label {
      --gr-account-label-text-hover-style: {
        text-decoration: underline;
      }
    }
  </style>
  <span>
    <a href$="[[_computeOwnerLink(account)]]" tabindex="-1">
      <gr-account-label
        show-attention="[[showAttention]]"
        hide-avatar="[[hideAvatar]]"
        hide-status="[[hideStatus]]"
        account="[[account]]"
        voteable-text="[[voteableText]]"
      >
      </gr-account-label>
    </a>
  </span>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class bf extends(ra([Go],Zn(na(Ka)))){static get template(){return ff}static get is(){return"gr-account-link"}static get properties(){return{voteableText:String,account:Object,showAttention:{type:Boolean,value:!1},hideAvatar:{type:Boolean,value:!1},hideStatus:{type:Boolean,value:!1}}}_computeOwnerLink(e){if(e)return um.getUrlForOwner(e.email||e.username||e.name||e._account_id)}}customElements.define(bf.is,bf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vf=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* GenericList style centers the last column, but we don't want that here. */
    .genericList tr th:last-of-type,
    .genericList tr td:last-of-type {
      text-align: left;
    }
  </style>
  <table id="list" class="genericList">
    <tbody>
      <tr class="headerRow">
        <th class="date topHeader">Date</th>
        <th class="type topHeader">Type</th>
        <th class="member topHeader">Member</th>
        <th class="by-user topHeader">By User</th>
      </tr>
      <tr id="loading" class$="loadingMsg [[computeLoadingClass(_loading)]]">
        <td>Loading...</td>
      </tr>
    </tbody>
    <tbody class$="[[computeLoadingClass(_loading)]]">
      <template is="dom-repeat" items="[[_auditLog]]">
        <tr class="table">
          <td class="date">
            <gr-date-formatter has-tooltip="" date-str="[[item.date]]">
            </gr-date-formatter>
          </td>
          <td class="type">[[itemType(item.type)]]</td>
          <td class="member">
            <template is="dom-if" if="[[_isGroupEvent(item.type)]]">
              <a href$="[[_computeGroupUrl(item.member)]]">
                [[_getNameForGroup(item.member)]]
              </a>
            </template>
            <template is="dom-if" if="[[!_isGroupEvent(item.type)]]">
              <gr-account-link account="[[item.member]]"></gr-account-link>
              [[_getIdForUser(item.member)]]
            </template>
          </td>
          <td class="by-user">
            <gr-account-link account="[[item.user]]"></gr-account-link>
            [[_getIdForUser(item.user)]]
          </td>
        </tr>
      </template>
    </tbody>
  </table>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,yf=["ADD_GROUP","REMOVE_GROUP"];class wf extends(ra([B_],Zn(na(Ka)))){static get template(){return vf}static get is(){return"gr-group-audit-log"}static get properties(){return{groupId:String,_auditLog:Array,_loading:{type:Boolean,value:!0}}}attached(){super.attached(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Audit Log"},composed:!0,bubbles:!0}))}ready(){super.ready(),this._getAuditLogs()}_getAuditLogs(){if(!this.groupId)return"";return this.$.restAPI.getGroupAuditLog(this.groupId,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(e=>{e?(this._auditLog=e,this._loading=!1):this._auditLog=[]})}_status(e){return e.disabled?"Disabled":"Enabled"}itemType(e){let t;switch(e){case"ADD_GROUP":case"ADD_USER":t="Added";break;case"REMOVE_GROUP":case"REMOVE_USER":t="Removed";break;default:t=""}return t}_isGroupEvent(e){return-1!==yf.indexOf(e)}_computeGroupUrl(e){return e&&e.url&&e.id?um.getUrlForGroup(e.id):""}_getIdForUser(e){return e._account_id?" ("+e._account_id+")":""}_getNameForGroup(e){return e&&e.name?e.name:e&&e.id?decodeURIComponent(e.id):""}}customElements.define(wf.is,wf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cf=za`
  <style include="shared-styles">
    :host {
      display: block;
      width: 30em;
    }
  </style>
  <gr-dialog
    confirm-label="Delete [[_computeItemName(itemType)]]"
    confirm-on-enter=""
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">
      [[_computeItemName(itemType)]] Deletion
    </div>
    <div class="main" slot="main">
      <label for="branchInput">
        Do you really want to delete the following
        [[_computeItemName(itemType)]]?
      </label>
      <div>
        [[item]]
      </div>
    </div>
  </gr-dialog>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Ef="branches",Sf="id",xf="tags";class Af extends(Zn(na(Ka))){static get template(){return Cf}static get is(){return"gr-confirm-delete-item-dialog"}static get properties(){return{item:String,itemType:String}}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}_computeItemName(e){return e===Ef?"Branch":e===xf?"Tag":e===Sf?"ID":void 0}}customElements.define(Af.is,Af);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Pf=za`
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-subpage-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    .input {
      width: 15em;
    }
    gr-autocomplete {
      width: 20em;
    }
    a {
      color: var(--primary-text-color);
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    th {
      border-bottom: 1px solid var(--border-color);
      font-weight: var(--font-weight-bold);
      text-align: left;
    }
    .canModify #groupMemberSearchInput,
    .canModify #saveGroupMember,
    .canModify .deleteHeader,
    .canModify .deleteColumn,
    .canModify #includedGroupSearchInput,
    .canModify #saveIncludedGroups,
    .canModify .deleteIncludedHeader,
    .canModify #saveIncludedGroups {
      display: none;
    }
  </style>
  <main
    class$="gr-form-styles [[_computeHideItemClass(_groupOwner, _isAdmin)]]"
  >
    <div id="loading" class$="[[_computeLoadingClass(_loading)]]">
      Loading...
    </div>
    <div id="loadedContent" class$="[[_computeLoadingClass(_loading)]]">
      <h1 id="Title">[[_groupName]]</h1>
      <div id="form">
        <h3 id="members">Members</h3>
        <fieldset>
          <span class="value">
            <gr-autocomplete
              id="groupMemberSearchInput"
              text="{{_groupMemberSearchName}}"
              value="{{_groupMemberSearchId}}"
              query="[[_queryMembers]]"
              placeholder="Name Or Email"
            >
            </gr-autocomplete>
          </span>
          <gr-button
            id="saveGroupMember"
            on-click="_handleSavingGroupMember"
            disabled="[[!_groupMemberSearchId]]"
          >
            Add
          </gr-button>
          <table id="groupMembers">
            <tbody>
              <tr class="headerRow">
                <th class="nameHeader">Name</th>
                <th class="emailAddressHeader">Email Address</th>
                <th class="deleteHeader">Delete Member</th>
              </tr>
            </tbody>
            <tbody>
              <template is="dom-repeat" items="[[_groupMembers]]">
                <tr>
                  <td class="nameColumn">
                    <gr-account-link account="[[item]]"></gr-account-link>
                  </td>
                  <td>[[item.email]]</td>
                  <td class="deleteColumn">
                    <gr-button
                      class="deleteMembersButton"
                      on-click="_handleDeleteMember"
                    >
                      Delete
                    </gr-button>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </fieldset>
        <h3 id="includedGroups">Included Groups</h3>
        <fieldset>
          <span class="value">
            <gr-autocomplete
              id="includedGroupSearchInput"
              text="{{_includedGroupSearchName}}"
              value="{{_includedGroupSearchId}}"
              query="[[_queryIncludedGroup]]"
              placeholder="Group Name"
            >
            </gr-autocomplete>
          </span>
          <gr-button
            id="saveIncludedGroups"
            on-click="_handleSavingIncludedGroups"
            disabled="[[!_includedGroupSearchId]]"
          >
            Add
          </gr-button>
          <table id="includedGroups">
            <tbody>
              <tr class="headerRow">
                <th class="groupNameHeader">Group Name</th>
                <th class="descriptionHeader">Description</th>
                <th class="deleteIncludedHeader">
                  Delete Group
                </th>
              </tr>
            </tbody>
            <tbody>
              <template is="dom-repeat" items="[[_includedGroups]]">
                <tr>
                  <td class="nameColumn">
                    <template is="dom-if" if="[[item.url]]">
                      <a href$="[[_computeGroupUrl(item.url)]]" rel="noopener">
                        [[item.name]]
                      </a>
                    </template>
                    <template is="dom-if" if="[[!item.url]]">
                      [[item.name]]
                    </template>
                  </td>
                  <td>[[item.description]]</td>
                  <td class="deleteColumn">
                    <gr-button
                      class="deleteIncludedGroupButton"
                      on-click="_handleDeleteIncludedGroup"
                    >
                      Delete
                    </gr-button>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </fieldset>
      </div>
    </div>
  </main>
  <gr-overlay id="overlay" with-backdrop="">
    <gr-confirm-delete-item-dialog
      class="confirmDialog"
      on-confirm="_handleDeleteConfirm"
      on-cancel="_handleConfirmDialogCancel"
      item="[[_itemName]]"
      item-type="[[_itemType]]"
    ></gr-confirm-delete-item-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class kf extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return Pf}static get is(){return"gr-group-members"}static get properties(){return{groupId:Number,_groupMemberSearchId:String,_groupMemberSearchName:String,_includedGroupSearchId:String,_includedGroupSearchName:String,_loading:{type:Boolean,value:!0},_groupName:String,_groupMembers:Object,_includedGroups:Object,_itemName:String,_itemType:String,_queryMembers:{type:Function,value(){return this._getAccountSuggestions.bind(this)}},_queryIncludedGroup:{type:Function,value(){return this._getGroupSuggestions.bind(this)}},_groupOwner:{type:Boolean,value:!1},_isAdmin:{type:Boolean,value:!1}}}attached(){super.attached(),this._loadGroupDetails(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Members"},composed:!0,bubbles:!0}))}_loadGroupDetails(){if(!this.groupId)return;const e=[];return this.$.restAPI.getGroupConfig(this.groupId,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(t=>t&&t.name?(this._groupName=t.name,e.push(this.$.restAPI.getIsAdmin().then(e=>{this._isAdmin=!!e})),e.push(this.$.restAPI.getIsGroupOwner(t.name).then(e=>{this._groupOwner=!!e})),e.push(this.$.restAPI.getGroupMembers(t.name).then(e=>{this._groupMembers=e})),e.push(this.$.restAPI.getIncludedGroup(t.name).then(e=>{this._includedGroups=e})),Promise.all(e).then(()=>{this._loading=!1})):Promise.resolve())}_computeLoadingClass(e){return e?"loading":""}_isLoading(){return this._loading||void 0===this._loading}_computeGroupUrl(e){if(!e)return;return new RegExp("^(?:[a-z]+:)?//","i").test(e)?e:e.startsWith("#")?this.getBaseUrl()+e.slice(1):this.getBaseUrl()+e}_handleSavingGroupMember(){return this.$.restAPI.saveGroupMembers(this._groupName,this._groupMemberSearchId).then(e=>{e&&(this.$.restAPI.getGroupMembers(this._groupName).then(e=>{this._groupMembers=e}),this._groupMemberSearchName="",this._groupMemberSearchId="")})}_handleDeleteConfirm(){return this.$.overlay.close(),"member"===this._itemType?this.$.restAPI.deleteGroupMembers(this._groupName,this._itemId).then(e=>{204===e.status&&this.$.restAPI.getGroupMembers(this._groupName).then(e=>{this._groupMembers=e})}):"includedGroup"===this._itemType?this.$.restAPI.deleteIncludedGroup(this._groupName,this._itemId).then(e=>{204!==e.status&&205!==e.status||this.$.restAPI.getIncludedGroup(this._groupName).then(e=>{this._includedGroups=e})}):void 0}_handleConfirmDialogCancel(){this.$.overlay.close()}_handleDeleteMember(e){const t=e.model.get("item._account_id"),n=e.model.get("item.name"),i=e.model.get("item.username"),s=e.model.get("item.email"),a=i||n||s||t;if(!a)return"";this._itemName=a,this._itemId=t,this._itemType="member",this.$.overlay.open()}_handleSavingIncludedGroups(){return this.$.restAPI.saveIncludedGroup(this._groupName,this._includedGroupSearchId.replace(/\+/g," "),e=>{if(404===e.status)return this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Group may not exist, or you may not have permission to add it"},bubbles:!0,composed:!0})),e;throw Error(e.statusText)}).then(e=>{e&&(this.$.restAPI.getIncludedGroup(this._groupName).then(e=>{this._includedGroups=e}),this._includedGroupSearchName="",this._includedGroupSearchId="")})}_handleDeleteIncludedGroup(e){const t=decodeURIComponent(e.model.get("item.id")).replace(/\+/g," "),n=e.model.get("item.name")||t;if(!n)return"";this._itemName=n,this._itemId=t,this._itemType="includedGroup",this.$.overlay.open()}_getAccountSuggestions(e){return 0===e.length?Promise.resolve([]):this.$.restAPI.getSuggestedAccounts(e,15).then(e=>{const t=[];let n;if(!e)return[];for(const i in e)e.hasOwnProperty(i)&&(n=void 0!==e[i].email?e[i].name+" <"+e[i].email+">":e[i].name,t.push({name:n,value:e[i]._account_id}));return t})}_getGroupSuggestions(e){return this.$.restAPI.getSuggestedGroups(e).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:n,value:decodeURIComponent(e[n].id)});return t})}_computeHideItemClass(e,t){return t||e?"":"canModify"}}customElements.define(kf.is,kf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Tf=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <gr-list-view
    filter="[[_filter]]"
    items-per-page="[[_pluginsPerPage]]"
    items="[[_plugins]]"
    loading="[[_loading]]"
    offset="[[_offset]]"
    path="[[_path]]"
  >
    <table id="list" class="genericList">
      <tbody>
        <tr class="headerRow">
          <th class="name topHeader">Plugin Name</th>
          <th class="version topHeader">Version</th>
          <th class="status topHeader">Status</th>
        </tr>
        <tr id="loading" class$="loadingMsg [[computeLoadingClass(_loading)]]">
          <td>Loading...</td>
        </tr>
      </tbody>
      <tbody class$="[[computeLoadingClass(_loading)]]">
        <template is="dom-repeat" items="[[_shownPlugins]]">
          <tr class="table">
            <td class="name">
              <template is="dom-if" if="[[item.index_url]]">
                <a href$="[[_computePluginUrl(item.index_url)]]">[[item.id]]</a>
              </template>
              <template is="dom-if" if="[[!item.index_url]]">
                [[item.id]]
              </template>
            </td>
            <td class="version">[[item.version]]</td>
            <td class="status">[[_status(item)]]</td>
          </tr>
        </template>
      </tbody>
    </table>
  </gr-list-view>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class If extends(ra([B_],Zn(na(Ka)))){static get template(){return Tf}static get is(){return"gr-plugin-list"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},_offset:{type:Number,value:0},_path:{type:String,readOnly:!0,value:"/admin/plugins"},_plugins:Array,_shownPlugins:{type:Array,computed:"computeShownItems(_plugins)"},_pluginsPerPage:{type:Number,value:25},_loading:{type:Boolean,value:!0},_filter:{type:String,value:""}}}attached(){super.attached(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Plugins"},composed:!0,bubbles:!0}))}_paramsChanged(e){return this._loading=!0,this._filter=this.getFilterValue(e),this._offset=this.getOffsetValue(e),this._getPlugins(this._filter,this._pluginsPerPage,this._offset)}_getPlugins(e,t,n){return this.$.restAPI.getPlugins(e,t,n,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(e=>{e?(this._plugins=Object.keys(e).map(t=>{const n=e[t];return n.name=t,n}),this._loading=!1):this._plugins=[]})}_status(e){return!0===e.disabled?"Disabled":"Enabled"}_computePluginUrl(e){return this.getUrl("/",e)}}customElements.define(If.is,If);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Rf=za` <slot></slot> `
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Lf extends(Zn(na(Ka))){static get template(){return Rf}static get is(){return"gr-endpoint-decorator"}static get properties(){return{name:String,_domHooks:{type:Map,value:()=>new Map},_initializedPlugins:{type:Map,value:()=>new Map}}}detached(){super.detached();for(const[e,t]of this._domHooks)t.handleInstanceDetached(e);ir.onDetachedEndpoint(this.name,this._endpointCallBack)}_import(e){return new Promise((t,n)=>{po(e,t,n)})}_initDecoration(e,t){const n=document.createElement(e);return this._initProperties(n,t,this.getContentChildren().find(e=>"GR-ENDPOINT-PARAM"!==e.nodeName)).then(e=>this._appendChild(e))}_initReplacement(e,t){this.getContentChildNodes().filter(e=>"GR-ENDPOINT-PARAM"!==e.nodeName).forEach(e=>e.remove());const n=document.createElement(e);return this._initProperties(n,t).then(e=>this._appendChild(e))}_getEndpointParams(){return Array.from(Ui(this).querySelectorAll("gr-endpoint-param"))}_initProperties(e,t,n){e.plugin=t,n&&(e.content=n);const i=this._getEndpointParams().map(n=>{const i=t.attributeHelper(n),s=n.getAttribute("name");return i.get("value").then(n=>i.bind("value",n=>t.attributeHelper(e).set(s,n)))});let s;const a=new Promise(e=>s=setTimeout(()=>{console.warn("Timeout waiting for endpoint properties initialization: "+`plugin ${t.getPluginName()}, endpoint ${this.name}`)},1e4));return Promise.race([a,Promise.all(i)]).then(()=>(clearTimeout(s),e))}_appendChild(e){return Ui(this.root).appendChild(e)}_initModule({moduleName:e,plugin:t,type:n,domHook:i}){const s=t.getPluginName()+"."+e;if(this._initializedPlugins.get(s))return;let a;switch(n){case"decorate":a=this._initDecoration(e,t);break;case"replace":a=this._initReplacement(e,t)}a||console.warn("Unable to initialize module "+s),this._initializedPlugins.set(s,!0),a.then(e=>{i.handleInstanceAttached(e),this._domHooks.set(e,i)})}ready(){super.ready(),this._endpointCallBack=this._initModule.bind(this),ir.onNewEndpoint(this.name,this._endpointCallBack),tr.awaitPluginsLoaded().then(()=>Promise.all(ir.getPlugins(this.name).map(e=>this._import(e)))).then(()=>ir.getDetails(this.name).forEach(this._initModule,this))}}customElements.define(Lf.is,Lf);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Df extends(Zn(na(Ka))){static get is(){return"gr-endpoint-param"}static get properties(){return{name:String,value:{type:Object,notify:!0,observer:"_valueChanged"}}}_valueChanged(e,t){const n={value:e};this.dispatchEvent(new CustomEvent("value-changed",{detail:n}))}}customElements.define(Df.is,Df);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Of={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(e){e&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=e)},_createRipple:function(){var e=zp._createRipple();return e.id="ink",e.setAttribute("center",""),e.classList.add("circle"),e}},Nf=[Hp,Fp,zp,Of];
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({is:"paper-icon-button",_template:za`
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        line-height: 1;

        width: 40px;
        height: 40px;

        /*
          NOTE: Both values are needed, since some phones require the value to
          be \`transparent\`.
        */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        /* Because of polymer/2558, this style has lower specificity than * */
        box-sizing: border-box !important;

        @apply --paper-icon-button;
      }

      :host #ink {
        color: var(--paper-icon-button-ink-color, var(--primary-text-color));
        opacity: 0.6;
      }

      :host([disabled]) {
        color: var(--paper-icon-button-disabled-text, var(--disabled-text-color));
        pointer-events: none;
        cursor: auto;

        @apply --paper-icon-button-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:hover) {
        @apply --paper-icon-button-hover;
      }

      iron-icon {
        --iron-icon-width: 100%;
        --iron-icon-height: 100%;
      }
    </style>

    <iron-icon id="icon" src="[[src]]" icon="[[icon]]"
               alt$="[[alt]]"></iron-icon>
  `,hostAttributes:{role:"button",tabindex:"0"},behaviors:[Nf],registered:function(){this._template.setAttribute("strip-whitespace","")},properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(e,t){var n=this.getAttribute("aria-label");n&&t!=n||this.setAttribute("aria-label",e)}});
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Mf=za`<iron-iconset-svg name="paper-tabs" size="24">
<svg><defs>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g>
</defs></svg>
</iron-iconset-svg>`;document.head.appendChild(Mf.content),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        @apply --layout-inline;
        @apply --layout-center;
        @apply --layout-center-justified;
        @apply --layout-flex-auto;

        position: relative;
        padding: 0 12px;
        overflow: hidden;
        cursor: pointer;
        vertical-align: middle;

        @apply --paper-font-common-base;
        @apply --paper-tab;
      }

      :host(:focus) {
        outline: none;
      }

      :host([link]) {
        padding: 0;
      }

      .tab-content {
        height: 100%;
        transform: translateZ(0);
          -webkit-transform: translateZ(0);
        transition: opacity 0.1s cubic-bezier(0.4, 0.0, 1, 1);
        @apply --layout-horizontal;
        @apply --layout-center-center;
        @apply --layout-flex-auto;
        @apply --paper-tab-content;
      }

      :host(:not(.iron-selected)) > .tab-content {
        opacity: 0.8;

        @apply --paper-tab-content-unselected;
      }

      :host(:focus) .tab-content {
        opacity: 1;
        font-weight: 700;

        @apply --paper-tab-content-focused;
      }

      paper-ripple {
        color: var(--paper-tab-ink, var(--paper-yellow-a100));
      }

      .tab-content > ::slotted(a) {
        @apply --layout-flex-auto;

        height: 100%;
      }
    </style>

    <div class="tab-content">
      <slot></slot>
    </div>
`,is:"paper-tab",behaviors:[Fp,Hp,zp],properties:{link:{type:Boolean,value:!1,reflectToAttribute:!0}},hostAttributes:{role:"tab"},listeners:{down:"_updateNoink",tap:"_onTap"},attached:function(){this._updateNoink()},get _parentNoink(){var e=Ui(this).parentNode;return!!e&&!!e.noink},_updateNoink:function(){this.noink=!!this.noink||!!this._parentNoink},_onTap:function(e){if(this.link){var t=this.queryEffectiveChildren("a");if(!t)return;if(e.target===t)return;t.click()}}}),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
ma({_template:za`
    <style>
      :host {
        @apply --layout;
        @apply --layout-center;

        height: 48px;
        font-size: 14px;
        font-weight: 500;
        overflow: hidden;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;

        /* NOTE: Both values are needed, since some phones require the value to be \`transparent\`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        @apply --paper-tabs;
      }

      :host(:dir(rtl)) {
        @apply --layout-horizontal-reverse;
      }

      #tabsContainer {
        position: relative;
        height: 100%;
        white-space: nowrap;
        overflow: hidden;
        @apply --layout-flex-auto;
        @apply --paper-tabs-container;
      }

      #tabsContent {
        height: 100%;
        -moz-flex-basis: auto;
        -ms-flex-basis: auto;
        flex-basis: auto;
        @apply --paper-tabs-content;
      }

      #tabsContent.scrollable {
        position: absolute;
        white-space: nowrap;
      }

      #tabsContent:not(.scrollable),
      #tabsContent.scrollable.fit-container {
        @apply --layout-horizontal;
      }

      #tabsContent.scrollable.fit-container {
        min-width: 100%;
      }

      #tabsContent.scrollable.fit-container > ::slotted(*) {
        /* IE - prevent tabs from compressing when they should scroll. */
        -ms-flex: 1 0 auto;
        -webkit-flex: 1 0 auto;
        flex: 1 0 auto;
      }

      .hidden {
        display: none;
      }

      .not-visible {
        opacity: 0;
        cursor: default;
      }

      paper-icon-button {
        width: 48px;
        height: 48px;
        padding: 12px;
        margin: 0 4px;
      }

      #selectionBar {
        position: absolute;
        height: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border-bottom: 2px solid var(--paper-tabs-selection-bar-color, var(--paper-yellow-a100));
          -webkit-transform: scale(0);
        transform: scale(0);
          -webkit-transform-origin: left center;
        transform-origin: left center;
          transition: -webkit-transform;
        transition: transform;

        @apply --paper-tabs-selection-bar;
      }

      #selectionBar.align-bottom {
        top: 0;
        bottom: auto;
      }

      #selectionBar.expand {
        transition-duration: 0.15s;
        transition-timing-function: cubic-bezier(0.4, 0.0, 1, 1);
      }

      #selectionBar.contract {
        transition-duration: 0.18s;
        transition-timing-function: cubic-bezier(0.0, 0.0, 0.2, 1);
      }

      #tabsContent > ::slotted(:not(#selectionBar)) {
        height: 100%;
      }
    </style>

    <paper-icon-button icon="paper-tabs:chevron-left" class$="[[_computeScrollButtonClass(_leftHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onLeftScrollButtonDown" tabindex="-1"></paper-icon-button>

    <div id="tabsContainer" on-track="_scroll" on-down="_down">
      <div id="tabsContent" class$="[[_computeTabsContentClass(scrollable, fitContainer)]]">
        <div id="selectionBar" class$="[[_computeSelectionBarClass(noBar, alignBottom)]]" on-transitionend="_onBarTransitionEnd"></div>
        <slot></slot>
      </div>
    </div>

    <paper-icon-button icon="paper-tabs:chevron-right" class$="[[_computeScrollButtonClass(_rightHidden, scrollable, hideScrollButtons)]]" on-up="_onScrollButtonUp" on-down="_onRightScrollButtonDown" tabindex="-1"></paper-icon-button>
`,is:"paper-tabs",behaviors:[lr,[$m,{hostAttributes:{role:"menubar"},keyBindings:{left:"_onLeftKey",right:"_onRightKey"},_onUpKey:function(e){this.focusedItem.click(),e.detail.keyboardEvent.preventDefault()},_onDownKey:function(e){this.focusedItem.click(),e.detail.keyboardEvent.preventDefault()},get _isRTL(){return"rtl"===window.getComputedStyle(this).direction},_onLeftKey:function(e){this._isRTL?this._focusNext():this._focusPrevious(),e.detail.keyboardEvent.preventDefault()},_onRightKey:function(e){this._isRTL?this._focusPrevious():this._focusNext(),e.detail.keyboardEvent.preventDefault()},_onKeydown:function(e){this.keyboardEventMatchesKeys(e,"up down left right esc")||this._focusWithKeyboardEvent(e)}}]],properties:{noink:{type:Boolean,value:!1,observer:"_noinkChanged"},noBar:{type:Boolean,value:!1},noSlide:{type:Boolean,value:!1},scrollable:{type:Boolean,value:!1},fitContainer:{type:Boolean,value:!1},disableDrag:{type:Boolean,value:!1},hideScrollButtons:{type:Boolean,value:!1},alignBottom:{type:Boolean,value:!1},selectable:{type:String,value:"paper-tab"},autoselect:{type:Boolean,value:!1},autoselectDelay:{type:Number,value:0},_step:{type:Number,value:10},_holdDelay:{type:Number,value:1},_leftHidden:{type:Boolean,value:!1},_rightHidden:{type:Boolean,value:!1},_previousTab:{type:Object}},hostAttributes:{role:"tablist"},listeners:{"iron-resize":"_onTabSizingChanged","iron-items-changed":"_onTabSizingChanged","iron-select":"_onIronSelect","iron-deselect":"_onIronDeselect"},keyBindings:{"left:keyup right:keyup":"_onArrowKeyup"},created:function(){this._holdJob=null,this._pendingActivationItem=void 0,this._pendingActivationTimeout=void 0,this._bindDelayedActivationHandler=this._delayedActivationHandler.bind(this),this.addEventListener("blur",this._onBlurCapture.bind(this),!0)},ready:function(){this.setScrollDirection("y",this.$.tabsContainer)},detached:function(){this._cancelPendingActivation()},_noinkChanged:function(e){Ui(this).querySelectorAll("paper-tab").forEach(e?this._setNoinkAttribute:this._removeNoinkAttribute)},_setNoinkAttribute:function(e){e.setAttribute("noink","")},_removeNoinkAttribute:function(e){e.removeAttribute("noink")},_computeScrollButtonClass:function(e,t,n){return!t||n?"hidden":e?"not-visible":""},_computeTabsContentClass:function(e,t){return e?"scrollable"+(t?" fit-container":""):" fit-container"},_computeSelectionBarClass:function(e,t){return e?"hidden":t?"align-bottom":""},_onTabSizingChanged:function(){this.debounce("_onTabSizingChanged",(function(){this._scroll(),this._tabChanged(this.selectedItem)}),10)},_onIronSelect:function(e){this._tabChanged(e.detail.item,this._previousTab),this._previousTab=e.detail.item,this.cancelDebouncer("tab-changed")},_onIronDeselect:function(e){this.debounce("tab-changed",(function(){this._tabChanged(null,this._previousTab),this._previousTab=null}),1)},_activateHandler:function(){this._cancelPendingActivation(),Mm._activateHandler.apply(this,arguments)},_scheduleActivation:function(e,t){this._pendingActivationItem=e,this._pendingActivationTimeout=this.async(this._bindDelayedActivationHandler,t)},_delayedActivationHandler:function(){var e=this._pendingActivationItem;this._pendingActivationItem=void 0,this._pendingActivationTimeout=void 0,e.fire(this.activateEvent,null,{bubbles:!0,cancelable:!0})},_cancelPendingActivation:function(){void 0!==this._pendingActivationTimeout&&(this.cancelAsync(this._pendingActivationTimeout),this._pendingActivationItem=void 0,this._pendingActivationTimeout=void 0)},_onArrowKeyup:function(e){this.autoselect&&this._scheduleActivation(this.focusedItem,this.autoselectDelay)},_onBlurCapture:function(e){e.target===this._pendingActivationItem&&this._cancelPendingActivation()},get _tabContainerScrollSize(){return Math.max(0,this.$.tabsContainer.scrollWidth-this.$.tabsContainer.offsetWidth)},_scroll:function(e,t){if(this.scrollable){var n=t&&-t.ddx||0;this._affectScroll(n)}},_down:function(e){this.async((function(){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null)}),1)},_affectScroll:function(e){this.$.tabsContainer.scrollLeft+=e;var t=this.$.tabsContainer.scrollLeft;this._leftHidden=0===t,this._rightHidden=t===this._tabContainerScrollSize},_onLeftScrollButtonDown:function(){this._scrollToLeft(),this._holdJob=setInterval(this._scrollToLeft.bind(this),this._holdDelay)},_onRightScrollButtonDown:function(){this._scrollToRight(),this._holdJob=setInterval(this._scrollToRight.bind(this),this._holdDelay)},_onScrollButtonUp:function(){clearInterval(this._holdJob),this._holdJob=null},_scrollToLeft:function(){this._affectScroll(-this._step)},_scrollToRight:function(){this._affectScroll(this._step)},_tabChanged:function(e,t){if(!e)return this.$.selectionBar.classList.remove("expand"),this.$.selectionBar.classList.remove("contract"),void this._positionBar(0,0);var n=this.$.tabsContent.getBoundingClientRect(),i=n.width,s=e.getBoundingClientRect(),a=s.left-n.left;if(this._pos={width:this._calcPercent(s.width,i),left:this._calcPercent(a,i)},this.noSlide||null==t)return this.$.selectionBar.classList.remove("expand"),this.$.selectionBar.classList.remove("contract"),void this._positionBar(this._pos.width,this._pos.left);var o=t.getBoundingClientRect(),r=this.items.indexOf(t),l=this.items.indexOf(e);this.$.selectionBar.classList.add("expand");var c=r<l;this._isRTL&&(c=!c),c?this._positionBar(this._calcPercent(s.left+s.width-o.left,i)-5,this._left):this._positionBar(this._calcPercent(o.left+o.width-s.left,i)-5,this._calcPercent(a,i)+5),this.scrollable&&this._scrollToSelectedIfNeeded(s.width,a)},_scrollToSelectedIfNeeded:function(e,t){var n=t-this.$.tabsContainer.scrollLeft;n<0?this.$.tabsContainer.scrollLeft+=n:(n+=e-this.$.tabsContainer.offsetWidth)>0&&(this.$.tabsContainer.scrollLeft+=n)},_calcPercent:function(e,t){return 100*e/t},_positionBar:function(e,t){e=e||0,t=t||0,this._width=e,this._left=t,this.transform("translateX("+t+"%) scaleX("+e/100+")",this.$.selectionBar)},_onBarTransitionEnd:function(e){var t=this.$.selectionBar.classList;t.contains("expand")?(t.remove("expand"),t.add("contract"),this._positionBar(this._pos.width,this._pos.left)):t.contains("contract")&&t.remove("contract")}});
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $f=za`
  <style include="shared-styles">
    .commandContainer {
      margin-bottom: var(--spacing-m);
    }
    .commandContainer {
      background-color: var(--shell-command-background-color);
      /* Should be spacing-m larger than the :before width. */
      padding: var(--spacing-m) var(--spacing-m) var(--spacing-m)
        calc(3 * var(--spacing-m) + 0.5em);
      position: relative;
      width: 100%;
    }
    .commandContainer:before {
      content: '$';
      position: absolute;
      display: block;
      box-sizing: border-box;
      background: var(--shell-command-decoration-background-color);
      top: 0;
      bottom: 0;
      left: 0;
      /* Should be spacing-m smaller than the .commandContainer padding-left. */
      width: calc(2 * var(--spacing-m) + 0.5em);
      /* Should vertically match the padding of .commandContainer. */
      padding: var(--spacing-m);
      /* Should roughly match the height of .commandContainer without padding. */
      line-height: 26px;
    }
    .commandContainer gr-copy-clipboard {
      --text-container-style: {
        border: none;
      }
    }
  </style>
  <label>[[label]]</label>
  <div class="commandContainer">
    <gr-copy-clipboard text="[[command]]"></gr-copy-clipboard>
  </div>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Bf extends(Zn(na(Ka))){static get template(){return $f}static get is(){return"gr-shell-command"}static get properties(){return{command:String,label:String}}focusOnCopy(){this.shadowRoot.querySelector("gr-copy-clipboard").focusOnCopy()}}customElements.define(Bf.is,Bf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ff=za`
  <style include="shared-styles">
    paper-tabs {
      height: 3rem;
      margin-bottom: var(--spacing-m);
      --paper-tabs-selection-bar-color: var(--link-color);
    }
    paper-tab {
      max-width: 15rem;
      text-transform: uppercase;
      --paper-tab-ink: var(--link-color);
    }
    label,
    input {
      display: block;
    }
    label {
      font-weight: var(--font-weight-bold);
    }
    .schemes {
      display: flex;
      justify-content: space-between;
    }
    .commands {
      display: flex;
      flex-direction: column;
    }
    gr-shell-command {
      width: 60em;
      margin-bottom: var(--spacing-m);
    }
    .hidden {
      display: none;
    }
  </style>
  <div class="schemes">
    <paper-tabs
      id="downloadTabs"
      class$="[[_computeShowTabs(schemes)]]"
      selected="[[_computeSelected(schemes, selectedScheme)]]"
      on-selected-changed="_handleTabChange"
    >
      <template is="dom-repeat" items="[[schemes]]" as="scheme">
        <paper-tab data-scheme$="[[scheme]]">[[scheme]]</paper-tab>
      </template>
    </paper-tabs>
  </div>
  <div class="commands" hidden$="[[!schemes.length]]" hidden="">
    <template is="dom-repeat" items="[[commands]]" as="command">
      <gr-shell-command
        label="[[command.title]]"
        command="[[command.command]]"
      ></gr-shell-command>
    </template>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Uf extends(ra([zg],Zn(na(Ka)))){static get template(){return Ff}static get is(){return"gr-download-commands"}static get properties(){return{commands:Array,_loggedIn:{type:Boolean,value:!1,observer:"_loggedInChanged"},schemes:Array,selectedScheme:{type:String,notify:!0}}}attached(){super.attached(),this._getLoggedIn().then(e=>{this._loggedIn=e})}focusOnCopy(){this.shadowRoot.querySelector("gr-shell-command").focusOnCopy()}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_loggedInChanged(e){if(e)return this.$.restAPI.getPreferences().then(e=>{e.download_scheme&&(this.selectedScheme=e.download_scheme.toLowerCase())})}_handleTabChange(e){const t=this.schemes[e.detail.value];t&&t!==this.selectedScheme&&(this.set("selectedScheme",t),this._loggedIn&&this.$.restAPI.savePreferences({download_scheme:this.selectedScheme}))}_computeSelected(e,t){return(e.findIndex(e=>e===t)||0)+""}_computeShowTabs(e){return e.length>1?"":"hidden"}}customElements.define(Uf.is,Uf);
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Hf={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(e){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required","true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked,this.fire("iron-change")},_valueChanged:function(){void 0!==this.value&&null!==this.value||(this.value="on")}},jf=[Nf,[G_,I_,Hf],{_checkedChanged:function(){Hf._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){zp._buttonStateChanged.call(this),this.disabled||this.isAttached&&(this.checked=this.active)}}],Gf=za`

    <style>
      :host {
        display: inline-block;
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-common-base;
      }

      :host([disabled]) {
        pointer-events: none;
      }

      :host(:focus) {
        outline:none;
      }

      .toggle-bar {
        position: absolute;
        height: 100%;
        width: 100%;
        border-radius: 8px;
        pointer-events: none;
        opacity: 0.4;
        transition: background-color linear .08s;
        background-color: var(--paper-toggle-button-unchecked-bar-color, #000000);

        @apply --paper-toggle-button-unchecked-bar;
      }

      .toggle-button {
        position: absolute;
        top: -3px;
        left: 0;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);
        transition: -webkit-transform linear .08s, background-color linear .08s;
        transition: transform linear .08s, background-color linear .08s;
        will-change: transform;
        background-color: var(--paper-toggle-button-unchecked-button-color, var(--paper-grey-50));

        @apply --paper-toggle-button-unchecked-button;
      }

      .toggle-button.dragging {
        -webkit-transition: none;
        transition: none;
      }

      :host([checked]:not([disabled])) .toggle-bar {
        opacity: 0.5;
        background-color: var(--paper-toggle-button-checked-bar-color, var(--primary-color));

        @apply --paper-toggle-button-checked-bar;
      }

      :host([disabled]) .toggle-bar {
        background-color: #000;
        opacity: 0.12;
      }

      :host([checked]) .toggle-button {
        -webkit-transform: translate(16px, 0);
        transform: translate(16px, 0);
      }

      :host([checked]:not([disabled])) .toggle-button {
        background-color: var(--paper-toggle-button-checked-button-color, var(--primary-color));

        @apply --paper-toggle-button-checked-button;
      }

      :host([disabled]) .toggle-button {
        background-color: #bdbdbd;
        opacity: 1;
      }

      .toggle-ink {
        position: absolute;
        top: -14px;
        left: -14px;
        right: auto;
        bottom: auto;
        width: 48px;
        height: 48px;
        opacity: 0.5;
        pointer-events: none;
        color: var(--paper-toggle-button-unchecked-ink-color, var(--primary-text-color));

        @apply --paper-toggle-button-unchecked-ink;
      }

      :host([checked]) .toggle-ink {
        color: var(--paper-toggle-button-checked-ink-color, var(--primary-color));

        @apply --paper-toggle-button-checked-ink;
      }

      .toggle-container {
        display: inline-block;
        position: relative;
        width: 36px;
        height: 14px;
        /* The toggle button has an absolute position of -3px; The extra 1px
        /* accounts for the toggle button shadow box. */
        margin: 4px 1px;
      }

      .toggle-label {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-toggle-button-label-spacing, 8px);
        pointer-events: none;
        color: var(--paper-toggle-button-label-color, var(--primary-text-color));
      }

      /* invalid state */
      :host([invalid]) .toggle-bar {
        background-color: var(--paper-toggle-button-invalid-bar-color, var(--error-color));
      }

      :host([invalid]) .toggle-button {
        background-color: var(--paper-toggle-button-invalid-button-color, var(--error-color));
      }

      :host([invalid]) .toggle-ink {
        color: var(--paper-toggle-button-invalid-ink-color, var(--error-color));
      }
    </style>

    <div class="toggle-container">
      <div id="toggleBar" class="toggle-bar"></div>
      <div id="toggleButton" class="toggle-button"></div>
    </div>

    <div class="toggle-label"><slot></slot></div>

  `;Gf.setAttribute("strip-whitespace",""),ma({_template:Gf,is:"paper-toggle-button",behaviors:[jf],hostAttributes:{role:"button","aria-pressed":"false",tabindex:0},properties:{},listeners:{track:"_ontrack"},attached:function(){bi(this,(function(){Dn(this,"pan-y")}))},_ontrack:function(e){var t=e.detail;"start"===t.state?this._trackStart(t):"track"===t.state?this._trackMove(t):"end"===t.state&&this._trackEnd(t)},_trackStart:function(e){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add("dragging")},_trackMove:function(e){var t=e.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+t:t)),this.translate3d(this._x+"px",0,0,this.$.toggleButton),this._userActivate(this._x>this._width/2)},_trackEnd:function(e){this.$.toggleButton.classList.remove("dragging"),this.transform("",this.$.toggleButton)},_createRipple:function(){this._rippleContainer=this.$.toggleButton;var e=zp._createRipple();return e.id="ink",e.setAttribute("recenters",""),e.classList.add("circle","toggle-ink"),e}});
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vf=za`
  <style>
    iron-icon {
      width: var(--line-height-normal);
      height: var(--line-height-normal);
      vertical-align: top;
    }
  </style>
  <slot></slot
  ><!--
 --><iron-icon icon="gr-icons:info" hidden$="[[!showIcon]]"></iron-icon>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class zf extends(ra([Bu],Zn(na(Ka)))){static get template(){return Vf}static get is(){return"gr-tooltip-content"}static get properties(){return{maxWidth:{type:String,reflectToAttribute:!0},showIcon:{type:Boolean,value:!1}}}}customElements.define(zf.is,zf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wf=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    .wrapper {
      width: 30em;
    }
    .existingItems {
      background: var(--table-header-background-color);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
    }
    gr-button {
      float: right;
      margin-left: var(--spacing-m);
      width: 4.5em;
    }
    .row {
      align-items: center;
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-m) 0;
      width: 100%;
    }
    .existingItems .row {
      padding: var(--spacing-m);
    }
    .existingItems .row:not(:first-of-type) {
      border-top: 1px solid var(--border-color);
    }
    input {
      flex-grow: 1;
    }
    .hide {
      display: none;
    }
    .placeholder {
      color: var(--deemphasized-text-color);
      padding-top: var(--spacing-m);
    }
  </style>
  <div class="wrapper gr-form-styles">
    <template is="dom-if" if="[[pluginOption.info.values.length]]">
      <div class="existingItems">
        <template is="dom-repeat" items="[[pluginOption.info.values]]">
          <div class="row">
            <span>[[item]]</span>
            <gr-button
              link=""
              disabled$="[[disabled]]"
              data-item$="[[item]]"
              on-click="_handleDelete"
              >Delete</gr-button
            >
          </div>
        </template>
      </div>
    </template>
    <template is="dom-if" if="[[!pluginOption.info.values.length]]">
      <div class="row placeholder">None configured.</div>
    </template>
    <div class$="row [[_computeShowInputRow(disabled)]]">
      <iron-input on-keydown="_handleInputKeydown" bind-value="{{_newValue}}">
        <input
          is="iron-input"
          id="input"
          on-keydown="_handleInputKeydown"
          bind-value="{{_newValue}}"
        />
      </iron-input>
      <gr-button
        id="addButton"
        disabled$="[[!_newValue.length]]"
        link=""
        on-click="_handleAddTap"
        >Add</gr-button
      >
    </div>
  </div>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class qf extends(Zn(na(Ka))){static get template(){return Wf}static get is(){return"gr-plugin-config-array-editor"}static get properties(){return{pluginOption:Object,disabled:{type:Boolean,computed:"_computeDisabled(pluginOption.*)"},_newValue:{type:String,value:""}}}_computeDisabled(e){return!(e&&e.base&&e.base.info&&e.base.info.editable)}_handleAddTap(e){e.preventDefault(),this._handleAdd()}_handleInputKeydown(e){13===e.keyCode&&(e.preventDefault(),this._handleAdd())}_handleAdd(){this._newValue.length&&(this._dispatchChanged(this.pluginOption.info.values.concat([this._newValue])),this._newValue="")}_handleDelete(e){const t=Ui(e).localTarget.dataset.item;this._dispatchChanged(this.pluginOption.info.values.filter(e=>e!==t))}_dispatchChanged(e){const{_key:t,info:n}=this.pluginOption,i={_key:t,info:Object.assign(n,{values:e},{}),notifyPath:`${t}.values`};this.dispatchEvent(new CustomEvent("plugin-config-option-changed",{detail:i}))}_computeShowInputRow(e){return e?"hide":""}}customElements.define(qf.is,qf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Kf=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-subpage-styles">
    .inherited {
      color: var(--deemphasized-text-color);
      margin-left: var(--spacing-m);
    }
    section.section:not(.ARRAY) .title {
      align-items: center;
      display: flex;
    }
    section.section.ARRAY .title {
      padding-top: var(--spacing-m);
    }
  </style>
  <div class="gr-form-styles">
    <fieldset>
      <h4>[[pluginData.name]]</h4>
      <template is="dom-repeat" items="[[_pluginConfigOptions]]" as="option">
        <section class$="section [[option.info.type]]">
          <span class="title">
            <gr-tooltip-content
              has-tooltip="[[option.info.description]]"
              show-icon="[[option.info.description]]"
              title="[[option.info.description]]"
            >
              <span>[[option.info.display_name]]</span>
            </gr-tooltip-content>
          </span>
          <span class="value">
            <template is="dom-if" if="[[_isArray(option.info.type)]]">
              <gr-plugin-config-array-editor
                on-plugin-config-option-changed="_handleArrayChange"
                plugin-option="[[option]]"
              ></gr-plugin-config-array-editor>
            </template>
            <template is="dom-if" if="[[_isBoolean(option.info.type)]]">
              <paper-toggle-button
                checked="[[_computeChecked(option.info.value)]]"
                on-change="_handleBooleanChange"
                data-option-key$="[[option._key]]"
                disabled$="[[_computeDisabled(option.info.editable)]]"
              ></paper-toggle-button>
            </template>
            <template is="dom-if" if="[[_isList(option.info.type)]]">
              <gr-select
                bind-value$="[[option.info.value]]"
                on-change="_handleListChange"
              >
                <select
                  data-option-key$="[[option._key]]"
                  disabled$="[[_computeDisabled(option.info.editable)]]"
                >
                  <template
                    is="dom-repeat"
                    items="[[option.info.permitted_values]]"
                    as="value"
                  >
                    <option value$="[[value]]">[[value]]</option>
                  </template>
                </select>
              </gr-select>
            </template>
            <template is="dom-if" if="[[_isString(option.info.type)]]">
              <iron-input
                bind-value="[[option.info.value]]"
                on-input="_handleStringChange"
                data-option-key$="[[option._key]]"
                disabled$="[[_computeDisabled(option.info.editable)]]"
              >
                <input
                  is="iron-input"
                  value="[[option.info.value]]"
                  on-input="_handleStringChange"
                  data-option-key$="[[option._key]]"
                  disabled$="[[_computeDisabled(option.info.editable)]]"
                />
              </iron-input>
            </template>
            <template is="dom-if" if="[[option.info.inherited_value]]">
              <span class="inherited">
                (Inherited: [[option.info.inherited_value]])
              </span>
            </template>
          </span>
        </section>
      </template>
    </fieldset>
  </div>
`
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Yf={ENTRY_TYPES:{ARRAY:"ARRAY",BOOLEAN:"BOOLEAN",INT:"INT",LIST:"LIST",LONG:"LONG",STRING:"STRING"},PLUGIN_CONFIG_CHANGED:"plugin-config-changed"};window.Gerrit=window.Gerrit||{},window.Gerrit.RepoPluginConfig=Yf;
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xf extends(ra([Yf],Zn(na(Ka)))){static get template(){return Kf}static get is(){return"gr-repo-plugin-config"}static get properties(){return{pluginData:Object,_pluginConfigOptions:{type:Array,computed:"_computePluginConfigOptions(pluginData.*)"}}}_computePluginConfigOptions(e){if(!e||!e.base||!e.base.config)return[];const{config:t}=e.base;return Object.keys(t).map(e=>({_key:e,info:t[e]}))}_isArray(e){return e===this.ENTRY_TYPES.ARRAY}_isBoolean(e){return e===this.ENTRY_TYPES.BOOLEAN}_isList(e){return e===this.ENTRY_TYPES.LIST}_isString(e){return e===this.ENTRY_TYPES.STRING||e===this.ENTRY_TYPES.INT||e===this.ENTRY_TYPES.LONG}_computeDisabled(e){return"false"===e}_computeChecked(e="false"){return JSON.parse(e)}_handleStringChange(e){const t=Ui(e).localTarget,n=t.getAttribute("data-option-key"),i=this._buildConfigChangeInfo(t.value,n);this._handleChange(i)}_handleListChange(e){const t=Ui(e).localTarget,n=t.getAttribute("data-option-key"),i=this._buildConfigChangeInfo(t.value,n);this._handleChange(i)}_handleBooleanChange(e){const t=Ui(e).localTarget,n=t.getAttribute("data-option-key"),i=this._buildConfigChangeInfo(JSON.stringify(t.checked),n);this._handleChange(i)}_buildConfigChangeInfo(e,t){const n=this.pluginData.config[t];return n.value=e,{_key:t,info:n,notifyPath:`${t}.value`}}_handleArrayChange({detail:e}){this._handleChange(e)}_handleChange({_key:e,info:t,notifyPath:n}){const{name:i,config:s}=this.pluginData,a={name:i,config:Object.assign(s,{[e]:t},{}),notifyPath:`${i}.${n}`};this.dispatchEvent(new CustomEvent(this.PLUGIN_CONFIG_CHANGED,{detail:a,bubbles:!0,composed:!0}))}}customElements.define(Xf.is,Xf);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jf=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-subpage-styles">
    h2.edited:after {
      color: var(--deemphasized-text-color);
      content: ' *';
    }
    .loading,
    .hide {
      display: none;
    }
    #loading.loading {
      display: block;
    }
    #loading:not(.loading) {
      display: none;
    }
    #options .repositorySettings {
      display: none;
    }
    #options .repositorySettings.showConfig {
      display: block;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <main class="gr-form-styles read-only">
    <style include="shared-styles">
      /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
    </style>
    <div class="info">
      <h1 id="Title" class$="name">
        [[repo]]
        <hr />
      </h1>
      <div>
        <a href$="[[_computeChangesUrl(repo)]]">(view changes)</a>
      </div>
    </div>
    <div id="loading" class$="[[_computeLoadingClass(_loading)]]">
      Loading...
    </div>
    <div id="loadedContent" class$="[[_computeLoadingClass(_loading)]]">
      <div id="downloadContent" class$="[[_computeHideClass(_schemes)]]">
        <h2 id="download">Download</h2>
        <fieldset>
          <gr-download-commands
            id="downloadCommands"
            commands="[[_computeCommands(repo, _schemesObj, _selectedScheme)]]"
            schemes="[[_schemes]]"
            selected-scheme="{{_selectedScheme}}"
          ></gr-download-commands>
        </fieldset>
      </div>
      <h2 id="configurations" class$="[[_computeHeaderClass(_configChanged)]]">
        Configurations
      </h2>
      <div id="form">
        <fieldset>
          <h3 id="Description">Description</h3>
          <fieldset>
            <iron-autogrow-textarea
              id="descriptionInput"
              class="description"
              autocomplete="on"
              placeholder="<Insert repo description here>"
              bind-value="{{_repoConfig.description}}"
              disabled$="[[_readOnly]]"
            ></iron-autogrow-textarea>
          </fieldset>
          <h3 id="Options">Repository Options</h3>
          <fieldset id="options">
            <section>
              <span class="title">State</span>
              <span class="value">
                <gr-select id="stateSelect" bind-value="{{_repoConfig.state}}">
                  <select disabled$="[[_readOnly]]">
                    <template is="dom-repeat" items="[[_states]]">
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">Submit type</span>
              <span class="value">
                <gr-select
                  id="submitTypeSelect"
                  bind-value="{{_repoConfig.submit_type}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatSubmitTypeSelect(_repoConfig)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">Allow content merges</span>
              <span class="value">
                <gr-select
                  id="contentMergeSelect"
                  bind-value="{{_repoConfig.use_content_merge.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.use_content_merge)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">
                Create a new change for every commit not in the target branch
              </span>
              <span class="value">
                <gr-select
                  id="newChangeSelect"
                  bind-value="{{_repoConfig.create_new_change_for_all_not_in_target.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.create_new_change_for_all_not_in_target)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">Require Change-Id in commit message</span>
              <span class="value">
                <gr-select
                  id="requireChangeIdSelect"
                  bind-value="{{_repoConfig.require_change_id.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.require_change_id)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section
              id="enableSignedPushSettings"
              class$="repositorySettings [[_computeRepositoriesClass(_repoConfig.enable_signed_push)]]"
            >
              <span class="title">Enable signed push</span>
              <span class="value">
                <gr-select
                  id="enableSignedPush"
                  bind-value="{{_repoConfig.enable_signed_push.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.enable_signed_push)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section
              id="requireSignedPushSettings"
              class$="repositorySettings [[_computeRepositoriesClass(_repoConfig.require_signed_push)]]"
            >
              <span class="title">Require signed push</span>
              <span class="value">
                <gr-select
                  id="requireSignedPush"
                  bind-value="{{_repoConfig.require_signed_push.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.require_signed_push)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">
                Reject implicit merges when changes are pushed for review</span
              >
              <span class="value">
                <gr-select
                  id="rejectImplicitMergesSelect"
                  bind-value="{{_repoConfig.reject_implicit_merges.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.reject_implicit_merges)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">
                Enable adding unregistered users as reviewers and CCs on
                changes</span
              >
              <span class="value">
                <gr-select
                  id="unRegisteredCcSelect"
                  bind-value="{{_repoConfig.enable_reviewer_by_email.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.enable_reviewer_by_email)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title"> Set all new changes private by default</span>
              <span class="value">
                <gr-select
                  id="setAllnewChangesPrivateByDefaultSelect"
                  bind-value="{{_repoConfig.private_by_default.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.private_by_default)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">
                Set new changes to "work in progress" by default</span
              >
              <span class="value">
                <gr-select
                  id="setAllNewChangesWorkInProgressByDefaultSelect"
                  bind-value="{{_repoConfig.work_in_progress_by_default.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.work_in_progress_by_default)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">Maximum Git object size limit</span>
              <span class="value">
                <iron-input
                  id="maxGitObjSizeIronInput"
                  bind-value="{{_repoConfig.max_object_size_limit.configured_value}}"
                  type="text"
                  disabled$="[[_readOnly]]"
                >
                  <input
                    id="maxGitObjSizeInput"
                    bind-value="{{_repoConfig.max_object_size_limit.configured_value}}"
                    is="iron-input"
                    type="text"
                    disabled$="[[_readOnly]]"
                  />
                </iron-input>
                <template
                  is="dom-if"
                  if="[[_repoConfig.max_object_size_limit.value]]"
                >
                  effective: [[_repoConfig.max_object_size_limit.value]] bytes
                </template>
              </span>
            </section>
            <section>
              <span class="title"
                >Match authored date with committer date upon submit</span
              >
              <span class="value">
                <gr-select
                  id="matchAuthoredDateWithCommitterDateSelect"
                  bind-value="{{_repoConfig.match_author_to_committer_date.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.match_author_to_committer_date)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">Reject empty commit upon submit</span>
              <span class="value">
                <gr-select
                  id="rejectEmptyCommitSelect"
                  bind-value="{{_repoConfig.reject_empty_commit.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.reject_empty_commit)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
          </fieldset>
          <h3 id="Options">Contributor Agreements</h3>
          <fieldset id="agreements">
            <section>
              <span class="title">
                Require a valid contributor agreement to upload</span
              >
              <span class="value">
                <gr-select
                  id="contributorAgreementSelect"
                  bind-value="{{_repoConfig.use_contributor_agreements.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.use_contributor_agreements)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
            <section>
              <span class="title">Require Signed-off-by in commit message</span>
              <span class="value">
                <gr-select
                  id="useSignedOffBySelect"
                  bind-value="{{_repoConfig.use_signed_off_by.configured_value}}"
                >
                  <select disabled$="[[_readOnly]]">
                    <template
                      is="dom-repeat"
                      items="[[_formatBooleanSelect(_repoConfig.use_signed_off_by)]]"
                    >
                      <option value="[[item.value]]">[[item.label]]</option>
                    </template>
                  </select>
                </gr-select>
              </span>
            </section>
          </fieldset>
          <div
            class$="pluginConfig [[_computeHideClass(_pluginData)]]"
            on-plugin-config-changed="_handlePluginConfigChanged"
          >
            <h3>Plugins</h3>
            <template is="dom-repeat" items="[[_pluginData]]" as="data">
              <gr-repo-plugin-config
                plugin-data="[[data]]"
              ></gr-repo-plugin-config>
            </template>
          </div>
          <gr-button
            on-click="_handleSaveRepoConfig"
            disabled$="[[_computeButtonDisabled(_readOnly, _configChanged)]]"
            >Save changes</gr-button
          >
        </fieldset>
        <gr-endpoint-decorator name="repo-config">
          <gr-endpoint-param
            name="repoName"
            value="[[repo]]"
          ></gr-endpoint-param>
          <gr-endpoint-param
            name="readOnly"
            value="[[_readOnly]]"
          ></gr-endpoint-param>
        </gr-endpoint-decorator>
      </div>
    </div>
  </main>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Zf={active:{value:"ACTIVE",label:"Active"},readOnly:{value:"READ_ONLY",label:"Read Only"},hidden:{value:"HIDDEN",label:"Hidden"}},Qf={mergeIfNecessary:{value:"MERGE_IF_NECESSARY",label:"Merge if necessary"},fastForwardOnly:{value:"FAST_FORWARD_ONLY",label:"Fast forward only"},rebaseAlways:{value:"REBASE_ALWAYS",label:"Rebase Always"},rebaseIfNecessary:{value:"REBASE_IF_NECESSARY",label:"Rebase if necessary"},mergeAlways:{value:"MERGE_ALWAYS",label:"Merge always"},cherryPick:{value:"CHERRY_PICK",label:"Cherry pick"}};class eb extends(Zn(na(Ka))){static get template(){return Jf}static get is(){return"gr-repo"}static get properties(){return{params:Object,repo:String,_configChanged:{type:Boolean,value:!1},_loading:{type:Boolean,value:!0},_loggedIn:{type:Boolean,value:!1,observer:"_loggedInChanged"},_repoConfig:Object,_pluginData:{type:Array,computed:"_computePluginData(_repoConfig.plugin_config.*)"},_readOnly:{type:Boolean,value:!0},_states:{type:Array,value:()=>Object.values(Zf)},_submitTypes:{type:Array,value:()=>Object.values(Qf)},_schemes:{type:Array,value:()=>[],computed:"_computeSchemes(_schemesObj)",observer:"_schemesChanged"},_selectedCommand:{type:String,value:"Clone"},_selectedScheme:String,_schemesObj:Object}}static get observers(){return["_handleConfigChanged(_repoConfig.*)"]}attached(){super.attached(),this._loadRepo(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:this.repo},composed:!0,bubbles:!0}))}_computePluginData(e){if(!e||!e.base)return[];const t=e.base;return Object.keys(t).map(e=>({name:e,config:t[e]}))}_loadRepo(){if(!this.repo)return Promise.resolve();const e=[];return e.push(this._getLoggedIn().then(e=>{this._loggedIn=e,e&&this.$.restAPI.getRepoAccess(this.repo).then(e=>{if(!e)return Promise.resolve();this._readOnly=!e[this.repo].is_owner})})),e.push(this.$.restAPI.getProjectConfig(this.repo,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(e=>{if(!e)return Promise.resolve();e.default_submit_type&&(e.submit_type=e.default_submit_type.configured_value),e.state||(e.state=Zf.active.value),this._repoConfig=e,this._loading=!1})),e.push(this.$.restAPI.getConfig().then(e=>{if(!e)return Promise.resolve();this._schemesObj=e.download.schemes})),Promise.all(e)}_computeLoadingClass(e){return e?"loading":""}_computeHideClass(e){return e&&e.length?"":"hide"}_loggedInChanged(e){e&&this.$.restAPI.getPreferences().then(e=>{e.download_scheme&&(this._selectedScheme=e.download_scheme.toLowerCase())})}_formatBooleanSelect(e){if(!e)return;let t="Inherit";return void 0!==e.inherited_value&&(t=`Inherit (${e.inherited_value})`),[{label:t,value:"INHERIT"},{label:"True",value:"TRUE"},{label:"False",value:"FALSE"}]}_formatSubmitTypeSelect(e){if(!e)return;const t=Object.values(Qf),n=e.default_submit_type;if(!n)return t;let i="Inherit";if(n.inherited_value){let e=n.inherited_value;for(const i of t)if(i.value===n.inherited_value){e=i.label;break}i=`Inherit (${e})`}return[{label:i,value:"INHERIT"},...t]}_isLoading(){return this._loading||void 0===this._loading}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_formatRepoConfigForSave(e){const t={};for(const n in e)if(e.hasOwnProperty(n)){if("default_submit_type"===n)continue;"plugin_config"===n?t.plugin_config_values=e[n]:"object"==typeof e[n]?t[n]=e[n].configured_value:t[n]=e[n]}return t}_handleSaveRepoConfig(){return this.$.restAPI.saveRepoConfig(this.repo,this._formatRepoConfigForSave(this._repoConfig)).then(()=>{this._configChanged=!1})}_handleConfigChanged(){this._isLoading()||(this._configChanged=!0)}_computeButtonDisabled(e,t){return e||!t}_computeHeaderClass(e){return e?"edited":""}_computeSchemes(e){return Object.keys(e)}_schemesChanged(e){0!==e.length&&(e.includes(this._selectedScheme)||(this._selectedScheme=e.sort()[0]))}_computeCommands(e,t,n){if(!t||!e||!n)return[];const i=[];let s;t.hasOwnProperty(n)&&(s=t[n].clone_commands);for(const t in s)s.hasOwnProperty(t)&&i.push({title:t,command:s[t].replace(/\$\{project\}/gi,encodeURI(e)).replace(/\$\{project-base-name\}/gi,encodeURI(e.substring(e.lastIndexOf("/")+1)))});return i}_computeRepositoriesClass(e){return e?"showConfig":""}_computeChangesUrl(e){return um.getUrlForProjectChanges(e)}_handlePluginConfigChanged({detail:{name:e,config:t,notifyPath:n}}){this._repoConfig.plugin_config[e]=t,this.notifyPath("_repoConfig.plugin_config."+n)}}customElements.define(eb.is,eb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tb=za`
  <style include="shared-styles">
    :host {
      border-bottom: 1px solid var(--border-color);
      padding: var(--spacing-m);
      display: block;
    }
    #removeBtn {
      display: none;
    }
    .editing #removeBtn {
      display: flex;
    }
    #options {
      align-items: baseline;
      display: flex;
    }
    #options > * {
      margin-right: var(--spacing-m);
    }
    #mainContainer {
      align-items: baseline;
      display: flex;
      flex-wrap: nowrap;
      justify-content: space-between;
    }
    #deletedContainer.deleted {
      align-items: baseline;
      display: flex;
      justify-content: space-between;
    }
    #undoBtn,
    #force,
    #deletedContainer,
    #mainContainer.deleted {
      display: none;
    }
    #undoBtn.modified,
    #force.force {
      display: block;
    }
    .groupPath {
      color: var(--deemphasized-text-color);
    }
  </style>
  <style include="gr-form-styles">
    iron-autogrow-textarea {
      width: 14em;
    }
  </style>
  <div
    id="mainContainer"
    class$="gr-form-styles [[_computeSectionClass(editing, _deleted)]]"
  >
    <div id="options">
      <gr-select
        id="action"
        bind-value="{{rule.value.action}}"
        on-change="_handleValueChange"
      >
        <select disabled$="[[!editing]]">
          <template is="dom-repeat" items="[[_computeOptions(permission)]]">
            <option value="[[item]]">[[item]]</option>
          </template>
        </select>
      </gr-select>
      <template is="dom-if" if="[[label]]">
        <gr-select
          id="labelMin"
          bind-value="{{rule.value.min}}"
          on-change="_handleValueChange"
        >
          <select disabled$="[[!editing]]">
            <template is="dom-repeat" items="[[label.values]]">
              <option value="[[item.value]]">[[item.value]]</option>
            </template>
          </select>
        </gr-select>
        <gr-select
          id="labelMax"
          bind-value="{{rule.value.max}}"
          on-change="_handleValueChange"
        >
          <select disabled$="[[!editing]]">
            <template is="dom-repeat" items="[[label.values]]">
              <option value="[[item.value]]">[[item.value]]</option>
            </template>
          </select>
        </gr-select>
      </template>
      <template is="dom-if" if="[[hasRange]]">
        <iron-autogrow-textarea
          id="minInput"
          class="min"
          autocomplete="on"
          placeholder="Min value"
          bind-value="{{rule.value.min}}"
          disabled$="[[!editing]]"
        ></iron-autogrow-textarea>
        <iron-autogrow-textarea
          id="maxInput"
          class="max"
          autocomplete="on"
          placeholder="Max value"
          bind-value="{{rule.value.max}}"
          disabled$="[[!editing]]"
        ></iron-autogrow-textarea>
      </template>
      <a class="groupPath" href$="[[_computeGroupPath(groupId)]]">
        [[groupName]]
      </a>
      <gr-select
        id="force"
        class$="[[_computeForceClass(permission, rule.value.action)]]"
        bind-value="{{rule.value.force}}"
        on-change="_handleValueChange"
      >
        <select disabled$="[[!editing]]">
          <template
            is="dom-repeat"
            items="[[_computeForceOptions(permission, rule.value.action)]]"
          >
            <option value="[[item.value]]">[[item.name]]</option>
          </template>
        </select>
      </gr-select>
    </div>
    <gr-button link="" id="removeBtn" on-click="_handleRemoveRule"
      >Remove</gr-button
    >
  </div>
  <div
    id="deletedContainer"
    class$="gr-form-styles [[_computeSectionClass(editing, _deleted)]]"
  >
    [[groupName]] was deleted
    <gr-button link="" id="undoRemoveBtn" on-click="_handleUndoRemove"
      >Undo</gr-button
    >
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,nb={properties:{permissionValues:{type:Object,readOnly:!0,value:{abandon:{id:"abandon",name:"Abandon"},addPatchSet:{id:"addPatchSet",name:"Add Patch Set"},create:{id:"create",name:"Create Reference"},createTag:{id:"createTag",name:"Create Annotated Tag"},createSignedTag:{id:"createSignedTag",name:"Create Signed Tag"},delete:{id:"delete",name:"Delete Reference"},deleteChanges:{id:"deleteChanges",name:"Delete Changes"},deleteOwnChanges:{id:"deleteOwnChanges",name:"Delete Own Changes"},editAssignee:{id:"editAssignee",name:"Edit Assignee"},editHashtags:{id:"editHashtags",name:"Edit Hashtags"},editTopicName:{id:"editTopicName",name:"Edit Topic Name"},forgeAuthor:{id:"forgeAuthor",name:"Forge Author Identity"},forgeCommitter:{id:"forgeCommitter",name:"Forge Committer Identity"},forgeServerAsCommitter:{id:"forgeServerAsCommitter",name:"Forge Server Identity"},owner:{id:"owner",name:"Owner"},publishDrafts:{id:"publishDrafts",name:"Publish Drafts"},push:{id:"push",name:"Push"},pushMerge:{id:"pushMerge",name:"Push Merge Commit"},read:{id:"read",name:"Read"},rebase:{id:"rebase",name:"Rebase"},revert:{id:"revert",name:"Revert"},removeReviewer:{id:"removeReviewer",name:"Remove Reviewer"},submit:{id:"submit",name:"Submit"},submitAs:{id:"submitAs",name:"Submit (On Behalf Of)"},toggleWipState:{id:"toggleWipState",name:"Toggle Work In Progress State"},viewPrivateChanges:{id:"viewPrivateChanges",name:"View Private Changes"}}}},toSortedArray:e=>e?Object.keys(e).map(t=>({id:t,value:e[t]})).sort((e,t)=>e.id.localeCompare(t.id)):[]};window.Gerrit=window.Gerrit||{},window.Gerrit.AccessBehavior=nb;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ib=["BATCH","INTERACTIVE"],sb="ALLOW",ab="DENY",ob="BLOCK",rb=[sb,ab,ob],lb=[{name:"Allow pushing (but not force pushing)",value:!1},{name:"Allow pushing with or without force",value:!0}],cb=[{name:"Block pushing with or without force",value:!1},{name:"Block force pushing",value:!0}],db=[{name:"No Force Edit",value:!1},{name:"Force Edit",value:!0}];class hb extends(ra([nb,Go,L_],Zn(na(Ka)))){static get template(){return tb}static get is(){return"gr-rule-editor"}static get properties(){return{hasRange:Boolean,label:Object,editing:{type:Boolean,value:!1,observer:"_handleEditingChanged"},groupId:String,groupName:String,permission:String,rule:{type:Object,notify:!0},section:String,_deleted:{type:Boolean,value:!1},_originalRuleValues:Object}}static get observers(){return["_handleValueChange(rule.value.*)"]}created(){super.created(),this.addEventListener("access-saved",()=>this._handleAccessSaved())}ready(){super.ready(),this.rule&&this._setupValues(this.rule)}attached(){super.attached(),this.rule&&(this._originalRuleValues||this._setOriginalRuleValues(this.rule.value))}_setupValues(e){e.value||this._setDefaultRuleValues()}_computeForce(e,t){return this.permissionValues.push.id===e&&t!==ab||this.permissionValues.editTopicName.id===e}_computeForceClass(e,t){return this._computeForce(e,t)?"force":""}_computeGroupPath(e){return`${this.getBaseUrl()}/admin/groups/${this.encodeURL(e,!0)}`}_handleAccessSaved(){this._setOriginalRuleValues(this.rule.value)}_handleEditingChanged(e,t){t&&(e||this._handleUndoChange())}_computeSectionClass(e,t){const n=[];return e&&n.push("editing"),t&&n.push("deleted"),n.join(" ")}_computeForceOptions(e,t){return e===this.permissionValues.push.id?t===sb?lb:t===ob?cb:[]:e===this.permissionValues.editTopicName.id?db:[]}_getDefaultRuleValues(e,t){const n=sb,i={};return"priority"===e?(i.action=ib[0],i):(t?(i.min=t.values[0].value,i.max=t.values[t.values.length-1].value):this._computeForce(e,n)&&(i.force=this._computeForceOptions(e,n)[0].value),i.action=rb[0],i)}_setDefaultRuleValues(){this.set("rule.value",this._getDefaultRuleValues(this.permission,this.label))}_computeOptions(e){return"priority"===e?ib:rb}_handleRemoveRule(){this.rule.value.added&&this.dispatchEvent(new CustomEvent("added-rule-removed",{bubbles:!0,composed:!0})),this._deleted=!0,this.rule.value.deleted=!0,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0}))}_handleUndoRemove(){this._deleted=!1,delete this.rule.value.deleted}_handleUndoChange(){this.rule.value.added||(this.set("rule.value",Object.assign({},this._originalRuleValues)),this._deleted=!1,delete this.rule.value.deleted,delete this.rule.value.modified)}_handleValueChange(){this._originalRuleValues&&(this.rule.value.modified=!0,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0})))}_setOriginalRuleValues(e){this._originalRuleValues=Object.assign({},e)}}customElements.define(hb.is,hb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pb=za`
  <style include="shared-styles">
    :host {
      display: block;
      margin-bottom: var(--spacing-m);
    }
    .header {
      align-items: baseline;
      display: flex;
      justify-content: space-between;
      margin: var(--spacing-s) var(--spacing-m);
    }
    .rules {
      background: var(--table-header-background-color);
      border: 1px solid var(--border-color);
      border-bottom: 0;
    }
    .editing .rules {
      border-bottom: 1px solid var(--border-color);
    }
    .title {
      margin-bottom: var(--spacing-s);
    }
    #addRule,
    #removeBtn {
      display: none;
    }
    .right {
      display: flex;
      align-items: center;
    }
    .editing #removeBtn {
      display: block;
      margin-left: var(--spacing-xl);
    }
    .editing #addRule {
      display: block;
      padding: var(--spacing-m);
    }
    #deletedContainer,
    .deleted #mainContainer {
      display: none;
    }
    .deleted #deletedContainer {
      align-items: baseline;
      border: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-m);
    }
    #mainContainer {
      display: block;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-menu-page-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <section
    id="permission"
    class$="gr-form-styles [[_computeSectionClass(editing, _deleted)]]"
  >
    <div id="mainContainer">
      <div class="header">
        <span class="title">[[name]]</span>
        <div class="right">
          <template
            is="dom-if"
            if="[[!_permissionIsOwnerOrGlobal(permission.id, section)]]"
          >
            <paper-toggle-button
              id="exclusiveToggle"
              checked="{{permission.value.exclusive}}"
              on-change="_handleValueChange"
              disabled$="[[!editing]]"
            ></paper-toggle-button
            >Exclusive
          </template>
          <gr-button link="" id="removeBtn" on-click="_handleRemovePermission"
            >Remove</gr-button
          >
        </div>
      </div>
      <!-- end header -->
      <div class="rules">
        <template is="dom-repeat" items="{{_rules}}" as="rule">
          <gr-rule-editor
            has-range="[[_computeHasRange(name)]]"
            label="[[_label]]"
            editing="[[editing]]"
            group-id="[[rule.id]]"
            group-name="[[_computeGroupName(groups, rule.id)]]"
            permission="[[permission.id]]"
            rule="{{rule}}"
            section="[[section]]"
            on-added-rule-removed="_handleAddedRuleRemoved"
          ></gr-rule-editor>
        </template>
        <div id="addRule">
          <gr-autocomplete
            id="groupAutocomplete"
            text="{{_groupFilter}}"
            query="[[_query]]"
            placeholder="Add group"
            on-commit="_handleAddRuleItem"
          >
          </gr-autocomplete>
        </div>
        <!-- end addRule -->
      </div>
      <!-- end rules -->
    </div>
    <!-- end mainContainer -->
    <div id="deletedContainer">
      <span>[[name]] was deleted</span>
      <gr-button link="" id="undoRemoveBtn" on-click="_handleUndoRemove"
        >Undo</gr-button
      >
    </div>
    <!-- end deletedContainer -->
  </section>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,ub=["QUERY LIMIT","BATCH CHANGES LIMIT"];class mb extends(ra([nb],Zn(na(Ka)))){static get template(){return pb}static get is(){return"gr-permission"}static get properties(){return{labels:Object,name:String,permission:{type:Object,observer:"_sortPermission",notify:!0},groups:Object,section:String,editing:{type:Boolean,value:!1,observer:"_handleEditingChanged"},_label:{type:Object,computed:"_computeLabel(permission, labels)"},_groupFilter:String,_query:{type:Function,value(){return this._getGroupSuggestions.bind(this)}},_rules:Array,_groupsWithRules:Object,_deleted:{type:Boolean,value:!1},_originalExclusiveValue:Boolean}}static get observers(){return["_handleRulesChanged(_rules.splices)"]}created(){super.created(),this.addEventListener("access-saved",()=>this._handleAccessSaved())}ready(){super.ready(),this._setupValues()}_setupValues(){this.permission&&(this._originalExclusiveValue=!!this.permission.value.exclusive,Ii())}_handleAccessSaved(){this._setupValues()}_permissionIsOwnerOrGlobal(e,t){return"owner"===e||"GLOBAL_CAPABILITIES"===t}_handleEditingChanged(e,t){if(t&&!e){this._deleted=!1,delete this.permission.value.deleted,this._groupFilter="",this._rules=this._rules.filter(e=>!e.value.added);for(const e of Object.keys(this.permission.value.rules))this.permission.value.rules[e].added&&delete this.permission.value.rules[e];this.set(["permission","value","exclusive"],this._originalExclusiveValue)}}_handleAddedRuleRemoved(e){const t=e.model.index;this._rules=this._rules.slice(0,t).concat(this._rules.slice(t+1,this._rules.length))}_handleValueChange(){this.permission.value.modified=!0,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0}))}_handleRemovePermission(){this.permission.value.added&&this.dispatchEvent(new CustomEvent("added-permission-removed",{bubbles:!0,composed:!0})),this._deleted=!0,this.permission.value.deleted=!0,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0}))}_handleRulesChanged(e){this._groupsWithRules=this._computeGroupsWithRules(this._rules)}_sortPermission(e){this._rules=this.toSortedArray(e.value.rules)}_computeSectionClass(e,t){const n=[];return e&&n.push("editing"),t&&n.push("deleted"),n.join(" ")}_handleUndoRemove(){this._deleted=!1,delete this.permission.value.deleted}_computeLabel(e,t){if(!(t&&e&&e.value&&e.value.label))return;const n=e.value.label;return t[n]?{name:n,values:this._computeLabelValues(t[n].values)}:void 0}_computeLabelValues(e){const t=[],n=Object.keys(e).sort((e,t)=>parseInt(e,10)-parseInt(t,10));for(const i of n){let n=e[i];n||(n=""),t.push({value:parseInt(i,10),text:n})}return t}_computeGroupsWithRules(e){const t={};for(const n of e)t[n.id]=!0;return t}_computeGroupName(e,t){return e&&e[t]&&e[t].name?e[t].name:t}_getGroupSuggestions(){return this.$.restAPI.getSuggestedGroups(this._groupFilter,20).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:n,value:e[n]});return t.filter(e=>!this._groupsWithRules[e.value.id])})}_handleAddRuleItem(e){const t=decodeURIComponent(e.detail.value.id).replace(/\+/g," ");this.permission.value.rules[t]={},this.push("_rules",{id:t}),this.groups&&!this.groups[t]&&(this.groups[t]={name:this.$.groupAutocomplete.text}),Ii();const n=this._rules[this._rules.length-1].value;n.added=!0,this.permission.value.rules[t]=n,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0}))}_computeHasRange(e){return!!e&&ub.includes(e.toUpperCase())}}customElements.define(mb.is,mb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gb=za`
  <style include="shared-styles">
    :host {
      display: block;
      margin-bottom: var(--spacing-l);
    }
    fieldset {
      border: 1px solid var(--border-color);
    }
    .name {
      align-items: center;
      display: flex;
    }
    .header,
    #deletedContainer {
      align-items: center;
      background: var(--table-header-background-color);
      border-bottom: 1px dotted var(--border-color);
      display: flex;
      justify-content: space-between;
      min-height: 3em;
      padding: 0 var(--spacing-m);
    }
    #deletedContainer {
      border-bottom: 0;
    }
    .sectionContent {
      padding: var(--spacing-m);
    }
    #editBtn,
    .editing #editBtn.global,
    #deletedContainer,
    .deleted #mainContainer,
    #addPermission,
    #deleteBtn,
    .editingRef .name,
    .editRefInput {
      display: none;
    }
    .editing #editBtn,
    .editingRef .editRefInput {
      display: flex;
    }
    .deleted #deletedContainer {
      display: flex;
    }
    .editing #addPermission,
    #mainContainer,
    .editing #deleteBtn {
      display: block;
    }
    .editing #deleteBtn,
    #undoRemoveBtn {
      padding-right: var(--spacing-m);
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <fieldset
    id="section"
    class$="gr-form-styles [[_computeSectionClass(editing, canUpload, ownerOf, _editingRef, _deleted)]]"
  >
    <div id="mainContainer">
      <div class="header">
        <div class="name">
          <h3>[[_computeSectionName(section.id)]]</h3>
          <gr-button
            id="editBtn"
            link=""
            class$="[[_computeEditBtnClass(section.id)]]"
            on-click="editReference"
          >
            <iron-icon id="icon" icon="gr-icons:create"></iron-icon>
          </gr-button>
        </div>
        <iron-input
          class="editRefInput"
          bind-value="{{section.id}}"
          type="text"
          on-input="_handleValueChange"
        >
          <input
            class="editRefInput"
            bind-value="{{section.id}}"
            is="iron-input"
            type="text"
            on-input="_handleValueChange"
          />
        </iron-input>
        <gr-button link="" id="deleteBtn" on-click="_handleRemoveReference"
          >Remove</gr-button
        >
      </div>
      <!-- end header -->
      <div class="sectionContent">
        <template is="dom-repeat" items="{{_permissions}}" as="permission">
          <gr-permission
            name="[[_computePermissionName(section.id, permission, permissionValues, capabilities)]]"
            permission="{{permission}}"
            labels="[[labels]]"
            section="[[section.id]]"
            editing="[[editing]]"
            groups="[[groups]]"
            on-added-permission-removed="_handleAddedPermissionRemoved"
          >
          </gr-permission>
        </template>
        <div id="addPermission">
          Add permission:
          <select id="permissionSelect">
            <!-- called with a third parameter so that permissions update
                  after a new section is added. -->
            <template
              is="dom-repeat"
              items="[[_computePermissions(section.id, capabilities, labels, section.value.permissions.*)]]"
            >
              <option value="[[item.value.id]]">[[item.value.name]]</option>
            </template>
          </select>
          <gr-button link="" id="addBtn" on-click="_handleAddPermission"
            >Add</gr-button
          >
        </div>
        <!-- end addPermission -->
      </div>
      <!-- end sectionContent -->
    </div>
    <!-- end mainContainer -->
    <div id="deletedContainer">
      <span>[[_computeSectionName(section.id)]] was deleted</span>
      <gr-button link="" id="undoRemoveBtn" on-click="_handleUndoRemove"
        >Undo</gr-button
      >
    </div>
    <!-- end deletedContainer -->
  </fieldset>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,_b="GLOBAL_CAPABILITIES";class fb extends(ra([nb],Zn(na(Ka)))){static get template(){return gb}static get is(){return"gr-access-section"}static get properties(){return{capabilities:Object,section:{type:Object,notify:!0,observer:"_updateSection"},groups:Object,labels:Object,editing:{type:Boolean,value:!1,observer:"_handleEditingChanged"},canUpload:Boolean,ownerOf:Array,_originalId:String,_editingRef:{type:Boolean,value:!1},_deleted:{type:Boolean,value:!1},_permissions:Array}}created(){super.created(),this.addEventListener("access-saved",()=>this._handleAccessSaved())}_updateSection(e){this._permissions=this.toSortedArray(e.value.permissions),this._originalId=e.id}_handleAccessSaved(){this._updateSection(this.section)}_handleValueChange(){this.section.value.added||(this.section.value.modified=this.section.id!==this._originalId,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0}))),this.section.value.updatedId=this.section.id}_handleEditingChanged(e,t){if(t&&!e){this._editingRef=!1,this._deleted=!1,delete this.section.value.deleted,this.set(["section","id"],this._originalId),this._permissions=this._permissions.filter(e=>!e.value.added);for(const e of Object.keys(this.section.value.permissions))this.section.value.permissions[e].added&&delete this.section.value.permissions[e]}}_computePermissions(e,t,n){let i;if(!this.section||!this.section.value)return[];if(e===_b)i=this.toSortedArray(t);else{i=this._computeLabelOptions(n).concat(this.toSortedArray(this.permissionValues))}return i.filter(e=>!this.section.value.permissions[e.id])}_computeHideEditClass(e){return"GLOBAL_CAPABILITIES"===e.id?"hide":""}_handleAddedPermissionRemoved(e){const t=e.model.index;this._permissions=this._permissions.slice(0,t).concat(this._permissions.slice(t+1,this._permissions.length))}_computeLabelOptions(e){const t=[];if(!e)return[];for(const n of Object.keys(e))t.push({id:"label-"+n,value:{name:`Label ${n}`,id:"label-"+n}}),t.push({id:"labelAs-"+n,value:{name:`Label ${n} (On Behalf Of)`,id:"labelAs-"+n}});return t}_computePermissionName(e,t,n,i){if(e===_b)return i[t.id].name;if(n[t.id])return n[t.id].name;if(t.value.label){let e="";return t.id.startsWith("labelAs-")&&(e="(On Behalf Of)"),`Label ${t.value.label}${e}`}}_computeSectionName(e){return e||(this._editingRef=!0,e="refs/heads/*",this.set("section.id",e)),e===_b?"Global Capabilities":e.startsWith("refs/")?`Reference: ${e}`:e}_handleRemoveReference(){this.section.value.added&&this.dispatchEvent(new CustomEvent("added-section-removed",{bubbles:!0,composed:!0})),this._deleted=!0,this.section.value.deleted=!0,this.dispatchEvent(new CustomEvent("access-modified",{bubbles:!0,composed:!0}))}_handleUndoRemove(){this._deleted=!1,delete this.section.value.deleted}editRefInput(){return Ui(this.root).querySelector(Ka?"iron-input.editRefInput":"input[is=iron-input].editRefInput")}editReference(){this._editingRef=!0,this.editRefInput().focus()}_isEditEnabled(e,t,n){return e||t&&t.indexOf(n)>=0}_computeSectionClass(e,t,n,i,s){const a=[];return e&&this._isEditEnabled(t,n,this.section.id)&&a.push("editing"),i&&a.push("editingRef"),s&&a.push("deleted"),a.join(" ")}_computeEditBtnClass(e){return e===_b?"global":""}_handleAddPermission(){const e=this.$.permissionSelect.value,t={id:e,value:{rules:{},added:!0}};e.startsWith("label")&&(t.value.label=e.replace("label-","").replace("labelAs-","")),this.push("_permissions",t),this.set(["section.value.permissions",t.id],t.value)}}customElements.define(fb.is,fb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bb=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-subpage-styles">
    gr-button,
    #inheritsFrom,
    #editInheritFromInput,
    .editing #inheritFromName,
    .weblinks,
    .editing .invisible {
      display: none;
    }
    #inheritsFrom.show {
      display: flex;
      min-height: 2em;
      align-items: center;
    }
    .weblink {
      margin-right: var(--spacing-xs);
    }
    .weblinks.show,
    .referenceContainer {
      display: block;
    }
    .rightsText {
      margin-right: var(--spacing-s);
    }

    .editing gr-button,
    .admin #editBtn {
      display: inline-block;
      margin: var(--spacing-l) 0;
    }
    .editing #editInheritFromInput {
      display: inline-block;
    }
  </style>
  <style include="gr-menu-page-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <main class$="[[_computeMainClass(_ownerOf, _canUpload, _editing)]]">
    <div id="loading" class$="[[_computeLoadingClass(_loading)]]">
      Loading...
    </div>
    <div id="loadedContent" class$="[[_computeLoadingClass(_loading)]]">
      <h3 id="inheritsFrom" class$="[[_computeShowInherit(_inheritsFrom)]]">
        <span class="rightsText">Rights Inherit From</span>
        <a
          href$="[[_computeParentHref(_inheritsFrom.name)]]"
          rel="noopener"
          id="inheritFromName"
        >
          [[_inheritsFrom.name]]</a
        >
        <gr-autocomplete
          id="editInheritFromInput"
          text="{{_inheritFromFilter}}"
          query="[[_query]]"
          on-commit="_handleUpdateInheritFrom"
        ></gr-autocomplete>
      </h3>
      <div class$="weblinks [[_computeWebLinkClass(_weblinks)]]">
        History:
        <template is="dom-repeat" items="[[_weblinks]]" as="link">
          <a
            href="[[link.url]]"
            class="weblink"
            rel="noopener"
            target="[[link.target]]"
          >
            [[link.name]]
          </a>
        </template>
      </div>
      <gr-button id="editBtn" on-click="_handleEdit"
        >[[_editOrCancel(_editing)]]</gr-button
      >
      <gr-button
        id="saveBtn"
        primary=""
        class$="[[_computeSaveBtnClass(_ownerOf)]]"
        on-click="_handleSave"
        disabled="[[!_modified]]"
        >Save</gr-button
      >
      <gr-button
        id="saveReviewBtn"
        primary=""
        class$="[[_computeSaveReviewBtnClass(_canUpload)]]"
        on-click="_handleSaveForReview"
        disabled="[[!_modified]]"
        >Save for review</gr-button
      >
      <template
        is="dom-repeat"
        items="{{_sections}}"
        initial-count="5"
        target-framerate="60"
        as="section"
      >
        <gr-access-section
          capabilities="[[_capabilities]]"
          section="{{section}}"
          labels="[[_labels]]"
          can-upload="[[_canUpload]]"
          editing="[[_editing]]"
          owner-of="[[_ownerOf]]"
          groups="[[_groups]]"
          on-added-section-removed="_handleAddedSectionRemoved"
        ></gr-access-section>
      </template>
      <div class="referenceContainer">
        <gr-button id="addReferenceBtn" on-click="_handleCreateSection"
          >Add Reference</gr-button
        >
      </div>
    </div>
  </main>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class vb extends(ra([nb,Go,L_],Zn(na(Ka)))){static get template(){return bb}static get is(){return"gr-repo-access"}static get properties(){return{repo:{type:String,observer:"_repoChanged"},path:String,_canUpload:{type:Boolean,value:!1},_inheritFromFilter:String,_query:{type:Function,value(){return this._getInheritFromSuggestions.bind(this)}},_ownerOf:Array,_capabilities:Object,_groups:Object,_inheritsFrom:Object,_labels:Object,_local:Object,_editing:{type:Boolean,value:!1,observer:"_handleEditingChanged"},_modified:{type:Boolean,value:!1},_sections:Array,_weblinks:Array,_loading:{type:Boolean,value:!0}}}created(){super.created(),this.addEventListener("access-modified",()=>this._handleAccessModified())}_handleAccessModified(){this._modified=!0}_repoChanged(e){return this._loading=!0,e?this._reload(e):Promise.resolve()}_reload(e){const t=[],n=e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))};return this._editing=!1,this._sections=[],t.push(this.$.restAPI.getRepoAccessRights(e,n).then(e=>e?(this._inheritsFrom=e.inherits_from?Object.assign({},e.inherits_from):null,this._originalInheritsFrom=e.inherits_from?Object.assign({},e.inherits_from):null,this._inheritFromFilter=e.inherits_from?this._inheritsFrom.name:"",this._local=e.local,this._groups=e.groups,this._weblinks=e.config_web_links||[],this._canUpload=e.can_upload,this._ownerOf=e.owner_of||[],this.toSortedArray(this._local)):Promise.resolve())),t.push(this.$.restAPI.getCapabilities(n).then(e=>e||Promise.resolve())),t.push(this.$.restAPI.getRepo(e,n).then(e=>e?e.labels:Promise.resolve())),Promise.all(t).then(([e,t,n])=>{this._capabilities=t,this._labels=n,this._sections=e,this._loading=!1})}_handleUpdateInheritFrom(e){this._inheritsFrom||(this._inheritsFrom={}),this._inheritsFrom.id=e.detail.value,this._inheritsFrom.name=this._inheritFromFilter,this._handleAccessModified()}_getInheritFromSuggestions(){return this.$.restAPI.getRepos(this._inheritFromFilter,50).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:e[n].name,value:e[n].id});return t})}_computeLoadingClass(e){return e?"loading":""}_handleEdit(){this._editing=!this._editing}_editOrCancel(e){return e?"Cancel":"Edit"}_computeWebLinkClass(e){return e&&e.length?"show":""}_computeShowInherit(e){return e?"show":""}_handleAddedSectionRemoved(e){const t=e.model.index;this._sections=this._sections.slice(0,t).concat(this._sections.slice(t+1,this._sections.length))}_handleEditingChanged(e,t){if(t&&!e){this._sections&&(this._sections=this._sections.filter(e=>!e.value.added)),this._inheritsFrom&&(this._inheritsFrom=Object.assign({},this._originalInheritsFrom),this._inheritFromFilter=this._inheritsFrom.name);for(const e of Object.keys(this._local))this._local[e].added&&delete this._local[e]}}_updateAddRemoveObj(e,t,n,i){let s=e[n];for(const e of t)s[e]||(e===t[t.length-1]&&"remove"===n?"permissions"===t[t.length-2]?s[e]={rules:{}}:1===t.length?s[e]={permissions:{}}:s[e]={}:e===t[t.length-1]&&"add"===n?s[e]=i:s[e]={}),s=s[e];return e}_recursivelyRemoveDeleted(e){for(const t in e)if(e.hasOwnProperty(t)&&"object"==typeof e[t]){if(e[t].deleted)return void delete e[t];this._recursivelyRemoveDeleted(e[t])}}_recursivelyUpdateAddRemoveObj(e,t,n=[]){for(const i in e)if(e.hasOwnProperty(i)&&"object"==typeof e[i]){const s=e[i].updatedId,a=s||i;if(e[i].deleted){this._updateAddRemoveObj(t,n.concat(i),"remove");continue}if(e[i].modified){this._updateAddRemoveObj(t,n.concat(i),"remove"),this._updateAddRemoveObj(t,n.concat(a),"add",e[i]),s&&s!==i&&this._recursivelyRemoveDeleted(t.add[s]);continue}if(e[i].added){this._updateAddRemoveObj(t,n.concat(a),"add",e[i]),this._recursivelyRemoveDeleted(t.add[i]);continue}this._recursivelyUpdateAddRemoveObj(e[i],t,n.concat(i))}}_computeAddAndRemove(){const e={add:{},remove:{}},t=this._originalInheritsFrom?this.singleDecodeURL(this._originalInheritsFrom.id):null,n=this._inheritsFrom?this.singleDecodeURL(this._inheritsFrom.id):null,i=t&&t!==n||!t&&n;return this._recursivelyUpdateAddRemoveObj(this._local,e),i&&(e.parent=n),e}_handleCreateSection(){let e="refs/for/*";for(;this._local[e];)e=`${e}*`;const t={permissions:{},added:!0};this.push("_sections",{id:e,value:t}),this.set(["_local",e],t),Ii(),Ui(this.root).querySelector("gr-access-section:last-of-type").editReference()}_getObjforSave(){const e=this._computeAddAndRemove();if(!Object.keys(e.add).length&&!Object.keys(e.remove).length&&!e.parent)return void this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"No changes to save."},bubbles:!0,composed:!0}));const t={add:e.add,remove:e.remove};return e.parent&&(t.parent=e.parent),t}_handleSave(e){const t=this._getObjforSave();if(!t)return;const n=e&&e.target;return n&&(n.loading=!0),this.$.restAPI.setRepoAccessRights(this.repo,t).then(()=>{this._reload(this.repo)}).finally(()=>{this._modified=!1,n&&(n.loading=!1)})}_handleSaveForReview(e){const t=this._getObjforSave();if(!t)return;const n=e&&e.target;return n&&(n.loading=!0),this.$.restAPI.setRepoAccessRightsForReview(this.repo,t).then(e=>{um.navigateToChange(e)}).finally(()=>{this._modified=!1,n&&(n.loading=!1)})}_computeSaveReviewBtnClass(e){return e?"":"invisible"}_computeSaveBtnClass(e){return e&&0===e.length?"invisible":""}_computeMainClass(e,t,n){const i=[];return(e&&e.length>0||t)&&i.push("admin"),n&&i.push("editing"),i.join(" ")}_computeParentHref(e){return this.getBaseUrl()+`/admin/repos/${this.encodeURL(e,!0)},access`}}customElements.define(vb.is,vb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const yb=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    input:not([type='checkbox']),
    gr-autocomplete,
    iron-autogrow-textarea {
      width: 100%;
    }
    .value {
      width: 32em;
    }
    .hide {
      display: none;
    }
    @media only screen and (max-width: 40em) {
      .value {
        width: 29em;
      }
    }
  </style>
  <div class="gr-form-styles">
    <section class$="[[_computeBranchClass(baseChange)]]">
      <span class="title">Select branch for new change</span>
      <span class="value">
        <gr-autocomplete
          id="branchInput"
          text="{{branch}}"
          query="[[_query]]"
          placeholder="Destination branch"
        >
        </gr-autocomplete>
      </span>
    </section>
    <section class$="[[_computeBranchClass(baseChange)]]">
      <span class="title">Provide base commit sha1 for change</span>
      <span class="value">
        <iron-input
          maxlength="40"
          placeholder="(optional)"
          bind-value="{{baseCommit}}"
        >
          <input
            is="iron-input"
            id="baseCommitInput"
            maxlength="40"
            placeholder="(optional)"
            bind-value="{{baseCommit}}"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Enter topic for new change</span>
      <span class="value">
        <iron-input
          maxlength="1024"
          placeholder="(optional)"
          bind-value="{{topic}}"
        >
          <input
            is="iron-input"
            id="tagNameInput"
            maxlength="1024"
            placeholder="(optional)"
            bind-value="{{topic}}"
          />
        </iron-input>
      </span>
    </section>
    <section id="description">
      <span class="title">Description</span>
      <span class="value">
        <iron-autogrow-textarea
          id="messageInput"
          class="message"
          autocomplete="on"
          rows="4"
          max-rows="15"
          bind-value="{{subject}}"
          placeholder="Insert the description of the change."
        >
        </iron-autogrow-textarea>
      </span>
    </section>
    <section class$="[[_computePrivateSectionClass(_privateChangesEnabled)]]">
      <label class="title" for="privateChangeCheckBox">Private change</label>
      <span class="value">
        <input
          type="checkbox"
          id="privateChangeCheckBox"
          checked$="[[_formatBooleanString(privateByDefault)]]"
        />
      </span>
    </section>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class wb extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return yb}static get is(){return"gr-create-change-dialog"}static get properties(){return{repoName:String,branch:String,_repoConfig:Object,subject:String,topic:String,_query:{type:Function,value(){return this._getRepoBranchesSuggestions.bind(this)}},baseChange:String,baseCommit:String,privateByDefault:String,canCreate:{type:Boolean,notify:!0,value:!1},_privateChangesEnabled:Boolean}}attached(){if(super.attached(),!this.repoName)return Promise.resolve();const e=[];return e.push(this.$.restAPI.getProjectConfig(this.repoName).then(e=>{this.privateByDefault=e.private_by_default})),e.push(this.$.restAPI.getConfig().then(e=>{e&&(this._privateConfig=e&&e.change&&e.change.disable_private_changes)})),Promise.all(e)}static get observers(){return["_allowCreate(branch, subject)"]}_computeBranchClass(e){return e?"hide":""}_allowCreate(e,t){this.canCreate=!!e&&!!t}handleCreateChange(){const e=this.$.privateChangeCheckBox.checked;return this.$.restAPI.createChange(this.repoName,this.branch,this.subject,this.topic,e,!0,this.baseChange,this.baseCommit||null).then(e=>{e&&um.navigateToChange(e)})}_getRepoBranchesSuggestions(e){return e.startsWith("refs/heads/")&&(e=e.substring("refs/heads/".length)),this.$.restAPI.getRepoBranches(e,this.repoName,15).then(e=>{const t=[];let n;for(const i in e)e.hasOwnProperty(i)&&(n=e[i].ref.startsWith("refs/heads/")?e[i].ref.substring("refs/heads/".length):e[i].ref,t.push({name:n}));return t})}_formatBooleanString(e){return!(!e||"TRUE"!==e.configured_value)||(!e||"FALSE"!==e.configured_value)&&(!(!e||"INHERIT"!==e.configured_value)&&!(!e||!e.inherited_value))}_computePrivateSectionClass(e){return e?"hide":""}}customElements.define(wb.is,wb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cb=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-subpage-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <main class="gr-form-styles read-only">
    <h1 id="Title">Repository Commands</h1>
    <div id="loading" class$="[[_computeLoadingClass(_loading)]]">
      Loading...
    </div>
    <div id="loadedContent" class$="[[_computeLoadingClass(_loading)]]">
      <h2 id="options">Command</h2>
      <div id="form">
        <gr-repo-command
          title="Create change"
          on-command-tap="_createNewChange"
        >
        </gr-repo-command>
        <gr-repo-command
          id="editRepoConfig"
          title="Edit repo config"
          on-command-tap="_handleEditRepoConfig"
        >
        </gr-repo-command>
        <gr-repo-command
          title="[[_repoConfig.actions.gc.label]]"
          tooltip="[[_repoConfig.actions.gc.title]]"
          hidden$="[[!_repoConfig.actions.gc.enabled]]"
          on-command-tap="_handleRunningGC"
        >
        </gr-repo-command>
        <gr-endpoint-decorator name="repo-command">
          <gr-endpoint-param name="config" value="[[_repoConfig]]">
          </gr-endpoint-param>
          <gr-endpoint-param name="repoName" value="[[repo]]">
          </gr-endpoint-param>
        </gr-endpoint-decorator>
      </div>
    </div>
  </main>
  <gr-overlay id="createChangeOverlay" with-backdrop="">
    <gr-dialog
      id="createChangeDialog"
      confirm-label="Create"
      disabled="[[!_canCreate]]"
      on-confirm="_handleCreateChange"
      on-cancel="_handleCloseCreateChange"
    >
      <div class="header" slot="header">
        Create Change
      </div>
      <div class="main" slot="main">
        <gr-create-change-dialog
          id="createNewChangeModal"
          can-create="{{_canCreate}}"
          repo-name="[[repo]]"
        ></gr-create-change-dialog>
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Eb extends(Zn(na(Ka))){static get template(){return Cb}static get is(){return"gr-repo-commands"}static get properties(){return{params:Object,repo:String,_loading:{type:Boolean,value:!0},_repoConfig:Object,_canCreate:Boolean}}attached(){super.attached(),this._loadRepo(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Repo Commands"},composed:!0,bubbles:!0}))}_loadRepo(){if(!this.repo)return Promise.resolve();return this.$.restAPI.getProjectConfig(this.repo,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(e=>{if(!e)return Promise.resolve();this._repoConfig=e,this._loading=!1})}_computeLoadingClass(e){return e?"loading":""}_isLoading(){return this._loading||void 0===this._loading}_handleRunningGC(){return this.$.restAPI.runRepoGC(this.repo).then(e=>{200===e.status&&this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Garbage collection completed successfully."},bubbles:!0,composed:!0}))})}_createNewChange(){this.$.createChangeOverlay.open()}_handleCreateChange(){this.$.createNewChangeModal.handleCreateChange(),this._handleCloseCreateChange()}_handleCloseCreateChange(){this.$.createChangeOverlay.close()}_handleEditRepoConfig(){return this.$.restAPI.createChange(this.repo,"refs/meta/config","Edit Repo Config",void 0,!1,!0).then(e=>{const t=e?"Navigating to change":"Failed to create change.";this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:t},bubbles:!0,composed:!0})),e&&um.navigateToRelativeUrl(um.getEditUrlForDiff(e,"project.config",1))})}}customElements.define(Eb.is,Eb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sb=za`
  <style include="shared-styles">
    :host {
      display: block;
      margin-bottom: var(--spacing-xxl);
    }
    .loading #dashboards,
    #loadingContainer {
      display: none;
    }
    .loading #loadingContainer {
      display: block;
    }
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <table id="list" class$="genericList [[_computeLoadingClass(_loading)]]">
    <tbody>
      <tr class="headerRow">
        <th class="topHeader">Dashboard name</th>
        <th class="topHeader">Dashboard title</th>
        <th class="topHeader">Dashboard description</th>
        <th class="topHeader">Inherited from</th>
        <th class="topHeader">Default</th>
      </tr>
      <tr id="loadingContainer">
        <td>Loading...</td>
      </tr>
    </tbody>
    <tbody id="dashboards">
      <template is="dom-repeat" items="[[_dashboards]]">
        <tr class="groupHeader">
          <td colspan="5">[[item.section]]</td>
        </tr>
        <template is="dom-repeat" items="[[item.dashboards]]">
          <tr class="table">
            <td class="name">
              <a href$="[[_getUrl(item.project, item.id)]]">[[item.path]]</a>
            </td>
            <td class="title">[[item.title]]</td>
            <td class="desc">[[item.description]]</td>
            <td class="inherited">
              [[_computeInheritedFrom(item.project, item.defining_project)]]
            </td>
            <td class="default">[[_computeIsDefault(item.is_default)]]</td>
          </tr>
        </template>
      </template>
    </tbody>
  </table>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class xb extends(Zn(na(Ka))){static get template(){return Sb}static get is(){return"gr-repo-dashboards"}static get properties(){return{repo:{type:String,observer:"_repoChanged"},_loading:{type:Boolean,value:!0},_dashboards:Array}}_repoChanged(e){if(this._loading=!0,!e)return Promise.resolve();this.$.restAPI.getRepoDashboards(this.repo,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(e=>{if(!e)return Promise.resolve();const t=e.concat.apply([],e).sort((e,t)=>e.id<t.id?-1:1),n={};t.forEach(e=>{n[e.ref]||(n[e.ref]=[]),n[e.ref].push(e)});const i=[];Object.keys(n).sort().forEach(e=>{i.push({section:e,dashboards:n[e]})}),this._dashboards=i,this._loading=!1,Ii()})}_getUrl(e,t){return e&&t?um.getUrlForRepoDashboard(e,t):""}_computeLoadingClass(e){return e?"loading":""}_computeInheritedFrom(e,t){return e===t?"":t}_computeIsDefault(e){return e?"✓":""}}customElements.define(xb.is,xb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ab=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    :host {
      display: inline-block;
    }
    input {
      width: 20em;
    }
    /* Add css selector with #id to increase priority
      (otherwise ".gr-form-styles section" rule wins) */
    .hideItem,
    #itemAnnotationSection.hideItem {
      display: none;
    }
  </style>
  <div class="gr-form-styles">
    <div id="form">
      <section id="itemNameSection">
        <span class="title">[[detailType]] name</span>
        <iron-input
          placeholder="[[detailType]] Name"
          bind-value="{{_itemName}}"
        >
          <input
            is="iron-input"
            placeholder="[[detailType]] Name"
            bind-value="{{_itemName}}"
          />
        </iron-input>
      </section>
      <section id="itemRevisionSection">
        <span class="title">Initial Revision</span>
        <iron-input
          placeholder="Revision (Branch or SHA-1)"
          bind-value="{{_itemRevision}}"
        >
          <input
            is="iron-input"
            placeholder="Revision (Branch or SHA-1)"
            bind-value="{{_itemRevision}}"
          />
        </iron-input>
      </section>
      <section
        id="itemAnnotationSection"
        class$="[[_computeHideItemClass(itemDetail)]]"
      >
        <span class="title">Annotation</span>
        <iron-input
          placeholder="Annotation (Optional)"
          bind-value="{{_itemAnnotation}}"
        >
          <input
            is="iron-input"
            placeholder="Annotation (Optional)"
            bind-value="{{_itemAnnotation}}"
          />
        </iron-input>
      </section>
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Pb="branches",kb="tags";class Tb extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return Ab}static get is(){return"gr-create-pointer-dialog"}static get properties(){return{detailType:String,repoName:String,hasNewItemName:{type:Boolean,notify:!0,value:!1},itemDetail:String,_itemName:String,_itemRevision:String,_itemAnnotation:String}}static get observers(){return["_updateItemName(_itemName)"]}_updateItemName(e){this.hasNewItemName=!!e}_computeItemUrl(e){return this.itemDetail===Pb?this.getBaseUrl()+"/admin/repos/"+this.encodeURL(this.repoName,!0)+",branches":this.itemDetail===kb?this.getBaseUrl()+"/admin/repos/"+this.encodeURL(this.repoName,!0)+",tags":void 0}handleCreateItem(){const e=this._itemRevision?this._itemRevision:"HEAD";return this.itemDetail===Pb?this.$.restAPI.createRepoBranch(this.repoName,this._itemName,{revision:e}).then(e=>{201===e.status&&_p.show(this._computeItemUrl(this.itemDetail))}):this.itemDetail===kb?this.$.restAPI.createRepoTag(this.repoName,this._itemName,{revision:e,message:this._itemAnnotation||null}).then(e=>{201===e.status&&_p.show(this._computeItemUrl(this.itemDetail))}):void 0}_computeHideItemClass(e){return e===Pb?"hideItem":""}}customElements.define(Tb.is,Tb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ib=za`
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    .tags td.name {
      min-width: 25em;
    }
    td.name,
    td.revision,
    td.message {
      word-break: break-word;
    }
    td.revision.tags {
      width: 27em;
    }
    td.message,
    td.tagger {
      max-width: 15em;
    }
    .editing .editItem {
      display: inherit;
    }
    .editItem,
    .editing .editBtn,
    .canEdit .revisionNoEditing,
    .editing .revisionWithEditing,
    .revisionEdit,
    .hideItem {
      display: none;
    }
    .revisionEdit gr-button {
      margin-left: var(--spacing-m);
    }
    .editBtn {
      margin-left: var(--spacing-l);
    }
    .canEdit .revisionEdit {
      align-items: center;
      display: flex;
    }
    .deleteButton:not(.show) {
      display: none;
    }
    .tagger.hide {
      display: none;
    }
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <gr-list-view
    create-new="[[_loggedIn]]"
    filter="[[_filter]]"
    items-per-page="[[_itemsPerPage]]"
    items="[[_items]]"
    loading="[[_loading]]"
    offset="[[_offset]]"
    on-create-clicked="_handleCreateClicked"
    path="[[_getPath(_repo, detailType)]]"
  >
    <table id="list" class="genericList gr-form-styles">
      <tbody>
        <tr class="headerRow">
          <th class="name topHeader">Name</th>
          <th class="revision topHeader">Revision</th>
          <th class$="message topHeader [[_hideIfBranch(detailType)]]">
            Message
          </th>
          <th class$="tagger topHeader [[_hideIfBranch(detailType)]]">
            Tagger
          </th>
          <th class="repositoryBrowser topHeader">
            Repository Browser
          </th>
          <th class="delete topHeader"></th>
        </tr>
        <tr id="loading" class$="loadingMsg [[computeLoadingClass(_loading)]]">
          <td>Loading...</td>
        </tr>
      </tbody>
      <tbody class$="[[computeLoadingClass(_loading)]]">
        <template is="dom-repeat" items="[[_shownItems]]">
          <tr class="table">
            <td class$="[[detailType]] name">
              [[_stripRefs(item.ref, detailType)]]
            </td>
            <td
              class$="[[detailType]] revision [[_computeCanEditClass(item.ref, detailType, _isOwner)]]"
            >
              <span class="revisionNoEditing">
                [[item.revision]]
              </span>
              <span class$="revisionEdit [[_computeEditingClass(_isEditing)]]">
                <span class="revisionWithEditing">
                  [[item.revision]]
                </span>
                <gr-button
                  link=""
                  on-click="_handleEditRevision"
                  class="editBtn"
                >
                  edit
                </gr-button>
                <iron-input bind-value="{{_revisedRef}}" class="editItem">
                  <input is="iron-input" bind-value="{{_revisedRef}}" />
                </iron-input>
                <gr-button
                  link=""
                  on-click="_handleCancelRevision"
                  class="cancelBtn editItem"
                >
                  Cancel
                </gr-button>
                <gr-button
                  link=""
                  on-click="_handleSaveRevision"
                  class="saveBtn editItem"
                  disabled="[[!_revisedRef]]"
                >
                  Save
                </gr-button>
              </span>
            </td>
            <td class$="message [[_hideIfBranch(detailType)]]">
              [[_computeMessage(item.message)]]
            </td>
            <td class$="tagger [[_hideIfBranch(detailType)]]">
              <div class$="tagger [[_computeHideTagger(item.tagger)]]">
                <gr-account-link account="[[item.tagger]]"> </gr-account-link>
                (<gr-date-formatter
                  has-tooltip=""
                  date-str="[[item.tagger.date]]"
                >
                </gr-date-formatter
                >)
              </div>
            </td>
            <td class="repositoryBrowser">
              <template
                is="dom-repeat"
                items="[[_computeWeblink(item)]]"
                as="link"
              >
                <a
                  href$="[[link.url]]"
                  class="webLink"
                  rel="noopener"
                  target="_blank"
                >
                  ([[link.name]])
                </a>
              </template>
            </td>
            <td class="delete">
              <gr-button
                link=""
                class$="deleteButton [[_computeHideDeleteClass(_isOwner, item.can_delete)]]"
                on-click="_handleDeleteItem"
              >
                Delete
              </gr-button>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
    <gr-overlay id="overlay" with-backdrop="">
      <gr-confirm-delete-item-dialog
        class="confirmDialog"
        on-confirm="_handleDeleteItemConfirm"
        on-cancel="_handleConfirmDialogCancel"
        item="[[_refName]]"
        item-type="[[detailType]]"
      ></gr-confirm-delete-item-dialog>
    </gr-overlay>
  </gr-list-view>
  <gr-overlay id="createOverlay" with-backdrop="">
    <gr-dialog
      id="createDialog"
      disabled="[[!_hasNewItemName]]"
      confirm-label="Create"
      on-confirm="_handleCreateItem"
      on-cancel="_handleCloseCreate"
    >
      <div class="header" slot="header">
        Create [[_computeItemName(detailType)]]
      </div>
      <div class="main" slot="main">
        <gr-create-pointer-dialog
          id="createNewModal"
          detail-type="[[_computeItemName(detailType)]]"
          has-new-item-name="{{_hasNewItemName}}"
          item-detail="[[detailType]]"
          repo-name="[[_repo]]"
        ></gr-create-pointer-dialog>
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Rb="branches",Lb="tags";class Db extends(ra([B_,L_],Zn(na(Ka)))){static get template(){return Ib}static get is(){return"gr-repo-detail-list"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},detailType:String,_editing:{type:Boolean,value:!1},_isOwner:{type:Boolean,value:!1},_loggedIn:{type:Boolean,value:!1},_offset:Number,_repo:Object,_items:Array,_shownItems:{type:Array,computed:"computeShownItems(_items)"},_itemsPerPage:{type:Number,value:25},_loading:{type:Boolean,value:!0},_filter:String,_refName:String,_hasNewItemName:Boolean,_isEditing:Boolean,_revisedRef:String}}_determineIfOwner(e){return this.$.restAPI.getRepoAccess(e).then(t=>this._isOwner=t&&!!t[e].is_owner)}_paramsChanged(e){if(e&&e.repo)return this._repo=e.repo,this._getLoggedIn().then(e=>{this._loggedIn=e,e&&this._determineIfOwner(this._repo)}),this.detailType=e.detail,this._filter=this.getFilterValue(e),this._offset=this.getOffsetValue(e),this._getItems(this._filter,this._repo,this._itemsPerPage,this._offset,this.detailType)}_getItems(e,t,n,i,s){this._loading=!0,this._items=[],Ii();const a=e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))};return s===Rb?this.$.restAPI.getRepoBranches(e,t,n,i,a).then(e=>{e&&(this._items=e,this._loading=!1)}):s===Lb?this.$.restAPI.getRepoTags(e,t,n,i,a).then(e=>{e&&(this._items=e,this._loading=!1)}):void 0}_getPath(e){return`/admin/repos/${this.encodeURL(e,!1)},`+`${this.detailType}`}_computeWeblink(e){if(!e.web_links)return"";const t=e.web_links;return t.length?t:null}_computeMessage(e){if(e)return e.split("-----BEGIN PGP SIGNATURE-----")[0]}_stripRefs(e,t){return t===Rb?e.replace("refs/heads/",""):t===Lb?e.replace("refs/tags/",""):void 0}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_computeEditingClass(e){return e?"editing":""}_computeCanEditClass(e,t,n){return n&&"HEAD"===this._stripRefs(e,t)?"canEdit":""}_handleEditRevision(e){this._revisedRef=e.model.get("item.revision"),this._isEditing=!0}_handleCancelRevision(){this._isEditing=!1}_handleSaveRevision(e){this._setRepoHead(this._repo,this._revisedRef,e)}_setRepoHead(e,t,n){return this.$.restAPI.setRepoHead(e,t).then(e=>{e.status<400&&(this._isEditing=!1,n.model.set("item.revision",t),this._getItems(this._filter,this._repo,this._itemsPerPage,this._offset,this.detailType))})}_computeItemName(e){return e===Rb?"Branch":e===Lb?"Tag":void 0}_handleDeleteItemConfirm(){return this.$.overlay.close(),this.detailType===Rb?this.$.restAPI.deleteRepoBranches(this._repo,this._refName).then(e=>{204===e.status&&this._getItems(this._filter,this._repo,this._itemsPerPage,this._offset,this.detailType)}):this.detailType===Lb?this.$.restAPI.deleteRepoTags(this._repo,this._refName).then(e=>{204===e.status&&this._getItems(this._filter,this._repo,this._itemsPerPage,this._offset,this.detailType)}):void 0}_handleConfirmDialogCancel(){this.$.overlay.close()}_handleDeleteItem(e){const t=this._stripRefs(e.model.get("item.ref"),this.detailType);t&&(this._refName=t,this.$.overlay.open())}_computeHideDeleteClass(e,t){return t||e?"show":""}_handleCreateItem(){this.$.createNewModal.handleCreateItem(),this._handleCloseCreate()}_handleCloseCreate(){this.$.createOverlay.close()}_handleCreateClicked(){this.$.createOverlay.open()}_hideIfBranch(e){return e===Rb?"hideItem":""}_computeHideTagger(e){return e?"":"hide"}}customElements.define(Db.is,Db);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ob=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    :host {
      display: inline-block;
    }
    input {
      width: 20em;
    }
    gr-autocomplete {
      width: 20em;
    }
  </style>

  <div class="gr-form-styles">
    <div id="form">
      <section>
        <span class="title">Repository name</span>
        <iron-input autocomplete="on" bind-value="{{_repoConfig.name}}">
          <input
            is="iron-input"
            id="repoNameInput"
            autocomplete="on"
            bind-value="{{_repoConfig.name}}"
          />
        </iron-input>
      </section>
      <section>
        <span class="title">Rights inherit from</span>
        <span class="value">
          <gr-autocomplete
            id="rightsInheritFromInput"
            text="{{_repoConfig.parent}}"
            query="[[_query]]"
            placeholder="Optional, defaults to 'All-Projects'"
          >
          </gr-autocomplete>
        </span>
      </section>
      <section>
        <span class="title">Owner</span>
        <span class="value">
          <gr-autocomplete
            id="ownerInput"
            text="{{_repoOwner}}"
            value="{{_repoOwnerId}}"
            query="[[_queryGroups]]"
          >
          </gr-autocomplete>
        </span>
      </section>
      <section>
        <span class="title">Create initial empty commit</span>
        <span class="value">
          <gr-select
            id="initialCommit"
            bind-value="{{_repoConfig.create_empty_commit}}"
          >
            <select>
              <option value="false">False</option>
              <option value="true">True</option>
            </select>
          </gr-select>
        </span>
      </section>
      <section>
        <span class="title">Only serve as parent for other repositories</span>
        <span class="value">
          <gr-select
            id="parentRepo"
            bind-value="{{_repoConfig.permissions_only}}"
          >
            <select>
              <option value="false">False</option>
              <option value="true">True</option>
            </select>
          </gr-select>
        </span>
      </section>
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Nb extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return Ob}static get is(){return"gr-create-repo-dialog"}static get properties(){return{params:Object,hasNewRepoName:{type:Boolean,notify:!0,value:!1},_repoConfig:{type:Object,value:()=>({create_empty_commit:!0,permissions_only:!1})},_repoCreated:{type:Boolean,value:!1},_repoOwner:String,_repoOwnerId:{type:String,observer:"_repoOwnerIdUpdate"},_query:{type:Function,value(){return this._getRepoSuggestions.bind(this)}},_queryGroups:{type:Function,value(){return this._getGroupSuggestions.bind(this)}}}}static get observers(){return["_updateRepoName(_repoConfig.name)"]}_computeRepoUrl(e){return this.getBaseUrl()+"/admin/repos/"+this.encodeURL(e,!0)}_updateRepoName(e){this.hasNewRepoName=!!e}_repoOwnerIdUpdate(e){e?this.set("_repoConfig.owners",[e]):this.set("_repoConfig.owners",void 0)}handleCreateRepo(){return this.$.restAPI.createRepo(this._repoConfig).then(e=>{201===e.status&&(this._repoCreated=!0,_p.show(this._computeRepoUrl(this._repoConfig.name)))})}_getRepoSuggestions(e){return this.$.restAPI.getSuggestedProjects(e).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:n,value:e[n]});return t})}_getGroupSuggestions(e){return this.$.restAPI.getSuggestedGroups(e).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:n,value:decodeURIComponent(e[n].id)});return t})}}customElements.define(Nb.is,Nb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Mb=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style>
    .genericList tr td:last-of-type {
      text-align: left;
    }
    .genericList tr th:last-of-type {
      text-align: left;
    }
    .readOnly {
      text-align: center;
    }
    .changesLink,
    .name,
    .repositoryBrowser,
    .readOnly {
      white-space: nowrap;
    }
  </style>
  <gr-list-view
    create-new="[[_createNewCapability]]"
    filter="[[_filter]]"
    items-per-page="[[_reposPerPage]]"
    items="[[_repos]]"
    loading="[[_loading]]"
    offset="[[_offset]]"
    on-create-clicked="_handleCreateClicked"
    path="[[_path]]"
  >
    <table id="list" class="genericList">
      <tbody>
        <tr class="headerRow">
          <th class="name topHeader">Repository Name</th>
          <th class="repositoryBrowser topHeader">Repository Browser</th>
          <th class="changesLink topHeader">Changes</th>
          <th class="topHeader readOnly">Read only</th>
          <th class="description topHeader">Repository Description</th>
        </tr>
        <tr id="loading" class$="loadingMsg [[computeLoadingClass(_loading)]]">
          <td>Loading...</td>
        </tr>
      </tbody>
      <tbody class$="[[computeLoadingClass(_loading)]]">
        <template is="dom-repeat" items="[[_shownRepos]]">
          <tr class="table">
            <td class="name">
              <a href$="[[_computeRepoUrl(item.name)]]">[[item.name]]</a>
            </td>
            <td class="repositoryBrowser">
              <template
                is="dom-repeat"
                items="[[_computeWeblink(item)]]"
                as="link"
              >
                <a
                  href$="[[link.url]]"
                  class="webLink"
                  rel="noopener"
                  target="_blank"
                >
                  [[link.name]]
                </a>
              </template>
            </td>
            <td class="changesLink">
              <a href$="[[_computeChangesLink(item.name)]]">view all</a>
            </td>
            <td class="readOnly">[[_readOnly(item)]]</td>
            <td class="description">[[item.description]]</td>
          </tr>
        </template>
      </tbody>
    </table>
  </gr-list-view>
  <gr-overlay id="createOverlay" with-backdrop="">
    <gr-dialog
      id="createDialog"
      class="confirmDialog"
      disabled="[[!_hasNewRepoName]]"
      confirm-label="Create"
      on-confirm="_handleCreateRepo"
      on-cancel="_handleCloseCreate"
    >
      <div class="header" slot="header">
        Create Repository
      </div>
      <div class="main" slot="main">
        <gr-create-repo-dialog
          has-new-repo-name="{{_hasNewRepoName}}"
          params="[[params]]"
          id="createNewModal"
        ></gr-create-repo-dialog>
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class $b extends(ra([B_],Zn(na(Ka)))){static get template(){return Mb}static get is(){return"gr-repo-list"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},_offset:Number,_path:{type:String,readOnly:!0,value:"/admin/repos"},_hasNewRepoName:Boolean,_createNewCapability:{type:Boolean,value:!1},_repos:Array,_shownRepos:{type:Array,computed:"computeShownItems(_repos)"},_reposPerPage:{type:Number,value:25},_loading:{type:Boolean,value:!0},_filter:{type:String,value:""}}}attached(){super.attached(),this._getCreateRepoCapability(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Repos"},composed:!0,bubbles:!0})),this._maybeOpenCreateOverlay(this.params)}_paramsChanged(e){return this._loading=!0,this._filter=this.getFilterValue(e),this._offset=this.getOffsetValue(e),this._getRepos(this._filter,this._reposPerPage,this._offset)}_maybeOpenCreateOverlay(e){e&&e.openCreateModal&&this.$.createOverlay.open()}_computeRepoUrl(e){return this.getUrl(this._path+"/",e)}_computeChangesLink(e){return um.getUrlForProjectChanges(e)}_getCreateRepoCapability(){return this.$.restAPI.getAccount().then(e=>{if(e)return this.$.restAPI.getAccountCapabilities(["createProject"]).then(e=>{e.createProject&&(this._createNewCapability=!0)})})}_getRepos(e,t,n){return this._repos=[],this.$.restAPI.getRepos(e,t,n).then(t=>{e===this._filter&&t&&(this._repos=t,this._loading=!1)})}_refreshReposList(){return this.$.restAPI.invalidateReposCache(),this._getRepos(this._filter,this._reposPerPage,this._offset)}_handleCreateRepo(){this.$.createNewModal.handleCreateRepo().then(()=>{this._refreshReposList()})}_handleCloseCreate(){this.$.createOverlay.close()}_handleCreateClicked(){this.$.createOverlay.open()}_readOnly(e){return"READ_ONLY"===e.state?"Y":""}_computeWeblink(e){if(!e.web_links)return"";const t=e.web_links;return t.length?t:null}}customElements.define($b.is,$b);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bb=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-menu-page-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-page-nav-styles">
    gr-dropdown-list {
      --trigger-style: {
        text-transform: none;
      }
    }
    .breadcrumbText {
      /* Same as dropdown trigger so chevron spacing is consistent. */
      padding: 5px 4px;
    }
    iron-icon {
      margin: 0 var(--spacing-xs);
    }
    .breadcrumb {
      align-items: center;
      display: flex;
    }
    .mainHeader {
      align-items: baseline;
      border-bottom: 1px solid var(--border-color);
      display: flex;
    }
    .selectText {
      display: none;
    }
    .selectText.show {
      display: inline-block;
    }
    main.breadcrumbs:not(.table) {
      margin-top: var(--spacing-l);
    }
  </style>
  <gr-page-nav class="navStyles">
    <ul class="sectionContent">
      <template id="adminNav" is="dom-repeat" items="[[_filteredLinks]]">
        <li class$="sectionTitle [[_computeSelectedClass(item.view, params)]]">
          <a class="title" href="[[_computeLinkURL(item)]]" rel="noopener"
            >[[item.name]]</a
          >
        </li>
        <template is="dom-repeat" items="[[item.children]]" as="child">
          <li class$="[[_computeSelectedClass(child.view, params)]]">
            <a href$="[[_computeLinkURL(child)]]" rel="noopener"
              >[[child.name]]</a
            >
          </li>
        </template>
        <template is="dom-if" if="[[item.subsection]]">
          <!--If a section has a subsection, render that.-->
          <li class$="[[_computeSelectedClass(item.subsection.view, params)]]">
            <a
              class="title"
              href$="[[_computeLinkURL(item.subsection)]]"
              rel="noopener"
            >
              [[item.subsection.name]]</a
            >
          </li>
          <!--Loop through the links in the sub-section.-->
          <template
            is="dom-repeat"
            items="[[item.subsection.children]]"
            as="child"
          >
            <li
              class$="subsectionItem [[_computeSelectedClass(child.view, params, child.detailType)]]"
            >
              <a href$="[[_computeLinkURL(child)]]">[[child.name]]</a>
            </li>
          </template>
        </template>
      </template>
    </ul>
  </gr-page-nav>
  <template is="dom-if" if="[[_subsectionLinks.length]]">
    <section class="mainHeader">
      <span class="breadcrumb">
        <span class="breadcrumbText">[[_breadcrumbParentName]]</span>
        <iron-icon icon="gr-icons:chevron-right"></iron-icon>
      </span>
      <gr-dropdown-list
        lowercase=""
        id="pageSelect"
        value="[[_computeSelectValue(params)]]"
        items="[[_subsectionLinks]]"
        on-value-change="_handleSubsectionChange"
      >
      </gr-dropdown-list>
    </section>
  </template>
  <template is="dom-if" if="[[_showRepoList]]" restamp="true">
    <main class="table">
      <gr-repo-list class="table" params="[[params]]"></gr-repo-list>
    </main>
  </template>
  <template is="dom-if" if="[[_showGroupList]]" restamp="true">
    <main class="table">
      <gr-admin-group-list class="table" params="[[params]]">
      </gr-admin-group-list>
    </main>
  </template>
  <template is="dom-if" if="[[_showPluginList]]" restamp="true">
    <main class="table">
      <gr-plugin-list class="table" params="[[params]]"></gr-plugin-list>
    </main>
  </template>
  <template is="dom-if" if="[[_showRepoMain]]" restamp="true">
    <main class="breadcrumbs">
      <gr-repo repo="[[params.repo]]"></gr-repo>
    </main>
  </template>
  <template is="dom-if" if="[[_showGroup]]" restamp="true">
    <main class="breadcrumbs">
      <gr-group
        group-id="[[params.groupId]]"
        on-name-changed="_updateGroupName"
      ></gr-group>
    </main>
  </template>
  <template is="dom-if" if="[[_showGroupMembers]]" restamp="true">
    <main class="breadcrumbs">
      <gr-group-members group-id="[[params.groupId]]"></gr-group-members>
    </main>
  </template>
  <template is="dom-if" if="[[_showRepoDetailList]]" restamp="true">
    <main class="table breadcrumbs">
      <gr-repo-detail-list
        params="[[params]]"
        class="table"
      ></gr-repo-detail-list>
    </main>
  </template>
  <template is="dom-if" if="[[_showGroupAuditLog]]" restamp="true">
    <main class="table breadcrumbs">
      <gr-group-audit-log
        group-id="[[params.groupId]]"
        class="table"
      ></gr-group-audit-log>
    </main>
  </template>
  <template is="dom-if" if="[[_showRepoCommands]]" restamp="true">
    <main class="breadcrumbs">
      <gr-repo-commands repo="[[params.repo]]"></gr-repo-commands>
    </main>
  </template>
  <template is="dom-if" if="[[_showRepoAccess]]" restamp="true">
    <main class="breadcrumbs">
      <gr-repo-access path="[[path]]" repo="[[params.repo]]"></gr-repo-access>
    </main>
  </template>
  <template is="dom-if" if="[[_showRepoDashboards]]" restamp="true">
    <main class="table breadcrumbs">
      <gr-repo-dashboards repo="[[params.repo]]"></gr-repo-dashboards>
    </main>
  </template>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Fb=[{name:"Repositories",noBaseUrl:!0,url:"/admin/repos",view:"gr-repo-list",viewableToAll:!0},{name:"Groups",section:"Groups",noBaseUrl:!0,url:"/admin/groups",view:"gr-admin-group-list"},{name:"Plugins",capability:"viewPlugins",section:"Plugins",noBaseUrl:!0,url:"/admin/plugins",view:"gr-plugin-list"}];window.Gerrit=window.Gerrit||{};const Ub={getAdminLinks(e,t,n,i){return e?t().then(e=>this._filterLinks(t=>!t.capability||e.hasOwnProperty(t.capability),n,i)):Promise.resolve(this._filterLinks(e=>e.viewableToAll,n,i))},_filterLinks(e,t,n){let i,s=Fb.slice(0);const a=e=>"/"!==e.url[0];s.push(...t().map(e=>({url:e.url,name:e.text,capability:e.capability||null,noBaseUrl:!a(e),view:null,viewableToAll:!e.capability,target:a(e)?"_blank":null}))),s=s.filter(e);const o=[],r=n&&n.repoName,l=n&&n.groupId,c=n&&n.groupName,d=n&&n.groupIsInternal,h=n&&n.isAdmin,p=n&&n.groupOwner;if(!r&&!l)return{links:s,expandedSection:i};for(const e of s){const t=Object.assign({},e);"Repositories"===t.name&&r?(t.subsection=this.getRepoSubsections(r),i=t.subsection):"Groups"===t.name&&l&&c&&(t.subsection=this.getGroupSubsections(l,c,d,h,p),i=t.subsection),o.push(t)}return{links:o,expandedSection:i}},getGroupSubsections(e,t,n,i,s){const a={name:t,view:um.View.GROUP,url:um.getUrlForGroup(e),children:[]};return n&&a.children.push({name:"Members",detailType:um.GroupDetailView.MEMBERS,view:um.View.GROUP,url:um.getUrlForGroupMembers(e)}),n&&(i||s)&&a.children.push({name:"Audit Log",detailType:um.GroupDetailView.LOG,view:um.View.GROUP,url:um.getUrlForGroupLog(e)}),a},getRepoSubsections:e=>({name:e,view:um.View.REPO,url:um.getUrlForRepo(e),children:[{name:"Access",view:um.View.REPO,detailType:um.RepoDetailView.ACCESS,url:um.getUrlForRepoAccess(e)},{name:"Commands",view:um.View.REPO,detailType:um.RepoDetailView.COMMANDS,url:um.getUrlForRepoCommands(e)},{name:"Branches",view:um.View.REPO,detailType:um.RepoDetailView.BRANCHES,url:um.getUrlForRepoBranches(e)},{name:"Tags",view:um.View.REPO,detailType:um.RepoDetailView.TAGS,url:um.getUrlForRepoTags(e)},{name:"Dashboards",view:um.View.REPO,detailType:um.RepoDetailView.DASHBOARDS,url:um.getUrlForRepoDashboards(e)}]})};window.Gerrit=window.Gerrit||{},window.Gerrit.AdminNavBehavior=Ub;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Hb=/^[\da-f]{40}$/;class jb extends(ra([Ub,Go,L_],Zn(na(Ka)))){static get template(){return Bb}static get is(){return"gr-admin-view"}static get properties(){return{params:Object,path:String,adminView:String,_breadcrumbParentName:String,_repoName:String,_groupId:{type:Number,observer:"_computeGroupName"},_groupIsInternal:Boolean,_groupName:String,_groupOwner:{type:Boolean,value:!1},_subsectionLinks:Array,_filteredLinks:Array,_showDownload:{type:Boolean,value:!1},_isAdmin:{type:Boolean,value:!1},_showGroup:Boolean,_showGroupAuditLog:Boolean,_showGroupList:Boolean,_showGroupMembers:Boolean,_showRepoAccess:Boolean,_showRepoCommands:Boolean,_showRepoDashboards:Boolean,_showRepoDetailList:Boolean,_showRepoMain:Boolean,_showRepoList:Boolean,_showPluginList:Boolean}}static get observers(){return["_paramsChanged(params)"]}attached(){super.attached(),this.reload()}reload(){const e=[this.$.restAPI.getAccount(),tr.awaitPluginsLoaded()];return Promise.all(e).then(e=>{let t;return this._account=e[0],this._repoName?t={repoName:this._repoName}:this._groupId&&(t={groupId:this._groupId,groupName:this._groupName,groupIsInternal:this._groupIsInternal,isAdmin:this._isAdmin,groupOwner:this._groupOwner}),this.getAdminLinks(this._account,this.$.restAPI.getAccountCapabilities.bind(this.$.restAPI),this.$.jsAPI.getAdminMenuLinks.bind(this.$.jsAPI),t).then(e=>{this._filteredLinks=e.links,this._breadcrumbParentName=e.expandedSection?e.expandedSection.name:"",e.expandedSection?this._subsectionLinks=[e.expandedSection].concat(e.expandedSection.children).map(e=>({text:e.detailType?e.name:"Home",value:e.view+(e.detailType||""),view:e.view,url:e.url,detailType:e.detailType,parent:this._groupId||this._repoName||""})):this._subsectionLinks=[]})})}_computeSelectValue(e){if(e&&e.view)return e.view+(e.detail||"")}_selectedIsCurrentPage(e){return e.parent===(this._repoName||this._groupId)&&e.view===this.params.view&&e.detailType===this.params.detail}_handleSubsectionChange(e){const t=this._subsectionLinks.find(t=>t.value===e.detail.value);this._selectedIsCurrentPage(t)||um.navigateToRelativeUrl(t.url)}_paramsChanged(e){const t=e.view===um.View.GROUP,n=e.view===um.View.REPO,i=e.view===um.View.ADMIN;this.set("_showGroup",t&&!e.detail),this.set("_showGroupAuditLog",t&&e.detail===um.GroupDetailView.LOG),this.set("_showGroupMembers",t&&e.detail===um.GroupDetailView.MEMBERS),this.set("_showGroupList",i&&"gr-admin-group-list"===e.adminView),this.set("_showRepoAccess",n&&e.detail===um.RepoDetailView.ACCESS),this.set("_showRepoCommands",n&&e.detail===um.RepoDetailView.COMMANDS),this.set("_showRepoDetailList",n&&(e.detail===um.RepoDetailView.BRANCHES||e.detail===um.RepoDetailView.TAGS)),this.set("_showRepoDashboards",n&&e.detail===um.RepoDetailView.DASHBOARDS),this.set("_showRepoMain",n&&!e.detail),this.set("_showRepoList",i&&"gr-repo-list"===e.adminView),this.set("_showPluginList",i&&"gr-plugin-list"===e.adminView);let s=!1;e.repo!==this._repoName&&(this._repoName=e.repo||"",s=!0),e.groupId!==this._groupId&&(this._groupId=e.groupId||"",s=!0),!this._breadcrumbParentName||e.groupId||e.repo||(s=!0),s&&this.reload()}_computeURLHelper(e,t){return"//"+e+this.getBaseUrl()+t}_computeRelativeURL(e){const t=window.location.host;return this._computeURLHelper(t,e)}_computeLinkURL(e){return e&&void 0!==e.url?e.target||!e.noBaseUrl?e.url:this._computeRelativeURL(e.url):""}_computeSelectedClass(e,t,n){return t?t.view===um.View.GROUP&&e===um.View.GROUP?t.detail||n?t.detail===n?"selected":"":"selected":t.view===um.View.REPO&&e===um.View.REPO?t.detail||n?t.detail===n?"selected":"":"selected":t.detailType&&t.detailType!==n?"":e===t.adminView?"selected":"":""}_computeGroupName(e){if(!e)return"";const t=[];this.$.restAPI.getGroupConfig(e).then(e=>{if(e&&e.name)return this._groupName=e.name,this._groupIsInternal=!!e.id.match(Hb),this.reload(),t.push(this.$.restAPI.getIsAdmin().then(e=>{this._isAdmin=e})),t.push(this.$.restAPI.getIsGroupOwner(e.name).then(e=>{this._groupOwner=e})),Promise.all(t).then(()=>{this.reload()})})}_updateGroupName(e){this._groupName=e.detail.name,this.reload()}}customElements.define(jb.is,jb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Gb=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-table-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <gr-list-view
    filter="[[_filter]]"
    items="false"
    offset="0"
    loading="[[_loading]]"
    path="[[_path]]"
  >
    <table id="list" class="genericList">
      <tbody>
        <tr class="headerRow">
          <th class="name topHeader">Name</th>
          <th class="name topHeader"></th>
          <th class="name topHeader"></th>
        </tr>
        <tr id="loading" class$="loadingMsg [[computeLoadingClass(_loading)]]">
          <td>Loading...</td>
        </tr>
      </tbody>
      <tbody class$="[[computeLoadingClass(_loading)]]">
        <template is="dom-repeat" items="[[_documentationSearches]]">
          <tr class="table">
            <td class="name">
              <a href$="[[_computeSearchUrl(item.url)]]">[[item.title]]</a>
            </td>
            <td></td>
            <td></td>
          </tr>
        </template>
      </tbody>
    </table>
  </gr-list-view>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Vb extends(ra([B_],Zn(na(Ka)))){static get template(){return Gb}static get is(){return"gr-documentation-search"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},_path:{type:String,readOnly:!0,value:"/Documentation"},_documentationSearches:Array,_loading:{type:Boolean,value:!0},_filter:{type:String,value:""}}}attached(){super.attached(),this.dispatchEvent(new CustomEvent("title-change",{title:"Documentation Search"}))}_paramsChanged(e){return this._loading=!0,this._filter=this.getFilterValue(e),this._getDocumentationSearches(this._filter)}_getDocumentationSearches(e){return this._documentationSearches=[],this.$.restAPI.getDocumentationSearches(e).then(t=>{e===this._filter&&t&&(this._documentationSearches=t,this._loading=!1)})}_computeSearchUrl(e){return e?this.getBaseUrl()+"/"+e:""}}customElements.define(Vb.is,Vb);
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zb=document.createElement("template");zb.innerHTML='<dom-module id="gr-change-list-styles">\n  <template>\n    <style>\n      gr-change-list-item {\n        border-top: 1px solid var(--border-color);\n      }\n      gr-change-list-item[selected],\n      gr-change-list-item:focus {\n        background-color: var(--selection-background-color);\n      }\n      .groupTitle td,\n      .cell {\n        vertical-align: middle;\n      }\n      .groupTitle td:not(.label):not(.endpoint),\n      .cell:not(.label):not(.endpoint) {\n        padding-right: 8px;\n      }\n      .groupTitle td {\n        color: var(--deemphasized-text-color);\n        text-align: left;\n      }\n      .groupHeader {\n        background-color: transparent;\n        font-size: var(--font-size-h3);\n        font-weight: var(--font-weight-h3);\n        line-height: var(--line-height-h3);\n      }\n      .groupContent {\n        background-color: var(--background-color-primary);\n        box-shadow: var(--elevation-level-1);\n      }\n      .groupHeader a {\n        color: var(--primary-text-color);\n        text-decoration: none;\n      }\n      .groupHeader a:hover {\n        text-decoration: underline;\n      }\n      .groupTitle td,\n      .cell {\n        padding: var(--spacing-s) 0;\n      }\n      .groupHeader .cell {\n        padding-top: var(--spacing-l);\n      }\n      .star {\n        padding: 0;\n      }\n      gr-change-star {\n        vertical-align: middle;\n      }\n      .branch,\n      .star,\n      .label,\n      .number,\n      .owner,\n      .assignee,\n      .updated,\n      .size,\n      .status,\n      .repo {\n        white-space: nowrap;\n      }\n      .star {\n        vertical-align: middle;\n      }\n      .leftPadding {\n        width: var(--spacing-l);\n      }\n      .star {\n        width: 30px;\n      }\n      .reviewers div {\n        overflow: hidden;\n      }\n      .label, .endpoint {\n        border-left: 1px solid var(--border-color);\n      }\n      .groupTitle td.label,\n      .label {\n        text-align: center;\n        width: 3rem;\n      }\n      .truncatedRepo {\n        display: none;\n      }\n      @media only screen and (max-width: 150em) {\n        .assignee,\n        .branch,\n        .owner {\n          overflow: hidden;\n          max-width: 18rem;\n          text-overflow: ellipsis;\n        }\n        .truncatedRepo {\n          display: inline-block;\n        }\n        .fullRepo {\n          display: none;\n        }\n      }\n      @media only screen and (max-width: 100em) {\n        .assignee,\n        .branch,\n        .owner,\n        .reviewers {\n          max-width: 10rem;\n        }\n      }\n      @media only screen and (max-width: 50em) {\n        :host {\n          font-family: var(--header-font-family);\n          font-size: var(--font-size-h3);\n          font-weight: var(--font-weight-h3);\n          line-height: var(--line-height-h3);\n        }\n        gr-change-list-item {\n          flex-wrap: wrap;\n          justify-content: space-between;\n          padding: var(--spacing-xs) var(--spacing-m);\n        }\n        gr-change-list-item[selected],\n        gr-change-list-item:focus {\n          background-color: var(--view-background-color);\n          border: none;\n          border-top: 1px solid var(--border-color);\n        }\n        gr-change-list-item:hover {\n          background-color: var(--view-background-color);\n        }\n        .cell {\n          align-items: center;\n          display: flex;\n        }\n        .groupTitle,\n        .leftPadding,\n        .status,\n        .repo,\n        .branch,\n        .updated,\n        .label,\n        .assignee,\n        .groupHeader .star,\n        .noChanges .star {\n          display: none;\n        }\n        .groupHeader .cell,\n        .noChanges .cell {\n          padding-left: var(--spacing-m);\n        }\n        .subject {\n          margin-bottom: var(--spacing-xs);\n          width: calc(100% - 2em);\n        }\n        .owner,\n        .size {\n          max-width: none;\n        }\n        .noChanges .cell {\n          display: block;\n          height: auto;\n        }\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(zb.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wb=za`
  <style include="shared-styles">
    button {
      background-color: transparent;
      cursor: pointer;
    }
    iron-icon.active {
      fill: var(--link-color);
    }
    iron-icon {
      vertical-align: top;
      --iron-icon-height: var(
        --gr-change-star-size,
        var(--line-height-normal, 20px)
      );
      --iron-icon-width: var(
        --gr-change-star-size,
        var(--line-height-normal, 20px)
      );
    }
  </style>
  <button aria-label="Change star" on-click="toggleStar">
    <iron-icon
      class$="[[_computeStarClass(change.starred)]]"
      icon$="[[_computeStarIcon(change.starred)]]"
    ></iron-icon>
  </button>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class qb extends(Zn(na(Ka))){static get template(){return Wb}static get is(){return"gr-change-star"}static get properties(){return{change:{type:Object,notify:!0}}}_computeStarClass(e){return e?"active":""}_computeStarIcon(e){return`gr-icons:star${e?"":"-border"}`}toggleStar(){const e=!this.change.starred;this.set("change.starred",e),this.dispatchEvent(new CustomEvent("toggle-star",{bubbles:!0,composed:!0,detail:{change:this.change,starred:e}}))}}customElements.define(qb.is,qb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Kb=za`
  <style include="shared-styles">
    .chip {
      border-radius: var(--border-radius);
      background-color: var(--chip-background-color);
      padding: 0 var(--spacing-m);
      white-space: nowrap;
    }
    :host(.merged) .chip {
      background-color: #5b9d52;
      color: #5b9d52;
    }
    :host(.abandoned) .chip {
      background-color: #afafaf;
      color: #afafaf;
    }
    :host(.wip) .chip {
      background-color: #8f756c;
      color: #8f756c;
    }
    :host(.private) .chip {
      background-color: #c17ccf;
      color: #c17ccf;
    }
    :host(.merge-conflict) .chip {
      background-color: #dc5c60;
      color: #dc5c60;
    }
    :host(.active) .chip {
      background-color: #29b6f6;
      color: #29b6f6;
    }
    :host(.ready-to-submit) .chip {
      background-color: #e10ca3;
      color: #e10ca3;
    }
    :host(.custom) .chip {
      background-color: #825cc2;
      color: #825cc2;
    }
    :host([flat]) .chip {
      background-color: transparent;
      padding: 0;
    }
    :host(:not([flat])) .chip {
      color: white;
    }
  </style>
  <gr-tooltip-content
    has-tooltip=""
    position-below=""
    title="[[tooltipText]]"
    max-width="40em"
  >
    <div class="chip" aria-label$="Label: [[status]]">
      [[_computeStatusString(status)]]
    </div>
  </gr-tooltip-content>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Yb="Merge Conflict",Xb="WIP",Jb="Private";class Zb extends(Zn(na(Ka))){static get template(){return Kb}static get is(){return"gr-change-status"}static get properties(){return{flat:{type:Boolean,value:!1,reflectToAttribute:!0},status:{type:String,observer:"_updateChipDetails"},tooltipText:{type:String,value:""}}}_computeStatusString(e){return e!==Xb||this.flat?e:"Work in Progress"}_toClassName(e){return e.toLowerCase().replace(/\s/g,"-")}_updateChipDetails(e,t){switch(t&&this.classList.remove(this._toClassName(t)),this.classList.add(this._toClassName(e)),e){case Xb:this.tooltipText="This change isn't ready to be reviewed or submitted. It will not appear on dashboards unless you are CC'ed or assigned, and email notifications will be silenced until the review is started.";break;case Jb:this.tooltipText='This change is only visible to its owner and current reviewers (or anyone with "View Private Changes" permission).';break;case Yb:this.tooltipText='This change has merge conflicts. Download the patch and run "git rebase master". Upload a new patchset after resolving all merge conflicts.';break;default:this.tooltipText=""}}}customElements.define(Zb.is,Zb);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qb=za` [[_computeDisplayText(text, limit)]] `
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class ev extends(ra([Bu],Zn(na(Ka)))){static get template(){return Qb}static get is(){return"gr-limited-text"}static get properties(){return{text:String,limit:{type:Number,value:null},hasTooltip:{type:Boolean,value:!1},disableTooltip:{type:Boolean,value:!1},tooltipLimit:{type:Number,value:1024}}}static get observers(){return["_updateTitle(text, limit, tooltipLimit)"]}_updateTitle(e,t,n){[e,t,n].some(e=>void 0===e)||(this.hasTooltip=!!t&&!!e&&e.length>t,this.hasTooltip&&!this.disableTooltip?this.setAttribute("title",e.substr(0,n)):this.removeAttribute("title"))}_computeDisplayText(e,t){return t&&e&&e.length>t?e.substr(0,t-1)+"…":e}}customElements.define(ev.is,ev);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tv=za`
  <style include="shared-styles">
    :host {
      display: table-row;
      color: var(--primary-text-color);
    }
    :host(:focus) {
      outline: none;
    }
    :host(:hover) {
      background-color: var(--hover-background-color);
    }
    :host([needs-review]) {
      font-weight: var(--font-weight-bold);
      color: var(--primary-text-color);
    }
    :host([highlight]) {
      background-color: var(--assignee-highlight-color);
    }
    .container {
      position: relative;
    }
    .content {
      overflow: hidden;
      position: absolute;
      text-overflow: ellipsis;
      white-space: nowrap;
      width: 100%;
    }
    .content a {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      width: 100%;
    }
    .comments,
    .reviewers {
      white-space: nowrap;
    }
    .spacer {
      height: 0;
      overflow: hidden;
    }
    .status {
      align-items: center;
      display: inline-flex;
    }
    .status .comma {
      padding-right: var(--spacing-xs);
    }
    /* Used to hide the leading separator comma for statuses. */
    .status .comma:first-of-type {
      display: none;
    }
    .size gr-tooltip-content {
      margin: -0.4rem -0.6rem;
      max-width: 2.5rem;
      padding: var(--spacing-m) var(--spacing-l);
    }
    a {
      color: inherit;
      cursor: pointer;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .u-monospace {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
    }
    .u-green {
      color: var(--vote-text-color-recommended);
    }
    .u-red {
      color: var(--vote-text-color-disliked);
    }
    .u-gray-background {
      background-color: var(--table-header-background-color);
    }
    .comma,
    .placeholder {
      color: var(--deemphasized-text-color);
    }
    .cell.label {
      font-weight: var(--font-weight-normal);
    }
    .lastChildHidden:last-of-type {
      display: none;
    }
    @media only screen and (max-width: 50em) {
      :host {
        display: flex;
      }
    }
  </style>
  <style include="gr-change-list-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <td class="cell leftPadding"></td>
  <td class="cell star" hidden$="[[!showStar]]" hidden="">
    <gr-change-star change="{{change}}"></gr-change-star>
  </td>
  <td class="cell number" hidden$="[[!showNumber]]" hidden="">
    <a href$="[[changeURL]]">[[change._number]]</a>
  </td>
  <td
    class="cell subject"
    hidden$="[[isColumnHidden('Subject', visibleChangeTableColumns)]]"
  >
    <div class="container">
      <div class="content">
        <a title$="[[change.subject]]" href$="[[changeURL]]">
          [[change.subject]]
        </a>
      </div>
      <div class="spacer">
        [[change.subject]]
      </div>
      <span>&nbsp;</span>
    </div>
  </td>
  <td
    class="cell status"
    hidden$="[[isColumnHidden('Status', visibleChangeTableColumns)]]"
  >
    <template is="dom-repeat" items="[[statuses]]" as="status">
      <div class="comma">,</div>
      <gr-change-status flat="" status="[[status]]"></gr-change-status>
    </template>
    <template is="dom-if" if="[[!statuses.length]]">
      <span class="placeholder">--</span>
    </template>
  </td>
  <td
    class="cell owner"
    hidden$="[[isColumnHidden('Owner', visibleChangeTableColumns)]]"
  >
    <gr-account-link account="[[change.owner]]"></gr-account-link>
  </td>
  <td
    class="cell assignee"
    hidden$="[[isColumnHidden('Assignee', visibleChangeTableColumns)]]"
  >
    <template is="dom-if" if="[[change.assignee]]">
      <gr-account-link
        id="assigneeAccountLink"
        account="[[change.assignee]]"
      ></gr-account-link>
    </template>
    <template is="dom-if" if="[[!change.assignee]]">
      <span class="placeholder">--</span>
    </template>
  </td>
  <td
    class="cell reviewers"
    hidden$="[[isColumnHidden('Reviewers', visibleChangeTableColumns)]]"
  >
    <div>
      <template
        is="dom-repeat"
        items="[[change.reviewers.REVIEWER]]"
        as="reviewer"
      >
        <gr-account-link
          hide-avatar=""
          hide-status=""
          account="[[reviewer]]"
        ></gr-account-link
        ><!--
       --><span class="lastChildHidden">, </span>
      </template>
    </div>
  </td>
  <td
    class="cell comments"
    hidden$="[[isColumnHidden('Comments', visibleChangeTableColumns)]]"
  >
    <iron-icon
      hidden$="[[!change.unresolved_comment_count]]"
      icon="gr-icons:comment"
    ></iron-icon>
    <span>[[_computeComments(change.unresolved_comment_count)]]</span>
  </td>
  <td
    class="cell repo"
    hidden$="[[isColumnHidden('Repo', visibleChangeTableColumns)]]"
  >
    <a class="fullRepo" href$="[[_computeRepoUrl(change)]]">
      [[_computeRepoDisplay(change)]]
    </a>
    <a
      class="truncatedRepo"
      href$="[[_computeRepoUrl(change)]]"
      title$="[[_computeRepoDisplay(change)]]"
    >
      [[_computeRepoDisplay(change, 'true')]]
    </a>
  </td>
  <td
    class="cell branch"
    hidden$="[[isColumnHidden('Branch', visibleChangeTableColumns)]]"
  >
    <a href$="[[_computeRepoBranchURL(change)]]">
      [[change.branch]]
    </a>
    <template is="dom-if" if="[[change.topic]]">
      (<a href$="[[_computeTopicURL(change)]]"
        ><!--
       --><gr-limited-text limit="50" text="[[change.topic]]"> </gr-limited-text
        ><!--
     --></a
      >)
    </template>
  </td>
  <td
    class="cell updated"
    hidden$="[[isColumnHidden('Updated', visibleChangeTableColumns)]]"
  >
    <gr-date-formatter
      has-tooltip=""
      date-str="[[change.updated]]"
    ></gr-date-formatter>
  </td>
  <td
    class="cell size"
    hidden$="[[isColumnHidden('Size', visibleChangeTableColumns)]]"
  >
    <gr-tooltip-content has-tooltip="" title="[[_computeSizeTooltip(change)]]">
      <template is="dom-if" if="[[_changeSize]]">
        <span>[[_changeSize]]</span>
      </template>
      <template is="dom-if" if="[[!_changeSize]]">
        <span class="placeholder">--</span>
      </template>
    </gr-tooltip-content>
  </td>
  <template is="dom-repeat" items="[[labelNames]]" as="labelName">
    <td
      title$="[[_computeLabelTitle(change, labelName)]]"
      class$="[[_computeLabelClass(change, labelName)]]"
    >
      [[_computeLabelValue(change, labelName)]]
    </td>
  </template>
  <template
    is="dom-repeat"
    items="[[_dynamicCellEndpoints]]"
    as="pluginEndpointName"
  >
    <td class="cell endpoint">
      <gr-endpoint-decorator name$="[[pluginEndpointName]]">
        <gr-endpoint-param name="change" value="[[change]]">
        </gr-endpoint-param>
      </gr-endpoint-decorator>
    </td>
  </template>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,nv={properties:{columnNames:{type:Array,value:["Subject","Status","Owner","Assignee","Reviewers","Comments","Repo","Branch","Updated","Size"],readOnly:!0}},getComplementColumns(e){return this.columnNames.filter(t=>!e.includes(t))},isColumnHidden:(e,t)=>![t,e].some(e=>void 0===e)&&!t.includes(e),isColumnEnabled:(e,t,n)=>!t||!t.change||("Assignee"===e?!!t.change.enable_assignee:"Comments"===e?n.includes("comments-column"):"Reviewers"!==e||!!t.change.enable_attention_set),getEnabledColumns(e,t,n){return e.filter(e=>this.isColumnEnabled(e,t,n))},getVisibleColumns(e){const t=e.indexOf("Project");if(-1===t)return e;const n=e.slice(0);return n[t]="Repo",n}};window.Gerrit=window.Gerrit||{},window.Gerrit.ChangeTableBehavior=nv;
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const iv=10,sv=50,av=250,ov=1e3;class rv extends(ra([Go,nv,Vg,zg,L_],Zn(na(Ka)))){static get template(){return tv}static get is(){return"gr-change-list-item"}static get properties(){return{visibleChangeTableColumns:Array,labelNames:{type:Array},change:Object,changeURL:{type:String,computed:"_computeChangeURL(change)"},statuses:{type:Array,computed:"changeStatuses(change)"},showStar:{type:Boolean,value:!1},showNumber:Boolean,_changeSize:{type:String,computed:"_computeChangeSize(change)"},_dynamicCellEndpoints:{type:Array}}}attached(){super.attached(),tr.awaitPluginsLoaded().then(()=>{this._dynamicCellEndpoints=ir.getDynamicEndpoints("change-list-item-cell")})}_computeChangeURL(e){return um.getUrlForChange(e)}_computeLabelTitle(e,t){const n=e.labels[t];if(!n)return"Label not applicable";const i=n.rejected||n.approved||n.disliked||n.recommended;return i&&i.name?t+"\nby "+i.name:t}_computeLabelClass(e,t){const n=e.labels[t],i={cell:!0,label:!0};return n?(n.approved&&(i["u-green"]=!0),1==n.value?(i["u-monospace"]=!0,i["u-green"]=!0):-1==n.value&&(i["u-monospace"]=!0,i["u-red"]=!0),n.rejected&&(i["u-red"]=!0)):i["u-gray-background"]=!0,Object.keys(i).sort().join(" ")}_computeLabelValue(e,t){const n=e.labels[t];return n?n.approved?"✓":n.rejected?"✕":n.value>0?"+"+n.value:n.value<0?n.value:"":""}_computeRepoUrl(e){return um.getUrlForProjectChanges(e.project,!0,e.internalHost)}_computeRepoBranchURL(e){return um.getUrlForBranch(e.branch,e.project,null,e.internalHost)}_computeTopicURL(e){return e.topic?um.getUrlForTopic(e.topic,e.internalHost):""}_computeRepoDisplay(e,t){if(!e||!e.project)return"";let n="";return e.internalHost&&(n+=e.internalHost+"/"),n+=t?this.truncatePath(e.project,2):e.project,n}_computeSizeTooltip(e){return e.insertions+e.deletions===0||isNaN(e.insertions+e.deletions)?"Size unknown":`+${e.insertions}, -${e.deletions}`}_computeComments(e){return!e||e<1?"":`${e} unresolved`}_computeChangeSize(e){const t=e.insertions+e.deletions;return isNaN(t)||0===t?null:t<iv?"XS":t<sv?"S":t<av?"M":t<ov?"L":"XL"}toggleReviewed(){const e=!this.change.reviewed;this.set("change.reviewed",e),this.dispatchEvent(new CustomEvent("toggle-reviewed",{bubbles:!0,composed:!0,detail:{change:this.change,reviewed:e}}))}}customElements.define(rv.is,rv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lv=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-change-list-styles">
    #changeList {
      border-collapse: collapse;
      width: 100%;
    }
    .section-count-label {
      color: var(--deemphasized-text-color);
      font-family: var(--font-family);
      font-size: var(--font-size-small);
      font-weight: var(--font-weight-normal);
      line-height: var(--line-height-small);
    }
    a.section-title:hover {
      text-decoration: none;
    }
    a.section-title:hover .section-count-label {
      text-decoration: none;
    }
    a.section-title:hover .section-name {
      text-decoration: underline;
    }
  </style>
  <table id="changeList">
    <template
      is="dom-repeat"
      items="[[sections]]"
      as="changeSection"
      index-as="sectionIndex"
    >
      <template is="dom-if" if="[[changeSection.name]]">
        <tbody>
          <tr class="groupHeader">
            <td class="leftPadding"></td>
            <td class="star" hidden$="[[!showStar]]" hidden=""></td>
            <td
              class="cell"
              colspan$="[[_computeColspan(changeTableColumns, labelNames)]]"
            >
              <a
                href$="[[_sectionHref(changeSection.query)]]"
                class="section-title"
              >
                <span class="section-name">[[changeSection.name]]</span>
                <span class="section-count-label"
                  >[[changeSection.countLabel]]</span
                >
              </a>
            </td>
          </tr>
        </tbody>
      </template>
      <tbody class="groupContent">
        <template is="dom-if" if="[[_isEmpty(changeSection)]]">
          <tr class="noChanges">
            <td class="leftPadding"></td>
            <td class="star" hidden$="[[!showStar]]" hidden=""></td>
            <td
              class="cell"
              colspan$="[[_computeColspan(changeTableColumns, labelNames)]]"
            >
              <template is="dom-if" if="[[_isOutgoing(changeSection)]]">
                <slot name="empty-outgoing"></slot>
              </template>
              <template is="dom-if" if="[[!_isOutgoing(changeSection)]]">
                No changes
              </template>
            </td>
          </tr>
        </template>
        <template is="dom-if" if="[[!_isEmpty(changeSection)]]">
          <tr class="groupTitle">
            <td class="leftPadding"></td>
            <td class="star" hidden$="[[!showStar]]" hidden=""></td>
            <td class="number" hidden$="[[!showNumber]]" hidden="">#</td>
            <template is="dom-repeat" items="[[changeTableColumns]]" as="item">
              <td
                class$="[[_lowerCase(item)]]"
                hidden$="[[isColumnHidden(item, visibleChangeTableColumns)]]"
              >
                [[item]]
              </td>
            </template>
            <template is="dom-repeat" items="[[labelNames]]" as="labelName">
              <td class="label" title$="[[labelName]]">
                [[_computeLabelShortcut(labelName)]]
              </td>
            </template>
            <template
              is="dom-repeat"
              items="[[_dynamicHeaderEndpoints]]"
              as="pluginHeader"
            >
              <td class="endpoint">
                <gr-endpoint-decorator name$="[[pluginHeader]]">
                </gr-endpoint-decorator>
              </td>
            </template>
          </tr>
        </template>
        <template is="dom-repeat" items="[[changeSection.results]]" as="change">
          <gr-change-list-item
            selected$="[[_computeItemSelected(sectionIndex, index, selectedIndex)]]"
            highlight$="[[_computeItemHighlight(account, change)]]"
            needs-review$="[[_computeItemNeedsReview(account, change, showReviewedState)]]"
            change="[[change]]"
            visible-change-table-columns="[[visibleChangeTableColumns]]"
            show-number="[[showNumber]]"
            show-star="[[showStar]]"
            tabindex="0"
            label-names="[[labelNames]]"
          ></gr-change-list-item>
        </template>
      </tbody>
    </template>
  </table>
  <gr-cursor-manager
    id="cursor"
    index="{{selectedIndex}}"
    scroll-behavior="keep-visible"
    focus-on-move=""
  ></gr-cursor-manager>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,cv=["MERGED","ABANDONED"];class dv extends(ra([Go,nv,Wu,zg,L_],Zn(na(Ka)))){static get template(){return lv}static get is(){return"gr-change-list"}static get properties(){return{account:{type:Object,value:null},changes:{type:Array,observer:"_changesChanged"},sections:{type:Array,value:()=>[]},labelNames:{type:Array,computed:"_computeLabelNames(sections)"},_dynamicHeaderEndpoints:{type:Array},selectedIndex:{type:Number,notify:!0},showNumber:Boolean,showStar:{type:Boolean,value:!1},showReviewedState:{type:Boolean,value:!1},keyEventTarget:{type:Object,value:()=>document.body},changeTableColumns:Array,visibleChangeTableColumns:Array,preferences:Object,_config:Object}}static get observers(){return["_sectionsChanged(sections.*)","_computePreferences(account, preferences, _config)"]}keyboardShortcuts(){return{[this.Shortcut.CURSOR_NEXT_CHANGE]:"_nextChange",[this.Shortcut.CURSOR_PREV_CHANGE]:"_prevChange",[this.Shortcut.NEXT_PAGE]:"_nextPage",[this.Shortcut.PREV_PAGE]:"_prevPage",[this.Shortcut.OPEN_CHANGE]:"_openChange",[this.Shortcut.TOGGLE_CHANGE_REVIEWED]:"_toggleChangeReviewed",[this.Shortcut.TOGGLE_CHANGE_STAR]:"_toggleChangeStar",[this.Shortcut.REFRESH_CHANGE_LIST]:"_refreshChangeList"}}constructor(){super(),this.flagsService=e.flagsService}created(){super.created(),this.addEventListener("keydown",e=>this._scopedKeydownHandler(e))}ready(){super.ready(),this._ensureAttribute("tabindex",0),this.$.restAPI.getConfig().then(e=>{this._config=e})}attached(){super.attached(),tr.awaitPluginsLoaded().then(()=>{this._dynamicHeaderEndpoints=ir.getDynamicEndpoints("change-list-header")})}_scopedKeydownHandler(e){13===e.keyCode&&this._openChange(e)}_lowerCase(e){return e.toLowerCase()}_computePreferences(e,t,n){if(![e,t,n].some(e=>void 0===e)&&(this.changeTableColumns=this.columnNames,this.showNumber=!1,this.visibleChangeTableColumns=this.getEnabledColumns(this.columnNames,n,this.flagsService.enabledExperiments),e&&(this.showNumber=!(!t||!t.legacycid_in_change_table),t.change_table&&t.change_table.length>0))){const e=this.getVisibleColumns(t.change_table);this.visibleChangeTableColumns=this.getEnabledColumns(e,n,this.flagsService.enabledExperiments)}}_computeColspan(e,t){if(e&&t)return e.length+t.length+3}_computeLabelNames(e){if(!e)return[];let t=[];const n=function(e){return!t.includes(e)};for(const i of e)if(i.results)for(const e of i.results){if(!e.labels)continue;const i=Object.keys(e.labels);t=t.concat(i.filter(n))}return t.sort()}_computeLabelShortcut(e){return e.startsWith("Invalid-Prolog-Rules-Label-Name--")&&(e=e.slice("Invalid-Prolog-Rules-Label-Name--".length)),e.split("-").reduce((e,t)=>t?e+t[0].toUpperCase():e,"").slice(0,5)}_changesChanged(e){this.sections=e?[{results:e}]:[]}_processQuery(e){let t=e.split(" ");const n=["limit:","age:","-age:"];return t=t.filter(e=>!n.some(t=>e.startsWith(t))),t.join(" ")}_sectionHref(e){return um.getUrlForSearchQuery(this._processQuery(e))}_computeItemAbsoluteIndex(e,t){let n=0;for(let t=0;t<e;t++)n+=this.sections[t].results.length;return n+t}_computeItemSelected(e,t,n){return this._computeItemAbsoluteIndex(e,t)==n}_computeItemNeedsReview(e,t,n){return n&&!t.reviewed&&!t.work_in_progress&&this.changeIsOpen(t)&&(!e||e._account_id!=t.owner._account_id)}_computeItemHighlight(e,t){return!!(t&&t.assignee&&e&&-1===cv.indexOf(t.status))&&e._account_id===t.assignee._account_id}_nextChange(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.cursor.next())}_prevChange(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.cursor.previous())}_openChange(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),um.navigateToChange(this._changeForIndex(this.selectedIndex)))}_nextPage(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)&&!this.isModifierPressed(e,"shiftKey")||(e.preventDefault(),this.dispatchEvent(new CustomEvent("next-page",{composed:!0,bubbles:!0})))}_prevPage(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)&&!this.isModifierPressed(e,"shiftKey")||(e.preventDefault(),this.dispatchEvent(new CustomEvent("previous-page",{composed:!0,bubbles:!0})))}_toggleChangeReviewed(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._toggleReviewedForIndex(this.selectedIndex))}_toggleReviewedForIndex(e){const t=this._getListItems();e>=t.length||!t[e]||t[e].toggleReviewed()}_refreshChangeList(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),this._reloadWindow())}_reloadWindow(){window.location.reload()}_toggleChangeStar(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._toggleStarForIndex(this.selectedIndex))}_toggleStarForIndex(e){const t=this._getListItems();e>=t.length||!t[e]||t[e].shadowRoot.querySelector("gr-change-star").toggleStar()}_changeForIndex(e){const t=this._getListItems();return e<t.length&&t[e]?t[e].change:null}_getListItems(){return Array.from(Ui(this.root).querySelectorAll("gr-change-list-item"))}_sectionsChanged(){bi(this,()=>{this.$.cursor.stops=this._getListItems(),this.$.cursor.moveToStart()})}_isOutgoing(e){return!!e.isOutgoing}_isEmpty(e){return!e.results.length}}customElements.define(dv.is,dv);
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hv=document.createElement("template");hv.innerHTML='<dom-module id="dashboard-header-styles">\n  <template>\n    <style>\n      :host {\n        background-color: var(--view-background-color);\n        display: block;\n        min-height: 9em;\n        width: 100%;\n      }\n      gr-avatar {\n        display: inline-block;\n        height: 7em;\n        left: 1em;\n        margin: 1em;\n        top: 1em;\n        width: 7em;\n      }\n      .info {\n        display: inline-block;\n        padding: var(--spacing-l);\n        vertical-align: top;\n      }\n      .info > div > span {\n        display: inline-block;\n        font-weight: var(--font-weight-bold);\n        text-align: right;\n        width: 4em;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(hv.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pv=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="dashboard-header-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="info">
    <h1 class$="name">
      [[repo]]
      <hr />
    </h1>
    <div><span>Detail:</span> <a href$="[[_repoUrl]]">Repo settings</a></div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class uv extends(Zn(na(Ka))){static get template(){return pv}static get is(){return"gr-repo-header"}static get properties(){return{repo:{type:String,observer:"_repoChanged"},_repoUrl:String}}_repoChanged(e){this._repoUrl=e?um.getUrlForRepo(e):null}}customElements.define(uv.is,uv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mv=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="dashboard-header-styles">
    .name {
      display: inline-block;
    }
    .name hr {
      width: 100%;
    }
    .status.hide,
    .name.hide,
    .dashboardLink.hide {
      display: none;
    }
  </style>
  <gr-avatar
    account="[[_accountDetails]]"
    image-size="100"
    aria-label="Account avatar"
  ></gr-avatar>
  <div class="info">
    <h1 class="name">
      [[_computeDetail(_accountDetails, 'name')]]
    </h1>
    <hr />
    <div class$="status [[_computeStatusClass(_accountDetails)]]">
      <span>Status:</span> [[_status]]
    </div>
    <div>
      <span>Email:</span>
      <a href="mailto:[[_computeDetail(_accountDetails, 'email')]]"
        ><!--
          -->[[_computeDetail(_accountDetails, 'email')]]</a
      >
    </div>
    <div>
      <span>Joined:</span>
      <gr-date-formatter
        date-str="[[_computeDetail(_accountDetails, 'registered_on')]]"
      >
      </gr-date-formatter>
    </div>
    <gr-endpoint-decorator name="user-header">
      <gr-endpoint-param name="accountDetails" value="[[_accountDetails]]">
      </gr-endpoint-param>
      <gr-endpoint-param name="loggedIn" value="[[loggedIn]]">
      </gr-endpoint-param>
    </gr-endpoint-decorator>
  </div>
  <div class="info">
    <div class$="[[_computeDashboardLinkClass(showDashboardLink, loggedIn)]]">
      <a href$="[[_computeDashboardUrl(_accountDetails)]]">View dashboard</a>
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class gv extends(Zn(na(Ka))){static get template(){return mv}static get is(){return"gr-user-header"}static get properties(){return{userId:{type:String,observer:"_accountChanged"},showDashboardLink:{type:Boolean,value:!1},loggedIn:{type:Boolean,value:!1},_accountDetails:{type:Object,value:null},_status:{type:String,value:null}}}_accountChanged(e){if(!e)return this._accountDetails=null,void(this._status=null);this.$.restAPI.getAccountDetails(e).then(e=>{this._accountDetails=e}),this.$.restAPI.getAccountStatus(e).then(e=>{this._status=e})}_computeDisplayClass(e){return e?" ":"hide"}_computeDetail(e,t){return e?e[t]:""}_computeStatusClass(e){return this._computeDetail(e,"status")?"":"hide"}_computeDashboardUrl(e){if(!e)return null;const t=e._account_id,n=e.email;return t||n?um.getUrlForUserDashboard(t||n):null}_computeDashboardLinkClass(e,t){return e&&t?"dashboardLink":"dashboardLink hide"}}customElements.define(gv.is,gv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _v=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    .loading {
      color: var(--deemphasized-text-color);
      padding: var(--spacing-l);
    }
    gr-change-list {
      width: 100%;
    }
    gr-user-header,
    gr-repo-header {
      border-bottom: 1px solid var(--border-color);
    }
    nav {
      align-items: center;
      display: flex;
      height: 3rem;
      justify-content: flex-end;
      margin-right: 20px;
    }
    nav,
    iron-icon {
      color: var(--deemphasized-text-color);
    }
    iron-icon {
      height: 1.85rem;
      margin-left: 16px;
      width: 1.85rem;
    }
    .hide {
      display: none;
    }
    @media only screen and (max-width: 50em) {
      .loading,
      .error {
        padding: 0 var(--spacing-l);
      }
    }
  </style>
  <div class="loading" hidden$="[[!_loading]]" hidden="">Loading...</div>
  <div hidden$="[[_loading]]" hidden="">
    <gr-repo-header
      repo="[[_repo]]"
      class$="[[_computeHeaderClass(_repo)]]"
    ></gr-repo-header>
    <gr-user-header
      user-id="[[_userId]]"
      show-dashboard-link=""
      logged-in="[[_loggedIn]]"
      class$="[[_computeHeaderClass(_userId)]]"
    ></gr-user-header>
    <gr-change-list
      account="[[account]]"
      changes="{{_changes}}"
      preferences="[[preferences]]"
      selected-index="{{viewState.selectedChangeIndex}}"
      show-star="[[_loggedIn]]"
      on-toggle-star="_handleToggleStar"
      on-toggle-reviewed="_handleToggleReviewed"
    ></gr-change-list>
    <nav class$="[[_computeNavClass(_loading)]]">
      Page [[_computePage(_offset, _changesPerPage)]]
      <a
        id="prevArrow"
        href$="[[_computeNavLink(_query, _offset, -1, _changesPerPage)]]"
        class$="[[_computePrevArrowClass(_offset)]]"
      >
        <iron-icon icon="gr-icons:chevron-left"></iron-icon>
      </a>
      <a
        id="nextArrow"
        href$="[[_computeNavLink(_query, _offset, 1, _changesPerPage)]]"
        class$="[[_computeNextArrowClass(_changes)]]"
      >
        <iron-icon icon="gr-icons:chevron-right"></iron-icon>
      </a>
    </nav>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,fv={CHANGE_ID:/^\s*i?[0-9a-f]{7,40}\s*$/i,CHANGE_NUM:/^\s*[1-9][0-9]*\s*$/g},bv=/^owner:\s?("[^"]+"|[^ ]+)$/,vv=/^project:\s?("[^"]+"|[^ ]+)(\sstatus\s?:(open|"open"))?$/,yv=/\blimit:(\d+)/i;class wv extends(ra([Go,L_],Zn(na(Ka)))){static get template(){return _v}static get is(){return"gr-change-list-view"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},_loggedIn:{type:Boolean,computed:"_computeLoggedIn(account)"},account:{type:Object,value:null},viewState:{type:Object,notify:!0,value:()=>({})},preferences:Object,_changesPerPage:Number,_query:{type:String,value:""},_offset:Number,_changes:{type:Array,observer:"_changesChanged"},_loading:{type:Boolean,value:!0},_userId:{type:String,value:null},_repo:{type:String,value:null}}}created(){super.created(),this.addEventListener("next-page",()=>this._handleNextPage()),this.addEventListener("previous-page",()=>this._handlePreviousPage())}attached(){super.attached(),this._loadPreferences()}_paramsChanged(e){e.view===um.View.SEARCH&&(this._loading=!0,this._query=e.query,this._offset=e.offset||0,this.viewState.query==this._query&&this.viewState.offset==this._offset||(this.set("viewState.selectedChangeIndex",0),this.set("viewState.query",this._query),this.set("viewState.offset",this._offset)),this.async(()=>this.dispatchEvent(new CustomEvent("title-change",{detail:{title:this._query},composed:!0,bubbles:!0}))),this._getPreferences().then(e=>(this._changesPerPage=e.changes_per_page,this._getChanges())).then(e=>{if(e=e||[],this._query&&1===e.length)for(const t in fv)if(fv.hasOwnProperty(t)&&this._query.match(fv[t]))return void um.navigateToChange(e[0]);this._changes=e,this._loading=!1}))}_loadPreferences(){return this.$.restAPI.getLoggedIn().then(e=>{e?this._getPreferences().then(e=>{this.preferences=e}):this.preferences={}})}_getChanges(){return this.$.restAPI.getChanges(this._changesPerPage,this._query,this._offset)}_getPreferences(){return this.$.restAPI.getPreferences()}_limitFor(e,t){const n=e.match(yv);return n?parseInt(n[1],10):t}_computeNavLink(e,t,n,i){t=+(t||0);const s=this._limitFor(e,i),a=Math.max(0,t+s*n);return um.getUrlForSearchQuery(e,a)}_computePrevArrowClass(e){return 0===e?"hide":""}_computeNextArrowClass(e){return e.length&&e[e.length-1]._more_changes?"":"hide"}_computeNavClass(e){return!e&&this._changes&&this._changes.length?"":"hide"}_handleNextPage(){this.$.nextArrow.hidden||_p.show(this._computeNavLink(this._query,this._offset,1,this._changesPerPage))}_handlePreviousPage(){this.$.prevArrow.hidden||_p.show(this._computeNavLink(this._query,this._offset,-1,this._changesPerPage))}_changesChanged(e){if(this._userId=null,this._repo=null,e&&e.length){if(bv.test(this._query)){const t=e[0].owner,n=t._account_id?t._account_id:t.email;if(n)return void(this._userId=n)}vv.test(this._query)&&(this._repo=e[0].project)}}_computeHeaderClass(e){return e?"":"hide"}_computePage(e,t){return e/t+1}_computeLoggedIn(e){return!!(e&&Object.keys(e).length>0)}_handleToggleStar(e){this.$.restAPI.saveChangeStarred(e.detail.change._number,e.detail.starred)}_handleToggleReviewed(e){this.$.restAPI.saveChangeReviewed(e.detail.change._number,e.detail.reviewed)}}customElements.define(wv.is,wv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cv=za`
  <style include="shared-styles">
    ol {
      list-style: decimal;
      margin-left: var(--spacing-l);
    }
    p {
      margin-bottom: var(--spacing-m);
    }
    #commandsDialog {
      max-width: 40em;
    }
  </style>
  <gr-overlay id="commandsOverlay" with-backdrop="">
    <gr-dialog
      id="commandsDialog"
      confirm-label="Done"
      cancel-label=""
      confirm-on-enter=""
      on-confirm="_handleClose"
    >
      <div class="header" slot="header">
        Create change commands
      </div>
      <div class="main" slot="main">
        <ol>
          <li>
            <p>
              Make the changes to the files on your machine
            </p>
          </li>
          <li>
            <p>
              If you are making a new commit use
            </p>
            <gr-shell-command
              command="[[_createNewCommitCommand]]"
            ></gr-shell-command>
            <p>
              Or to amend an existing commit use
            </p>
            <gr-shell-command
              command="[[_amendExistingCommitCommand]]"
            ></gr-shell-command>
            <p>
              Please make sure you add a commit message as it becomes the
              description for your change.
            </p>
          </li>
          <li>
            <p>
              Push the change for code review
            </p>
            <gr-shell-command command="[[_pushCommand]]"></gr-shell-command>
          </li>
          <li>
            <p>
              Close this dialog and you should be able to see your recently
              created change in the 'Outgoing changes' section on the 'Your
              changes' page.
            </p>
          </li>
        </ol>
      </div>
    </gr-dialog>
  </gr-overlay>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Ev="git commit",Sv="git commit --amend",xv="git push origin HEAD:refs/for/";class Av extends(Zn(na(Ka))){static get template(){return Cv}static get is(){return"gr-create-commands-dialog"}static get properties(){return{branch:String,_createNewCommitCommand:{type:String,readonly:!0,value:Ev},_amendExistingCommitCommand:{type:String,readonly:!0,value:Sv},_pushCommand:{type:String,computed:"_computePushCommand(branch)"}}}open(){this.$.commandsOverlay.open()}_handleClose(){this.$.commandsOverlay.close()}_computePushCommand(e){return xv+e}}customElements.define(Av.is,Av);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Pv=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    #graphic,
    #help {
      display: inline-block;
      margin: var(--spacing-m);
    }
    #graphic #circle {
      align-items: center;
      background-color: var(--chip-background-color);
      border-radius: 50%;
      display: flex;
      height: 10em;
      justify-content: center;
      width: 10em;
    }
    #graphic iron-icon {
      color: #9e9e9e;
      height: 5em;
      width: 5em;
    }
    #graphic p {
      color: var(--deemphasized-text-color);
      text-align: center;
    }
    #help {
      padding-top: var(--spacing-xl);
      vertical-align: top;
    }
    #help h1 {
      font-family: var(--header-font-family);
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-h3);
      line-height: var(--line-height-h3);
    }
    #help p {
      margin-bottom: var(--spacing-m);
      max-width: 35em;
    }
    @media only screen and (max-width: 50em) {
      #graphic {
        display: none;
      }
    }
  </style>
  <div id="graphic">
    <div id="circle">
      <iron-icon id="icon" icon="gr-icons:zeroState"></iron-icon>
    </div>
    <p>
      No outgoing changes yet
    </p>
  </div>
  <div id="help">
    <h1>Push your first change for code review</h1>
    <p>
      Pushing a change for review is easy, but a little different from other git
      code review tools. Click on the \`Create Change' button and follow the
      step by step instructions.
    </p>
    <gr-button on-click="_handleCreateTap">Create Change</gr-button>
  </div>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class kv extends(Zn(na(Ka))){static get template(){return Pv}static get is(){return"gr-create-change-help"}_handleCreateTap(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("create-tap",{bubbles:!0,composed:!0}))}}customElements.define(kv.is,kv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Tv=za`
  <style include="shared-styles">
    :host {
      display: block;
      width: 12em;
    }
    #container {
      background: var(--chip-background-color);
      border-radius: 1em;
      padding: var(--spacing-m);
    }
    #header {
      color: var(--deemphasized-text-color);
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-small);
    }
    #body {
      display: flex;
    }
    #trigger {
      color: var(--deemphasized-text-color);
      cursor: pointer;
      padding-left: var(--spacing-s);
    }
    #trigger:hover {
      color: var(--primary-text-color);
    }
  </style>
  <div id="container">
    <div id="header">[[label]]</div>
    <div id="body">
      <gr-autocomplete
        id="autocomplete"
        threshold="[[_autocompleteThreshold]]"
        query="[[query]]"
        disabled="[[disabled]]"
        placeholder="[[placeholder]]"
        borderless=""
      ></gr-autocomplete>
      <div id="trigger" on-click="_handleTriggerClick">▼</div>
    </div>
  </div>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Iv extends(Zn(na(Ka))){static get template(){return Tv}static get is(){return"gr-labeled-autocomplete"}static get properties(){return{query:{type:Function,value:()=>function(){return Promise.resolve([])}},text:{type:String,value:"",notify:!0},label:String,placeholder:String,disabled:Boolean,_autocompleteThreshold:{type:Number,value:0,readOnly:!0}}}_handleTriggerClick(e){e.stopPropagation(),this.$.autocomplete.focus()}setText(e){this.$.autocomplete.setText(e)}clear(){this.setText("")}}customElements.define(Iv.is,Iv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Rv=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    gr-labeled-autocomplete,
    iron-icon {
      display: inline-block;
    }
    iron-icon {
      margin-bottom: var(--spacing-l);
    }
  </style>
  <div>
    <gr-labeled-autocomplete
      id="repoInput"
      label="Repository"
      placeholder="Select repo"
      on-commit="_repoCommitted"
      query="[[_repoQuery]]"
    >
    </gr-labeled-autocomplete>
    <iron-icon icon="gr-icons:chevron-right"></iron-icon>
    <gr-labeled-autocomplete
      id="branchInput"
      label="Branch"
      placeholder="Select branch"
      disabled="[[_branchDisabled]]"
      on-commit="_branchCommitted"
      query="[[_query]]"
    >
    </gr-labeled-autocomplete>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Lv extends(ra([L_],Zn(na(Ka)))){static get template(){return Rv}static get is(){return"gr-repo-branch-picker"}static get properties(){return{repo:{type:String,notify:!0,observer:"_repoChanged"},branch:{type:String,notify:!0},_branchDisabled:Boolean,_query:{type:Function,value(){return this._getRepoBranchesSuggestions.bind(this)}},_repoQuery:{type:Function,value(){return this._getRepoSuggestions.bind(this)}}}}attached(){super.attached(),this.repo&&this.$.repoInput.setText(this.repo)}ready(){super.ready(),this._branchDisabled=!this.repo}_getRepoBranchesSuggestions(e){return this.repo?(e.startsWith("refs/heads/")&&(e=e.substring("refs/heads/".length)),this.$.restAPI.getRepoBranches(e,this.repo,15).then(this._branchResponseToSuggestions.bind(this))):Promise.resolve([])}_getRepoSuggestions(e){return this.$.restAPI.getRepos(e,15).then(this._repoResponseToSuggestions.bind(this))}_repoResponseToSuggestions(e){return e.map(e=>({name:e.name,value:this.singleDecodeURL(e.id)}))}_branchResponseToSuggestions(e){return Object.keys(e).map(t=>{let n=e[t].ref;return n.startsWith("refs/heads/")&&(n=n.substring("refs/heads/".length)),{name:n,value:n}})}_repoCommitted(e){this.repo=e.detail.value}_branchCommitted(e){this.branch=e.detail.value}_repoChanged(){this.$.branchInput.clear(),this._branchDisabled=!this.repo}}customElements.define(Lv.is,Lv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Dv=za`
  <style include="shared-styles"></style>
  <gr-overlay id="createOverlay" with-backdrop="">
    <gr-dialog
      confirm-label="View commands"
      on-confirm="_pickerConfirm"
      on-cancel="_handleClose"
      disabled="[[!_repoAndBranchSelected]]"
    >
      <div class="header" slot="header">
        Create change
      </div>
      <div class="main" slot="main">
        <gr-repo-branch-picker
          repo="{{_repo}}"
          branch="{{_branch}}"
        ></gr-repo-branch-picker>
        <p>
          If you haven't done so, you will need to clone the repository.
        </p>
      </div>
    </gr-dialog>
  </gr-overlay>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Ov extends(Zn(na(Ka))){static get template(){return Dv}static get is(){return"gr-create-destination-dialog"}static get properties(){return{_repo:String,_branch:String,_repoAndBranchSelected:{type:Boolean,value:!1,computed:"_computeRepoAndBranchSelected(_repo, _branch)"}}}open(){this._repo="",this._branch="",this.$.createOverlay.open()}_handleClose(){this.$.createOverlay.close()}_pickerConfirm(e){this.$.createOverlay.close();const t={repo:this._repo,branch:this._branch};e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{detail:t,bubbles:!1}))}_computeRepoAndBranchSelected(e,t){return!(!e||!t)}}customElements.define(Ov.is,Ov);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Nv=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    .loading {
      color: var(--deemphasized-text-color);
      padding: var(--spacing-l);
    }
    gr-change-list {
      width: 100%;
    }
    gr-user-header {
      border-bottom: 1px solid var(--border-color);
    }
    .banner {
      align-items: center;
      background-color: var(--comment-background-color);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-xs) var(--spacing-l);
    }
    .banner gr-button {
      --gr-button: {
        color: var(--primary-text-color);
      }
    }
    .hide {
      display: none;
    }
    #emptyOutgoing {
      display: block;
    }
    @media only screen and (max-width: 50em) {
      .loading {
        padding: 0 var(--spacing-l);
      }
    }
  </style>
  <div class$="banner [[_computeBannerClass(_showDraftsBanner)]]">
    <div>
      You have draft comments on closed changes.
      <a href$="[[_computeDraftsLink(_showDraftsBanner)]]" target="_blank"
        >(view all)</a
      >
    </div>
    <div>
      <gr-button class="delete" link="" on-click="_handleOpenDeleteDialog"
        >Delete All</gr-button
      >
    </div>
  </div>
  <div class="loading" hidden$="[[!_loading]]">Loading...</div>
  <div hidden$="[[_loading]]" hidden="">
    <gr-user-header
      user-id="[[params.user]]"
      class$="[[_computeUserHeaderClass(params)]]"
    ></gr-user-header>
    <gr-change-list
      show-star=""
      show-reviewed-state=""
      account="[[account]]"
      preferences="[[preferences]]"
      selected-index="{{viewState.selectedChangeIndex}}"
      sections="[[_results]]"
      on-toggle-star="_handleToggleStar"
      on-toggle-reviewed="_handleToggleReviewed"
    >
      <div id="emptyOutgoing" slot="empty-outgoing">
        <template is="dom-if" if="[[_showNewUserHelp]]">
          <gr-create-change-help
            on-create-tap="createChangeTap"
          ></gr-create-change-help>
        </template>
        <template is="dom-if" if="[[!_showNewUserHelp]]">
          No changes
        </template>
      </div>
    </gr-change-list>
  </div>
  <gr-overlay id="confirmDeleteOverlay" with-backdrop="">
    <gr-dialog
      id="confirmDeleteDialog"
      confirm-label="Delete"
      on-confirm="_handleConfirmDelete"
      on-cancel="_closeConfirmDeleteOverlay"
    >
      <div class="header" slot="header">
        Delete comments
      </div>
      <div class="main" slot="main">
        Are you sure you want to delete all your draft comments in closed
        changes? This action cannot be undone.
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-create-destination-dialog
    id="destinationDialog"
    on-confirm="_handleDestinationConfirm"
  ></gr-create-destination-dialog>
  <gr-create-commands-dialog id="commandsDialog"></gr-create-commands-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Mv=/\$\{project\}/g;class $v extends(ra([zg],Zn(na(Ka)))){static get template(){return Nv}static get is(){return"gr-dashboard-view"}static get properties(){return{account:{type:Object,value:null},preferences:Object,viewState:Object,params:{type:Object},createChangeTap:{type:Function,value(){return this._createChangeTap.bind(this)}},_results:Array,_loading:{type:Boolean,value:!0},_showDraftsBanner:{type:Boolean,value:!1},_showNewUserHelp:{type:Boolean,value:!1}}}static get observers(){return["_paramsChanged(params.*)"]}attached(){super.attached(),this._loadPreferences()}_loadPreferences(){return this.$.restAPI.getLoggedIn().then(e=>{e?this.$.restAPI.getPreferences().then(e=>{this.preferences=e}):this.preferences={}})}_getProjectDashboard(e,t){return this.$.restAPI.getDashboard(e,t,e=>{this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}).then(t=>{if(t)return{title:t.title,sections:t.sections.map(n=>{const i=t.foreach?" "+t.foreach:"";return{name:n.name,query:(n.query+i).replace(Mv,e)}})}})}_computeTitle(e){return e&&"self"!==e?"Dashboard for "+e:"My Reviews"}_isViewActive(e){return e.view===um.View.DASHBOARD}_paramsChanged(e){const t=e.base;return this._isViewActive(t)?this._reload():Promise.resolve()}_reload(){this._loading=!0;const{project:e,dashboard:t,title:n,user:i,sections:s}=this.params,a=e?this._getProjectDashboard(e,t):Promise.resolve(um.getUserDashboard(i,s,n||this._computeTitle(i))),o=!e&&"self"===i;return a.then(e=>(e&&e.title&&this.dispatchEvent(new CustomEvent("title-change",{detail:{title:e.title},composed:!0,bubbles:!0})),this._fetchDashboardChanges(e,o))).then(()=>{this._maybeShowDraftsBanner(),this.$.reporting.dashboardDisplayed()}).catch(e=>{this.dispatchEvent(new CustomEvent("title-change",{detail:{title:n||this._computeTitle(i)},composed:!0,bubbles:!0})),console.warn(e)}).then(()=>{this._loading=!1})}_fetchDashboardChanges(e,t){if(!e)return Promise.resolve();const n=e.sections.map(e=>e.suffixForDashboard?e.query+" "+e.suffixForDashboard:e.query);return t&&n.push("owner:self limit:1"),this.$.restAPI.getChanges(null,n).then(n=>{if(t){const e=n.pop();this._showNewUserHelp=0==e.length}this._results=n.map((t,n)=>({name:e.sections[n].name,countLabel:this._computeSectionCountLabel(t),query:e.sections[n].query,results:t,isOutgoing:e.sections[n].isOutgoing})).filter((t,n)=>n<e.sections.length&&(!e.sections[n].hideIfEmpty||t.results.length))})}_computeSectionCountLabel(e){if(!e||!e.length||0==e.length)return"";const t=e[e.length-1]._more_changes;return`(${e.length}${t?" and more":""})`}_computeUserHeaderClass(e){return e&&!e.project&&e.user&&"self"!==e.user?"":"hide"}_handleToggleStar(e){this.$.restAPI.saveChangeStarred(e.detail.change._number,e.detail.starred)}_handleToggleReviewed(e){this.$.restAPI.saveChangeReviewed(e.detail.change._number,e.detail.reviewed)}_maybeShowDraftsBanner(){if(this._showDraftsBanner=!1,"self"!==this.params.user)return;const e=this._results.find(e=>"has:draft"===e.query);e&&e.results.length&&e.results.filter(e=>!this.changeIsOpen(e)).length&&(this._showDraftsBanner=!0)}_computeBannerClass(e){return e?"":"hide"}_handleOpenDeleteDialog(){this.$.confirmDeleteOverlay.open()}_handleConfirmDelete(){return this.$.confirmDeleteDialog.disabled=!0,this.$.restAPI.deleteDraftComments("-is:open").then(()=>{this._closeConfirmDeleteOverlay(),this._reload()})}_closeConfirmDeleteOverlay(){this.$.confirmDeleteOverlay.close()}_computeDraftsLink(){return um.getUrlForSearchQuery("has:draft -is:open")}_createChangeTap(e){this.$.destinationDialog.open()}_handleDestinationConfirm(e){this.$.commandsDialog.branch=e.detail.branch,this.$.commandsDialog.open()}}customElements.define($v.is,$v);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bv=za`
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Fv="PARENT";class Uv{constructor(e,t,n,i){this._patchNumEquals=vm.patchNumEquals,this._isMergeParent=vm.isMergeParent,this._getParentIndex=vm.getParentIndex,this._comments=e||{},this._robotComments=t||{},this._drafts=n||{},this._changeNum=i}get comments(){return this._comments}get drafts(){return this._drafts}get robotComments(){return this._robotComments}getPaths(e){const t=[this.comments,this.drafts,this.robotComments],n={};for(const i of t)for(const t in i)i.hasOwnProperty(t)&&i[t].some(t=>!e||this._isInPatchRange(t,e))&&(n[t]=!0);return n}getAllPublishedComments(e){return this.getAllComments(!1,e)}getCommentsForThread(e){const t=this.getAllThreadsForChange().find(t=>t.rootId===e);return t?t.comments:null}_filterCommentsBySideAndLine(e,t,n,i){return e.filter(e=>{let n=t?e.side===Fv:e.side!==Fv;return t&&(n=n&&e.side===Fv),n&&e.line===i}).map(e=>(e.__commentSide=n,e))}getAllComments(e,t){const n=this.getPaths(),i={};for(const s of Object.keys(n)){let n=this.getAllCommentsForPath(s,t);if(e){const e=this.getAllDraftsForPath(s,t).map(e=>Object.assign({__draft:!0},e));n=n.concat(e)}i[s]=n}return i}getAllDrafts(e){const t=this.getPaths(),n={};for(const i of Object.keys(t))n[i]=this.getAllDraftsForPath(i,e);return n}getAllCommentsForPath(e,t,n){const i=this._comments[e]||[],s=this._robotComments[e]||[];let a=i.concat(s);if(n){const t=this.getAllDraftsForPath(e).map(e=>Object.assign({__draft:!0},e));a=a.concat(t)}return t?(a||[]).filter(e=>this._patchNumEquals(e.patch_set,t)):a}getAllCommentsForFile(e,t){let n=this.getAllCommentsForPath(e.path,e.patchNum,t);return e.oldPath&&(n=n.concat(this.getAllCommentsForPath(e.oldPath,e.patchNum,t))),n}getAllDraftsForPath(e,t){const n=this._drafts[e]||[];return t?(n||[]).filter(e=>this._patchNumEquals(e.patch_set,t)):n}getAllDraftsForFile(e){let t=this.getAllDraftsForPath(e.path,e.patchNum);return e.oldPath&&(t=t.concat(this.getAllDraftsForPath(e.oldPath,e.patchNum))),t}getCommentsBySideForPath(e,t,n){let i=[],s=[],a=[];this.comments&&this.comments[e]&&(i=this.comments[e]),this.drafts&&this.drafts[e]&&(s=this.drafts[e]),this.robotComments&&this.robotComments[e]&&(a=this.robotComments[e]),s.forEach(e=>{e.__draft=!0});const o=i.concat(s).concat(a),r=o.filter(e=>this._isInBaseOfPatchRange(e,t)),l=o.filter(e=>this._isInRevisionOfPatchRange(e,t));return{meta:{changeNum:this._changeNum,path:e,patchRange:t,projectConfig:n},left:r,right:l}}getCommentsBySideForFile(e,t,n){const i=this.getCommentsBySideForPath(e.path,t,n);if(e.oldPath){const s=this.getCommentsBySideForPath(e.oldPath,t,n);i.left=i.left.concat(s.left),i.right=i.right.concat(s.right)}return i}_commentObjToArrayWithFile(e){let t=[];for(const n of Object.keys(e)){const i=[];for(const t of e[n])i.push(Object.assign({__path:n},t));t=t.concat(i)}return t}_commentObjToArray(e){let t=[];for(const n of Object.keys(e))t=t.concat(e[n]);return t}computeCommentCount(e){if(e.path)return this.getAllCommentsForFile(e).length;const t=this.getAllPublishedComments(e.patchNum);return this._commentObjToArray(t).length}computeDraftCount(e){if(e&&e.path)return this.getAllDraftsForFile(e).length;const t=this.getAllDrafts(e&&e.patchNum);return this._commentObjToArray(t).length}computeUnresolvedNum(e){let t=[],n=[];return e.path?(t=this.getAllCommentsForFile(e),n=this.getAllDraftsForFile(e)):t=this._commentObjToArray(this.getAllPublishedComments(e.patchNum)),t=t.concat(n),this.getCommentThreads(this._sortComments(t)).filter(e=>e.comments.length&&e.comments[e.comments.length-1].unresolved).length}getAllThreadsForChange(){const e=this._commentObjToArrayWithFile(this.getAllComments(!0)),t=this._sortComments(e);return this.getCommentThreads(t)}_sortComments(e){return e.slice(0).sort((e,t)=>{const n=sr.parseDate(e.updated)-sr.parseDate(t.updated);return n||e.id-t.id})}getCommentThreads(e){const t=[],n={};for(const i of e){if(i.in_reply_to){const e=n[i.in_reply_to];if(e){e.comments.push(i),n[i.id]=e;continue}}const e={comments:[i],patchNum:i.patch_set,path:i.__path,line:i.line,rootId:i.id};i.side&&(e.commentSide=i.side),t.push(e),n[i.id]=e}return t}_isInBaseOfPatchRange(e,t){return e.parent&&e.side===Fv?this._isMergeParent(t.basePatchNum)&&e.parent===this._getParentIndex(t.basePatchNum):!(t.basePatchNum!==Fv||e.side!==Fv||!this._patchNumEquals(e.patch_set,t.patchNum))||!(t.basePatchNum===Fv||e.side===Fv||!this._patchNumEquals(e.patch_set,t.basePatchNum))}_isInRevisionOfPatchRange(e,t){return e.side!==Fv&&this._patchNumEquals(e.patch_set,t.patchNum)}_isInPatchRange(e,t){return this._isInBaseOfPatchRange(e,t)||this._isInRevisionOfPatchRange(e,t)}}class Hv extends(ra([vm],Zn(na(Ka)))){static get template(){return Bv}static get is(){return"gr-comment-api"}static get properties(){return{_changeComments:Object}}created(){super.created(),this.addEventListener("reload-drafts",e=>this.reloadDrafts(e))}loadAll(e){const t=[];return t.push(this.$.restAPI.getDiffComments(e)),t.push(this.$.restAPI.getDiffRobotComments(e)),t.push(this.$.restAPI.getDiffDrafts(e)),Promise.all(t).then(([t,n,i])=>(this._changeComments=new Uv(t,n,i,e),this._changeComments))}reloadDrafts(e){return this._changeComments?this.$.restAPI.getDiffDrafts(e).then(t=>(this._changeComments=new Uv(this._changeComments.comments,this._changeComments.robotComments,t,e),this._changeComments)):this.loadAll(e)}}customElements.define(Hv.is,Hv);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jv={"respectfultip:":12096e5,"draft:":864e5,"editablecontent:":864e5};class Gv extends(Zn(na(Ka))){static get is(){return"gr-storage"}static get properties(){return{_lastCleanup:Number,_storage:{type:Object,value:()=>window.localStorage},_exceededQuota:{type:Boolean,value:!1}}}getDraftComment(e){return this._cleanupItems(),this._getObject(this._getDraftKey(e))}setDraftComment(e,t){const n=this._getDraftKey(e);this._setObject(n,{message:t,updated:Date.now()})}eraseDraftComment(e){const t=this._getDraftKey(e);this._storage.removeItem(t)}getEditableContentItem(e){return this._cleanupItems(),this._getObject(this._getEditableContentKey(e))}setEditableContentItem(e,t){this._setObject(this._getEditableContentKey(e),{message:t,updated:Date.now()})}getRespectfulTipVisibility(){return this._cleanupItems(),this._getObject("respectfultip:visibility")}setRespectfulTipVisibility(e=0){this._cleanupItems(),this._setObject("respectfultip:visibility",{updated:Date.now()+864e5*e})}eraseEditableContentItem(e){this._storage.removeItem(this._getEditableContentKey(e))}_getDraftKey(e){const t=e.range?`${e.range.start_line}-${e.range.start_character}`+`-${e.range.end_character}-${e.range.end_line}`:null;let n=["draft",e.changeNum,e.patchNum,e.path,e.line||""].join(":");return t&&(n=n+":"+t),n}_getEditableContentKey(e){return`editablecontent:${e}`}_cleanupItems(){if(this._lastCleanup&&Date.now()-this._lastCleanup<864e5)return;let e;this._lastCleanup=Date.now(),Object.keys(this._storage).forEach(t=>{Object.keys(jv).forEach(n=>{if(t.startsWith(n)){e=this._getObject(t);const i=jv[n];Date.now()-e.updated>i&&this._storage.removeItem(t)}})})}_getObject(e){const t=this._storage.getItem(e);return t?JSON.parse(t):null}_setObject(e,t){if(!this._exceededQuota)try{this._storage.setItem(e,JSON.stringify(t))}catch(e){if(22===e.code)return this._exceededQuota=!0,void console.warn("Local storage quota exceeded: disabling");throw e}}}customElements.define(Gv.is,Gv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vv=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) iron-autogrow-textarea {
      opacity: 0.5;
    }
    .viewer {
      background-color: var(--view-background-color);
      border: 1px solid var(--view-background-color);
      border-radius: var(--border-radius);
      box-shadow: var(--elevation-level-1);
      padding: var(--spacing-m);
    }
    :host([collapsed]) .viewer {
      max-height: 36em;
      overflow: hidden;
    }
    .editor iron-autogrow-textarea {
      background-color: var(--view-background-color);
      width: 100%;

      /* You have to also repeat everything from shared-styles here, because
           you can only *replace* --iron-autogrow-textarea vars as a whole. */
      --iron-autogrow-textarea: {
        box-sizing: border-box;
        padding: var(--spacing-m);
        overflow-y: hidden;
        white-space: pre;
      }
    }
    .editButtons {
      display: flex;
      justify-content: space-between;
    }
  </style>
  <div class="viewer" hidden$="[[editing]]">
    <slot></slot>
  </div>
  <div class="editor" hidden$="[[!editing]]">
    <iron-autogrow-textarea
      autocomplete="on"
      bind-value="{{_newContent}}"
      disabled="[[disabled]]"
    ></iron-autogrow-textarea>
    <div class="editButtons">
      <gr-button primary="" on-click="_handleSave" disabled="[[_saveDisabled]]"
        >Save</gr-button
      >
      <gr-button on-click="_handleCancel" disabled="[[disabled]]"
        >Cancel</gr-button
      >
    </div>
  </div>
  <gr-storage id="storage"></gr-storage>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class zv extends(Zn(na(Ka))){static get template(){return Vv}static get is(){return"gr-editable-content"}static get properties(){return{content:{notify:!0,type:String,observer:"_contentChanged"},disabled:{reflectToAttribute:!0,type:Boolean,value:!1},editing:{observer:"_editingChanged",type:Boolean,value:!1},removeZeroWidthSpace:Boolean,storageKey:String,_saveDisabled:{computed:"_computeSaveDisabled(disabled, content, _newContent)",type:Boolean,value:!0},_newContent:{type:String,observer:"_newContentChanged"}}}_contentChanged(e){this.editing=!1,this._newContent=""}focusTextarea(){this.shadowRoot.querySelector("iron-autogrow-textarea").textarea.focus()}_newContentChanged(e,t){this.storageKey&&this.debounce("store",()=>{e.length?this.$.storage.setEditableContentItem(this.storageKey,e):this.$.storage.eraseEditableContentItem(this.storageKey)},400)}_editingChanged(e){if(!e||this._newContent)return;let t;if(this.storageKey){const e=this.$.storage.getEditableContentItem(this.storageKey);e&&e.message&&(t=e.message,this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Content restored from a previous edit."},bubbles:!0,composed:!0})))}t||(t=this.content||""),this._newContent=this.removeZeroWidthSpace?t.replace(/^R=\u200B/gm,"R="):t}_computeSaveDisabled(e,t,n){return e||!n||t===n}_handleSave(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("editable-content-save",{detail:{content:this._newContent},composed:!0,bubbles:!0}))}_handleCancel(e){e.preventDefault(),this.editing=!1,this.dispatchEvent(new CustomEvent("editable-content-cancel",{composed:!0,bubbles:!0}))}}var Wv,qv,Kv,Yv;customElements.define(zv.is,zv),
/**
 * @license
 * Copyright (c) 2009 "Cowboy" Ben Alman
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
/*!
 * JavaScript Linkify - v0.3 - 6/27/2009
 * http://benalman.com/projects/javascript-linkify/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 * 
 * Some regexps adapted from http://userscripts.org/scripts/review/7122
 */
window.linkify=(Wv=new RegExp("(?:(?:mailto:)?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)|(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?(?!\\w)|\\b[a-z\\d.-]+://[^<>\\s]+|\\b(?:(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)|(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))(?:[;/][^#?<>\\s]*)?(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?(?!\\w))","ig"),qv=new RegExp("^[a-z\\d.-]+://","i"),Kv={"'":"`",">":"<",")":"(","]":"[","}":"{","»":"«","›":"‹"},Yv={callback:function(e,t){return t?'<a href="'+t+'" title="'+t+'">'+e+"</a>":e},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/},function(e,t){t=t||{};var n,i,s,a,o,r,l,c,d,h,p,u,m="",g=[];for(i in Yv)void 0===t[i]&&(t[i]=Yv[i]);for(;n=Wv.exec(e);)if(s=n[0],l=(r=Wv.lastIndex)-s.length,!/[\/:]/.test(e.charAt(l-1))){do{c=s,u=s.substr(-1),(p=Kv[u])&&(d=s.match(new RegExp("\\"+p+"(?!$)","g")),h=s.match(new RegExp("\\"+u,"g")),(d?d.length:0)<(h?h.length:0)&&(s=s.substr(0,s.length-1),r--)),t.punct_regexp&&(s=s.replace(t.punct_regexp,(function(e){return r-=e.length,""})))}while(s.length&&s!==c);a=s,qv.test(a)||(a=(-1!==a.indexOf("@")?a.indexOf("mailto:")?"mailto:":"":a.indexOf("irc.")?a.indexOf("ftp.")?"http://":"ftp://":"irc://")+a),o!=l&&(g.push([e.slice(o,l)]),o=r),g.push([s,a])}for(g.push([e.substr(o)]),i=0;i<g.length;i++)m+=t.callback.apply(window,g[i]);return m||e});
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xv=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([pre]) span {
      white-space: var(--linked-text-white-space, pre-wrap);
      word-wrap: var(--linked-text-word-wrap, break-word);
    }
    :host([disabled]) a {
      color: inherit;
      text-decoration: none;
      pointer-events: none;
    }
  </style>
  <span id="output"></span>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Jv extends(Zn(na(Ka))){static get template(){return Xv}static get is(){return"gr-linked-text"}static get properties(){return{removeZeroWidthSpace:Boolean,content:{type:String,observer:"_contentChanged"},pre:{type:Boolean,value:!1,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,reflectToAttribute:!0},config:Object}}static get observers(){return["_contentOrConfigChanged(content, config)"]}_contentChanged(e){null==this.config&&(this.$.output.textContent=e)}_contentOrConfigChanged(e,t){if(!um.mapCommentlinks)return;t=um.mapCommentlinks(t);const n=Ui(this.$.output);n.textContent="",new zo(t,this._handleParseResult.bind(this),this.removeZeroWidthSpace).parse(e),n.querySelectorAll("a").forEach(e=>{e.hostname===window.location.hostname?e.removeAttribute("target"):e.setAttribute("target","_blank"),e.setAttribute("rel","noopener")})}_handleParseResult(e,t,n){const i=Ui(this.$.output);if(t){const n=document.createElement("a");n.href=t,n.textContent=e,n.target="_blank",n.rel="noopener",i.appendChild(n)}else n&&i.appendChild(n)}}customElements.define(Jv.is,Jv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zv=za`
  <style include="shared-styles">
    :host {
      display: inline-block;
    }
    .dropdown-trigger {
      text-decoration: none;
      width: 100%;
    }
    .dropdown-content {
      background-color: var(--dropdown-background-color);
      box-shadow: var(--elevation-level-2);
    }
    gr-button {
      @apply --gr-button;
    }
    gr-avatar {
      height: 2em;
      width: 2em;
      vertical-align: middle;
    }
    gr-button[link]:focus {
      outline: 5px auto -webkit-focus-ring-color;
    }
    ul {
      list-style: none;
    }
    .topContent,
    li {
      border-bottom: 1px solid var(--border-color);
    }
    li:last-of-type {
      border: none;
    }
    li .itemAction {
      cursor: pointer;
      display: block;
      padding: var(--spacing-m) var(--spacing-l);
    }
    li .itemAction {
      @apply --gr-dropdown-item;
    }
    li .itemAction.disabled {
      color: var(--deemphasized-text-color);
      cursor: default;
    }
    li .itemAction:link,
    li .itemAction:visited {
      text-decoration: none;
    }
    li .itemAction:not(.disabled):hover {
      background-color: var(--hover-background-color);
    }
    li:focus,
    li.selected {
      background-color: var(--selection-background-color);
      outline: none;
    }
    li:focus .itemAction,
    li.selected .itemAction {
      background-color: transparent;
    }
    .topContent {
      display: block;
      padding: var(--spacing-m) var(--spacing-l);
      @apply --gr-dropdown-item;
    }
    .bold-text {
      font-weight: var(--font-weight-bold);
    }
  </style>
  <gr-button
    link="[[link]]"
    class="dropdown-trigger"
    id="trigger"
    down-arrow="[[downArrow]]"
    on-click="_dropdownTriggerTapHandler"
  >
    <slot></slot>
  </gr-button>
  <iron-dropdown
    id="dropdown"
    vertical-align="top"
    vertical-offset="[[verticalOffset]]"
    allow-outside-scroll="true"
    horizontal-align="[[horizontalAlign]]"
    on-click="_handleDropdownClick"
  >
    <div class="dropdown-content" slot="dropdown-content">
      <ul>
        <template is="dom-if" if="[[topContent]]">
          <div class="topContent">
            <template
              is="dom-repeat"
              items="[[topContent]]"
              as="item"
              initial-count="75"
            >
              <div
                class$="[[_getClassIfBold(item.bold)]] top-item"
                tabindex="-1"
              >
                [[item.text]]
              </div>
            </template>
          </div>
        </template>
        <template
          is="dom-repeat"
          items="[[items]]"
          as="link"
          initial-count="75"
        >
          <li tabindex="-1">
            <gr-tooltip-content
              has-tooltip="[[_computeHasTooltip(link.tooltip)]]"
              title$="[[link.tooltip]]"
            >
              <span
                class$="itemAction [[_computeDisabledClass(link.id, disabledIds.*)]]"
                data-id$="[[link.id]]"
                on-click="_handleItemTap"
                hidden$="[[link.url]]"
                tabindex="-1"
                >[[link.name]]</span
              >
              <a
                class="itemAction"
                href$="[[_computeLinkURL(link)]]"
                download$="[[_computeIsDownload(link)]]"
                rel$="[[_computeLinkRel(link)]]"
                target$="[[link.target]]"
                hidden$="[[!link.url]]"
                tabindex="-1"
                >[[link.name]]</a
              >
            </gr-tooltip-content>
          </li>
        </template>
      </ul>
    </div>
  </iron-dropdown>
  <gr-cursor-manager
    id="cursor"
    cursor-target-class="selected"
    scroll-behavior="never"
    focus-on-move=""
    stops="[[_listElements]]"
  ></gr-cursor-manager>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Qv extends(ra([Go,Wu],Zn(na(Ka)))){static get template(){return Zv}static get is(){return"gr-dropdown"}static get properties(){return{items:{type:Array,observer:"_resetCursorStops"},downArrow:Boolean,topContent:Object,horizontalAlign:{type:String,value:"left"},link:{type:Boolean,value:!1},verticalOffset:{type:Number,value:40},disabledIds:{type:Array,value:()=>[]},_listElements:{type:Array,value:()=>[]}}}get keyBindings(){return{down:"_handleDown","enter space":"_handleEnter",tab:"_handleTab",up:"_handleUp"}}_handleUp(e){this.$.dropdown.opened?(e.preventDefault(),e.stopPropagation(),this.$.cursor.previous()):this._open()}_handleDown(e){this.$.dropdown.opened?(e.preventDefault(),e.stopPropagation(),this.$.cursor.next()):this._open()}_handleTab(e){this.$.dropdown.opened&&(e.preventDefault(),e.stopPropagation())}_handleEnter(e){if(e.preventDefault(),e.stopPropagation(),this.$.dropdown.opened){const e=this.$.cursor.target.querySelector(":not([hidden]) a");e&&e.click()}else this._open()}_handleDropdownClick(e){this._close()}_dropdownTriggerTapHandler(e){e.preventDefault(),e.stopPropagation(),this.$.dropdown.opened?this._close():this._open()}_open(){this.$.dropdown.open(),this._resetCursorStops(),this.$.cursor.setCursorAtIndex(0),this.$.cursor.target.focus()}_close(){this.async(()=>{this.$.dropdown.close()},1)}_getClassIfBold(e){return e?"bold-text":""}_computeURLHelper(e,t){return"//"+e+(t.startsWith(this.getBaseUrl())?"":this.getBaseUrl())+t}_computeRelativeURL(e){const t=window.location.host;return this._computeURLHelper(t,e)}_computeLinkURL(e){return void 0===e.url?"":e.target||!e.url.startsWith("/")?e.url:this._computeRelativeURL(e.url)}_computeLinkRel(e){return e.target?"noopener":e.external?"external":null}_handleItemTap(e){const t=e.target.getAttribute("data-id"),n=this.items.find(e=>e.id===t);t&&!this.disabledIds.includes(t)&&(n&&this.dispatchEvent(new CustomEvent("tap-item",{detail:n})),this.dispatchEvent(new CustomEvent("tap-item-"+t)))}_computeDisabledClass(e,t){return t.base.includes(e)?"disabled":""}_resetCursorStops(){this.items&&this.items.length>0&&this.$.dropdown.opened&&(Ii(),this._listElements=Array.from(Ui(this.root).querySelectorAll("li")))}_computeHasTooltip(e){return!!e}_computeIsDownload(e){return!!e.download}}customElements.define(Qv.is,Qv);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ey=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    .main {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    label {
      cursor: pointer;
      display: block;
      width: 100%;
    }
    iron-autogrow-textarea {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      width: 73ch; /* Add a char to account for the border. */
    }
  </style>
  <gr-dialog
    confirm-label="Abandon"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">Abandon Change</div>
    <div class="main" slot="main">
      <label for="messageInput">Abandon Message</label>
      <iron-autogrow-textarea
        id="messageInput"
        class="message"
        autocomplete="on"
        placeholder="<Insert reasoning here>"
        bind-value="{{message}}"
      ></iron-autogrow-textarea>
    </div>
  </gr-dialog>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class ty extends(ra([Wu],Zn(na(Ka)))){static get template(){return ey}static get is(){return"gr-confirm-abandon-dialog"}static get properties(){return{message:String}}get keyBindings(){return{"ctrl+enter meta+enter":"_handleEnterKey"}}resetFocus(){this.$.messageInput.textarea.focus()}_handleEnterKey(e){this._confirm()}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this._confirm()}_confirm(){this.dispatchEvent(new CustomEvent("confirm",{detail:{reason:this.message},composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}}customElements.define(ty.is,ty);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ny=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    label {
      cursor: pointer;
    }
    .main {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    .main label,
    .main input[type='text'] {
      display: block;
      width: 100%;
    }
    iron-autogrow-textarea {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      width: 73ch; /* Add a char to account for the border. */
    }
    .cherryPickTopicLayout {
      display: flex;
    }
    .cherryPickSingleChange,
    .cherryPickTopic {
      margin-left: var(--spacing-m);
      margin-bottom: var(--spacing-m);
    }
    .cherry-pick-topic-message {
      margin-bottom: var(--spacing-m);
    }
    label[for='messageInput'],
    label[for='baseInput'] {
      margin-top: var(--spacing-m);
    }
    .title {
      font-weight: var(--font-weight-bold);
    }
    tr > td {
      padding: var(--spacing-m);
    }
    th {
      color: var(--deemphasized-text-color);
    }
    table {
      border-collapse: collapse;
    }
    tr {
      border-bottom: 1px solid var(--border-color);
    }
    .error {
      color: var(--error-text-color);
    }
    .error-message {
      color: var(--error-text-color);
      margin: var(--spacing-m) 0 var(--spacing-m) 0;
    }
  </style>
  <gr-dialog
    confirm-label="Cherry Pick"
    cancel-label="[[_computeCancelLabel(_statuses)]]"
    disabled$="[[_computeDisableCherryPick(_cherryPickType, _duplicateProjectChanges, _statuses)]]"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header title" slot="header">
      Cherry Pick Change to Another Branch
    </div>
    <div class="main" slot="main">
      <template is="dom-if" if="[[_showCherryPickTopic]]">
        <div class="cherryPickTopicLayout">
          <input
            name="cherryPickOptions"
            type="radio"
            id="cherryPickSingleChange"
            on-change="_handlecherryPickSingleChangeClicked"
            checked=""
          />
          <label for="cherryPickSingleChange" class="cherryPickSingleChange">
            Cherry Pick single change
          </label>
        </div>
        <div class="cherryPickTopicLayout">
          <input
            name="cherryPickOptions"
            type="radio"
            id="cherryPickTopic"
            on-change="_handlecherryPickTopicClicked"
          />
          <label for="cherryPickTopic" class="cherryPickTopic">
            Cherry Pick entire topic ([[_changesCount]] Changes)
          </label>
        </div></template
      >

      <label for="branchInput">
        Cherry Pick to branch
      </label>
      <gr-autocomplete
        id="branchInput"
        text="{{branch}}"
        query="[[_query]]"
        placeholder="Destination branch"
      >
      </gr-autocomplete>
      <template is="dom-if" if="[[_invalidBranch]]">
        <span class="error"> Branch name cannot contain space or commas. </span>
      </template>
      <template
        is="dom-if"
        if="[[_computeIfSinglecherryPick(_cherryPickType)]]"
      >
        <label for="baseInput">
          Provide base commit sha1 for cherry-pick
        </label>
        <iron-input
          maxlength="40"
          placeholder="(optional)"
          bind-value="{{baseCommit}}"
        >
          <input
            is="iron-input"
            id="baseCommitInput"
            maxlength="40"
            placeholder="(optional)"
            bind-value="{{baseCommit}}"
          />
        </iron-input>
        <label for="messageInput">
          Cherry Pick Commit Message
        </label>
      </template>
      <template
        is="dom-if"
        if="[[_computeIfSinglecherryPick(_cherryPickType)]]"
      >
        <iron-autogrow-textarea
          id="messageInput"
          class="message"
          autocomplete="on"
          rows="4"
          max-rows="15"
          bind-value="{{message}}"
        ></iron-autogrow-textarea>
      </template>
      <template is="dom-if" if="[[_computeIfCherryPickTopic(_cherryPickType)]]">
        <span class="error-message"
          >[[_computeTopicErrorMessage(_duplicateProjectChanges)]]</span
        >
        <span class="cherry-pick-topic-message">
          Commit Message will be auto generated
        </span>
        <table>
          <thead>
            <tr>
              <th>Change</th>
              <th>Subject</th>
              <th>Project</th>
              <th>Status</th>
              <!-- Error Message -->
              <th></th>
            </tr>
          </thead>
          <tbody>
            <template is="dom-repeat" items="[[changes]]">
              <tr>
                <td><span> [[_getChangeId(item)]] </span></td>
                <td>
                  <span> [[_getTrimmedChangeSubject(item.subject)]] </span>
                </td>
                <td><span> [[item.project]] </span></td>
                <td>
                  <span class$="[[_computeStatusClass(item, _statuses)]]">
                    [[_computeStatus(item, _statuses)]]
                  </span>
                </td>
                <td>
                  <span class="error">
                    [[_computeError(item, _statuses)]]
                  </span>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </template>
    </div>
  </gr-dialog>
  <gr-reporting
    id="reporting"
    category="confirm-cherry-pick-dialog"
  ></gr-reporting>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,iy=1,sy=2;class ay extends(Zn(na(Ka))){static get template(){return ny}static get is(){return"gr-confirm-cherrypick-dialog"}static get properties(){return{branch:{type:String,observer:"_updateBranch"},baseCommit:String,changeStatus:String,commitMessage:String,commitNum:String,message:String,project:String,changes:Array,_query:{type:Function,value(){return this._getProjectBranchesSuggestions.bind(this)}},_showCherryPickTopic:{type:Boolean,value:!1},_changesCount:Number,_cherryPickType:{type:Number,value:iy},_duplicateProjectChanges:{type:Boolean,value:!1},_statuses:Object,_invalidBranch:{type:Boolean,value:!1}}}static get observers(){return["_computeMessage(changeStatus, commitNum, commitMessage)"]}updateChanges(e){this.changes=e,this._statuses={};const t={};this._duplicateProjectChanges=!1,e.forEach(e=>{t[e.project]&&(this._duplicateProjectChanges=!0),t[e.project]=!0}),this._changesCount=e.length,this._showCherryPickTopic=e.length>1}_updateBranch(e){this._invalidBranch=e&&[","," "].some(t=>e.includes(t))}_computeTopicErrorMessage(e){if(e)return"Two changes cannot be of the same project"}updateStatus(e,t){this._statuses=Object.assign({},this._statuses,{[e.id]:t})}_computeStatus(e,t){return e&&t&&t[e.id]?t[e.id].status:"NOT STARTED"}_computeStatusClass(e,t){return e&&t&&t[e.id]&&"FAILED"===t[e.id].status?"error":""}_computeError(e,t){return e&&t&&t[e.id]?"FAILED"===t[e.id].status?t[e.id].msg:void 0:""}_getChangeId(e){return e.change_id.substring(0,10)}_getTrimmedChangeSubject(e){return e?e.length<50?e:e.substring(0,50)+"...":""}_computeCancelLabel(e){return Object.values(e).some(e=>"RUNNING"===e.status)?"Close":"Cancel"}_computeDisableCherryPick(e,t,n){return!(e!==sy||!t)||!!n&&Object.values(n).some(e=>"RUNNING"===e.status)}_computeIfSinglecherryPick(e){return e===iy}_computeIfCherryPickTopic(e){return e===sy}_handlecherryPickSingleChangeClicked(e){this._cherryPickType=iy}_handlecherryPickTopicClicked(e){this._cherryPickType=sy}_computeMessage(e,t,n){if([e,t,n].some(e=>void 0===e))return;let i=n;"MERGED"===e&&(i+="(cherry picked from commit "+t+")"),this.message=i}_generateRandomCherryPickTopic(e){const t=Math.random().toString(36).substr(2,10);return`cherrypick-${e.topic}-${t}`}_handleCherryPickFailed(e,t){t.text().then(t=>{this.updateStatus(e,{status:"FAILED",msg:t})})}_handleCherryPickTopic(){const e=this._generateRandomCherryPickTopic(this.changes[0]);this.changes.forEach(t=>{this.updateStatus(t,{status:"RUNNING"});const n={destination:this.branch,base:null,topic:e,allow_conflicts:!0,allow_empty:!0},i=t.revisions[t.current_revision]._number;this.$.restAPI.executeChangeAction(t._number,"POST","/cherrypick",i,n,e=>{this._handleCherryPickFailed(t,e)}).then(n=>{this.updateStatus(t,{status:"SUCCESSFUL"}),Object.values(this._statuses).find(e=>"SUCCESSFUL"!==e.status)||um.navigateToSearchQuery(`topic: "${e}"`)})})}_handleConfirmTap(e){if(e.preventDefault(),e.stopPropagation(),this._cherryPickType===sy)return this.$.reporting.reportInteraction("cherry-pick-topic-clicked"),void this._handleCherryPickTopic();this.dispatchEvent(new CustomEvent("confirm",{composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}resetFocus(){this.$.branchInput.focus()}_getProjectBranchesSuggestions(e){return e.startsWith("refs/heads/")&&(e=e.substring("refs/heads/".length)),this.$.restAPI.getRepoBranches(e,this.project,15).then(e=>{const t=[];let n;for(const i in e)e.hasOwnProperty(i)&&(n=e[i].ref.startsWith("refs/heads/")?e[i].ref.substring("refs/heads/".length):e[i].ref,t.push({name:n}));return t})}}customElements.define(ay.is,ay);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oy=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    .main {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
  </style>
  <gr-dialog
    confirm-label="Continue"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">Cherry Pick Conflict!</div>
    <div class="main" slot="main">
      <span>Cherry Pick failed! (merge conflicts)</span>

      <span
        >Please select "Continue" to continue with conflicts or select "cancel"
        to close the dialog.</span
      >
    </div>
  </gr-dialog>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class ry extends(Zn(na(Ka))){static get template(){return oy}static get is(){return"gr-confirm-cherrypick-conflict-dialog"}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}}customElements.define(ry.is,ry);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ly=za`
  <style include="shared-styles">
    :host {
      display: block;
      width: 30em;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    label {
      cursor: pointer;
    }
    .main {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    .main label,
    .main input[type='text'] {
      display: block;
      width: 100%;
    }
    .main .message {
      width: 100%;
    }
    .warning {
      color: var(--error-text-color);
    }
  </style>
  <gr-dialog
    confirm-label="Move Change"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">Move Change to Another Branch</div>
    <div class="main" slot="main">
      <p class="warning">
        Warning: moving a change will not change its parents.
      </p>
      <label for="branchInput">
        Move change to branch
      </label>
      <gr-autocomplete
        id="branchInput"
        text="{{branch}}"
        query="[[_query]]"
        placeholder="Destination branch"
      >
      </gr-autocomplete>
      <label for="messageInput">
        Move Change Message
      </label>
      <iron-autogrow-textarea
        id="messageInput"
        class="message"
        autocomplete="on"
        rows="4"
        max-rows="15"
        bind-value="{{message}}"
      ></iron-autogrow-textarea>
    </div>
  </gr-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class cy extends(ra([Wu],Zn(na(Ka)))){static get template(){return ly}static get is(){return"gr-confirm-move-dialog"}static get properties(){return{branch:String,message:String,project:String,_query:{type:Function,value(){return this._getProjectBranchesSuggestions.bind(this)}}}}get keyBindings(){return{"ctrl+enter meta+enter":"_handleConfirmTap"}}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}_getProjectBranchesSuggestions(e){return e.startsWith("refs/heads/")&&(e=e.substring("refs/heads/".length)),this.$.restAPI.getRepoBranches(e,this.project,15).then(e=>{const t=[];let n;for(const i in e)e.hasOwnProperty(i)&&(n=e[i].ref.startsWith("refs/heads/")?e[i].ref.substring("refs/heads/".length):e[i].ref,t.push({name:n}));return t})}}customElements.define(cy.is,cy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const dy=za`
  <style include="shared-styles">
    :host {
      display: block;
      width: 30em;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    label {
      cursor: pointer;
    }
    .message {
      font-style: italic;
    }
    .parentRevisionContainer label,
    .parentRevisionContainer input[type='text'] {
      display: block;
      width: 100%;
    }
    .parentRevisionContainer label {
      margin-bottom: var(--spacing-xs);
    }
    .rebaseOption {
      margin: var(--spacing-m) 0;
    }
  </style>
  <gr-dialog
    id="confirmDialog"
    confirm-label="Rebase"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">Confirm rebase</div>
    <div class="main" slot="main">
      <div
        id="rebaseOnParent"
        class="rebaseOption"
        hidden$="[[!_displayParentOption(rebaseOnCurrent, hasParent)]]"
      >
        <input
          id="rebaseOnParentInput"
          name="rebaseOptions"
          type="radio"
          on-click="_handleRebaseOnParent"
        />
        <label id="rebaseOnParentLabel" for="rebaseOnParentInput">
          Rebase on parent change
        </label>
      </div>
      <div
        id="parentUpToDateMsg"
        class="message"
        hidden$="[[!_displayParentUpToDateMsg(rebaseOnCurrent, hasParent)]]"
      >
        This change is up to date with its parent.
      </div>
      <div
        id="rebaseOnTip"
        class="rebaseOption"
        hidden$="[[!_displayTipOption(rebaseOnCurrent, hasParent)]]"
      >
        <input
          id="rebaseOnTipInput"
          name="rebaseOptions"
          type="radio"
          disabled$="[[!_displayTipOption(rebaseOnCurrent, hasParent)]]"
          on-click="_handleRebaseOnTip"
        />
        <label id="rebaseOnTipLabel" for="rebaseOnTipInput">
          Rebase on top of the [[branch]] branch<span hidden$="[[!hasParent]]">
            (breaks relation chain)
          </span>
        </label>
      </div>
      <div
        id="tipUpToDateMsg"
        class="message"
        hidden$="[[_displayTipOption(rebaseOnCurrent, hasParent)]]"
      >
        Change is up to date with the target branch already ([[branch]])
      </div>
      <div id="rebaseOnOther" class="rebaseOption">
        <input
          id="rebaseOnOtherInput"
          name="rebaseOptions"
          type="radio"
          on-click="_handleRebaseOnOther"
        />
        <label id="rebaseOnOtherLabel" for="rebaseOnOtherInput">
          Rebase on a specific change, ref, or commit
          <span hidden$="[[!hasParent]]">
            (breaks relation chain)
          </span>
        </label>
      </div>
      <div class="parentRevisionContainer">
        <gr-autocomplete
          id="parentInput"
          query="[[_query]]"
          no-debounce=""
          text="{{_text}}"
          on-click="_handleEnterChangeNumberClick"
          allow-non-suggested-values=""
          placeholder="Change number, ref, or commit hash"
        >
        </gr-autocomplete>
      </div>
    </div>
  </gr-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class hy extends(Zn(na(Ka))){static get template(){return dy}static get is(){return"gr-confirm-rebase-dialog"}static get properties(){return{branch:String,changeNumber:Number,hasParent:Boolean,rebaseOnCurrent:Boolean,_text:String,_query:{type:Function,value(){return this._getChangeSuggestions.bind(this)}},_recentChanges:Array}}static get observers(){return["_updateSelectedOption(rebaseOnCurrent, hasParent)"]}fetchRecentChanges(){return this.$.restAPI.getChanges(null,"is:open -age:90d").then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:`${e[n]._number}: ${e[n].subject}`,value:e[n]._number});return this._recentChanges=t,this._recentChanges})}_getRecentChanges(){return this._recentChanges?Promise.resolve(this._recentChanges):this.fetchRecentChanges()}_getChangeSuggestions(e){return this._getRecentChanges().then(t=>this._filterChanges(e,t))}_filterChanges(e,t){return t.filter(t=>t.name.includes(e)&&t.value!==this.changeNumber)}_displayParentOption(e,t){return t&&e}_displayParentUpToDateMsg(e,t){return t&&!e}_displayTipOption(e,t){return!(!e&&!t)}_getSelectedBase(){return this.$.rebaseOnParentInput.checked?null:this.$.rebaseOnTipInput.checked?"":this._text.split(":")[0]}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{detail:{base:this._getSelectedBase()}})),this._text=""}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel")),this._text=""}_handleRebaseOnOther(){this.$.parentInput.focus()}_handleEnterChangeNumberClick(){this.$.rebaseOnOtherInput.checked=!0}_updateSelectedOption(e,t){[e,t].some(e=>void 0===e)||(this._displayParentOption(e,t)?this.$.rebaseOnParentInput.checked=!0:this._displayTipOption(e,t)?this.$.rebaseOnTipInput.checked=!0:this.$.rebaseOnOtherInput.checked=!0)}}customElements.define(hy.is,hy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const py=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    label {
      cursor: pointer;
      display: block;
      width: 100%;
    }
    .revertSubmissionLayout {
      display: flex;
    }
    .label {
      margin-left: var(--spacing-m);
      margin-bottom: var(--spacing-m);
    }
    iron-autogrow-textarea {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      width: 73ch; /* Add a char to account for the border. */
    }
    .error {
      color: var(--error-text-color);
      margin-bottom: var(--spacing-m);
    }
  </style>
  <gr-dialog
    confirm-label="Revert"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">
      Revert Merged Change
    </div>
    <div class="main" slot="main">
      <div class="error" hidden$="[[!_showErrorMessage]]">
        <span> A reason is required </span>
      </div>
      <template is="dom-if" if="[[_showRevertSubmission]]">
        <div class="revertSubmissionLayout">
          <input
            name="revertOptions"
            type="radio"
            id="revertSingleChange"
            on-change="_handleRevertSingleChangeClicked"
            checked="[[_computeIfSingleRevert(_revertType)]]"
          />
          <label for="revertSingleChange" class="label revertSingleChange">
            Revert single change
          </label>
        </div>
        <div class="revertSubmissionLayout">
          <input
            name="revertOptions"
            type="radio"
            id="revertSubmission"
            on-change="_handleRevertSubmissionClicked"
            checked="[[_computeIfRevertSubmission(_revertType)]]"
          />
          <label for="revertSubmission" class="label revertSubmission">
            Revert entire submission ([[_changesCount]] Changes)
          </label>
        </div></template
      >
      <gr-endpoint-decorator name="confirm-revert-change">
        <label for="messageInput">
          Revert Commit Message
        </label>
        <iron-autogrow-textarea
          id="messageInput"
          class="message"
          autocomplete="on"
          max-rows="15"
          bind-value="{{_message}}"
        ></iron-autogrow-textarea>
      </gr-endpoint-decorator>
    </div>
  </gr-dialog>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,uy=1,my=2;class gy extends(Zn(na(Ka))){static get template(){return py}static get is(){return"gr-confirm-revert-dialog"}static get properties(){return{_message:String,_revertType:{type:Number,value:uy},_showRevertSubmission:{type:Boolean,value:!1},_changesCount:Number,_showErrorMessage:{type:Boolean,value:!1},_originalRevertMessages:{type:Array,value:()=>[]},_revertMessages:{type:Array,value:()=>[]}}}_computeIfSingleRevert(e){return e===uy}_computeIfRevertSubmission(e){return e===my}_modifyRevertMsg(e,t,n){return this.$.jsAPI.modifyRevertMsg(e,n,t)}populate(e,t,n){this._changesCount=n.length,this._populateRevertSingleChangeMessage(e,t,e.current_revision),this._populateRevertSubmissionMessage(e,n,t)}_populateRevertSingleChangeMessage(e,t,n){const i=`Revert "${(t||"").split("\n")[0]}"`;if(!n)return void this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Unable to find the commit hash of this change."},composed:!0,bubbles:!0}));const s=`This reverts commit ${n}.`;this._message=`${i}\n\n${s}\n\n`+"Reason for revert: <INSERT REASONING HERE>\n",this._message=this._modifyRevertMsg(e,t,this._message),this._revertType=uy,this._showRevertSubmission=!1,this._revertMessages[this._revertType]=this._message,this._originalRevertMessages[this._revertType]=this._message}_getTrimmedChangeSubject(e){return e?e.length<50?e:e.substring(0,50)+"...":""}_modifyRevertSubmissionMsg(e,t,n){return this.$.jsAPI.modifyRevertSubmissionMsg(e,t,n)}_populateRevertSubmissionMessage(e,t,n){if(!e.current_revision)return void this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Unable to find the commit hash of this change."},composed:!0,bubbles:!0}));if(!t||t.length<=1)return;const i="Revert submission "+e.submission_id;this._message=i+"\n\nReason for revert: <INSERT REASONING HERE>\n",this._message+="Reverted Changes:\n",t.forEach(e=>{this._message+=e.change_id.substring(0,10)+":"+this._getTrimmedChangeSubject(e.subject)+"\n"}),this._message=this._modifyRevertSubmissionMsg(e,this._message,n),this._revertType=my,this._revertMessages[this._revertType]=this._message,this._originalRevertMessages[this._revertType]=this._message,this._showRevertSubmission=!0}_handleRevertSingleChangeClicked(){this._showErrorMessage=!1,this._revertMessages[my]=this._message,this._message=this._revertMessages[uy],this._revertType=uy}_handleRevertSubmissionClicked(){this._showErrorMessage=!1,this._revertType=my,this._revertMessages[uy]=this._message,this._message=this._revertMessages[my]}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this._message!==this._originalRevertMessages[this._revertType]?this.dispatchEvent(new CustomEvent("confirm",{detail:{revertType:this._revertType,message:this._message},composed:!0,bubbles:!1})):this._showErrorMessage=!0}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{detail:{revertType:this._revertType},composed:!0,bubbles:!1}))}}customElements.define(gy.is,gy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _y=za`
  <!-- TODO(taoalpha): move all shared styles to a style module. -->
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    label {
      cursor: pointer;
      display: block;
      width: 100%;
    }
    iron-autogrow-textarea {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      width: 73ch; /* Add a char to account for the border. */
    }
  </style>
  <gr-dialog
    confirm-label="Revert Submission"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">Revert Submission</div>
    <div class="main" slot="main">
      <label for="messageInput">
        Revert Commit Message
      </label>
      <iron-autogrow-textarea
        id="messageInput"
        class="message"
        autocomplete="on"
        max-rows="15"
        bind-value="{{message}}"
      ></iron-autogrow-textarea>
    </div>
  </gr-dialog>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
`
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class fy extends(Zn(na(Ka))){static get template(){return _y}static get is(){return"gr-confirm-revert-submission-dialog"}static get properties(){return{message:String,commitMessage:String}}_getTrimmedChangeSubject(e){return e?e.length<50?e:e.substring(0,50)+"...":""}_modifyRevertSubmissionMsg(e){return this.$.jsAPI.modifyRevertSubmissionMsg(e,this.message,this.commitMessage)}_populateRevertSubmissionMessage(e,t,n){if(!t.current_revision)return void this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Unable to find the commit hash of this change."},composed:!0,bubbles:!0}));const i="Revert submission "+t.submission_id;this.changes=n,this.message=i+"\n\nReason for revert: <INSERT REASONING HERE>\n",this.message+="Reverted Changes:\n",(n=n||[]).forEach(e=>{this.message+=e.change_id.substring(0,10)+": "+this._getTrimmedChangeSubject(e.subject)+"\n"}),this.message=this._modifyRevertSubmissionMsg(t)}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}}customElements.define(fy.is,fy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const by=za`
  <style include="shared-styles">
    #dialog {
      min-width: 40em;
    }
    p {
      margin-bottom: var(--spacing-l);
    }
    .warningBeforeSubmit {
      color: var(--error-text-color);
      vertical-align: top;
      margin-right: var(--spacing-s);
    }
    @media screen and (max-width: 50em) {
      #dialog {
        min-width: inherit;
        width: 100%;
      }
    }
  </style>
  <gr-dialog
    id="dialog"
    confirm-label="Continue"
    confirm-on-enter=""
    on-cancel="_handleCancelTap"
    on-confirm="_handleConfirmTap"
  >
    <div class="header" slot="header">
      [[action.label]]
    </div>
    <div class="main" slot="main">
      <gr-endpoint-decorator name="confirm-submit-change">
        <p>Ready to submit “<strong>[[change.subject]]</strong>”?</p>
        <template is="dom-if" if="[[change.is_private]]">
          <p>
            <iron-icon
              icon="gr-icons:error"
              class="warningBeforeSubmit"
            ></iron-icon>
            <strong>Heads Up!</strong>
            Submitting this private change will also make it public.
          </p>
        </template>
        <template is="dom-if" if="[[change.unresolved_comment_count]]">
          <p>
            <iron-icon
              icon="gr-icons:error"
              class="warningBeforeSubmit"
            ></iron-icon>
            [[_computeUnresolvedCommentsWarning(change)]]
          </p>
        </template>
        <template is="dom-if" if="[[_computeHasChangeEdit(change)]]">
          <iron-icon
            icon="gr-icons:error"
            class="warningBeforeSubmit"
          ></iron-icon>
          Your unpublished edit will not be submitted. Did you forget to click
          <b>PUBLISH</b>?
        </template>
        <gr-endpoint-param name="change" value="[[change]]"></gr-endpoint-param>
        <gr-endpoint-param name="action" value="[[action]]"></gr-endpoint-param>
      </gr-endpoint-decorator>
    </div>
  </gr-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class vy extends(Zn(na(Ka))){static get template(){return by}static get is(){return"gr-confirm-submit-dialog"}static get properties(){return{change:Object,action:Object}}resetFocus(e){this.$.dialog.resetFocus()}_computeHasChangeEdit(e){return!!e.revisions&&Object.values(e.revisions).some(e=>"edit"==e._number)}_computeUnresolvedCommentsWarning(e){const t=e.unresolved_comment_count;return`Heads Up! ${t} unresolved comment${t>1?"s":""}.`}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{bubbles:!1}))}}customElements.define(vy.is,vy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const yy=za`
  <style include="shared-styles">
    :host {
      display: flex;
      font-family: var(--font-family);
    }
    #actionLoadingMessage,
    #mainContent,
    section {
      display: flex;
    }
    #actionLoadingMessage,
    gr-button,
    gr-dropdown {
      /* px because don't have the same font size */
      margin-left: 8px;
    }
    #actionLoadingMessage {
      align-items: center;
      color: var(--deemphasized-text-color);
    }
    #confirmSubmitDialog .changeSubject {
      margin: var(--spacing-l);
      text-align: center;
    }
    iron-icon {
      color: inherit;
      margin-right: var(--spacing-xs);
    }
    #moreActions iron-icon {
      margin: 0;
    }
    #moreMessage,
    .hidden {
      display: none;
    }
    @media screen and (max-width: 50em) {
      #mainContent {
        flex-wrap: wrap;
      }
      gr-button {
        --gr-button: {
          padding: var(--spacing-m);
          white-space: nowrap;
        }
      }
      gr-button,
      gr-dropdown {
        margin: 0;
      }
      #actionLoadingMessage {
        margin: var(--spacing-m);
        text-align: center;
      }
      #moreMessage {
        display: inline;
      }
    }
  </style>
  <div id="mainContent">
    <span id="actionLoadingMessage" hidden$="[[!_actionLoadingMessage]]">
      [[_actionLoadingMessage]]</span
    >
    <section
      id="primaryActions"
      hidden$="[[_shouldHideActions(_topLevelActions.*, _loading)]]"
    >
      <template is="dom-repeat" items="[[_topLevelPrimaryActions]]" as="action">
        <gr-button
          link=""
          title$="[[action.title]]"
          has-tooltip="[[_computeHasTooltip(action.title)]]"
          position-below="true"
          data-action-key$="[[action.__key]]"
          data-action-type$="[[action.__type]]"
          data-label$="[[action.label]]"
          disabled$="[[_calculateDisabled(action, _hasKnownChainState)]]"
          on-click="_handleActionTap"
        >
          <iron-icon
            class$="[[_computeHasIcon(action)]]"
            icon$="gr-icons:[[action.icon]]"
          ></iron-icon>
          [[action.label]]
        </gr-button>
      </template>
    </section>
    <section
      id="secondaryActions"
      hidden$="[[_shouldHideActions(_topLevelActions.*, _loading)]]"
    >
      <template
        is="dom-repeat"
        items="[[_topLevelSecondaryActions]]"
        as="action"
      >
        <gr-button
          link=""
          title$="[[action.title]]"
          has-tooltip="[[_computeHasTooltip(action.title)]]"
          position-below="true"
          data-action-key$="[[action.__key]]"
          data-action-type$="[[action.__type]]"
          data-label$="[[action.label]]"
          disabled$="[[_calculateDisabled(action, _hasKnownChainState)]]"
          on-click="_handleActionTap"
        >
          <iron-icon
            class$="[[_computeHasIcon(action)]]"
            icon$="gr-icons:[[action.icon]]"
          ></iron-icon>
          [[action.label]]
        </gr-button>
      </template>
    </section>
    <gr-button hidden$="[[!_loading]]" disabled=""
      >Loading actions...</gr-button
    >
    <gr-dropdown
      id="moreActions"
      link=""
      tabindex="0"
      vertical-offset="32"
      horizontal-align="right"
      on-tap-item="_handleOveflowItemTap"
      hidden$="[[_shouldHideActions(_menuActions.*, _loading)]]"
      disabled-ids="[[_disabledMenuActions]]"
      items="[[_menuActions]]"
    >
      <iron-icon icon="gr-icons:more-vert"></iron-icon>
      <span id="moreMessage">More</span>
    </gr-dropdown>
  </div>
  <gr-overlay id="overlay" with-backdrop="">
    <gr-confirm-rebase-dialog
      id="confirmRebase"
      class="confirmDialog"
      change-number="[[change._number]]"
      on-confirm="_handleRebaseConfirm"
      on-cancel="_handleConfirmDialogCancel"
      branch="[[change.branch]]"
      has-parent="[[hasParent]]"
      rebase-on-current="[[_computeRebaseOnCurrent(_revisionRebaseAction)]]"
      hidden=""
    ></gr-confirm-rebase-dialog>
    <gr-confirm-cherrypick-dialog
      id="confirmCherrypick"
      class="confirmDialog"
      change-status="[[changeStatus]]"
      commit-message="[[commitMessage]]"
      commit-num="[[commitNum]]"
      on-confirm="_handleCherrypickConfirm"
      on-cancel="_handleConfirmDialogCancel"
      project="[[change.project]]"
      hidden=""
    ></gr-confirm-cherrypick-dialog>
    <gr-confirm-cherrypick-conflict-dialog
      id="confirmCherrypickConflict"
      class="confirmDialog"
      on-confirm="_handleCherrypickConflictConfirm"
      on-cancel="_handleConfirmDialogCancel"
      hidden=""
    ></gr-confirm-cherrypick-conflict-dialog>
    <gr-confirm-move-dialog
      id="confirmMove"
      class="confirmDialog"
      on-confirm="_handleMoveConfirm"
      on-cancel="_handleConfirmDialogCancel"
      project="[[change.project]]"
      hidden=""
    ></gr-confirm-move-dialog>
    <gr-confirm-revert-dialog
      id="confirmRevertDialog"
      class="confirmDialog"
      on-confirm="_handleRevertDialogConfirm"
      on-cancel="_handleConfirmDialogCancel"
      hidden=""
    ></gr-confirm-revert-dialog>
    <gr-confirm-revert-submission-dialog
      id="confirmRevertSubmissionDialog"
      class="confirmDialog"
      commit-message="[[commitMessage]]"
      on-confirm="_handleRevertSubmissionDialogConfirm"
      on-cancel="_handleConfirmDialogCancel"
      hidden=""
    ></gr-confirm-revert-submission-dialog>
    <gr-confirm-abandon-dialog
      id="confirmAbandonDialog"
      class="confirmDialog"
      on-confirm="_handleAbandonDialogConfirm"
      on-cancel="_handleConfirmDialogCancel"
      hidden=""
    ></gr-confirm-abandon-dialog>
    <gr-confirm-submit-dialog
      id="confirmSubmitDialog"
      class="confirmDialog"
      change="[[change]]"
      action="[[_revisionSubmitAction]]"
      on-cancel="_handleConfirmDialogCancel"
      on-confirm="_handleSubmitConfirm"
      hidden=""
    ></gr-confirm-submit-dialog>
    <gr-dialog
      id="createFollowUpDialog"
      class="confirmDialog"
      confirm-label="Create"
      on-confirm="_handleCreateFollowUpChange"
      on-cancel="_handleCloseCreateFollowUpChange"
    >
      <div class="header" slot="header">
        Create Follow-Up Change
      </div>
      <div class="main" slot="main">
        <gr-create-change-dialog
          id="createFollowUpChange"
          branch="[[change.branch]]"
          base-change="[[change.id]]"
          repo-name="[[change.project]]"
          private-by-default="[[privateByDefault]]"
        ></gr-create-change-dialog>
      </div>
    </gr-dialog>
    <gr-dialog
      id="confirmDeleteDialog"
      class="confirmDialog"
      confirm-label="Delete"
      confirm-on-enter=""
      on-cancel="_handleConfirmDialogCancel"
      on-confirm="_handleDeleteConfirm"
    >
      <div class="header" slot="header">
        Delete Change
      </div>
      <div class="main" slot="main">
        Do you really want to delete the change?
      </div>
    </gr-dialog>
    <gr-dialog
      id="confirmDeleteEditDialog"
      class="confirmDialog"
      confirm-label="Delete"
      confirm-on-enter=""
      on-cancel="_handleConfirmDialogCancel"
      on-confirm="_handleDeleteEditConfirm"
    >
      <div class="header" slot="header">
        Delete Change Edit
      </div>
      <div class="main" slot="main">
        Do you really want to delete the edit?
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-reporting id="reporting" category="change-actions"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,wy="OK",Cy="REJECT",Ey="NEED",Sy="IMPOSSIBLE",xy="OPTIONAL",Ay={ABANDON:"abandon",DELETE:"/",DELETE_EDIT:"deleteEdit",EDIT:"edit",FOLLOW_UP:"followup",IGNORE:"ignore",MOVE:"move",PRIVATE:"private",PRIVATE_DELETE:"private.delete",PUBLISH_EDIT:"publishEdit",READY:"ready",REBASE_EDIT:"rebaseEdit",RESTORE:"restore",REVERT:"revert",REVERT_SUBMISSION:"revert_submission",REVIEWED:"reviewed",STOP_EDIT:"stopEdit",UNIGNORE:"unignore",UNREVIEWED:"unreviewed",WIP:"wip"},Py={CHERRYPICK:"cherrypick",REBASE:"rebase",SUBMIT:"submit",DOWNLOAD:"download"},ky={abandon:"Abandoning...",cherrypick:"Cherry-picking...",delete:"Deleting...",move:"Moving..",rebase:"Rebasing...",restore:"Restoring...",revert:"Reverting...",revert_submission:"Reverting Submission...",submit:"Submitting..."},Ty={CHANGE:"change",REVISION:"revision"},Iy={__key:"review",__type:"change",enabled:!0,key:"review",label:"Quick approve",method:"POST"},Ry=2,Ly=0,Dy=3,Oy=-3,Ny=1,My={enabled:!0,label:"Download patch",title:"Open download dialog",__key:"download",__primary:!1,__type:"revision"},$y={enabled:!0,label:"Rebase edit",title:"Rebase change edit",__key:"rebaseEdit",__primary:!1,__type:"change",method:"POST"},By={enabled:!0,label:"Publish edit",title:"Publish change edit",__key:"publishEdit",__primary:!1,__type:"change",method:"POST"},Fy={enabled:!0,label:"Delete edit",title:"Delete change edit",__key:"deleteEdit",__primary:!1,__type:"change",method:"DELETE"},Uy={enabled:!0,label:"Edit",title:"Edit this change",__key:"edit",__primary:!1,__type:"change"},Hy={enabled:!0,label:"Stop editing",title:"Stop editing this change",__key:"stopEdit",__primary:!1,__type:"change"},jy=new Set([Ay.ABANDON,Ay.DELETE_EDIT,Ay.EDIT,Ay.PUBLISH_EDIT,Ay.READY,Ay.REBASE_EDIT,Ay.RESTORE,Ay.REVERT,Ay.REVERT_SUBMISSION,Ay.STOP_EDIT,Iy.key,Py.REBASE,Py.SUBMIT]),Gy=1,Vy=2,zy=[Ay.REVERT_SUBMISSION];class Wy extends(ra([vm,zg],Zn(na(Ka)))){static get template(){return yy}static get is(){return"gr-change-actions"}constructor(){super(),this.ActionType=Ty,this.ChangeActions=Ay,this.RevisionActions=Py}static get properties(){return{change:Object,actions:{type:Object,value:()=>({})},primaryActionKeys:{type:Array,value:()=>[Ay.READY,Py.SUBMIT]},disableEdit:{type:Boolean,value:!1},_hasKnownChainState:{type:Boolean,value:!1},_hideQuickApproveAction:{type:Boolean,value:!1},changeNum:String,changeStatus:String,commitNum:String,hasParent:{type:Boolean,observer:"_computeChainState"},latestPatchNum:String,commitMessage:{type:String,value:""},revisionActions:{type:Object,notify:!0,value:()=>({})},_revisionSubmitAction:{type:Object,computed:"_getSubmitAction(revisionActions)"},_revisionRebaseAction:{type:Object,computed:"_getRebaseAction(revisionActions)"},privateByDefault:String,_loading:{type:Boolean,value:!0},_actionLoadingMessage:{type:String,value:""},_allActionValues:{type:Array,computed:"_computeAllActions(actions.*, revisionActions.*,primaryActionKeys.*, _additionalActions.*, change, _actionPriorityOverrides.*)"},_topLevelActions:{type:Array,computed:"_computeTopLevelActions(_allActionValues.*, _hiddenActions.*, _overflowActions.*)",observer:"_filterPrimaryActions"},_topLevelPrimaryActions:Array,_topLevelSecondaryActions:Array,_menuActions:{type:Array,computed:"_computeMenuActions(_allActionValues.*, _hiddenActions.*, _overflowActions.*)"},_overflowActions:{type:Array,value:()=>[{type:Ty.CHANGE,key:Ay.WIP},{type:Ty.CHANGE,key:Ay.DELETE},{type:Ty.REVISION,key:Py.CHERRYPICK},{type:Ty.CHANGE,key:Ay.MOVE},{type:Ty.REVISION,key:Py.DOWNLOAD},{type:Ty.CHANGE,key:Ay.IGNORE},{type:Ty.CHANGE,key:Ay.UNIGNORE},{type:Ty.CHANGE,key:Ay.REVIEWED},{type:Ty.CHANGE,key:Ay.UNREVIEWED},{type:Ty.CHANGE,key:Ay.PRIVATE},{type:Ty.CHANGE,key:Ay.PRIVATE_DELETE},{type:Ty.CHANGE,key:Ay.FOLLOW_UP}]},_actionPriorityOverrides:{type:Array,value:()=>[]},_additionalActions:{type:Array,value:()=>[]},_hiddenActions:{type:Array,value:()=>[]},_disabledMenuActions:{type:Array,value:()=>[]},editPatchsetLoaded:{type:Boolean,value:!1},editMode:{type:Boolean,value:!1},editBasedOnCurrentPatchSet:{type:Boolean,value:!0}}}static get observers(){return["_actionsChanged(actions.*, revisionActions.*, _additionalActions.*)","_changeChanged(change)","_editStatusChanged(editMode, editPatchsetLoaded, editBasedOnCurrentPatchSet, disableEdit, actions.*, change.*)"]}created(){super.created(),this.addEventListener("fullscreen-overlay-opened",()=>this._handleHideBackgroundContent()),this.addEventListener("fullscreen-overlay-closed",()=>this._handleShowBackgroundContent())}ready(){super.ready(),this.$.jsAPI.addElement(this.$.jsAPI.Element.CHANGE_ACTIONS,this),this._handleLoadingComplete()}_getSubmitAction(e){return this._getRevisionAction(e,"submit",null)}_getRebaseAction(e){return this._getRevisionAction(e,"rebase",null)}_getRevisionAction(e,t,n){if(e)return void 0===e[t]?n:e[t]}reload(){return this.changeNum&&this.latestPatchNum?(this._loading=!0,this._getRevisionActions().then(e=>{e&&(this.revisionActions=e,this._sendShowRevisionActions({change:this.change,revisionActions:e}),this._handleLoadingComplete())}).catch(e=>{throw this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Couldn’t load revision actions."},composed:!0,bubbles:!0})),this._loading=!1,e})):Promise.resolve()}_handleLoadingComplete(){tr.awaitPluginsLoaded().then(()=>this._loading=!1)}_sendShowRevisionActions(e){this.$.jsAPI.handleEvent(this.$.jsAPI.EventType.SHOW_REVISION_ACTIONS,e)}_changeChanged(){this.reload()}addActionButton(e,t){if(e!==Ty.CHANGE&&e!==Ty.REVISION)throw Error(`Invalid action type: ${e}`);const n={enabled:!0,label:t,__type:e,__key:"__additionalAction_"+Math.random().toString(36).substr(2)};return this.push("_additionalActions",n),n.__key}removeActionButton(e){const t=this._indexOfActionButtonWithKey(e);-1!==t&&this.splice("_additionalActions",t,1)}setActionButtonProp(e,t,n){this.set(["_additionalActions",this._indexOfActionButtonWithKey(e),t],n)}setActionOverflow(e,t,n){if(e!==Ty.CHANGE&&e!==Ty.REVISION)throw Error(`Invalid action type given: ${e}`);const i=this._getActionOverflowIndex(e,t),s={type:e,key:t,overflow:n};n||-1===i?n&&this.push("_overflowActions",s):this.splice("_overflowActions",i,1)}setActionPriority(e,t,n){if(e!==Ty.CHANGE&&e!==Ty.REVISION)throw Error(`Invalid action type given: ${e}`);const i=this._actionPriorityOverrides.findIndex(n=>n.type===e&&n.key===t),s={type:e,key:t,priority:n};-1!==i?this.set("_actionPriorityOverrides",i,s):this.push("_actionPriorityOverrides",s)}setActionHidden(e,t,n){if(e!==Ty.CHANGE&&e!==Ty.REVISION)throw Error(`Invalid action type given: ${e}`);const i=this._hiddenActions.indexOf(t);n&&-1===i?this.push("_hiddenActions",t):n||-1===i||this.splice("_hiddenActions",i,1)}getActionDetails(e){return this.revisionActions[e]?this.revisionActions[e]:this.actions[e]?this.actions[e]:void 0}_indexOfActionButtonWithKey(e){for(let t=0;t<this._additionalActions.length;t++)if(this._additionalActions[t].__key===e)return t;return-1}_getRevisionActions(){return this.$.restAPI.getChangeRevisionActions(this.changeNum,this.latestPatchNum)}_shouldHideActions(e,t){return t||!e||!e.base||!e.base.length}_keyCount(e){return Object.keys(e&&e.base||{}).length}_actionsChanged(e,t,n){if([e,t,n].some(e=>void 0===e))return;const i=n&&n.base||[];this.hidden=0===this._keyCount(e)&&0===this._keyCount(t)&&0===i.length,this._actionLoadingMessage="",this._disabledMenuActions=[];const s=t.base||{};0!==Object.keys(s).length&&(s.download||this.set("revisionActions.download",My))}_deleteAndNotify(e){this.actions&&this.actions[e]&&(delete this.actions[e],this.notifyPath("actions."+e,!1))}_editStatusChanged(e,t,n,i){if(![e,n,i].some(e=>void 0===e)){if(i)return this._deleteAndNotify("publishEdit"),this._deleteAndNotify("rebaseEdit"),this._deleteAndNotify("deleteEdit"),this._deleteAndNotify("stopEdit"),void this._deleteAndNotify("edit");this.actions&&t?(this.changeIsOpen(this.change)&&(n?(this.actions.publishEdit||this.set("actions.publishEdit",By),this._deleteAndNotify("rebaseEdit")):(this.actions.rebaseEdit||this.set("actions.rebaseEdit",$y),this._deleteAndNotify("publishEdit"))),this.actions.deleteEdit||this.set("actions.deleteEdit",Fy)):(this._deleteAndNotify("publishEdit"),this._deleteAndNotify("rebaseEdit"),this._deleteAndNotify("deleteEdit")),this.actions&&this.changeIsOpen(this.change)?(t||e?this._deleteAndNotify("edit"):this.actions.edit||this.set("actions.edit",Uy),e&&!t?this.actions.stopEdit||this.set("actions.stopEdit",Hy):this._deleteAndNotify("stopEdit")):this._deleteAndNotify("edit")}}_getValuesFor(e){return Object.keys(e).map(t=>e[t])}_getLabelStatus(e){return e.approved?wy:e.rejected?Cy:e.optional?xy:Ey}_getTopMissingApproval(){if(!this.change||!this.change.labels||!this.change.permitted_labels)return null;let e;for(const t in this.change.labels){if(!(t in this.change.permitted_labels))continue;if(0===this.change.permitted_labels[t].length)continue;const n=this._getLabelStatus(this.change.labels[t]);if(n===Ey){if(e)return null;e=t}else if(n===Cy||n===Sy)return null}if(e){const t=this.change.permitted_labels[e].slice(-1)[0];if(t===Object.keys(this.change.labels[e].values).slice(-1)[0])return{label:e,score:t}}return null}hideQuickApproveAction(){this._topLevelSecondaryActions=this._topLevelSecondaryActions.filter(e=>e.key!==Iy.key),this._hideQuickApproveAction=!0}_getQuickApproveAction(){if(this._hideQuickApproveAction)return null;const e=this._getTopMissingApproval();if(!e)return null;const t=Object.assign({},Iy);t.label=e.label+e.score;const n={drafts:"PUBLISH_ALL_REVISIONS",labels:{}};return n.labels[e.label]=e.score,t.payload=n,t}_getActionValues(e,t,n,i){if(!e||!t)return[];const s=e.base||{},a=t.base||[],o=[],r=this._getValuesFor(i===Ty.CHANGE?Ay:Py),l=[];Object.keys(s).forEach(e=>{if(s[e].__key=e,s[e].__type=i,s[e].__primary=a.includes(e),-1!==e.indexOf("~"))return this._populateActionUrl(s[e]),l.push(s[e]),void this._overflowActions.push({type:i,key:e});r.includes(e)&&(s[e].label=this._getActionLabel(s[e]),o.push(Object.assign({},s[e])))});let c=n&&n.base||[];return c=c.filter(e=>e.__type===i).map(e=>(e.__primary=a.includes(e.__key),Object.assign({},e))),o.concat(c).concat(l)}_populateActionUrl(e){const t=e.__type===Ty.REVISION?this.latestPatchNum:null;this.$.restAPI.getChangeActionURL(this.changeNum,t,"/"+e.__key).then(t=>e.__url=t)}_getActionLabel(e){return"Delete"===e.label?"Delete change":"WIP"===e.label?"Mark as work in progress":this._toSentenceCase(e.label)}_toSentenceCase(e){return e.length?e[0].toUpperCase()+e.slice(1).toLowerCase():""}_computeLoadingLabel(e){return ky[e]||"Working..."}_canSubmitChange(){return this.$.jsAPI.canSubmitChange(this.change,this._getRevision(this.change,this.latestPatchNum))}_getRevision(e,t){for(const n of Object.values(e.revisions))if(this.patchNumEquals(n._number,t))return n;return null}showRevertDialog(){const e=`submissionid: "${this.change.submission_id}"`;this.$.restAPI.getChanges("",e).then(e=>{this.$.confirmRevertDialog.populate(this.change,this.commitMessage,e),this._showActionDialog(this.$.confirmRevertDialog)})}showRevertSubmissionDialog(){const e="submissionid:"+this.change.submission_id;this.$.restAPI.getChanges("",e).then(e=>{this.$.confirmRevertSubmissionDialog._populateRevertSubmissionMessage(this.commitMessage,this.change,e),this._showActionDialog(this.$.confirmRevertSubmissionDialog)})}_handleActionTap(e){e.preventDefault();let t=Ui(e).localTarget;for(;"gr-button"!==t.tagName.toLowerCase();){if(!t.parentElement)return;t=t.parentElement}const n=t.getAttribute("data-action-key");if(n.startsWith("__additionalAction_")||-1!==n.indexOf("~"))return void this.dispatchEvent(new CustomEvent(`${n}-tap`,{detail:{node:t},composed:!0,bubbles:!0}));const i=t.getAttribute("data-action-type");this._handleAction(i,n)}_handleOveflowItemTap(e){e.preventDefault();const t=Ui(e).localTarget,n=e.detail.action.__key;n.startsWith("__additionalAction_")||-1!==n.indexOf("~")?this.dispatchEvent(new CustomEvent(`${n}-tap`,{detail:{node:t},composed:!0,bubbles:!0})):this._handleAction(e.detail.action.__type,e.detail.action.__key)}_handleAction(e,t){switch(this.$.reporting.reportInteraction(`${e}-${t}`),e){case Ty.REVISION:this._handleRevisionAction(t);break;case Ty.CHANGE:this._handleChangeAction(t);break;default:this._fireAction(this._prependSlash(t),this.actions[t],!1)}}_handleChangeAction(e){let t;switch(e){case Ay.REVERT:this.showRevertDialog();break;case Ay.REVERT_SUBMISSION:this.showRevertSubmissionDialog();break;case Ay.ABANDON:this._showActionDialog(this.$.confirmAbandonDialog);break;case Iy.key:t=this._allActionValues.find(t=>t.key===e),this._fireAction(this._prependSlash(e),t,!0,t.payload);break;case Ay.EDIT:this._handleEditTap();break;case Ay.STOP_EDIT:this._handleStopEditTap();break;case Ay.DELETE:this._handleDeleteTap();break;case Ay.DELETE_EDIT:this._handleDeleteEditTap();break;case Ay.FOLLOW_UP:this._handleFollowUpTap();break;case Ay.WIP:this._handleWipTap();break;case Ay.MOVE:this._handleMoveTap();break;case Ay.PUBLISH_EDIT:this._handlePublishEditTap();break;case Ay.REBASE_EDIT:this._handleRebaseEditTap();break;default:this._fireAction(this._prependSlash(e),this.actions[e],!1)}}_handleRevisionAction(e){switch(e){case Py.REBASE:this._showActionDialog(this.$.confirmRebase),this.$.confirmRebase.fetchRecentChanges();break;case Py.CHERRYPICK:this._handleCherrypickTap();break;case Py.DOWNLOAD:this._handleDownloadTap();break;case Py.SUBMIT:if(!this._canSubmitChange())return;this._showActionDialog(this.$.confirmSubmitDialog);break;default:this._fireAction(this._prependSlash(e),this.revisionActions[e],!0)}}_prependSlash(e){return"/"===e?e:`/${e}`}_computeChainState(e){this._hasKnownChainState=!0}_calculateDisabled(e,t){return"rebase"===e.__key?!1===t:!e.enabled}_handleConfirmDialogCancel(){this._hideAllDialogs()}_hideAllDialogs(){const e=Ui(this.root).querySelectorAll(".confirmDialog");for(const t of e)t.hidden=!0;this.$.overlay.close()}_handleRebaseConfirm(e){const t=this.$.confirmRebase,n={base:e.detail.base};this.$.overlay.close(),t.hidden=!0,this._fireAction("/rebase",this.revisionActions.rebase,!0,n)}_handleCherrypickConfirm(){this._handleCherryPickRestApi(!1)}_handleCherrypickConflictConfirm(){this._handleCherryPickRestApi(!0)}_handleCherryPickRestApi(e){const t=this.$.confirmCherrypick;t.branch?t.message?(this.$.overlay.close(),t.hidden=!0,this._fireAction("/cherrypick",this.revisionActions.cherrypick,!0,{destination:t.branch,base:t.baseCommit?t.baseCommit:null,message:t.message,allow_conflicts:e})):this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"The commit message can’t be empty."},composed:!0,bubbles:!0})):this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"The destination branch can’t be empty."},composed:!0,bubbles:!0}))}_handleMoveConfirm(){const e=this.$.confirmMove;e.branch?(this.$.overlay.close(),e.hidden=!0,this._fireAction("/move",this.actions.move,!1,{destination_branch:e.branch,message:e.message})):this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"The destination branch can’t be empty."},composed:!0,bubbles:!0}))}_handleRevertDialogConfirm(e){const t=e.detail.revertType,n=e.detail.message,i=this.$.confirmRevertDialog;switch(this.$.overlay.close(),i.hidden=!0,t){case Gy:this._fireAction("/revert",this.actions.revert,!1,{message:n});break;case Vy:this._fireAction("/revert_submission",this.actions.revert_submission,!1,{message:n});break;default:console.error("invalid revert type")}}_handleRevertSubmissionDialogConfirm(){const e=this.$.confirmRevertSubmissionDialog;this.$.overlay.close(),e.hidden=!0,this._fireAction("/revert_submission",this.actions.revert_submission,!1,{message:e.message})}_handleAbandonDialogConfirm(){const e=this.$.confirmAbandonDialog;this.$.overlay.close(),e.hidden=!0,this._fireAction("/abandon",this.actions.abandon,!1,{message:e.message})}_handleCreateFollowUpChange(){this.$.createFollowUpChange.handleCreateChange(),this._handleCloseCreateFollowUpChange()}_handleCloseCreateFollowUpChange(){this.$.overlay.close()}_handleDeleteConfirm(){this._fireAction("/",this.actions[Ay.DELETE],!1)}_handleDeleteEditConfirm(){this._hideAllDialogs(),this._fireAction("/edit",this.actions.deleteEdit,!1)}_handleSubmitConfirm(){this._canSubmitChange()&&(this._hideAllDialogs(),this._fireAction("/submit",this.revisionActions.submit,!0))}_getActionOverflowIndex(e,t){return this._overflowActions.findIndex(n=>n.type===e&&n.key===t)}_setLoadingOnButtonWithKey(e,t){this._actionLoadingMessage=this._computeLoadingLabel(t);let n=t;if(n===Ay.REVERT_SUBMISSION&&(n=Ay.REVERT),-1!==this._getActionOverflowIndex(e,n))return this.push("_disabledMenuActions","/"===n?"delete":n),function(){this._actionLoadingMessage="",this._disabledMenuActions=[]}.bind(this);const i=this.shadowRoot.querySelector(`[data-action-key="${n}"]`);return i.setAttribute("loading",!0),i.disabled=!0,function(){this._actionLoadingMessage="",i.removeAttribute("loading"),i.disabled=!1}.bind(this)}_fireAction(e,t,n,i){const s=this._setLoadingOnButtonWithKey(t.__type,t.__key);this._send(t.method,i,e,n,s,t).then(this._handleResponse.bind(this,t))}_showActionDialog(e){this._hideAllDialogs(),e.hidden=!1,this.$.overlay.open().then(()=>{e.resetFocus&&e.resetFocus()})}_setLabelValuesOnRevert(e){const t=this.$.jsAPI.getLabelValuesPostRevert(this.change);return t?this.$.restAPI.saveChangeReview(e,"current",{labels:t}):Promise.resolve()}_handleResponse(e,t){if(t)return this.$.restAPI.getResponseObject(t).then(t=>{switch(e.__key){case Ay.REVERT:this._waitForChangeReachable(t._number).then(()=>this._setLabelValuesOnRevert(t._number)).then(()=>{um.navigateToChange(t)});break;case Py.CHERRYPICK:this._waitForChangeReachable(t._number).then(()=>{um.navigateToChange(t)});break;case Ay.DELETE:e.__type===Ty.CHANGE&&um.navigateToRelativeUrl(um.getUrlForRoot());break;case Ay.WIP:case Ay.DELETE_EDIT:case Ay.PUBLISH_EDIT:case Ay.REBASE_EDIT:um.navigateToChange(this.change);break;case Ay.REVERT_SUBMISSION:if(!t.revert_changes||!t.revert_changes.length)return;um.navigateToSearchQuery("topic: "+t.revert_changes[0].topic);break;default:this.dispatchEvent(new CustomEvent("reload-change",{detail:{action:e.__key},bubbles:!1}))}})}_handleShowRevertSubmissionChangesConfirm(){this._hideAllDialogs()}_handleResponseError(e,t,n){return e&&e.__key===Py.CHERRYPICK&&t&&409===t.status&&n&&!n.allow_conflicts?this._showActionDialog(this.$.confirmCherrypickConflict):t.text().then(e=>{if(this.dispatchEvent(new CustomEvent("show-error",{detail:{message:`Could not perform action: ${e}`},composed:!0,bubbles:!0})),!e.startsWith("Change is already up to date"))throw Error(e)})}_send(e,t,n,i,s,a){const o=e=>{s.call(this),this._handleResponseError(a,e,t)};return this.fetchChangeUpdates(this.change,this.$.restAPI).then(a=>{if(!a.isLatest)return this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Cannot set label: a newer patch has been uploaded to this change.",action:"Reload",callback:()=>{um.navigateToChange(this.change)}},composed:!0,bubbles:!0})),s(),Promise.resolve();const r=i?this.latestPatchNum:null;return this.$.restAPI.executeChangeAction(this.changeNum,e,n,r,t,o).then(e=>(s.call(this),e))})}_handleAbandonTap(){this._showActionDialog(this.$.confirmAbandonDialog)}_handleCherrypickTap(){this.$.confirmCherrypick.branch="";const e=`topic: "${this.change.topic}"`,t=this.listChangesOptionsToHex(this.ListChangesOption.MESSAGES,this.ListChangesOption.ALL_REVISIONS);this.$.restAPI.getChanges("",e,void 0,t).then(e=>{this.$.confirmCherrypick.updateChanges(e),this._showActionDialog(this.$.confirmCherrypick)})}_handleMoveTap(){this.$.confirmMove.branch="",this.$.confirmMove.message="",this._showActionDialog(this.$.confirmMove)}_handleDownloadTap(){this.dispatchEvent(new CustomEvent("download-tap",{composed:!0,bubbles:!1}))}_handleDeleteTap(){this._showActionDialog(this.$.confirmDeleteDialog)}_handleDeleteEditTap(){this._showActionDialog(this.$.confirmDeleteEditDialog)}_handleFollowUpTap(){this._showActionDialog(this.$.createFollowUpDialog)}_handleWipTap(){this._fireAction("/wip",this.actions.wip,!1)}_handlePublishEditTap(){this._fireAction("/edit:publish",this.actions.publishEdit,!1)}_handleRebaseEditTap(){this._fireAction("/edit:rebase",this.actions.rebaseEdit,!1)}_handleHideBackgroundContent(){this.$.mainContent.classList.add("overlayOpen")}_handleShowBackgroundContent(){this.$.mainContent.classList.remove("overlayOpen")}_computeAllActions(e,t,n,i,s){if([e,t,n,i,s].some(e=>void 0===e))return[];const a=this._getActionValues(t,n,i,Ty.REVISION),o=this._getActionValues(e,n,i,Ty.CHANGE),r=this._getQuickApproveAction();return r&&o.unshift(r),a.concat(o).sort(this._actionComparator.bind(this)).map(e=>(jy.has(e.__key)&&(e.icon=e.__key),e)).filter(e=>!this._shouldSkipAction(e))}_getActionPriority(e){if(e.__type&&e.__key){const t=this._actionPriorityOverrides.find(t=>t.type===e.__type&&t.key===e.__key);if(void 0!==t)return t.priority}return"review"===e.__key?Oy:e.__primary?Dy:e.__type===Ty.CHANGE?Ry:e.__type===Ty.REVISION?Ny:Ly}_actionComparator(e,t){const n=this._getActionPriority(e)-this._getActionPriority(t);return 0===n?e.label>t.label?1:-1:n}_shouldSkipAction(e){return zy.includes(e.__key)}_computeTopLevelActions(e,t){const n=t.base||[];return e.base.filter(e=>!(-1!==this._getActionOverflowIndex(e.__type,e.__key)||n.includes(e.__key)))}_filterPrimaryActions(e){this._topLevelPrimaryActions=e.filter(e=>e.__primary),this._topLevelSecondaryActions=e.filter(e=>!e.__primary)}_computeMenuActions(e,t){const n=t.base||[];return e.base.filter(e=>-1!==this._getActionOverflowIndex(e.__type,e.__key)&&!n.includes(e.__key)).map(e=>{let t=e.__key;return"/"===t&&(t="delete"),{name:e.label,id:`${t}-${e.__type}`,action:e,tooltip:e.title}})}_computeRebaseOnCurrent(e){return e?!!e.enabled:null}_waitForChangeReachable(e){let t=5;return new Promise(n=>{const i=()=>{t--,this.$.restAPI.getChange(e,()=>{}).then(e=>{e?n(!0):t?this.async(i,1e3):n(!1)})};i()})}_handleEditTap(){this.dispatchEvent(new CustomEvent("edit-tap",{bubbles:!1}))}_handleStopEditTap(){this.dispatchEvent(new CustomEvent("stop-edit-tap",{bubbles:!1}))}_computeHasTooltip(e){return!!e}_computeHasIcon(e){return e.icon?"":"hidden"}}customElements.define(Wy.is,Wy);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const qy=document.createElement("template");qy.innerHTML='<dom-module id="gr-change-metadata-shared-styles">\n  <template>\n    <style include="shared-styles">\n      /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */\n    </style>\n    <style>\n      section {\n        display: table-row;\n      }\n\n      section:not(:first-of-type) .title,\n      section:not(:first-of-type) .value {\n        padding-top: var(--spacing-s);\n      }\n\n      .title,\n      .value {\n        display: table-cell;\n        vertical-align: top;\n      }\n\n      .title {\n        color: var(--deemphasized-text-color);\n        max-width: 20em;\n        padding-left: var(--metadata-horizontal-padding);\n        padding-right: var(--metadata-horizontal-padding);\n        word-break: break-word;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(qy.content);
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ky=document.createElement("template");Ky.innerHTML='<dom-module id="gr-change-view-integration-shared-styles">\n  <template>\n    <style include="shared-styles">\n      /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */\n    </style>\n    <style>\n      :host {\n        border-top: 1px solid var(--border-color);\n        display: block;\n      }\n      .header {\n        color: var(--primary-text-color);\n        background-color: var(--table-header-background-color);\n        justify-content: space-between;\n        padding: var(--spacing-m) var(--spacing-l);\n        border-bottom: 1px solid var(--border-color);\n      }\n      .header .label {\n        font-family: var(--header-font-family);\n        font-size: var(--font-size-h3);\n        font-weight: var(--font-weight-h3);\n        line-height: var(--line-height-h3);\n        margin: 0 var(--spacing-l) 0 0;\n      }\n      .header .note {\n        color: var(--deemphasized-text-color);\n      }\n      .content {\n        background-color: var(--view-background-color);\n      }\n      .header a,\n      .content a {\n        color: var(--link-color);\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Ky.content);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yy=document.createElement("template");Yy.innerHTML='<dom-module id="gr-voting-styles">\n  <template>\n    <style>\n      :host {\n        --vote-chip-styles: {\n          border: 1px solid rgba(0,0,0,.12);\n          border-radius: 1em;\n          box-shadow: none;\n          box-sizing: border-box;\n          min-width: 3em;\n        }\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Yy.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xy=za` <slot></slot> `
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Jy extends(Zn(na(Ka))){static get template(){return Xy}static get is(){return"gr-external-style"}static get properties(){return{name:String,_urlsImported:{type:Array,value:()=>[]},_stylesApplied:{type:Array,value:()=>[]}}}_importHref(e,t,n){po(e,t,n)}_import(e){return this._urlsImported.includes(e)?Promise.resolve():(this._urlsImported.push(e),new Promise((t,n)=>{this._importHref(e,t,n)}))}_applyStyle(e){if(this._stylesApplied.includes(e))return;this._stylesApplied.push(e);const t=document.createElement("style");t.setAttribute("include",e);const n=document.createElement("custom-style");n.appendChild(t);const i=document.getElementsByTagName("body")[0];i.insertBefore(n,i.firstChild),Yi()}_importAndApply(){Promise.all(ir.getPlugins(this.name).map(e=>this._import(e))).then(()=>{const e=ir.getModules(this.name);for(const t of e)this._applyStyle(t)})}attached(){super.attached(),this._importAndApply()}ready(){super.ready(),tr.awaitPluginsLoaded().then(()=>this._importAndApply())}}customElements.define(Jy.is,Jy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zy=za`
  <style include="shared-styles">
    :host {
      display: block;
      overflow: hidden;
    }
    .container {
      align-items: center;
      background: var(--chip-background-color);
      border-radius: 0.75em;
      display: inline-flex;
      padding: 0 var(--spacing-m);
    }
    :host([show-avatar]) .container {
      padding-left: 0;
    }
    gr-button.remove {
      --gr-remove-button-style: {
        border: 0;
        color: var(--deemphasized-text-color);
        font-weight: var(--font-weight-normal);
        height: 0.6em;
        line-height: 10px;
        margin-left: var(--spacing-xs);
        padding: 0;
        text-decoration: none;
      }
    }

    gr-button.remove:hover,
    gr-button.remove:focus {
      --gr-button: {
        @apply --gr-remove-button-style;
        color: #333;
      }
    }
    gr-button.remove {
      --gr-button: {
        @apply --gr-remove-button-style;
      }
    }
    :host:focus {
      border-color: transparent;
      box-shadow: none;
      outline: none;
    }
    :host:focus .container,
    :host:focus gr-button {
      background: #ccc;
    }
    .transparentBackground,
    gr-button.transparentBackground {
      background-color: transparent;
      padding: 0;
    }
    :host([disabled]) {
      opacity: 0.6;
      pointer-events: none;
    }
    iron-icon {
      height: 1.2rem;
      width: 1.2rem;
    }
  </style>
  <div class$="container [[_getBackgroundClass(transparentBackground)]]">
    <gr-account-link
      account="[[account]]"
      show-attention="[[showAttention]]"
      voteable-text="[[voteableText]]"
    >
    </gr-account-link>
    <gr-button
      id="remove"
      link=""
      hidden$="[[!removable]]"
      hidden=""
      tabindex="-1"
      aria-label="Remove"
      class$="remove [[_getBackgroundClass(transparentBackground)]]"
      on-click="_handleRemoveTap"
    >
      <iron-icon icon="gr-icons:close"></iron-icon>
    </gr-button>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Qy extends(Zn(na(Ka))){static get template(){return Zy}static get is(){return"gr-account-chip"}static get properties(){return{account:Object,voteableText:String,disabled:{type:Boolean,value:!1,reflectToAttribute:!0},removable:{type:Boolean,value:!1},showAttention:{type:Boolean,value:!1},showAvatar:{type:Boolean,reflectToAttribute:!0},transparentBackground:{type:Boolean,value:!1}}}ready(){super.ready(),this._getHasAvatars().then(e=>{this.showAvatar=e})}_getBackgroundClass(e){return e?"transparentBackground":""}_handleRemoveTap(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("remove",{detail:{account:this.account},composed:!0,bubbles:!0}))}_getHasAvatars(){return this.$.restAPI.getConfig().then(e=>Promise.resolve(!!(e&&e.plugin&&e.plugin.has_avatars)))}}customElements.define(Qy.is,Qy);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ew=za`
  <style include="shared-styles">
    :host {
      align-items: center;
      display: inline-flex;
    }
    :host([uppercase]) label {
      text-transform: uppercase;
    }
    input,
    label {
      width: 100%;
    }
    label {
      color: var(--deemphasized-text-color);
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      @apply --label-style;
    }
    label.editable {
      color: var(--link-color);
      cursor: pointer;
    }
    #dropdown {
      box-shadow: var(--elevation-level-2);
    }
    .inputContainer {
      background-color: var(--dialog-background-color);
      padding: var(--spacing-m);
      @apply --input-style;
    }
    .buttons {
      display: flex;
      justify-content: flex-end;
      padding-top: var(--spacing-l);
      width: 100%;
    }
    .buttons gr-button {
      margin-left: var(--spacing-m);
    }
    paper-input {
      --paper-input-container: {
        padding: 0;
        min-width: 15em;
      }
      --paper-input-container-input: {
        font-size: inherit;
      }
      --paper-input-container-focus-color: var(--link-color);
    }
  </style>
  <label
    class$="[[_computeLabelClass(readOnly, value, placeholder)]]"
    title$="[[_computeLabel(value, placeholder)]]"
    on-click="_showDropdown"
    >[[_computeLabel(value, placeholder)]]</label
  >
  <iron-dropdown
    id="dropdown"
    vertical-align="auto"
    horizontal-align="auto"
    vertical-offset="[[_verticalOffset]]"
    allow-outside-scroll="true"
    on-iron-overlay-canceled="_cancel"
  >
    <div class="dropdown-content" slot="dropdown-content">
      <div class="inputContainer">
        <paper-input
          id="input"
          label="[[labelText]]"
          maxlength="[[maxLength]]"
          value="{{_inputText}}"
        ></paper-input>
        <div class="buttons">
          <gr-button link="" id="cancelBtn" on-click="_cancel"
            >cancel</gr-button
          >
          <gr-button link="" id="saveBtn" on-click="_save">save</gr-button>
        </div>
      </div>
    </div>
  </iron-dropdown>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class tw extends(ra([Wu],Zn(na(Ka)))){static get template(){return ew}static get is(){return"gr-editable-label"}static get properties(){return{labelText:String,editing:{type:Boolean,value:!1},value:{type:String,notify:!0,value:"",observer:"_updateTitle"},placeholder:{type:String,value:""},readOnly:{type:Boolean,value:!1},uppercase:{type:Boolean,reflectToAttribute:!0,value:!1},maxLength:Number,_inputText:String,_verticalOffset:{type:Number,readOnly:!0,value:-30}}}ready(){super.ready(),this._ensureAttribute("tabindex","0")}get keyBindings(){return{enter:"_handleEnter",esc:"_handleEsc"}}_usePlaceholder(e,t){return(!e||!e.length)&&t}_computeLabel(e,t){return this._usePlaceholder(e,t)?t:e}_showDropdown(){if(!this.readOnly&&!this.editing)return this._open().then(()=>{this._nativeInput.focus(),this.$.input.value&&this._nativeInput.setSelectionRange(0,this.$.input.value.length)})}open(){return this._open().then(()=>{this._nativeInput.focus()})}_open(...e){return this.$.dropdown.open(),this._inputText=this.value,this.editing=!0,new Promise(t=>{Br.open.apply(this.$.dropdown,e),this._awaitOpen(t)})}_awaitOpen(e){let t=0;const n=()=>{this.async(()=>{"none"!==this.$.dropdown.style.display?e.call(this):t++<10&&n.call(this)},5)};n.call(this)}_id(){return this.getAttribute("id")||"global"}_save(){this.editing&&(this.$.dropdown.close(),this.value=this._inputText,this.editing=!1,this.dispatchEvent(new CustomEvent("changed",{detail:this.value,composed:!0,bubbles:!0})))}_cancel(){this.editing&&(this.$.dropdown.close(),this.editing=!1,this._inputText=this.value)}get _nativeInput(){return this.$.input.$.nativeInput||this.$.input.$.input}_handleEnter(e){e=this.getKeyboardEvent(e),Ui(e).rootTarget===this._nativeInput&&(e.preventDefault(),this._save())}_handleEsc(e){e=this.getKeyboardEvent(e),Ui(e).rootTarget===this._nativeInput&&(e.preventDefault(),this._cancel())}_computeLabelClass(e,t,n){const i=[];return e||i.push("editable"),this._usePlaceholder(t,n)&&i.push("placeholder"),i.join(" ")}_updateTitle(e){this.setAttribute("title",this._computeLabel(e,this.placeholder))}}customElements.define(tw.is,tw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nw=za`
  <style include="shared-styles">
    :host {
      display: block;
      overflow: hidden;
    }
    .container {
      align-items: center;
      background: var(--chip-background-color);
      border-radius: 0.75em;
      display: inline-flex;
      padding: 0 var(--spacing-m);
    }
    gr-button.remove {
      --gr-remove-button-style: {
        border: 0;
        color: var(--deemphasized-text-color);
        font-weight: var(--font-weight-normal);
        height: 0.6em;
        line-height: 10px;
        margin-left: var(--spacing-xs);
        padding: 0;
        text-decoration: none;
      }
    }

    gr-button.remove:hover,
    gr-button.remove:focus {
      --gr-button: {
        @apply --gr-remove-button-style;
        color: #333;
      }
    }
    gr-button.remove {
      --gr-button: {
        @apply --gr-remove-button-style;
      }
    }
    .transparentBackground,
    gr-button.transparentBackground {
      background-color: transparent;
    }
    :host([disabled]) {
      opacity: 0.6;
      pointer-events: none;
    }
    a {
      color: var(--linked-chip-text-color);
    }
    iron-icon {
      height: 1.2rem;
      width: 1.2rem;
    }
  </style>
  <div class$="container [[_getBackgroundClass(transparentBackground)]]">
    <a href$="[[href]]">
      <gr-limited-text limit="[[limit]]" text="[[text]]"></gr-limited-text>
    </a>
    <gr-button
      id="remove"
      link=""
      hidden$="[[!removable]]"
      hidden=""
      class$="remove [[_getBackgroundClass(transparentBackground)]]"
      on-click="_handleRemoveTap"
    >
      <iron-icon icon="gr-icons:close"></iron-icon>
    </gr-button>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class iw extends(Zn(na(Ka))){static get template(){return nw}static get is(){return"gr-linked-chip"}static get properties(){return{href:String,disabled:{type:Boolean,value:!1,reflectToAttribute:!0},removable:{type:Boolean,value:!1},text:String,transparentBackground:{type:Boolean,value:!1},limit:Number}}_getBackgroundClass(e){return e?"transparentBackground":""}_handleRemoveTap(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("remove",{composed:!0,bubbles:!0}))}}customElements.define(iw.is,iw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sw=za` <slot></slot> `
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class aw extends(ra([Bu],Zn(na(Ka)))){static get template(){return sw}static get is(){return"gr-label"}}customElements.define(aw.is,aw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ow=za`
  <style include="gr-voting-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    .placeholder {
      color: var(--deemphasized-text-color);
      padding-top: var(--spacing-xs);
    }
    .hidden {
      display: none;
    }
    .voteChip {
      display: flex;
      justify-content: center;
      margin-right: var(--spacing-s);
      padding: 0;
      @apply --vote-chip-styles;
      border-width: 0;
    }
    .max {
      background-color: var(--vote-color-approved);
    }
    .min {
      background-color: var(--vote-color-rejected);
    }
    .positive {
      background-color: var(--vote-color-recommended);
    }
    .negative {
      background-color: var(--vote-color-disliked);
    }
    .hidden {
      display: none;
    }
    td {
      vertical-align: top;
    }
    tr {
      min-height: var(--line-height-normal);
    }
    gr-button {
      vertical-align: top;
      --gr-button: {
        height: var(--line-height-normal);
        width: var(--line-height-normal);
        padding: 0;
      }
    }
    gr-button[disabled] iron-icon {
      color: var(--border-color);
    }
    gr-account-chip {
      margin-right: var(--spacing-xs);
    }
    iron-icon {
      height: calc(var(--line-height-normal) - 2px);
      width: calc(var(--line-height-normal) - 2px);
    }
    .labelValueContainer:not(:first-of-type) td {
      padding-top: var(--spacing-s);
    }
  </style>
  <p
    class$="placeholder [[_computeShowPlaceholder(labelInfo, change.labels.*)]]"
  >
    No votes.
  </p>
  <table>
    <template
      is="dom-repeat"
      items="[[_mapLabelInfo(labelInfo, account, change.labels.*)]]"
      as="mappedLabel"
    >
      <tr class="labelValueContainer">
        <td>
          <gr-label
            has-tooltip=""
            title="[[_computeValueTooltip(labelInfo, mappedLabel.value)]]"
            class$="[[mappedLabel.className]] voteChip"
          >
            [[mappedLabel.value]]
          </gr-label>
        </td>
        <td>
          <gr-account-chip
            account="[[mappedLabel.account]]"
            transparent-background=""
          ></gr-account-chip>
        </td>
        <td>
          <gr-button
            link=""
            aria-label="Remove"
            on-click="_onDeleteVote"
            tooltip="Remove vote"
            data-account-id$="[[mappedLabel.account._account_id]]"
            class$="deleteBtn [[_computeDeleteClass(mappedLabel.account, mutable, change)]]"
          >
            <iron-icon icon="gr-icons:delete"></iron-icon>
          </gr-button>
        </td>
      </tr>
    </template>
  </table>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class rw extends(Zn(na(Ka))){static get template(){return ow}static get is(){return"gr-label-info"}static get properties(){return{labelInfo:Object,label:String,change:Object,account:Object,mutable:Boolean}}_mapLabelInfo(e,t,n){const i=[];if(!e||!t)return i;if(!e.values){if(e.rejected||e.approved){const t=e.approved||!e.rejected;return[{value:t?"👍️":"👎️",className:t?"positive":"negative",account:t?e.approved:e.rejected}]}return i}const s=(e.all||[]).sort((e,t)=>e.value-t.value),a=Object.keys(e.values);for(const n of s)if(n.value&&n.value!=e.default_value){let e,s="";n.value>0?(s="+",e=parseInt(n.value,10)===parseInt(a[a.length-1],10)?"max":"positive"):n.value<0&&(e=parseInt(n.value,10)===parseInt(a[0],10)?"min":"negative");const o={value:s+n.value,className:e,account:n};n._account_id===t._account_id?i.unshift(o):i.push(o)}return i}_computeDeleteClass(e,t,n){if(!t||!n||!n.removable_reviewers)return"hidden";return n.removable_reviewers.find(t=>t._account_id===e._account_id)?"":"hidden"}_onDeleteVote(e){e.preventDefault();let t=Ui(e).rootTarget;for(;!t.classList.contains("deleteBtn");){if(!t.parentElement)return;t=t.parentElement}t.disabled=!0;const n=parseInt(t.getAttribute("data-account-id"),10);this._xhrPromise=this.$.restAPI.deleteVote(this.change._number,n,this.label).then(e=>{t.disabled=!1,e.ok&&um.navigateToChange(this.change)}).catch(e=>{t.disabled=!1})}_computeValueTooltip(e,t){return e&&e.values&&e.values[t]?e.values[t]:""}_computeShowPlaceholder(e,t){if(e&&!e.values&&(e.rejected||e.approved))return"hidden";if(e&&e.all)for(const t of e.all)if(t.value&&t.value!=e.default_value)return"hidden";return""}}customElements.define(rw.is,rw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lw=za`
  <style include="shared-styles">
    :host {
      display: table;
      width: 100%;
    }
    .status {
      color: #ffa62f;
      display: inline-block;
      text-align: center;
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
    }
    .approved.status {
      color: var(--vote-text-color-recommended);
    }
    .rejected.status {
      color: var(--vote-text-color-disliked);
    }
    iron-icon {
      color: inherit;
    }
    .status iron-icon {
      vertical-align: top;
    }
    section {
      display: table-row;
    }
    .show-hide {
      float: right;
    }
    .title {
      min-width: 10em;
      padding: var(--spacing-s) var(--spacing-m) 0
        var(--requirements-horizontal-padding);
    }
    .value {
      padding: var(--spacing-s) 0 0 0;
    }
    .title,
    .value {
      display: table-cell;
      vertical-align: top;
    }
    .hidden {
      display: none;
    }
    .showHide {
      cursor: pointer;
    }
    .showHide .title {
      padding-bottom: var(--spacing-m);
      padding-top: var(--spacing-l);
    }
    .showHide .value {
      padding-top: 0;
      vertical-align: middle;
    }
    .showHide iron-icon {
      color: var(--deemphasized-text-color);
      float: right;
    }
    .spacer {
      height: var(--spacing-m);
    }
  </style>
  <template is="dom-repeat" items="[[_requirements]]">
    <section>
      <div class="title requirement">
        <span class$="status [[item.style]]">
          <iron-icon
            class="icon"
            icon="[[_computeRequirementIcon(item.satisfied)]]"
          ></iron-icon>
        </span>
        <gr-limited-text
          class="name"
          limit="40"
          text="[[item.fallback_text]]"
        ></gr-limited-text>
      </div>
    </section>
  </template>
  <template is="dom-repeat" items="[[_requiredLabels]]">
    <section>
      <div class="title">
        <span class$="status [[item.style]]">
          <iron-icon class="icon" icon="[[item.icon]]"></iron-icon>
        </span>
        <gr-limited-text
          class="name"
          limit="40"
          text="[[item.label]]"
        ></gr-limited-text>
      </div>
      <div class="value">
        <gr-label-info
          change="{{change}}"
          account="[[account]]"
          mutable="[[mutable]]"
          label="[[item.label]]"
          label-info="[[item.labelInfo]]"
        ></gr-label-info>
      </div>
    </section>
  </template>
  <section class="spacer"></section>
  <section
    class$="spacer [[_computeShowOptional(_optionalLabels.*)]]"
  ></section>
  <section
    show-bottom-border$="[[_showOptionalLabels]]"
    on-click="_handleShowHide"
    class$="showHide [[_computeShowOptional(_optionalLabels.*)]]"
  >
    <div class="title">Other labels</div>
    <div class="value">
      <iron-icon
        id="showHide"
        icon="[[_computeShowHideIcon(_showOptionalLabels)]]"
      >
      </iron-icon>
    </div>
  </section>
  <template is="dom-repeat" items="[[_optionalLabels]]">
    <section class$="optional [[_computeSectionClass(_showOptionalLabels)]]">
      <div class="title">
        <span class$="status [[item.style]]">
          <template is="dom-if" if="[[item.icon]]">
            <iron-icon class="icon" icon="[[item.icon]]"></iron-icon>
          </template>
          <template is="dom-if" if="[[!item.icon]]">
            <span>[[_computeLabelValue(item.labelInfo.value)]]</span>
          </template>
        </span>
        <gr-limited-text
          class="name"
          limit="40"
          text="[[item.label]]"
        ></gr-limited-text>
      </div>
      <div class="value">
        <gr-label-info
          change="{{change}}"
          account="[[account]]"
          mutable="[[mutable]]"
          label="[[item.label]]"
          label-info="[[item.labelInfo]]"
        ></gr-label-info>
      </div>
    </section>
  </template>
  <section
    class$="spacer [[_computeShowOptional(_optionalLabels.*)]] [[_computeSectionClass(_showOptionalLabels)]]"
  ></section>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class cw extends(ra([zg],Zn(na(Ka)))){static get template(){return lw}static get is(){return"gr-change-requirements"}static get properties(){return{change:Object,account:Object,mutable:Boolean,_requirements:{type:Array,computed:"_computeRequirements(change)"},_requiredLabels:{type:Array,value:()=>[]},_optionalLabels:{type:Array,value:()=>[]},_showWip:{type:Boolean,computed:"_computeShowWip(change)"},_showOptionalLabels:{type:Boolean,value:!0}}}static get observers(){return["_computeLabels(change.labels.*)"]}_computeShowWip(e){return e.work_in_progress}_computeRequirements(e){const t=[];if(e.requirements)for(const n of e.requirements)n.satisfied="OK"===n.status,n.style=this._computeRequirementClass(n.satisfied),t.push(n);return e.work_in_progress&&t.push({fallback_text:"Work-in-progress",tooltip:"Change must not be in 'Work in Progress' state."}),t}_computeRequirementClass(e){return e?"approved":""}_computeRequirementIcon(e){return e?"gr-icons:check":"gr-icons:hourglass"}_computeLabels(e){const t=e.base;this._optionalLabels=[],this._requiredLabels=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const n=t[e],i=this._computeLabelIcon(n),s=this._computeLabelClass(n),a=n.optional?"_optionalLabels":"_requiredLabels";this.push(a,{label:e,icon:i,style:s,labelInfo:n})}}_computeLabelIcon(e){return e.approved?"gr-icons:check":e.rejected?"gr-icons:close":"gr-icons:hourglass"}_computeLabelClass(e){return e.approved?"approved":e.rejected?"rejected":""}_computeShowOptional(e){return e.base.length?"":"hidden"}_computeLabelValue(e){return(e>0?"+":"")+e}_computeShowHideIcon(e){return e?"gr-icons:expand-less":"gr-icons:expand-more"}_computeSectionClass(e){return e?"":"hidden"}_handleShowHide(e){this._showOptionalLabels=!this._showOptionalLabels}}customElements.define(cw.is,cw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const dw=za`
  <style include="shared-styles">
    .container {
      align-items: center;
      display: flex;
    }
  </style>
  <div class="container">
    <template is="dom-if" if="[[_showWebLink]]">
      <a target="_blank" rel="noopener" href$="[[_webLink]]"
        >[[_computeShortHash(commitInfo)]]</a
      >
    </template>
    <template is="dom-if" if="[[!_showWebLink]]">
      [[_computeShortHash(commitInfo)]]
    </template>
    <gr-copy-clipboard
      has-tooltip=""
      button-title="Copy full SHA to clipboard"
      hide-input=""
      text="[[commitInfo.commit]]"
    >
    </gr-copy-clipboard>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class hw extends(Zn(na(Ka))){static get template(){return dw}static get is(){return"gr-commit-info"}static get properties(){return{change:Object,commitInfo:Object,serverConfig:Object,_showWebLink:{type:Boolean,computed:"_computeShowWebLink(change, commitInfo, serverConfig)"},_webLink:{type:String,computed:"_computeWebLink(change, commitInfo, serverConfig)"}}}_getWeblink(e,t,n){return um.getPatchSetWeblink(e.project,t.commit,{weblinks:t.web_links,config:n})}_computeShowWebLink(e,t,n){if([e,t,n].some(e=>void 0===e))return;const i=this._getWeblink(e,t,n);return!!i&&!!i.url}_computeWebLink(e,t,n){if([e,t,n].some(e=>void 0===e))return;const{url:i}=this._getWeblink(e,t,n)||{};return i}_computeShortHash(e){const{name:t}=this._getWeblink(this.change,e,this.serverConfig)||{};return t}}customElements.define(hw.is,hw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pw=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.8;
      pointer-events: none;
    }
    .container {
      display: block;
    }
    gr-button {
      --gr-button: {
        padding: 0px 0px;
      }
    }
    gr-account-chip {
      display: inline-block;
    }
  </style>
  <div class="container">
    <div>
      <template is="dom-repeat" items="[[_displayedReviewers]]" as="reviewer">
        <gr-account-chip
          class="reviewer"
          account="[[reviewer]]"
          on-remove="_handleRemove"
          voteable-text="[[_computeVoteableText(reviewer, change)]]"
          removable="[[_computeCanRemoveReviewer(reviewer, mutable)]]"
        >
        </gr-account-chip>
      </template>
    </div>
    <gr-button
      class="hiddenReviewers"
      link=""
      hidden$="[[!_hiddenReviewerCount]]"
      on-click="_handleViewAll"
      >and [[_hiddenReviewerCount]] more</gr-button
    >
    <div class="controlsContainer" hidden$="[[!mutable]]">
      <gr-button
        link=""
        id="addReviewer"
        class="addReviewer"
        on-click="_handleAddTap"
        >[[_addLabel]]</gr-button
      >
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class uw extends(Zn(na(Ka))){static get template(){return pw}static get is(){return"gr-reviewer-list"}static get properties(){return{change:Object,serverConfig:Object,disabled:{type:Boolean,value:!1,reflectToAttribute:!0},mutable:{type:Boolean,value:!1},reviewersOnly:{type:Boolean,value:!1},ccsOnly:{type:Boolean,value:!1},_displayedReviewers:{type:Array,value:()=>[]},_reviewers:{type:Array,value:()=>[]},_showInput:{type:Boolean,value:!1},_addLabel:{type:String,computed:"_computeAddLabel(ccsOnly)"},_hiddenReviewerCount:{type:Number,computed:"_computeHiddenCount(_reviewers, _displayedReviewers)"},_lastAutocompleteRequest:Object,_xhrPromise:Object}}static get observers(){return["_reviewersChanged(change.reviewers.*, change.owner, serverConfig)"]}_permittedLabelsToNumericScores(e){return e?Object.keys(e).map(t=>({label:t,scores:e[t].map(e=>parseInt(e,10))})):[]}_getMaxPermittedScores(e){return this._permittedLabelsToNumericScores(e.permitted_labels).map(({label:e,scores:t})=>({[e]:t.map(e=>parseInt(e,10)).reduce((e,t)=>Math.max(e,t))})).reduce((e,t)=>Object.assign(e,t),{})}_getReviewerPermittedScore(e,t,n){if(!t.labels[n].all)return NaN;const i=t.labels[n].all.filter(({_account_id:t})=>e._account_id===t).pop();return i?i.hasOwnProperty("permitted_voting_range")?i.permitted_voting_range.max:i.hasOwnProperty("value")?0:NaN:NaN}_computeVoteableText(e,t){if(!t||!t.labels)return"";const n=[],i=this._getMaxPermittedScores(t);for(const s of Object.keys(t.labels)){const a=this._getReviewerPermittedScore(e,t,s);isNaN(a)||a<0||(a>0&&a===i[s]?n.push(`${s}: +${a}`):n.push(`${s}`))}return n.join(", ")}_reviewersChanged(e,t,n){if([e,t,n].some(e=>void 0===e))return;let i=[];const s=e.base;for(const e in s)this.reviewersOnly&&"REVIEWER"!==e||this.ccsOnly&&"CC"!==e||"REVIEWER"!==e&&"CC"!==e||(i=i.concat(s[e]));this._reviewers=i.filter(e=>e._account_id!=t._account_id);const a=n.accounts&&"FIRST_NAME"===n.accounts.default_display_name?6:3;this._reviewers.length>a+2?this._displayedReviewers=this._reviewers.slice(0,a):this._displayedReviewers=this._reviewers}_computeHiddenCount(e,t){if(![e,t].some(e=>void 0===e))return e.length-t.length}_computeCanRemoveReviewer(e,t){if(!t)return!1;let n;for(let t=0;t<this.change.removable_reviewers.length;t++)if(n=this.change.removable_reviewers[t],n._account_id===e._account_id||!e._account_id&&n.email===e.email)return!0;return!1}_handleRemove(e){e.preventDefault();const t=Ui(e).rootTarget;if(!t.account)return;const n=t.account._account_id||t.account.email;this.disabled=!0,this._xhrPromise=this._removeReviewer(n).then(e=>{if(this.disabled=!1,!e.ok)return e;const t=this.change.reviewers;for(const e of["REVIEWER","CC"]){t[e]=t[e]||[];for(let i=0;i<t[e].length;i++)if(t[e][i]._account_id==n||t[e][i].email==n){this.splice("change.reviewers."+e,i,1);break}}}).catch(e=>{throw this.disabled=!1,e})}_handleAddTap(e){e.preventDefault();const t={};this.reviewersOnly&&(t.reviewersOnly=!0),this.ccsOnly&&(t.ccsOnly=!0),this.dispatchEvent(new CustomEvent("show-reply-dialog",{detail:{value:t},composed:!0,bubbles:!0}))}_handleViewAll(e){this._displayedReviewers=this._reviewers}_removeReviewer(e){return this.$.restAPI.removeChangeReviewer(this.change._number,e)}_computeAddLabel(e){return e?"Add CC":"Add reviewer"}}customElements.define(uw.is,uw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mw=za`
  <style include="shared-styles">
    gr-autocomplete {
      display: inline-block;
      flex: 1;
      overflow: hidden;
    }
  </style>
  <gr-autocomplete
    id="input"
    borderless="[[borderless]]"
    placeholder="[[placeholder]]"
    threshold="[[suggestFrom]]"
    query="[[querySuggestions]]"
    allow-non-suggested-values="[[allowAnyInput]]"
    on-commit="_handleInputCommit"
    clear-on-commit=""
    warn-uncommitted=""
    text="{{_inputText}}"
    vertical-offset="24"
  >
  </gr-autocomplete>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class gw extends(Zn(na(Ka))){static get template(){return mw}static get is(){return"gr-account-entry"}static get properties(){return{allowAnyInput:Boolean,borderless:Boolean,placeholder:String,suggestFrom:{type:Number,value:0},querySuggestions:{type:Function,notify:!0,value:()=>e=>Promise.resolve([])},_config:Object,_inputText:{type:String,observer:"_inputTextChanged"}}}get focusStart(){return this.$.input.focusStart}focus(){this.$.input.focus()}clear(){this.$.input.clear()}setText(e){this.$.input.setText(e)}getText(){return this.$.input.text}_handleInputCommit(e){this.dispatchEvent(new CustomEvent("add",{detail:{value:e.detail.value},composed:!0,bubbles:!0})),this.$.input.focus()}_inputTextChanged(e){e.length&&this.allowAnyInput&&this.dispatchEvent(new CustomEvent("account-text-changed",{bubbles:!0,composed:!0}))}}customElements.define(gw.is,gw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _w=za`
  <style include="shared-styles">
    gr-account-chip {
      display: inline-block;
      margin: var(--spacing-xs) var(--spacing-xs) var(--spacing-xs) 0;
    }
    gr-account-entry {
      display: flex;
      flex: 1;
      min-width: 10em;
      margin: var(--spacing-xs) var(--spacing-xs) var(--spacing-xs) 0;
    }
    .group {
      --account-label-suffix: ' (group)';
    }
    .pending-add {
      font-style: italic;
    }
    .list {
      align-items: center;
      display: flex;
      flex-wrap: wrap;
      @apply --account-list-style;
    }
  </style>
  <!--
      NOTE(Issue 6419): Nest the inner dom-repeat template in a div rather than
      as a direct child of the dom-module's template.
    -->
  <div class="list">
    <template id="chips" is="dom-repeat" items="[[accounts]]" as="account">
      <gr-account-chip
        account="[[account]]"
        class$="[[_computeChipClass(account)]]"
        data-account-id$="[[account._account_id]]"
        removable="[[_computeRemovable(account, readonly)]]"
        on-keydown="_handleChipKeydown"
        tabindex="-1"
      >
      </gr-account-chip>
    </template>
  </div>
  <gr-account-entry
    borderless=""
    hidden$="[[_computeEntryHidden(maxCount, accounts.*, readonly)]]"
    id="entry"
    placeholder="[[placeholder]]"
    on-add="_handleAdd"
    on-input-keydown="_handleInputKeydown"
    allow-any-input="[[allowAnyInput]]"
    query-suggestions="[[_querySuggestions]]"
  >
  </gr-account-entry>
  <slot></slot>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class fw extends(Zn(na(Ka))){static get template(){return _w}static get is(){return"gr-account-list"}static get properties(){return{accounts:{type:Array,value:()=>[],notify:!0},change:Object,filter:Function,placeholder:String,disabled:{type:Function,value:!1},suggestionsProvider:{type:Object},pendingConfirmation:{type:Object,value:null,notify:!0},readonly:{type:Boolean,value:!1},allowAnyInput:{type:Boolean,value:!1},removableValues:Array,maxCount:{type:Number,value:0},_querySuggestions:{type:Function,value(){return this._getSuggestions.bind(this)}},skipSuggestOnEmpty:{type:Boolean,value:!1}}}created(){super.created(),this.addEventListener("remove",e=>this._handleRemove(e))}get accountChips(){return Array.from(Ui(this.root).querySelectorAll("gr-account-chip"))}get focusStart(){return this.$.entry.focusStart}_getSuggestions(e){if(this.skipSuggestOnEmpty&&!e)return Promise.resolve([]);const t=this.suggestionsProvider;return t?t.getSuggestions(e).then(e=>e?(this.filter&&(e=e.filter(this.filter)),e.map(e=>t.makeSuggestionItem(e))):[]):Promise.resolve([])}_handleAdd(e){this._addAccountItem(e.detail.value)}_addAccountItem(e){if(e.account){const t=Object.assign({},e.account,{_pendingAdd:!0});this.push("accounts",t)}else if(e.group){if(e.confirm)return void(this.pendingConfirmation=e);const t=Object.assign({},e.group,{_pendingAdd:!0,_group:!0});this.push("accounts",t)}else if(this.allowAnyInput){if(!e.includes("@"))return this.$.entry.setText(e),this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Please input a valid email."},bubbles:!0,composed:!0})),!1;{const t={email:e,_pendingAdd:!0};this.push("accounts",t)}}return this.pendingConfirmation=null,!0}confirmGroup(e){e=Object.assign({},e,{confirmed:!0,_pendingAdd:!0,_group:!0}),this.push("accounts",e),this.pendingConfirmation=null}_computeChipClass(e){const t=[];return e._group&&t.push("group"),e._pendingAdd&&t.push("pendingAdd"),t.join(" ")}_accountMatches(e,t){if(e&&t){if(e._account_id)return e._account_id===t._account_id;if(e.email)return e.email===t.email}return e===t}_computeRemovable(e,t){if(t)return!1;if(this.removableValues){for(let t=0;t<this.removableValues.length;t++)if(this._accountMatches(this.removableValues[t],e))return!0;return!!e._pendingAdd}return!0}_handleRemove(e){const t=e.detail.account;this._removeAccount(t),this.$.entry.focus()}_removeAccount(e){if(e&&this._computeRemovable(e,this.readonly)){for(let t=0;t<this.accounts.length;t++){let n;const i=this.accounts[t];if(n=e._group?e.id===i.id:this._accountMatches(e,i),n)return void this.splice("accounts",t,1)}console.warn("received remove event for missing account",e)}}_getNativeInput(e){return e.$.nativeInput||e.inputElement}_handleInputKeydown(e){const t=this._getNativeInput(e.detail.input);if(t.selectionStart===t.selectionEnd&&0===t.selectionStart)switch(e.detail.keyCode){case 8:this._removeAccount(this.accounts[this.accounts.length-1]);break;case 37:this.accountChips[this.accountChips.length-1]&&this.accountChips[this.accountChips.length-1].focus()}}_handleChipKeydown(e){const t=e.target,n=this.accountChips,i=n.indexOf(t);switch(e.keyCode){case 8:case 13:case 32:case 46:this._removeAccount(t.account),n.splice(i,1),i<n.length?n[i].focus():i>0?n[i-1].focus():this.$.entry.focus();break;case 37:i>0&&(t.blur(),n[i-1].focus());break;case 39:t.blur(),i<n.length-1?n[i+1].focus():this.$.entry.focus()}}submitEntryText(){const e=this.$.entry.getText();if(!e.length)return!0;const t=this._addAccountItem(e);return t&&this.$.entry.clear(),t}additions(){return this.accounts.filter(e=>e._pendingAdd).map(e=>e._group?{group:e}:{account:e})}_computeEntryHidden(e,t,n){return e&&e<=t.base.length||n}}customElements.define(fw.is,fw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bw=za`
  <style include="gr-change-metadata-shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    :host {
      display: table;
      --account-max-length: 20ch;
    }
    gr-change-requirements {
      --requirements-horizontal-padding: var(--metadata-horizontal-padding);
    }
    gr-editable-label {
      max-width: 9em;
    }
    .webLink {
      display: block;
    }
    /* CSS Mixins should be applied last. */
    section.assignee {
      @apply --change-metadata-assignee;
    }
    section.strategy {
      @apply --change-metadata-strategy;
    }
    section.topic {
      @apply --change-metadata-topic;
    }
    gr-account-chip[disabled],
    gr-linked-chip[disabled] {
      opacity: 0;
      pointer-events: none;
    }
    .hashtagChip {
      margin-bottom: var(--spacing-m);
    }
    #externalStyle {
      display: block;
    }
    .parentList.merge {
      list-style-type: decimal;
      padding-left: var(--spacing-l);
    }
    .parentList gr-commit-info {
      display: inline-block;
    }
    .hideDisplay,
    #parentNotCurrentMessage {
      display: none;
    }
    .icon {
      margin: -3px 0;
    }
    .icon.help,
    .icon.notTrusted {
      color: #ffa62f;
    }
    .icon.invalid {
      color: var(--vote-text-color-disliked);
    }
    .icon.trusted {
      color: var(--vote-text-color-recommended);
    }
    .parentList.notCurrent.nonMerge #parentNotCurrentMessage {
      --arrow-color: #ffa62f;
      display: inline-block;
    }
    .separatedSection {
      margin-top: var(--spacing-l);
      padding: var(--spacing-m) 0;
    }
    .hashtag gr-linked-chip,
    .topic gr-linked-chip {
      --linked-chip-text-color: var(--link-color);
    }
    gr-reviewer-list {
      max-width: 200px;
    }
  </style>
  <gr-external-style id="externalStyle" name="change-metadata">
    <section>
      <span class="title">Updated</span>
      <span class="value">
        <gr-date-formatter
          has-tooltip=""
          date-str="[[change.updated]]"
        ></gr-date-formatter>
      </span>
    </section>
    <section>
      <span class="title">Owner</span>
      <span class="value">
        <gr-account-link account="[[change.owner]]"></gr-account-link>
        <template is="dom-if" if="[[_pushCertificateValidation]]">
          <gr-tooltip-content
            has-tooltip=""
            title$="[[_pushCertificateValidation.message]]"
          >
            <iron-icon
              class$="icon [[_pushCertificateValidation.class]]"
              icon="[[_pushCertificateValidation.icon]]"
            >
            </iron-icon>
          </gr-tooltip-content>
        </template>
      </span>
    </section>
    <section class$="[[_computeShowRoleClass(change, _CHANGE_ROLE.UPLOADER)]]">
      <span class="title">Uploader</span>
      <span class="value">
        <gr-account-link
          account="[[_getNonOwnerRole(change, _CHANGE_ROLE.UPLOADER)]]"
        ></gr-account-link>
      </span>
    </section>
    <section class$="[[_computeShowRoleClass(change, _CHANGE_ROLE.AUTHOR)]]">
      <span class="title">Author</span>
      <span class="value">
        <gr-account-link
          account="[[_getNonOwnerRole(change, _CHANGE_ROLE.AUTHOR)]]"
        ></gr-account-link>
      </span>
    </section>
    <section class$="[[_computeShowRoleClass(change, _CHANGE_ROLE.COMMITTER)]]">
      <span class="title">Committer</span>
      <span class="value">
        <gr-account-link
          account="[[_getNonOwnerRole(change, _CHANGE_ROLE.COMMITTER)]]"
        ></gr-account-link>
      </span>
    </section>
    <template is="dom-if" if="[[_isAssigneeEnabled(serverConfig)]]">
      <section class="assignee">
        <span class="title">Assignee</span>
        <span class="value">
          <gr-account-list
            id="assigneeValue"
            placeholder="Set assignee..."
            max-count="1"
            skip-suggest-on-empty=""
            accounts="{{_assignee}}"
            readonly="[[_computeAssigneeReadOnly(_mutable, change)]]"
            suggestions-provider="[[_getReviewerSuggestionsProvider(change)]]"
          >
          </gr-account-list>
        </span>
      </section>
    </template>
    <section>
      <span class="title">Reviewers</span>
      <span class="value">
        <gr-reviewer-list
          change="{{change}}"
          mutable="[[_mutable]]"
          reviewers-only=""
          server-config="[[serverConfig]]"
        ></gr-reviewer-list>
      </span>
    </section>
    <section>
      <span class="title">CC</span>
      <span class="value">
        <gr-reviewer-list
          change="{{change}}"
          mutable="[[_mutable]]"
          ccs-only=""
          server-config="[[serverConfig]]"
        ></gr-reviewer-list>
      </span>
    </section>
    <template
      is="dom-if"
      if="[[_computeShowRepoBranchTogether(change.project, change.branch)]]"
    >
      <section>
        <span class="title">Repo | Branch</span>
        <span class="value">
          <a href$="[[_computeProjectUrl(change.project)]]"
            >[[change.project]]</a
          >
          |
          <a href$="[[_computeBranchUrl(change.project, change.branch)]]"
            >[[change.branch]]</a
          >
        </span>
      </section>
    </template>
    <template
      is="dom-if"
      if="[[!_computeShowRepoBranchTogether(change.project, change.branch)]]"
    >
      <section>
        <span class="title">Repo</span>
        <span class="value">
          <a href$="[[_computeProjectUrl(change.project)]]">
            <gr-limited-text
              limit="40"
              text="[[change.project]]"
            ></gr-limited-text>
          </a>
        </span>
      </section>
      <section>
        <span class="title">Branch</span>
        <span class="value">
          <a href$="[[_computeBranchUrl(change.project, change.branch)]]">
            <gr-limited-text
              limit="40"
              text="[[change.branch]]"
            ></gr-limited-text>
          </a>
        </span>
      </section>
    </template>
    <section>
      <span class="title">[[_computeParentsLabel(_currentParents)]]</span>
      <span class="value">
        <ol
          class$="[[_computeParentListClass(_currentParents, parentIsCurrent)]]"
        >
          <template is="dom-repeat" items="[[_currentParents]]" as="parent">
            <li>
              <gr-commit-info
                change="[[change]]"
                commit-info="[[parent]]"
                server-config="[[serverConfig]]"
              ></gr-commit-info>
              <gr-tooltip-content
                id="parentNotCurrentMessage"
                has-tooltip=""
                show-icon=""
                title$="[[_notCurrentMessage]]"
              ></gr-tooltip-content>
            </li>
          </template>
        </ol>
      </span>
    </section>
    <section class="topic">
      <span class="title">Topic</span>
      <span class="value">
        <template is="dom-if" if="[[_showTopicChip(change.*, _settingTopic)]]">
          <gr-linked-chip
            text="[[change.topic]]"
            limit="40"
            href="[[_computeTopicUrl(change.topic)]]"
            removable="[[!_topicReadOnly]]"
            on-remove="_handleTopicRemoved"
          ></gr-linked-chip>
        </template>
        <template is="dom-if" if="[[_showAddTopic(change.*, _settingTopic)]]">
          <gr-editable-label
            class="topicEditableLabel"
            label-text="Add a topic"
            value="[[change.topic]]"
            max-length="1024"
            placeholder="[[_computeTopicPlaceholder(_topicReadOnly)]]"
            read-only="[[_topicReadOnly]]"
            on-changed="_handleTopicChanged"
          ></gr-editable-label>
        </template>
      </span>
    </section>
    <template is="dom-if" if="[[_showCherryPickOf(change.*)]]">
      <section>
        <span class="title">Cherry pick of</span>
        <span class="value">
          <a
            href$="[[_computeCherryPickOfUrl(change.cherry_pick_of_change, change.cherry_pick_of_patch_set, change.project)]]"
          >
            <gr-limited-text
              text="[[change.cherry_pick_of_change]],[[change.cherry_pick_of_patch_set]]"
              limit="40"
            >
            </gr-limited-text>
          </a>
        </span>
      </section>
    </template>
    <section
      class="strategy"
      hidden$="[[_computeHideStrategy(change)]]"
      hidden=""
    >
      <span class="title">Strategy</span>
      <span class="value">[[_computeStrategy(change)]]</span>
    </section>
    <section class="hashtag">
      <span class="title">Hashtags</span>
      <span class="value">
        <template is="dom-repeat" items="[[change.hashtags]]">
          <gr-linked-chip
            class="hashtagChip"
            text="[[item]]"
            href="[[_computeHashtagUrl(item)]]"
            removable="[[!_hashtagReadOnly]]"
            on-remove="_handleHashtagRemoved"
          >
          </gr-linked-chip>
        </template>
        <template is="dom-if" if="[[!_hashtagReadOnly]]">
          <gr-editable-label
            uppercase=""
            label-text="Add a hashtag"
            value="{{_newHashtag}}"
            placeholder="[[_computeHashtagPlaceholder(_hashtagReadOnly)]]"
            read-only="[[_hashtagReadOnly]]"
            on-changed="_handleHashtagChanged"
          ></gr-editable-label>
        </template>
      </span>
    </section>
    <div class="separatedSection">
      <gr-change-requirements
        change="{{change}}"
        account="[[account]]"
        mutable="[[_mutable]]"
      ></gr-change-requirements>
    </div>
    <section
      id="webLinks"
      hidden$="[[!_computeWebLinks(commitInfo, serverConfig)]]"
    >
      <span class="title">Links</span>
      <span class="value">
        <template
          is="dom-repeat"
          items="[[_computeWebLinks(commitInfo, serverConfig)]]"
          as="link"
        >
          <a href="[[link.url]]" class="webLink" rel="noopener" target="_blank">
            [[link.name]]
          </a>
        </template>
      </span>
    </section>
    <gr-endpoint-decorator name="change-metadata-item">
      <gr-endpoint-param name="labels" value="[[labels]]"></gr-endpoint-param>
      <gr-endpoint-param name="change" value="[[change]]"></gr-endpoint-param>
      <gr-endpoint-param
        name="revision"
        value="[[revision]]"
      ></gr-endpoint-param>
    </gr-endpoint-decorator>
  </gr-external-style>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,vw={FAST_FORWARD_ONLY:"Fast Forward Only",MERGE_IF_NECESSARY:"Merge if Necessary",REBASE_IF_NECESSARY:"Rebase if Necessary",MERGE_ALWAYS:"Always Merge",REBASE_ALWAYS:"Rebase Always",CHERRY_PICK:"Cherry Pick"},yw="BAD",ww="OK",Cw="TRUSTED";class Ew extends(ra([zg],Zn(na(Ka)))){static get template(){return bw}static get is(){return"gr-change-metadata"}static get properties(){return{change:Object,labels:{type:Object,notify:!0},account:Object,revision:Object,commitInfo:Object,_mutable:{type:Boolean,computed:"_computeIsMutable(account)"},serverConfig:Object,parentIsCurrent:Boolean,_notCurrentMessage:{type:String,value:"Not current - rebase possible",readOnly:!0},_topicReadOnly:{type:Boolean,computed:"_computeTopicReadOnly(_mutable, change)"},_hashtagReadOnly:{type:Boolean,computed:"_computeHashtagReadOnly(_mutable, change)"},_pushCertificateValidation:{type:Object,computed:"_computePushCertificateValidation(serverConfig, change)"},_showRequirements:{type:Boolean,computed:"_computeShowRequirements(change)"},_assignee:Array,_isWip:{type:Boolean,computed:"_computeIsWip(change)"},_newHashtag:String,_settingTopic:{type:Boolean,value:!1},_currentParents:{type:Array,computed:"_computeParents(revision)"},_CHANGE_ROLE:{type:Object,readOnly:!0,value:{OWNER:"owner",UPLOADER:"uploader",AUTHOR:"author",COMMITTER:"committer"}}}}static get observers(){return["_changeChanged(change)","_labelsChanged(change.labels)","_assigneeChanged(_assignee.*)"]}_labelsChanged(e){this.labels=Object.assign({},e)||null}_changeChanged(e){this._assignee=e.assignee?[e.assignee]:[]}_assigneeChanged(e){if(!this.change||!this._isAssigneeEnabled(this.serverConfig))return;const t=e.base;if(t.length){const e=t[0];if(this.change.assignee&&e._account_id===this.change.assignee._account_id)return;this.set(["change","assignee"],e),this.$.restAPI.setAssignee(this.change._number,e._account_id)}else{if(!this.change.assignee)return;this.set(["change","assignee"],void 0),this.$.restAPI.deleteAssignee(this.change._number)}}_computeHideStrategy(e){return!this.changeIsOpen(e)}_computeWebLinks(e,t){if(!e)return null;const n=um.getChangeWeblinks(this.change?this.change.repo:"",e.commit,{weblinks:e.web_links,config:t});return n.length?n:null}_isAssigneeEnabled(e){return e&&e.change&&!!e.change.enable_assignee}_computeStrategy(e){return vw[e.submit_type]}_computeLabelNames(e){return Object.keys(e).sort()}_handleTopicChanged(e,t){const n=this.change.topic;t.length||(t=null),this._settingTopic=!0,this.$.restAPI.setChangeTopic(this.change._number,t).then(e=>{this._settingTopic=!1,this.set(["change","topic"],e),e!==n&&this.dispatchEvent(new CustomEvent("topic-changed",{bubbles:!0,composed:!0}))})}_showAddTopic(e,t){return!(!!e&&!!e.base&&!!e.base.topic)&&!t}_showTopicChip(e,t){return!!e&&!!e.base&&!!e.base.topic&&!t}_showCherryPickOf(e){return!!(e&&e.base&&e.base.cherry_pick_of_change&&e.base.cherry_pick_of_patch_set)}_handleHashtagChanged(e){const t=this.change.hashtag;if(!this._newHashtag.length)return;const n=this._newHashtag;this._newHashtag="",this.$.restAPI.setChangeHashtag(this.change._number,{add:[n]}).then(e=>{this.set(["change","hashtags"],e),e!==t&&this.dispatchEvent(new CustomEvent("hashtag-changed",{bubbles:!0,composed:!0}))})}_computeTopicReadOnly(e,t){return!(e&&t&&t.actions&&t.actions.topic&&t.actions.topic.enabled)}_computeHashtagReadOnly(e,t){return!(e&&t&&t.actions&&t.actions.hashtags&&t.actions.hashtags.enabled)}_computeAssigneeReadOnly(e,t){return!(e&&t&&t.actions&&t.actions.assignee&&t.actions.assignee.enabled)}_computeTopicPlaceholder(e){return e?"No topic":"ADD TOPIC"}_computeHashtagPlaceholder(e){return e?"":"Add Hashtag"}_computeShowRequirements(e){if(e.status!==this.ChangeStatus.NEW)return!1;const t=!!e.requirements&&Object.keys(e.requirements).length>0,n=!!e.labels&&Object.keys(e.labels).length>0;return t||n||!!e.work_in_progress}_computePushCertificateValidation(e,t){if(!(t&&e&&e.receive&&e.receive.enable_signed_push))return null;const n=t.revisions[t.current_revision];if(!n.push_certificate||!n.push_certificate.key)return{class:"help",icon:"gr-icons:help",message:"This patch set was created without a push certificate"};const i=n.push_certificate.key;switch(i.status){case yw:return{class:"invalid",icon:"gr-icons:close",message:this._problems("Push certificate is invalid",i)};case ww:return{class:"notTrusted",icon:"gr-icons:info",message:this._problems("Push certificate is valid, but key is not trusted",i)};case Cw:return{class:"trusted",icon:"gr-icons:check",message:this._problems("Push certificate is valid and key is trusted",i)};default:throw new Error(`unknown certificate status: ${i.status}`)}}_problems(e,t){return t&&t.problems&&0!==t.problems.length?[e+":"].concat(t.problems).join("\n"):e}_computeShowRepoBranchTogether(e,t){return!!e&&!!t&&e.length+t.length<40}_computeProjectUrl(e){return um.getUrlForProjectChanges(e)}_computeBranchUrl(e,t){return this.change&&this.change.status?um.getUrlForBranch(t,e,this.change.status==this.ChangeStatus.NEW?"open":this.change.status.toLowerCase()):""}_computeCherryPickOfUrl(e,t,n){return um.getUrlForChangeById(e,n,t)}_computeTopicUrl(e){return um.getUrlForTopic(e)}_computeHashtagUrl(e){return um.getUrlForHashtag(e)}_handleTopicRemoved(e){const t=Ui(e).rootTarget;t.disabled=!0,this.$.restAPI.setChangeTopic(this.change._number,null).then(()=>{t.disabled=!1,this.set(["change","topic"],""),this.dispatchEvent(new CustomEvent("topic-changed",{bubbles:!0,composed:!0}))}).catch(e=>{t.disabled=!1})}_handleHashtagRemoved(e){e.preventDefault();const t=Ui(e).rootTarget;t.disabled=!0,this.$.restAPI.setChangeHashtag(this.change._number,{remove:[t.text]}).then(e=>{t.disabled=!1,this.set(["change","hashtags"],e)}).catch(e=>{t.disabled=!1})}_computeIsWip(e){return!!e.work_in_progress}_computeShowRoleClass(e,t){return this._getNonOwnerRole(e,t)?"":"hideDisplay"}_getNonOwnerRole(e,t){if(!e||!e.current_revision||!e.revisions[e.current_revision])return null;const n=e.revisions[e.current_revision];return n?t===this._CHANGE_ROLE.UPLOADER&&n.uploader&&e.owner._account_id!==n.uploader._account_id?n.uploader:t===this._CHANGE_ROLE.AUTHOR&&n.commit&&n.commit.author&&e.owner.email!==n.commit.author.email?n.commit.author:t===this._CHANGE_ROLE.COMMITTER&&n.commit&&n.commit.committer&&e.owner.email!==n.commit.committer.email?n.commit.committer:null:null}_computeParents(e){if(e&&e.commit)return e.commit.parents}_computeParentsLabel(e){return e&&e.length>1?"Parents":"Parent"}_computeParentListClass(e,t){return void 0===e||void 0===t?"":["parentList",e&&e.length>1?"merge":"nonMerge",t?"current":"notCurrent"].join(" ")}_computeIsMutable(e){return!!Object.keys(e).length}editTopic(){this._topicReadOnly||this.change.topic||this.shadowRoot.querySelector(".topicEditableLabel").open()}_getReviewerSuggestionsProvider(e){const t=Jr.create(this.$.restAPI,e._number,Xr.ANY);return t.init(),t}}customElements.define(Ew.is,Ew);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sw=za`
  <style include="shared-styles">
    :host {
      display: block;
      padding: var(--spacing-m) 0;
    }
    section {
      display: flex;
      padding: var(--spacing-m) var(--spacing-xl);
    }
    .flexContainer {
      display: flex;
      justify-content: space-between;
      padding-top: var(--spacing-m);
    }
    .footer {
      justify-content: flex-end;
    }
    .closeButtonContainer {
      align-items: flex-end;
      display: flex;
      flex: 0;
      justify-content: flex-end;
    }
    .patchFiles,
    .archivesContainer {
      padding-bottom: var(--spacing-m);
    }
    .patchFiles {
      margin-right: var(--spacing-xxl);
    }
    .patchFiles a,
    .archives a {
      display: inline-block;
      margin-right: var(--spacing-l);
    }
    .patchFiles a:last-of-type,
    .archives a:last-of-type {
      margin-right: 0;
    }
    .title {
      flex: 1;
      font-weight: var(--font-weight-bold);
    }
    .hidden {
      display: none;
    }
  </style>
  <section>
    <h3 class="title">
      Patch set [[patchNum]] of [[_computePatchSetQuantity(change.revisions)]]
    </h3>
  </section>
  <section class$="[[_computeShowDownloadCommands(_schemes)]]">
    <gr-download-commands
      id="downloadCommands"
      commands="[[_computeDownloadCommands(change, patchNum, _selectedScheme)]]"
      schemes="[[_schemes]]"
      selected-scheme="{{_selectedScheme}}"
    ></gr-download-commands>
  </section>
  <section class="flexContainer">
    <div
      class="patchFiles"
      hidden="[[_computeHidePatchFile(change, patchNum)]]"
    >
      <label>Patch file</label>
      <div>
        <a
          id="download"
          href$="[[_computeDownloadLink(change, patchNum)]]"
          download=""
        >
          [[_computeDownloadFilename(change, patchNum)]]
        </a>
        <a href$="[[_computeZipDownloadLink(change, patchNum)]]" download="">
          [[_computeZipDownloadFilename(change, patchNum)]]
        </a>
      </div>
    </div>
    <div
      class="archivesContainer"
      hidden$="[[!config.archives.length]]"
      hidden=""
    >
      <label>Archive</label>
      <div id="archives" class="archives">
        <template is="dom-repeat" items="[[config.archives]]" as="format">
          <a
            href$="[[_computeArchiveDownloadLink(change, patchNum, format)]]"
            download=""
          >
            [[format]]
          </a>
        </template>
      </div>
    </div>
  </section>
  <section class="footer">
    <span class="closeButtonContainer">
      <gr-button id="closeButton" link="" on-click="_handleCloseTap"
        >Close</gr-button
      >
    </span>
  </section>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class xw extends(ra([vm,zg],Zn(na(Ka)))){static get template(){return Sw}static get is(){return"gr-download-dialog"}static get properties(){return{change:Object,patchNum:String,config:Object,_schemes:{type:Array,value:()=>[],computed:"_computeSchemes(change, patchNum)",observer:"_schemesChanged"},_selectedScheme:String}}ready(){super.ready(),this._ensureAttribute("role","dialog")}focus(){this._schemes.length?this.$.downloadCommands.focusOnCopy():this.$.download.focus()}getFocusStops(){const e=this.shadowRoot.querySelector("#archives").querySelectorAll("a");return{start:this.$.closeButton,end:e[e.length-1]}}_computeDownloadCommands(e,t,n){let i;if(!e)return[];for(const s of Object.values(e.revisions||{}))if(this.patchNumEquals(s._number,t)&&s&&s.fetch&&s.fetch.hasOwnProperty(n)){i=s.fetch[n].commands;break}const s=[];for(const e in i)i&&i.hasOwnProperty(e)&&s.push({title:e,command:i[e]});return s}_computeZipDownloadLink(e,t){return this._computeDownloadLink(e,t,!0)}_computeZipDownloadFilename(e,t){return this._computeDownloadFilename(e,t,!0)}_computeDownloadLink(e,t,n){return[e,t].some(e=>void 0===e)?"":this.changeBaseURL(e.project,e._number,t)+"/patch?"+(n?"zip":"download")}_computeDownloadFilename(e,t,n){if([e,t].some(e=>void 0===e))return"";let i="";for(const n in e.revisions)if(this.patchNumEquals(e.revisions[n]._number,t)){i=n.substr(0,7);break}return i+".diff."+(n?"zip":"base64")}_computeHidePatchFile(e,t){if([e,t].some(e=>void 0===e))return!1;for(const n of Object.values(e.revisions||{}))if(this.patchNumEquals(n._number,t)){return 0==(n.commit&&n.commit.parents?n.commit.parents.length:0)}return!1}_computeArchiveDownloadLink(e,t,n){return[e,t,n].some(e=>void 0===e)?"":this.changeBaseURL(e.project,e._number,t)+"/archive?format="+n}_computeSchemes(e,t){if([e,t].some(e=>void 0===e))return[];for(const n of Object.values(e.revisions||{}))if(this.patchNumEquals(n._number,t)){const e=n.fetch;if(e)return Object.keys(e).sort();break}return[]}_computePatchSetQuantity(e){return e?Object.keys(e).length:0}_handleCloseTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!1}))}_schemesChanged(e){0!==e.length&&(e.includes(this._selectedScheme)||(this._selectedScheme=e.sort()[0]))}_computeShowDownloadCommands(e){return e.length?"":"hidden"}}customElements.define(xw.is,xw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Aw=za`
  <style include="shared-styles">
    :host {
      /* Used to remove horizontal whitespace between the icons. */
      display: flex;
    }
    gr-button.selected iron-icon {
      color: var(--link-color);
    }
    iron-icon {
      height: 1.3rem;
      width: 1.3rem;
    }
  </style>
  <gr-button
    id="sideBySideBtn"
    link=""
    has-tooltip=""
    class$="[[_computeSelectedClass(mode, _VIEW_MODES.SIDE_BY_SIDE)]]"
    title="Side-by-side diff"
    on-click="_handleSideBySideTap"
  >
    <iron-icon icon="gr-icons:side-by-side"></iron-icon>
  </gr-button>
  <gr-button
    id="unifiedBtn"
    link=""
    has-tooltip=""
    title="Unified diff"
    class$="[[_computeSelectedClass(mode, _VIEW_MODES.UNIFIED)]]"
    on-click="_handleUnifiedTap"
  >
    <iron-icon icon="gr-icons:unified"></iron-icon>
  </gr-button>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Pw extends(Zn(na(Ka))){static get template(){return Aw}static get is(){return"gr-diff-mode-selector"}static get properties(){return{mode:{type:String,notify:!0},saveOnChange:{type:Boolean,value:!1},_VIEW_MODES:{type:Object,readOnly:!0,value:{SIDE_BY_SIDE:"SIDE_BY_SIDE",UNIFIED:"UNIFIED_DIFF"}}}}setMode(e){this.saveOnChange&&this.mode&&this.mode!==e&&this.$.restAPI.savePreferences({diff_view:e}),this.mode=e}_computeSelectedClass(e,t){return t===e?"selected":""}_handleSideBySideTap(){this.setMode(this._VIEW_MODES.SIDE_BY_SIDE)}_handleUnifiedTap(){this.setMode(this._VIEW_MODES.UNIFIED)}}customElements.define(Pw.is,Pw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const kw=za`
  <style include="shared-styles">
    :host {
      align-items: center;
      display: flex;
    }
    select {
      max-width: 15em;
    }
    .arrow {
      color: var(--deemphasized-text-color);
      margin: 0 var(--spacing-m);
    }
    gr-dropdown-list {
      --trigger-style: {
        color: var(--deemphasized-text-color);
        text-transform: none;
        font-family: var(--font-family);
      }
      --trigger-hover-color: rgba(0, 0, 0, 0.6);
    }
    @media screen and (max-width: 50em) {
      .filesWeblinks {
        display: none;
      }
      gr-dropdown-list {
        --native-select-style: {
          max-width: 5.25em;
        }
        --dropdown-content-stype: {
          max-width: 300px;
        }
      }
    }
  </style>
  <span class="patchRange">
    <gr-dropdown-list
      id="basePatchDropdown"
      value="[[basePatchNum]]"
      on-value-change="_handlePatchChange"
      items="[[_baseDropdownContent]]"
    >
    </gr-dropdown-list>
  </span>
  <span is="dom-if" if="[[filesWeblinks.meta_a]]" class="filesWeblinks">
    <template is="dom-repeat" items="[[filesWeblinks.meta_a]]" as="weblink">
      <a target="_blank" rel="noopener" href$="[[weblink.url]]"
        >[[weblink.name]]</a
      >
    </template>
  </span>
  <span class="arrow">→</span>
  <span class="patchRange">
    <gr-dropdown-list
      id="patchNumDropdown"
      value="[[patchNum]]"
      on-value-change="_handlePatchChange"
      items="[[_patchDropdownContent]]"
    >
    </gr-dropdown-list>
    <span is="dom-if" if="[[filesWeblinks.meta_b]]" class="filesWeblinks">
      <template is="dom-repeat" items="[[filesWeblinks.meta_b]]" as="weblink">
        <a target="_blank" href$="[[weblink.url]]">[[weblink.name]]</a>
      </template>
    </span>
  </span>
`;
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends(ra([vm],Zn(na(Ka)))){static get template(){return kw}static get is(){return"gr-patch-range-select"}static get properties(){return{availablePatches:Array,_baseDropdownContent:{type:Object,computed:"_computeBaseDropdownContent(availablePatches, patchNum,_sortedRevisions, changeComments, revisionInfo)"},_patchDropdownContent:{type:Object,computed:"_computePatchDropdownContent(availablePatches,basePatchNum, _sortedRevisions, changeComments)"},changeNum:String,changeComments:Object,filesWeblinks:Object,patchNum:String,basePatchNum:String,revisions:Object,revisionInfo:Object,_sortedRevisions:Array}}static get observers(){return["_updateSortedRevisions(revisions.*)"]}_getShaForPatch(e){return e.sha.substring(0,10)}_computeBaseDropdownContent(e,t,n,i,s){if([e,t,n,i,s].some(e=>void 0===e))return;const a=s.getParentCountMap(),o=a.hasOwnProperty(t)?a[t]:1,r=s.getMaxParents(),l=o>1,c=[];for(const s of e){const e=s.num,a=this._createDropdownEntry(e,"Patchset ",n,i,this._getShaForPatch(s));c.push(Object.assign({},a,{disabled:this._computeLeftDisabled(s.num,t,n)}))}c.push({text:l?"Auto Merge":"Base",value:"PARENT"});for(let e=0;l&&e<r;e++)c.push({disabled:e>=o,triggerText:`Parent ${e+1}`,text:`Parent ${e+1}`,mobileText:`Parent ${e+1}`,value:-(e+1)});return c}_computeMobileText(e,t,n){return`${e}`+`${this._computePatchSetCommentsString(t,e)}`+`${this._computePatchSetDescription(n,e,!0)}`}_computePatchDropdownContent(e,t,n,i){if([e,t,n,i].some(e=>void 0===e))return;const s=[];for(const a of e){const e=a.num,o=this._createDropdownEntry(e,"edit"===e?"":"Patchset ",n,i,this._getShaForPatch(a));s.push(Object.assign({},o,{disabled:this._computeRightDisabled(t,e,n)}))}return s}_computeText(e,t,n,i){return`${t}${e}`+`${this._computePatchSetCommentsString(n,e)}`+` | ${i}`}_createDropdownEntry(e,t,n,i,s){const a={triggerText:`${t}${e}`,text:this._computeText(e,t,i,s),mobileText:this._computeMobileText(e,i,n),bottomText:`${this._computePatchSetDescription(n,e)}`,value:e},o=this._computePatchSetDate(n,e);return o&&(a.date=o),a}_updateSortedRevisions(e){const t=e.base;this._sortedRevisions=this.sortRevisions(Object.values(t))}_computeLeftDisabled(e,t,n){return this.findSortedIndex(e,n)<=this.findSortedIndex(t,n)}_computeRightDisabled(e,t,n){return!this.patchNumEquals(e,"PARENT")&&(this.isMergeParent(e)?this.revisionInfo.getParentCount(t)<this.getParentIndex(e):this.findSortedIndex(e,n)<=this.findSortedIndex(t,n))}_computePatchSetCommentsString(e,t){if(!e)return;const n=e.computeCommentCount({patchNum:t}),i=Yr.computePluralString(n,"comment"),s=e.computeUnresolvedNum({patchNum:t}),a=Yr.computeString(s,"unresolved");return i.length||a.length?` (${i}`+(i&&a?", ":"")+`${a})`:""}_computePatchSetDescription(e,t,n){const i=this.getRevisionByPatchNum(e,t);return i&&i.description?(n?" ":"")+i.description.substring(0,500):""}_computePatchSetDate(e,t){const n=this.getRevisionByPatchNum(e,t);return n?n.created:void 0}_handlePatchChange(e){const t={patchNum:this.patchNum,basePatchNum:this.basePatchNum};Ui(e).localTarget===this.$.patchNumDropdown?t.patchNum=e.detail.value:t.basePatchNum=e.detail.value,this.dispatchEvent(new CustomEvent("patch-range-change",{detail:t,bubbles:!1}))}}customElements.define(Tw.is,Tw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Iw=za`
  <style include="shared-styles">
    :host {
      align-items: center;
      display: flex;
      justify-content: flex-end;
    }
    .invisible {
      display: none;
    }
    gr-button {
      margin-left: var(--spacing-l);
      text-decoration: none;
    }
    gr-dialog {
      width: 50em;
    }
    gr-dialog .main {
      width: 100%;
    }
    gr-dialog .main > iron-input {
      width: 100%;
    }
    input {
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      margin: var(--spacing-m) 0;
      padding: var(--spacing-s);
      width: 100%;
      box-sizing: content-box;
    }
    #fileUploadBrowse {
      margin-left: 0;
    }
    #dragDropArea {
      border: 2px dashed var(--border-color);
      border-radius: var(--border-radius);
      margin-top: var(--spacing-l);
      padding: var(--spacing-xxl) var(--spacing-xxl);
      text-align: center;
    }
    #dragDropArea > p {
      font-weight: var(--font-weight-bold);
      padding: var(--spacing-s);
    }
    @media screen and (max-width: 50em) {
      gr-dialog {
        width: 100vw;
      }
    }
  </style>
  <template is="dom-repeat" items="[[_actions]]" as="action">
    <gr-button
      id$="[[action.id]]"
      class$="[[_computeIsInvisible(action.id, hiddenActions)]]"
      link=""
      on-click="_handleTap"
      >[[action.label]]</gr-button
    >
  </template>
  <gr-overlay id="overlay" with-backdrop="">
    <gr-dialog
      id="openDialog"
      class="invisible dialog"
      disabled$="[[!_isValidPath(_path)]]"
      confirm-label="Confirm"
      confirm-on-enter=""
      on-confirm="_handleOpenConfirm"
      on-cancel="_handleDialogCancel"
    >
      <div class="header" slot="header">
        Add a new file or open an existing file
      </div>
      <div class="main" slot="main">
        <gr-autocomplete
          placeholder="Enter an existing or new full file path."
          query="[[_query]]"
          text="{{_path}}"
        ></gr-autocomplete>
        <div id="dragDropArea" on-drop="_handleDragAndDropUpload">
          <p>Drag and drop a file here</p>
          <p>or</p>
          <p>
            <iron-input>
              <input
                is="iron-input"
                id="fileUploadInput"
                type="file"
                on-change="_handleFileUploadChanged"
                hidden
              />
            </iron-input>
            <label for="fileUploadInput">
              <gr-button id="fileUploadBrowse">Browse</gr-button>
            </label>
          </p>
        </div>
      </div>
    </gr-dialog>
    <gr-dialog
      id="deleteDialog"
      class="invisible dialog"
      disabled$="[[!_isValidPath(_path)]]"
      confirm-label="Delete"
      confirm-on-enter=""
      on-confirm="_handleDeleteConfirm"
      on-cancel="_handleDialogCancel"
    >
      <div class="header" slot="header">Delete a file from the repo</div>
      <div class="main" slot="main">
        <gr-autocomplete
          placeholder="Enter an existing full file path."
          query="[[_query]]"
          text="{{_path}}"
        ></gr-autocomplete>
      </div>
    </gr-dialog>
    <gr-dialog
      id="renameDialog"
      class="invisible dialog"
      disabled$="[[!_computeRenameDisabled(_path, _newPath)]]"
      confirm-label="Rename"
      confirm-on-enter=""
      on-confirm="_handleRenameConfirm"
      on-cancel="_handleDialogCancel"
    >
      <div class="header" slot="header">Rename a file in the repo</div>
      <div class="main" slot="main">
        <gr-autocomplete
          placeholder="Enter an existing full file path."
          query="[[_query]]"
          text="{{_path}}"
        ></gr-autocomplete>
        <iron-input
          class="newPathIronInput"
          bind-value="{{_newPath}}"
          placeholder="Enter the new path."
        >
          <input
            class="newPathInput"
            is="iron-input"
            bind-value="{{_newPath}}"
            placeholder="Enter the new path."
          />
        </iron-input>
      </div>
    </gr-dialog>
    <gr-dialog
      id="restoreDialog"
      class="invisible dialog"
      confirm-label="Restore"
      confirm-on-enter=""
      on-confirm="_handleRestoreConfirm"
      on-cancel="_handleDialogCancel"
    >
      <div class="header" slot="header">Restore this file?</div>
      <div class="main" slot="main">
        <iron-input disabled="" bind-value="{{_path}}">
          <input is="iron-input" disabled="" bind-value="{{_path}}" />
        </iron-input>
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Rw extends(ra([vm],Zn(na(Ka)))){static get template(){return Iw}static get is(){return"gr-edit-controls"}static get properties(){return{change:Object,patchNum:String,hiddenActions:{type:Array,value:()=>[Ro.Actions.RESTORE.id]},_actions:{type:Array,value:()=>Object.values(Ro.Actions)},_path:{type:String,value:""},_newPath:{type:String,value:""},_query:{type:Function,value(){return this._queryFiles.bind(this)}}}}_handleTap(e){switch(e.preventDefault(),Ui(e).localTarget.id){case Ro.Actions.OPEN.id:return void this.openOpenDialog();case Ro.Actions.DELETE.id:return void this.openDeleteDialog();case Ro.Actions.RENAME.id:return void this.openRenameDialog();case Ro.Actions.RESTORE.id:return void this.openRestoreDialog()}}openOpenDialog(e){return e&&(this._path=e),this._showDialog(this.$.openDialog)}openDeleteDialog(e){return e&&(this._path=e),this._showDialog(this.$.deleteDialog)}openRenameDialog(e){return e&&(this._path=e),this._showDialog(this.$.renameDialog)}openRestoreDialog(e){return e&&(this._path=e),this._showDialog(this.$.restoreDialog)}_isValidPath(e){return!!e.length&&!e.endsWith("/")}_computeRenameDisabled(e,t){return this._isValidPath(e)&&this._isValidPath(t)}_getDialogFromEvent(e){return Ui(e).path.find(e=>!!e.classList&&e.classList.contains("dialog"))}_showDialog(e){return this._hideAllDialogs(),this.$.overlay.open().then(()=>{e.classList.toggle("invisible",!1);const t=e.querySelector("gr-autocomplete");t&&t.focus(),this.async(()=>{this.$.overlay.center()},1)})}_hideAllDialogs(){const e=Ui(this.root).querySelectorAll(".dialog");for(const t of e)this._closeDialog(t)}_closeDialog(e,t){if(e)return t&&(e.querySelectorAll("gr-autocomplete").forEach(e=>{e.text=""}),e.querySelectorAll("iron-input").forEach(e=>{e.bindValue=""})),e.classList.toggle("invisible",!0),this.$.overlay.close()}_handleDialogCancel(e){this._closeDialog(this._getDialogFromEvent(e))}_handleOpenConfirm(e){const t=um.getEditUrlForDiff(this.change,this._path,this.patchNum);um.navigateToRelativeUrl(t),this._closeDialog(this._getDialogFromEvent(e),!0)}_handleUploadConfirm(e,t){if(this.change&&e&&t)return this.$.restAPI.saveFileUploadChangeEdit(this.change._number,e,t).then(e=>{e.ok&&(this._closeDialog(this.$.openDialog,!0),um.navigateToChange(this.change))});this._closeDialog(this.$.openDialog,!0)}_handleDeleteConfirm(e){const t=this._getDialogFromEvent(e);this.$.restAPI.deleteFileInChangeEdit(this.change._number,this._path).then(e=>{e.ok&&(this._closeDialog(t,!0),um.navigateToChange(this.change))})}_handleRestoreConfirm(e){const t=this._getDialogFromEvent(e);this.$.restAPI.restoreFileInChangeEdit(this.change._number,this._path).then(e=>{e.ok&&(this._closeDialog(t,!0),um.navigateToChange(this.change))})}_handleRenameConfirm(e){const t=this._getDialogFromEvent(e);return this.$.restAPI.renameFileInChangeEdit(this.change._number,this._path,this._newPath).then(e=>{e.ok&&(this._closeDialog(t,!0),um.navigateToChange(this.change))})}_queryFiles(e){return this.$.restAPI.queryChangeFiles(this.change._number,this.patchNum,e).then(e=>e.map(e=>({name:e})))}_computeIsInvisible(e,t){return t.includes(e)?"invisible":""}_handleDragAndDropUpload(e){e.preventDefault(),e.stopPropagation(),this._fileUpload(e)}_handleFileUploadChanged(e){this._fileUpload(e)}_fileUpload(e){const t=e.target.files||e.dataTransfer.files;for(const e of t){if(!e)continue;let t=this._path;t||(t=e.name);const n=new FileReader;n.file=e,n.onload=e=>{if(!e)return;const n=e.target.result;this._handleUploadConfirm(t,n)},n.readAsDataURL(e)}}}customElements.define(Rw.is,Rw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Lw=za`
  <style include="shared-styles">
    .prefsButton {
      float: right;
    }
    .collapseToggleButton {
      text-decoration: none;
    }
    .patchInfoOldPatchSet.patchInfo-header {
      background-color: var(--emphasis-color);
    }
    .patchInfo-header {
      align-items: center;
      border-top: 1px solid var(--border-color);
      display: flex;
      padding: var(--spacing-s) var(--spacing-l);
    }
    .patchInfo-left {
      align-items: baseline;
      display: flex;
    }
    .patchInfoContent {
      align-items: center;
      display: flex;
      flex-wrap: wrap;
    }
    .patchInfo-header .container.latestPatchContainer {
      display: none;
    }
    .patchInfoOldPatchSet .container.latestPatchContainer {
      display: initial;
    }
    .latestPatchContainer a {
      text-decoration: none;
    }
    gr-editable-label.descriptionLabel {
      max-width: 100%;
    }
    .mobile {
      display: none;
    }
    .patchInfo-header .container {
      align-items: center;
      display: flex;
    }
    .downloadContainer,
    .uploadContainer,
    .includedInContainer {
      margin-right: 16px;
    }
    .includedInContainer.hide,
    .uploadContainer.hide {
      display: none;
    }
    .rightControls {
      align-self: flex-end;
      margin: auto 0 auto auto;
      align-items: center;
      display: flex;
      flex-wrap: wrap;
      font-weight: var(--font-weight-normal);
      justify-content: flex-end;
    }
    #collapseBtn,
    .expanded #expandBtn,
    .fileViewActions {
      display: none;
    }
    .expanded #expandBtn {
      display: none;
    }
    gr-linked-chip {
      --linked-chip-text-color: var(--primary-text-color);
    }
    .expanded #collapseBtn,
    .openFile .fileViewActions {
      align-items: center;
      display: flex;
    }
    .rightControls gr-button,
    gr-patch-range-select {
      margin: 0 -4px;
    }
    .fileViewActions gr-button {
      margin: 0;
      --gr-button: {
        padding: 2px 4px;
      }
    }
    .editMode .hideOnEdit {
      display: none;
    }
    .showOnEdit {
      display: none;
    }
    .editMode .showOnEdit {
      display: initial;
    }
    .editMode .showOnEdit.flexContainer {
      align-items: center;
      display: flex;
    }
    .label {
      font-weight: var(--font-weight-bold);
      margin-right: 24px;
    }
    gr-commit-info,
    gr-edit-controls {
      margin-right: -5px;
    }
    .fileViewActionsLabel {
      margin-right: var(--spacing-xs);
    }
    @media screen and (max-width: 50em) {
      .patchInfo-header .desktop {
        display: none;
      }
    }
  </style>
  <div
    class$="patchInfo-header [[_computeEditModeClass(editMode)]] [[_computePatchInfoClass(patchNum, allPatchSets)]]"
  >
    <div class="patchInfo-left">
      <div class="patchInfoContent">
        <gr-patch-range-select
          id="rangeSelect"
          change-comments="[[changeComments]]"
          change-num="[[changeNum]]"
          patch-num="[[patchNum]]"
          base-patch-num="[[basePatchNum]]"
          available-patches="[[allPatchSets]]"
          revisions="[[change.revisions]]"
          revision-info="[[revisionInfo]]"
          on-patch-range-change="_handlePatchChange"
        >
        </gr-patch-range-select>
        <span class="separator"></span>
        <gr-commit-info
          change="[[change]]"
          server-config="[[serverConfig]]"
          commit-info="[[commitInfo]]"
        ></gr-commit-info>
        <span class="container latestPatchContainer">
          <span class="separator"></span>
          <a href$="[[changeUrl]]">Go to latest patch set</a>
        </span>
        <span class="container descriptionContainer hideOnEdit">
          <span class="separator"></span>
          <template is="dom-if" if="[[_patchsetDescription]]">
            <gr-linked-chip
              id="descriptionChip"
              text="[[_patchsetDescription]]"
              removable="[[!_descriptionReadOnly]]"
              on-remove="_handleDescriptionRemoved"
            ></gr-linked-chip>
          </template>
          <template is="dom-if" if="[[!_patchsetDescription]]">
            <gr-editable-label
              id="descriptionLabel"
              uppercase=""
              class="descriptionLabel"
              label-text="Add patchset description"
              value="[[_patchsetDescription]]"
              placeholder="[[_computeDescriptionPlaceholder(_descriptionReadOnly)]]"
              read-only="[[_descriptionReadOnly]]"
              on-changed="_handleDescriptionChanged"
            ></gr-editable-label>
          </template>
        </span>
      </div>
    </div>
    <div class$="rightControls [[_computeExpandedClass(filesExpanded)]]">
      <span class="showOnEdit flexContainer">
        <gr-edit-controls
          id="editControls"
          patch-num="[[patchNum]]"
          change="[[change]]"
        ></gr-edit-controls>
        <span class="separator"></span>
      </span>
      <span class$="[[_computeUploadHelpContainerClass(change, account)]]">
        <gr-button link="" class="upload" on-click="_handleUploadTap"
          >Update Change</gr-button
        >
      </span>
      <span class="downloadContainer desktop">
        <gr-button
          link=""
          class="download"
          title="[[createTitle(Shortcut.OPEN_DOWNLOAD_DIALOG,
                ShortcutSection.ACTIONS)]]"
          on-click="_handleDownloadTap"
          >Download</gr-button
        >
      </span>
      <span class$="includedInContainer [[_hideIncludedIn(change)]] desktop">
        <gr-button link="" class="includedIn" on-click="_handleIncludedInTap"
          >Included In</gr-button
        >
      </span>
      <template
        is="dom-if"
        if="[[_fileListActionsVisible(shownFileCount, _maxFilesForBulkActions)]]"
      >
        <gr-button
          id="expandBtn"
          link=""
          title="[[createTitle(Shortcut.EXPAND_ALL_DIFF_CONTEXT,
                ShortcutSection.DIFFS)]]"
          on-click="_expandAllDiffs"
          >Expand All</gr-button
        >
        <gr-button id="collapseBtn" link="" on-click="_collapseAllDiffs"
          >Collapse All</gr-button
        >
      </template>
      <template
        is="dom-if"
        if="[[!_fileListActionsVisible(shownFileCount, _maxFilesForBulkActions)]]"
      >
        <div class="warning">
          Bulk actions disabled because there are too many files.
        </div>
      </template>
      <div class="fileViewActions">
        <span class="separator"></span>
        <span class="fileViewActionsLabel">Diff view:</span>
        <gr-diff-mode-selector
          id="modeSelect"
          mode="{{diffViewMode}}"
          save-on-change="[[!diffPrefsDisabled]]"
        ></gr-diff-mode-selector>
        <span
          id="diffPrefsContainer"
          class="hideOnEdit"
          hidden$="[[_computePrefsButtonHidden(diffPrefs, diffPrefsDisabled)]]"
          hidden=""
        >
          <gr-button
            link=""
            has-tooltip=""
            title="Diff preferences"
            class="prefsButton desktop"
            on-click="_handlePrefsTap"
            ><iron-icon icon="gr-icons:settings"></iron-icon
          ></gr-button>
        </span>
      </div>
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`;
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends(ra([vm,Wu],Zn(na(Ka)))){static get template(){return Lw}static get is(){return"gr-file-list-header"}static get properties(){return{account:Object,allPatchSets:Array,change:Object,changeNum:String,changeUrl:String,changeComments:Object,commitInfo:Object,editMode:Boolean,loggedIn:Boolean,serverConfig:Object,shownFileCount:Number,diffPrefs:Object,diffPrefsDisabled:Boolean,diffViewMode:{type:String,notify:!0},patchNum:String,basePatchNum:String,filesExpanded:String,_maxFilesForBulkActions:{type:Number,readOnly:!0,value:225},_patchsetDescription:{type:String,value:""},_descriptionReadOnly:{type:Boolean,computed:"_computeDescriptionReadOnly(loggedIn, change, account)"},revisionInfo:Object}}static get observers(){return["_computePatchSetDescription(change, patchNum)"]}setDiffViewMode(e){this.$.modeSelect.setMode(e)}_expandAllDiffs(){this._expanded=!0,this.dispatchEvent(new CustomEvent("expand-diffs",{composed:!0,bubbles:!0}))}_collapseAllDiffs(){this._expanded=!1,this.dispatchEvent(new CustomEvent("collapse-diffs",{composed:!0,bubbles:!0}))}_computeExpandedClass(e){const t=[];return e===Lo.FilesExpandedState.ALL&&t.push("expanded"),e!==Lo.FilesExpandedState.SOME&&e!==Lo.FilesExpandedState.ALL||t.push("openFile"),t.join(" ")}_computeDescriptionPlaceholder(e){return(e?"No":"Add")+" patchset description"}_computeDescriptionReadOnly(e,t,n){if(![e,t,n].some(e=>void 0===e))return!(e&&n._account_id===t.owner._account_id)}_computePatchSetDescription(e,t){if([e,t].some(e=>void 0===e))return;const n=this.getRevisionByPatchNum(e.revisions,t);this._patchsetDescription=n&&n.description?n.description.substring(0,500):""}_handleDescriptionRemoved(e){return this._updateDescription("",e)}_getPatchsetHash(e,t){for(const n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}_handleDescriptionChanged(e){const t=e.detail.trim();this._updateDescription(t,e)}_updateDescription(e,t){const n=Ui(t).rootTarget;n&&(n.disabled=!0);const i=this.getRevisionByPatchNum(this.change.revisions,this.patchNum),s=this._getPatchsetHash(this.change.revisions,i);return this.$.restAPI.setDescription(this.changeNum,this.patchNum,e).then(t=>{t.ok&&(n&&(n.disabled=!1),this.set(["change","revisions",s,"description"],e),this._patchsetDescription=e)}).catch(e=>{n&&(n.disabled=!1)})}_computePrefsButtonHidden(e,t){return t||!e}_fileListActionsVisible(e,t){return e<=t}_handlePatchChange(e){const{basePatchNum:t,patchNum:n}=e.detail;this.patchNumEquals(t,this.basePatchNum)&&this.patchNumEquals(n,this.patchNum)||um.navigateToChange(this.change,n,t)}_handlePrefsTap(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("open-diff-prefs",{composed:!0,bubbles:!0}))}_handleIncludedInTap(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("open-included-in-dialog",{composed:!0,bubbles:!0}))}_handleDownloadTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("open-download-dialog",{bubbles:!1}))}_computeEditModeClass(e){return e?"editMode":""}_computePatchInfoClass(e,t){const n=this.computeLatestPatchNum(t);return this.patchNumEquals(e,n)?"":"patchInfoOldPatchSet"}_hideIncludedIn(e){return e&&"MERGED"===e.status?"":"hide"}_handleUploadTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("open-upload-help-dialog",{bubbles:!1}))}_computeUploadHelpContainerClass(e,t){const n=e&&"MERGED"===e.status,i=e&&e.owner&&e.owner._account_id?e.owner._account_id:null,s=t&&t._account_id;return"uploadContainer desktop"+(!(i&&s&&i===s)||n?" hide":"")}}customElements.define(Dw.is,Dw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ow=za`
  <gr-cursor-manager
    id="cursorManager"
    scroll-behavior="[[_scrollBehavior]]"
    cursor-target-class="target-row"
    focus-on-move="[[_focusOnMove]]"
    target="{{diffRow}}"
    scroll-top-margin="[[scrollTopMargin]]"
  ></gr-cursor-manager>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Nw="left",Mw="right",$w="SIDE_BY_SIDE",Bw="UNIFIED_DIFF",Fw="keep-visible",Uw="never";class Hw extends(Zn(na(Ka))){static get template(){return Ow}static get is(){return"gr-diff-cursor"}static get properties(){return{side:{type:String,value:Mw},diffRow:{type:Object,notify:!0,observer:"_rowChanged"},diffs:{type:Array,value:()=>[]},initialLineNumber:{type:Number,value:null},_scrollBehavior:{type:String,value:Fw},_focusOnMove:{type:Boolean,value:!0},_listeningForScroll:Boolean,scrollTopMargin:{type:Number,value:0}}}static get observers(){return["_updateSideClass(side)","_diffsChanged(diffs.splices)"]}constructor(){super(),this._boundHandleWindowScroll=()=>this._handleWindowScroll(),this._boundHandleDiffRenderStart=()=>this._handleDiffRenderStart(),this._boundHandleDiffRenderContent=()=>this._handleDiffRenderContent(),this._boundHandleDiffLineSelected=e=>this._handleDiffLineSelected(e)}ready(){super.ready(),bi(this,()=>{this.dispatchEvent(new CustomEvent("ready",{composed:!0,bubbles:!1}))})}connectedCallback(){super.connectedCallback(),window.addEventListener("scroll",this._boundHandleWindowScroll)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("scroll",this._boundHandleWindowScroll)}moveLeft(){this.side=Nw,this._isTargetBlank()&&this.moveUp()}moveRight(){this.side=Mw,this._isTargetBlank()&&this.moveUp()}moveDown(){this._getViewMode()===$w?this.$.cursorManager.next(this._rowHasSide.bind(this)):this.$.cursorManager.next()}moveUp(){this._getViewMode()===$w?this.$.cursorManager.previous(this._rowHasSide.bind(this)):this.$.cursorManager.previous()}moveToVisibleArea(){this._getViewMode()===$w?this.$.cursorManager.moveToVisibleArea(this._rowHasSide.bind(this)):this.$.cursorManager.moveToVisibleArea()}moveToNextChunk(e){this.$.cursorManager.next(this._isFirstRowOfChunk.bind(this),e=>e.parentNode.scrollHeight,e),this._fixSide()}moveToPreviousChunk(){this.$.cursorManager.previous(this._isFirstRowOfChunk.bind(this)),this._fixSide()}moveToNextCommentThread(){this.$.cursorManager.next(this._rowHasThread.bind(this)),this._fixSide()}moveToPreviousCommentThread(){this.$.cursorManager.previous(this._rowHasThread.bind(this)),this._fixSide()}moveToLineNumber(e,t,n){const i=this._findRowByNumberAndFile(e,t,n);i&&(this.side=t,this.$.cursorManager.setCursor(i))}getTargetLineElement(){let e=".lineNum";if(this.diffRow)return this._getViewMode()===$w&&(e+=this.side===Nw?".left":".right"),this.diffRow.querySelector(e)}getTargetDiffElement(){if(!this.diffRow)return null;const e=Ui(this.diffRow).getOwnerRoot();return e&&e.host&&"GR-DIFF"===e.host.tagName?e.host:null}moveToFirstChunk(){this.$.cursorManager.moveToStart(),this.moveToNextChunk(!0)}moveToLastChunk(){this.$.cursorManager.moveToEnd(),this.moveToPreviousChunk()}reInitCursor(){if(!this.diffRow){const e=this.initialLineNumber?Fw:Uw;this._scrollBehavior=e,this.initialLineNumber?(this.moveToLineNumber(this.initialLineNumber,this.side),this.initialLineNumber=null):this.moveToFirstChunk()}this.reInit()}reInit(){this._scrollBehavior=Fw}_handleWindowScroll(){this._preventAutoScrollOnManualScroll&&(this._scrollBehavior=Uw,this._focusOnMove=!1,this._preventAutoScrollOnManualScroll=!1)}handleDiffUpdate(){this._updateStops(),this.reInitCursor()}_handleDiffRenderStart(){this._preventAutoScrollOnManualScroll=!0}_handleDiffRenderContent(){this._updateStops(),this._focusOnMove=!0,this._preventAutoScrollOnManualScroll=!1}_handleDiffLineSelected(e){this.moveToLineNumber(e.detail.number,e.detail.side,e.detail.path)}createCommentInPlace(){const e=this.diffs.find(e=>e.isRangeSelected());if(e)e.createRangeComment();else{const e=this.getTargetLineElement();e&&this.getTargetDiffElement().addDraftAtLine(e)}}getAddress(){if(!this.diffRow)return null;let e;if(this._getViewMode()===Bw?(e=this.diffRow.querySelector(".lineNum.right"),e||(e=this.diffRow.querySelector(".lineNum.left"))):e=this.diffRow.querySelector(".lineNum."+this.side),!e)return null;const t=e.getAttribute("data-value");return t&&"FILE"!==t?{leftSide:e.matches(".left"),number:parseInt(t,10)}:null}_getViewMode(){return this.diffRow?this.diffRow.classList.contains("side-by-side")?$w:Bw:null}_rowHasSide(e){const t=(this.side===Nw?".left":".right")+" + .content";return!!e.querySelector(t)}_isFirstRowOfChunk(e){const t=e.parentNode.classList;return t.contains("section")&&t.contains("delta")&&!e.previousSibling}_rowHasThread(e){return e.querySelector(".thread-group")}_fixSide(){this._getViewMode()===$w&&this._isTargetBlank()&&(this.side=this.side===Nw?Mw:Nw)}_isTargetBlank(){if(!this.diffRow)return!1;const e=this._getActionsForRow();return this.side===Nw&&!e.left||this.side===Mw&&!e.right}_rowChanged(e,t){t&&t.classList.remove("target-side-left","target-side-right"),this._updateSideClass()}_updateSideClass(){this.diffRow&&(this.toggleClass("target-side-left",this.side===Nw,this.diffRow),this.toggleClass("target-side-right",this.side===Mw,this.diffRow))}_isActionType(e){return"blank"!==e&&"contextControl"!==e}_getActionsForRow(){const e={left:!1,right:!1};return this.diffRow&&(e.left=this._isActionType(this.diffRow.getAttribute("left-type")),e.right=this._isActionType(this.diffRow.getAttribute("right-type"))),e}_getStops(){return this.diffs.reduce((e,t)=>e.concat(t.getCursorStops()),[])}_updateStops(){this.$.cursorManager.stops=this._getStops()}_diffsChanged(e){if(!e)return;let t,n;this._updateStops();for(let i=0;e.indexSplices&&i<e.indexSplices.length;i++){for(t=e.indexSplices[i],n=t.index;n<t.index+t.addedCount;n++)this.diffs[n].addEventListener("render-start",this._boundHandleDiffRenderStart),this.diffs[n].addEventListener("render-content",this._boundHandleDiffRenderContent),this.diffs[n].addEventListener("line-selected",this._boundHandleDiffLineSelected);for(n=0;n<t.removed&&t.removed.length;n++)t.removed[n].removeEventListener("render-start",this._boundHandleDiffRenderStart),t.removed[n].removeEventListener("render-content",this._boundHandleDiffRenderContent),t.removed[n].removeEventListener("line-selected",this._boundHandleDiffLineSelected)}}_findRowByNumberAndFile(e,t,n){let i,s;if(n){i=this.diffs.filter(e=>e.path===n)[0].getCursorStops()}else i=this.$.cursorManager.stops;for(let n=0;n<i.length;n++)if(s=".lineNum."+t+'[data-value="'+e+'"]',i[n].querySelector(s))return i[n]}}customElements.define(Hw.is,Hw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jw=za`
  <style include="shared-styles">
    :host {
      display: block;
      font-family: var(--font-family);
    }
    p,
    ul,
    code,
    blockquote,
    gr-linked-text.pre {
      margin: 0 0 var(--spacing-m) 0;
    }
    p,
    ul,
    code,
    blockquote {
      max-width: var(--gr-formatted-text-prose-max-width, none);
    }
    :host(.noTrailingMargin) p:last-child,
    :host(.noTrailingMargin) ul:last-child,
    :host(.noTrailingMargin) blockquote:last-child,
    :host(.noTrailingMargin) gr-linked-text.pre:last-child {
      margin: 0;
    }
    code,
    blockquote {
      border-left: 1px solid #aaa;
      padding: 0 var(--spacing-m);
    }
    code {
      display: block;
      white-space: pre-wrap;
      color: var(--deemphasized-text-color);
    }
    li {
      list-style-type: disc;
      margin-left: var(--spacing-xl);
    }
    gr-linked-text.pre {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-code);
      line-height: var(--line-height-code);
    }
  </style>
  <div id="container"></div>
`,Gw=/^(`{1,3})([^`]+?)\1$/;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw extends(Zn(na(Ka))){static get template(){return jw}static get is(){return"gr-formatted-text"}static get properties(){return{content:{type:String,observer:"_contentChanged"},config:Object,noTrailingMargin:{type:Boolean,value:!1}}}static get observers(){return["_contentOrConfigChanged(content, config)"]}ready(){super.ready(),this.noTrailingMargin&&this.classList.add("noTrailingMargin")}_contentChanged(e){this.config||this._contentOrConfigChanged(e)}_contentOrConfigChanged(e){const t=Ui(this.$.container);for(;t.firstChild;)t.removeChild(t.firstChild);for(const n of this._computeNodes(this._computeBlocks(e)))t.appendChild(n)}_computeBlocks(e){if(!e)return[];const t=[],n=e.replace(/[\s\n\r\t]+$/g,"").split("\n");for(let e=0;e<n.length;e++)if(n[e].length){if(this._isCodeMarkLine(n[e])){let i=e+1;for(;!this._isCodeMarkLine(n[i])&&i<n.length;)i++;if(this._isCodeMarkLine(n[i])){t.push({type:"code",text:n.slice(e+1,i).join("\n")}),e=i;continue}}if(this._isSingleLineCode(n[e])){const i=n[e].match(Gw)[2];t.push({type:"code",text:i})}else if(this._isList(n[e])){let i=e+1;for(;this._isList(n[i]);)i++;t.push(this._makeList(n.slice(e,i))),e=i-1}else if(this._isQuote(n[e])){let i=e+1;for(;this._isQuote(n[i]);)i++;const s=n.slice(e,i).map(e=>e.replace(/^[ ]?>[ ]?/,""));t.push({type:"quote",blocks:this._computeBlocks(s.join("\n"))}),e=i-1}else if(this._isPreFormat(n[e])){let i=e+1;for(;this._isPreFormat(n[i])||this._isRegularLine(n[i])&&n[i].length;)i++;t.push({type:"pre",text:n.slice(e,i).join("\n")}),e=i-1}else{let i=e+1;for(;this._isRegularLine(n[i]);)i++;t.push({type:"paragraph",text:n.slice(e,i).join("\n")}),e=i-1}}return t}_makeList(e){const t={type:"list",items:[]};let n;for(let i=0;i<e.length;i++)n=e[i],n=n.substring(1).trim(),t.items.push(n);return t}_isRegularLine(e){return void 0!==e&&!(this._isQuote(e)||this._isCodeMarkLine(e)||this._isSingleLineCode(e)||this._isList(e)||this._isPreFormat(e))}_isQuote(e){return e&&(e.startsWith("> ")||e.startsWith(" > "))}_isCodeMarkLine(e){return e&&"```"===e.trim()}_isSingleLineCode(e){return e&&Gw.test(e)}_isPreFormat(e){return e&&/^[ \t]/.test(e)}_isList(e){return e&&/^[-*] /.test(e)}_makeLinkedText(e,t){const n=document.createElement("gr-linked-text");return n.config=this.config,n.content=e,n.pre=!0,t&&n.classList.add("pre"),n}_computeNodes(e){return e.map(e=>{if("paragraph"===e.type){const t=document.createElement("p");return t.appendChild(this._makeLinkedText(e.text)),t}if("quote"===e.type){const t=document.createElement("blockquote");for(const n of this._computeNodes(e.blocks))t.appendChild(n);return t}if("code"===e.type){const t=document.createElement("code");return t.textContent=e.text,t}if("pre"===e.type)return this._makeLinkedText(e.text,!0);if("list"===e.type){const t=document.createElement("ul");for(const n of e.items){const e=document.createElement("li");e.appendChild(this._makeLinkedText(n)),t.appendChild(e)}return t}})}}customElements.define(Vw.is,Vw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zw=za`
  <style include="shared-styles">
    :host {
      display: flex;
      position: relative;
    }
    :host(.monospace) {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      font-weight: var(--font-weight-normal);
    }
    :host(.code) {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-code);
      line-height: var(--line-height-code);
      font-weight: var(--font-weight-normal);
    }
    #emojiSuggestions {
      font-family: var(--font-family);
    }
    gr-autocomplete {
      display: inline-block;
    }
    #textarea {
      background-color: var(--view-background-color);
      width: 100%;
    }
    #hiddenText #emojiSuggestions {
      visibility: visible;
      white-space: normal;
    }
    iron-autogrow-textarea {
      position: relative;
    }
    #textarea.noBorder {
      border: none;
    }
    #hiddenText {
      display: block;
      float: left;
      position: absolute;
      visibility: hidden;
      width: 100%;
      white-space: pre-wrap;
    }
  </style>
  <div id="hiddenText"></div>
  <!-- When the autocomplete is open, the span is moved at the end of
      hiddenText in order to correctly position the dropdown. After being moved,
      it is set as the positionTarget for the emojiSuggestions dropdown. -->
  <span id="caratSpan"></span>
  <gr-autocomplete-dropdown
    vertical-align="top"
    horizontal-align="left"
    dynamic-align=""
    id="emojiSuggestions"
    suggestions="[[_suggestions]]"
    index="[[_index]]"
    vertical-offset="[[_verticalOffset]]"
    on-dropdown-closed="_resetEmojiDropdown"
    on-item-selected="_handleEmojiSelect"
  >
  </gr-autocomplete-dropdown>
  <iron-autogrow-textarea
    id="textarea"
    autocomplete="[[autocomplete]]"
    placeholder="[[placeholder]]"
    disabled="[[disabled]]"
    rows="[[rows]]"
    max-rows="[[maxRows]]"
    value="{{text}}"
    on-bind-value-changed="_onValueChanged"
  ></iron-autogrow-textarea>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Ww=[{value:"😊",match:"smile :)"},{value:"👍",match:"thumbs up"},{value:"😄",match:"laugh :D"},{value:"🎉",match:"party"},{value:"😞",match:"sad :("},{value:"😂",match:"tears :')"},{value:"🙏",match:"pray"},{value:"😐",match:"neutral :|"},{value:"😮",match:"shock :O"},{value:"👎",match:"thumbs down"},{value:"😎",match:"cool |;)"},{value:"😕",match:"confused"},{value:"👌",match:"ok"},{value:"🔥",match:"fire"},{value:"👊",match:"fistbump"},{value:"💯",match:"100"},{value:"💔",match:"broken heart"},{value:"🍺",match:"beer"},{value:"✔",match:"check"},{value:"😋",match:"tongue"},{value:"😭",match:"crying :'("},{value:"🐨",match:"koala"},{value:"🤓",match:"glasses"},{value:"😆",match:"grin"},{value:"💩",match:"poop"},{value:"😢",match:"tear"},{value:"😒",match:"unamused"},{value:"😉",match:"wink ;)"},{value:"🍷",match:"wine"},{value:"😜",match:"winking tongue ;)"}];class qw extends(ra([Wu],Zn(na(Ka)))){static get template(){return zw}static get is(){return"gr-textarea"}static get properties(){return{autocomplete:Boolean,disabled:Boolean,rows:Number,maxRows:Number,placeholder:String,text:{type:String,notify:!0,observer:"_handleTextChanged"},hideBorder:{type:Boolean,value:!1},monospace:{type:Boolean,value:!1},code:{type:Boolean,value:!1},_colonIndex:Number,_currentSearchString:{type:String,observer:"_determineSuggestions"},_hideAutocomplete:{type:Boolean,value:!0},_index:Number,_suggestions:Array,_verticalOffset:{type:Number,value:20,readOnly:!0}}}get keyBindings(){return{esc:"_handleEscKey",tab:"_handleEnterByKey",enter:"_handleEnterByKey",up:"_handleUpKey",down:"_handleDownKey"}}ready(){super.ready(),this.monospace&&this.classList.add("monospace"),this.code&&this.classList.add("code"),this.hideBorder&&this.$.textarea.classList.add("noBorder")}closeDropdown(){return this.$.emojiSuggestions.close()}getNativeTextarea(){return this.$.textarea.textarea}putCursorAtEnd(){const e=this.getNativeTextarea();e.selectionStart=e.value.length,e.selectionEnd=e.selectionStart,this.async(()=>{e.focus()})}_handleEscKey(e){this._hideAutocomplete||(e.preventDefault(),e.stopPropagation(),this._resetEmojiDropdown())}_handleUpKey(e){this._hideAutocomplete||(e.preventDefault(),e.stopPropagation(),this.$.emojiSuggestions.cursorUp(),this.$.textarea.textarea.focus(),this.disableEnterKeyForSelectingEmoji=!1)}_handleDownKey(e){this._hideAutocomplete||(e.preventDefault(),e.stopPropagation(),this.$.emojiSuggestions.cursorDown(),this.$.textarea.textarea.focus(),this.disableEnterKeyForSelectingEmoji=!1)}_handleEnterByKey(e){this._hideAutocomplete||this.disableEnterKeyForSelectingEmoji||(e.preventDefault(),e.stopPropagation(),this._setEmoji(this.$.emojiSuggestions.getCurrentText()))}_handleEmojiSelect(e){this._setEmoji(e.detail.selected.dataset.value)}_setEmoji(e){const t=this._colonIndex;this.text=this._getText(e),this.$.textarea.selectionStart=t+1,this.$.textarea.selectionEnd=t+1,this.$.reporting.reportInteraction("select-emoji",{type:e}),this._resetEmojiDropdown()}_getText(e){return this.text.substr(0,this._colonIndex||0)+e+this.text.substr(this.$.textarea.selectionStart)}_updateCaratPosition(){this._hideAutocomplete=!1,this.$.hiddenText.textContent=this.$.textarea.value.substr(0,this.$.textarea.selectionStart);const e=this.$.caratSpan;this.$.hiddenText.appendChild(e),this.$.emojiSuggestions.positionTarget=e,this._openEmojiDropdown()}_getFontSize(){const e=getComputedStyle(this).fontSize||"12px";return parseInt(e.substr(0,e.length-2),10)}_getScrollTop(){return document.body.scrollTop}_onValueChanged(e){if(this.dispatchEvent(new CustomEvent("bind-value-changed",{detail:e,composed:!0,bubbles:!0})),!e.currentTarget.focused)return;const t=e.detail&&e.detail.value?e.detail.value[this.$.textarea.selectionStart-1]:"";":"!==t&&null==this._colonIndex||(":"===t&&(this.$.textarea.selectionStart<2||" "===e.detail.value[this.$.textarea.selectionStart-2])&&(this._colonIndex=this.$.textarea.selectionStart-1),this._currentSearchString=e.detail.value.substr(this._colonIndex+1,this.$.textarea.selectionStart-this._colonIndex-1),this.$.textarea.selectionStart===this._currentSearchString.length+this._colonIndex+1&&" "!==this._currentSearchString&&"\n"!==this._currentSearchString&&":"===e.detail.value[this._colonIndex]&&this._suggestions.length?this.$.emojiSuggestions.isHidden&&this._updateCaratPosition():this._resetEmojiDropdown(),this.$.textarea.textarea.focus())}_openEmojiDropdown(){this.$.emojiSuggestions.open(),this.$.reporting.reportInteraction("open-emoji-dropdown")}_formatSuggestions(e){const t=[];for(const n of e)n.dataValue=n.value,n.text=n.value+" "+n.match,t.push(n);this.set("_suggestions",t)}_determineSuggestions(e){if(e.length){const t=Ww.filter(t=>t.match.includes(e)).slice(0,10);this._formatSuggestions(t),this.disableEnterKeyForSelectingEmoji=!1}else this._formatSuggestions(Ww),this.disableEnterKeyForSelectingEmoji=!0}_resetEmojiDropdown(){Ii(),this._currentSearchString="",this._hideAutocomplete=!0,this.closeDropdown(),this._colonIndex=null,this.$.textarea.textarea.focus()}_handleTextChanged(e){this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:e}}))}}customElements.define(qw.is,qw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Kw=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    :host([disabled]) {
      opacity: 0.5;
      pointer-events: none;
    }
    .main {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    p {
      margin-bottom: var(--spacing-l);
    }
    label {
      cursor: pointer;
      display: block;
      width: 100%;
    }
    iron-autogrow-textarea {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      width: 73ch; /* Add a char to account for the border. */
    }
  </style>
  <gr-dialog
    confirm-label="Delete"
    on-confirm="_handleConfirmTap"
    on-cancel="_handleCancelTap"
  >
    <div class="header" slot="header">Delete Comment</div>
    <div class="main" slot="main">
      <p>
        This is an admin function. Please only use in exceptional circumstances.
      </p>
      <label for="messageInput">Enter comment delete reason</label>
      <iron-autogrow-textarea
        id="messageInput"
        class="message"
        autocomplete="on"
        placeholder="<Insert reasoning here>"
        bind-value="{{message}}"
      ></iron-autogrow-textarea>
    </div>
  </gr-dialog>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Yw extends(Zn(na(Ka))){static get template(){return Kw}static get is(){return"gr-confirm-delete-comment-dialog"}static get properties(){return{message:String}}resetFocus(){this.$.messageInput.textarea.focus()}_handleConfirmTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("confirm",{detail:{reason:this.message},composed:!0,bubbles:!1}))}_handleCancelTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1}))}}customElements.define(Yw.is,Yw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xw=za`
  <style include="shared-styles">
    :host {
      display: block;
      font-family: var(--font-family);
      padding: var(--spacing-m);
    }
    :host([disabled]) {
      pointer-events: none;
    }
    :host([disabled]) .actions,
    :host([disabled]) .robotActions,
    :host([disabled]) .date {
      opacity: 0.5;
    }
    :host([discarding]) {
      display: none;
    }
    .header {
      align-items: center;
      cursor: pointer;
      display: flex;
      margin: calc(0px - var(--spacing-m)) calc(0px - var(--spacing-m)) 0
        calc(0px - var(--spacing-m));
      padding: var(--spacing-m);
    }
    .headerLeft > span {
      font-weight: var(--font-weight-bold);
    }
    .container.collapsed .header {
      margin-bottom: calc(0 - var(--spacing-m));
    }
    .headerMiddle {
      color: var(--deemphasized-text-color);
      flex: 1;
      overflow: hidden;
    }
    .draftLabel,
    .draftTooltip {
      color: var(--deemphasized-text-color);
      display: none;
    }
    .date {
      justify-content: flex-end;
      margin-left: 5px;
      min-width: 4.5em;
      text-align: right;
      white-space: nowrap;
    }
    span.date {
      color: var(--deemphasized-text-color);
    }
    span.date:hover {
      text-decoration: underline;
    }
    .actions,
    .robotActions {
      display: flex;
      justify-content: flex-end;
      padding-top: 0;
    }
    .action {
      margin-left: var(--spacing-l);
    }
    .rightActions {
      display: flex;
      justify-content: flex-end;
    }
    .rightActions gr-button {
      --gr-button: {
        height: 20px;
        padding: 0 var(--spacing-s);
      }
    }
    .editMessage {
      display: none;
      margin: var(--spacing-m) 0;
      width: 100%;
    }
    .container:not(.draft) .actions .hideOnPublished {
      display: none;
    }
    .draft .reply,
    .draft .quote,
    .draft .ack,
    .draft .done {
      display: none;
    }
    .draft .draftLabel,
    .draft .draftTooltip {
      display: inline;
    }
    .draft:not(.editing) .save,
    .draft:not(.editing) .cancel {
      display: none;
    }
    .editing .message,
    .editing .reply,
    .editing .quote,
    .editing .ack,
    .editing .done,
    .editing .edit,
    .editing .discard,
    .editing .unresolved {
      display: none;
    }
    .editing .editMessage {
      display: block;
    }
    .show-hide {
      margin-left: var(--spacing-s);
    }
    .robotId {
      color: var(--deemphasized-text-color);
      margin-bottom: var(--spacing-m);
      margin-top: -0.4em;
    }
    .robotIcon {
      margin-right: var(--spacing-xs);
      /* because of the antenna of the robot, it looks off center even when it
         is centered. artificially adjust margin to account for this. */
      margin-top: -4px;
    }
    .runIdInformation {
      margin: var(--spacing-m) 0;
    }
    .robotRun {
      margin-left: var(--spacing-m);
    }
    .robotRunLink {
      margin-left: var(--spacing-m);
    }
    input.show-hide {
      display: none;
    }
    label.show-hide {
      cursor: pointer;
      display: block;
    }
    label.show-hide iron-icon {
      vertical-align: top;
    }
    #container .collapsedContent {
      display: none;
    }
    #container.collapsed {
      padding-bottom: 3px;
    }
    #container.collapsed .collapsedContent {
      display: block;
      overflow: hidden;
      padding-left: 5px;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    #container.collapsed .actions,
    #container.collapsed gr-formatted-text,
    #container.collapsed gr-textarea,
    #container.collapsed .respectfulReviewTip {
      display: none;
    }
    .resolve,
    .unresolved {
      align-items: center;
      display: flex;
      flex: 1;
      margin: 0;
    }
    .resolve label {
      color: var(--comment-text-color);
    }
    gr-dialog .main {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    .comment-extra-note {
      color: var(--deemphasized-text-color);
      border: 1px solid var(--deemphasized-text-color);
      border-radius: var(--border-radius);
      padding: 0px var(--spacing-s);
    }
    #deleteBtn {
      display: none;
      --gr-button: {
        color: var(--deemphasized-text-color);
        padding: 0;
      }
    }
    #deleteBtn.showDeleteButtons {
      display: block;
    }

    /** Disable select for the caret and actions */
    .actions,
    .show-hide {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .respectfulReviewTip {
      justify-content: space-between;
      display: flex;
      padding: var(--spacing-m);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-m);
    }
    .respectfulReviewTip div {
      display: flex;
    }
    .respectfulReviewTip div iron-icon {
      margin-right: var(--spacing-s);
    }
    .respectfulReviewTip a {
      white-space: nowrap;
      margin-right: var(--spacing-s);
      padding-left: var(--spacing-m);
      text-decoration: none;
    }
    .pointer {
      cursor: pointer;
    }
  </style>
  <div id="container" class="container">
    <div class="header" id="header" on-click="_handleToggleCollapsed">
      <div class="headerLeft">
        <span class="authorName">
          [[_computeAuthorName(comment, _serverConfig)]]
        </span>
        <span class="draftLabel">DRAFT</span>
        <gr-tooltip-content
          class="draftTooltip"
          has-tooltip=""
          title="This draft is only visible to you. To publish drafts, click the 'Reply' or 'Start review' button at the top of the change or press the 'A' key."
          max-width="20em"
          show-icon=""
        ></gr-tooltip-content>
      </div>
      <div class="headerMiddle">
        <span class="collapsedContent">[[comment.message]]</span>
      </div>
      <div
        hidden$="[[_computeHideRunDetails(comment, collapsed)]]"
        class="runIdMessage message"
      >
        <div class="runIdInformation">
          <a class="robotRunLink" href$="[[comment.url]]">
            <span class="robotRun link">Run Details</span>
          </a>
        </div>
      </div>
      <template is="dom-if" if="[[comment.extraNote]]">
        <span class="comment-extra-note">[[comment.extraNote]]</span>
      </template>
      <gr-button
        id="deleteBtn"
        link=""
        class$="action delete [[_computeDeleteButtonClass(_isAdmin, draft)]]"
        hidden$="[[isRobotComment]]"
        on-click="_handleCommentDelete"
      >
        <iron-icon id="icon" icon="gr-icons:delete"></iron-icon>
      </gr-button>
      <span class="date" on-click="_handleAnchorClick">
        <gr-date-formatter
          has-tooltip=""
          date-str="[[comment.updated]]"
        ></gr-date-formatter>
      </span>
      <div class="show-hide">
        <label class="show-hide">
          <input
            type="checkbox"
            class="show-hide"
            checked$="[[collapsed]]"
            on-change="_handleToggleCollapsed"
          />
          <iron-icon id="icon" icon="[[_computeShowHideIcon(collapsed)]]">
          </iron-icon>
        </label>
      </div>
    </div>
    <div class="body">
      <template is="dom-if" if="[[isRobotComment]]">
        <div class="robotId" hidden$="[[collapsed]]">
          [[comment.author.name]]
        </div>
      </template>
      <template is="dom-if" if="[[editing]]">
        <gr-textarea
          id="editTextarea"
          class="editMessage"
          autocomplete="on"
          code=""
          disabled="{{disabled}}"
          rows="4"
          text="{{_messageText}}"
        ></gr-textarea>
        <template
          is="dom-if"
          if="[[_computeVisibilityOfTip(_showRespectfulTip, _respectfulTipDismissed)]]"
        >
          <div class="respectfulReviewTip">
            <div>
              <gr-tooltip-content
                has-tooltip=""
                title="Tips for respectful code reviews."
              >
                <iron-icon
                  class="pointer"
                  icon="gr-icons:lightbulb-outline"
                ></iron-icon>
              </gr-tooltip-content>
              [[_respectfulReviewTip]]
            </div>
            <div>
              <a
                tabindex="-1"
                on-click="_onRespectfulReadMoreClick"
                href="https://testing.googleblog.com/2019/11/code-health-respectful-reviews-useful.html"
                target="_blank"
              >
                Read more
              </a>
              <a
                tabindex="-1"
                class="close pointer"
                on-click="_dismissRespectfulTip"
                >Not helpful</a
              >
            </div>
          </div>
        </template>
      </template>
      <!--The message class is needed to ensure selectability from
        gr-diff-selection.-->
      <gr-formatted-text
        class="message"
        content="[[comment.message]]"
        no-trailing-margin="[[!comment.__draft]]"
        config="[[projectConfig.commentlinks]]"
      ></gr-formatted-text>
      <div class="actions humanActions" hidden$="[[!_showHumanActions]]">
        <div class="action resolve hideOnPublished">
          <label>
            <input
              type="checkbox"
              id="resolvedCheckbox"
              checked="[[resolved]]"
              on-change="_handleToggleResolved"
            />
            Resolved
          </label>
        </div>
        <div class="rightActions">
          <gr-button
            link=""
            class="action cancel hideOnPublished"
            on-click="_handleCancel"
            >Cancel</gr-button
          >
          <gr-button
            link=""
            class="action discard hideOnPublished"
            on-click="_handleDiscard"
            >Discard</gr-button
          >
          <gr-button
            link=""
            class="action edit hideOnPublished"
            on-click="_handleEdit"
            >Edit</gr-button
          >
          <gr-button
            link=""
            disabled$="[[_computeSaveDisabled(_messageText, comment, resolved)]]"
            class="action save hideOnPublished"
            on-click="_handleSave"
            >Save</gr-button
          >
        </div>
      </div>
      <div class="robotActions" hidden$="[[!_showRobotActions]]">
        <template is="dom-if" if="[[isRobotComment]]">
          <gr-endpoint-decorator name="robot-comment-controls">
            <gr-endpoint-param name="comment" value="[[comment]]">
            </gr-endpoint-param>
          </gr-endpoint-decorator>
          <gr-button
            link=""
            secondary=""
            class="action show-fix"
            hidden$="[[_hasNoFix(comment)]]"
            on-click="_handleShowFix"
          >
            Show Fix
          </gr-button>
          <template is="dom-if" if="[[!_hasHumanReply]]">
            <gr-button
              link=""
              class="action fix"
              on-click="_handleFix"
              disabled="[[robotButtonDisabled]]"
            >
              Please Fix
            </gr-button>
          </template>
        </template>
      </div>
    </div>
  </div>
  <template is="dom-if" if="[[_enableOverlay]]">
    <gr-overlay id="confirmDeleteOverlay" with-backdrop="">
      <gr-confirm-delete-comment-dialog
        id="confirmDeleteComment"
        on-confirm="_handleConfirmDeleteComment"
        on-cancel="_handleCancelDeleteComment"
      >
      </gr-confirm-delete-comment-dialog>
    </gr-overlay>
    <gr-overlay id="confirmDiscardOverlay" with-backdrop="">
      <gr-dialog
        id="confirmDiscardDialog"
        confirm-label="Discard"
        confirm-on-enter=""
        on-confirm="_handleConfirmDiscard"
        on-cancel="_closeConfirmDiscardOverlay"
      >
        <div class="header" slot="header">
          Discard comment
        </div>
        <div class="main" slot="main">
          Are you sure you want to discard this draft comment?
        </div>
      </gr-dialog>
    </gr-overlay>
  </template>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-storage id="storage"></gr-storage>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,Jw="Saving",Zw=["Assume competence.","Provide rationale or context.","Consider how comments may be interpreted.","Avoid harsh language.","Make your comments specific and actionable.","When disagreeing, explain the advantage of your approach."];class Qw extends(ra([Wu],Zn(na(Ka)))){static get template(){return Xw}static get is(){return"gr-comment"}static get properties(){return{changeNum:String,comment:{type:Object,notify:!0,observer:"_commentChanged"},comments:{type:Array},isRobotComment:{type:Boolean,value:!1,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,reflectToAttribute:!0},draft:{type:Boolean,value:!1,observer:"_draftChanged"},editing:{type:Boolean,value:!1,observer:"_editingChanged"},discarding:{type:Boolean,value:!1,reflectToAttribute:!0},hasChildren:Boolean,patchNum:String,showActions:Boolean,_showHumanActions:Boolean,_showRobotActions:Boolean,collapsed:{type:Boolean,value:!0,observer:"_toggleCollapseClass"},projectConfig:Object,robotButtonDisabled:Boolean,_hasHumanReply:Boolean,_isAdmin:{type:Boolean,value:!1},_xhrPromise:Object,_messageText:{type:String,value:"",observer:"_messageTextChanged"},commentSide:String,side:String,resolved:Boolean,_numPendingDraftRequests:{type:Object,value:{number:0}},_enableOverlay:{type:Boolean,value:!1},_overlays:{type:Object,value:()=>({})},_showRespectfulTip:{type:Boolean,value:!1},_respectfulReviewTip:String,_respectfulTipDismissed:{type:Boolean,value:!1},_serverConfig:Object}}static get observers(){return["_commentMessageChanged(comment.message)","_loadLocalDraft(changeNum, patchNum, comment)","_isRobotComment(comment)","_calculateActionstoShow(showActions, isRobotComment)","_computeHasHumanReply(comment, comments.*)","_onEditingChange(editing)"]}get keyBindings(){return{"ctrl+enter meta+enter ctrl+s meta+s":"_handleSaveKey",esc:"_handleEsc"}}attached(){super.attached(),this.editing?this.collapsed=!1:this.comment&&(this.collapsed=this.comment.collapsed),this._getIsAdmin().then(e=>{this._isAdmin=e}),this.$.restAPI.getConfig().then(e=>{this._serverConfig=e})}detached(){super.detached(),this.cancelDebouncer("fire-update"),this.textarea&&this.textarea.closeDropdown()}_onEditingChange(e){if(this.dispatchEvent(new CustomEvent("comment-editing-changed",{detail:!!e,bubbles:!0,composed:!0})),!e)return;if(!this.$.storage.getRespectfulTipVisibility()){if(this.getRandomNum(0,3)>=1)return;this._showRespectfulTip=!0;const e=this.getRandomNum(0,Zw.length);this._respectfulReviewTip=Zw[e],this.$.reporting.reportInteraction("respectful-tip-appeared",{tip:this._respectfulReviewTip}),this.$.storage.setRespectfulTipVisibility()}}getRandomNum(e,t){return Math.floor(Math.random()*(t-e)+e)}_computeVisibilityOfTip(e,t){return e&&!t}_dismissRespectfulTip(){this._respectfulTipDismissed=!0,this.$.reporting.reportInteraction("respectful-tip-dismissed",{tip:this._respectfulReviewTip}),this.$.storage.setRespectfulTipVisibility(14)}_onRespectfulReadMoreClick(){this.$.reporting.reportInteraction("respectful-read-more-clicked")}get textarea(){return this.shadowRoot.querySelector("#editTextarea")}get confirmDeleteOverlay(){return this._overlays.confirmDelete||(this._enableOverlay=!0,Ii(),this._overlays.confirmDelete=this.shadowRoot.querySelector("#confirmDeleteOverlay")),this._overlays.confirmDelete}get confirmDiscardOverlay(){return this._overlays.confirmDiscard||(this._enableOverlay=!0,Ii(),this._overlays.confirmDiscard=this.shadowRoot.querySelector("#confirmDiscardOverlay")),this._overlays.confirmDiscard}_computeShowHideIcon(e){return e?"gr-icons:expand-more":"gr-icons:expand-less"}_calculateActionstoShow(e,t){[e,t].some(e=>void 0===e)||(this._showHumanActions=e&&!t,this._showRobotActions=e&&t)}_isRobotComment(e){this.isRobotComment=!!e.robot_id}isOnParent(){return"PARENT"===this.side}_getIsAdmin(){return this.$.restAPI.getIsAdmin()}save(e){let t=e;return t||(t=this.comment),this.set("comment.message",this._messageText),this.editing=!1,this.disabled=!0,this._messageText?(this._xhrPromise=this._saveDraft(t).then(e=>(this.disabled=!1,e.ok?(this._eraseDraftComment(),this.$.restAPI.getResponseObject(e).then(e=>{const t=e;return t.__draft=!0,this.comment.__draftID&&(t.__draftID=this.comment.__draftID),t.__commentSide=this.commentSide,this.comment=t,this._fireSave(),e})):e)).catch(e=>{throw this.disabled=!1,e}),this._xhrPromise):this._discardDraft()}_eraseDraftComment(){this.cancelDebouncer("store"),this.$.storage.eraseDraftComment({changeNum:this.changeNum,patchNum:this._getPatchNum(),path:this.comment.path,line:this.comment.line,range:this.comment.range})}_commentChanged(e){this.editing=!!e.__editing,this.resolved=!e.unresolved,this.editing&&this._fireUpdate()}_computeHasHumanReply(){this.comment&&this.comments&&(this._hasHumanReply=this.comments.some(e=>e.in_reply_to&&e.in_reply_to===this.comment.id&&!e.robot_id))}_getEventPayload(e){return Object.assign({},e,{comment:this.comment,patchNum:this.patchNum})}_fireSave(){this.dispatchEvent(new CustomEvent("comment-save",{detail:this._getEventPayload(),composed:!0,bubbles:!0}))}_fireUpdate(){this.debounce("fire-update",()=>{this.dispatchEvent(new CustomEvent("comment-update",{detail:this._getEventPayload(),composed:!0,bubbles:!0}))})}_draftChanged(e){this.$.container.classList.toggle("draft",e)}_editingChanged(e,t){void 0!==t&&(this.$.container.classList.toggle("editing",e),this.comment&&this.comment.id&&(this.shadowRoot.querySelector(".cancel").hidden=!e),this.comment&&(this.comment.__editing=this.editing),e!=!!t&&this._fireUpdate(),e&&this.async(()=>{Ii(),this.textarea&&this.textarea.putCursorAtEnd()},1))}_computeDeleteButtonClass(e,t){return e&&!t?"showDeleteButtons":""}_computeSaveDisabled(e,t,n){return!(!t||t.unresolved===n&&e)&&(!e||""===e.trim())}_handleSaveKey(e){this._computeSaveDisabled(this._messageText,this.comment,this.resolved)||(e.preventDefault(),this._handleSave(e))}_handleEsc(e){this._messageText.length||(e.preventDefault(),this._handleCancel(e))}_handleToggleCollapsed(){this.collapsed=!this.collapsed}_toggleCollapseClass(e){e?this.$.container.classList.add("collapsed"):this.$.container.classList.remove("collapsed")}_commentMessageChanged(e){this._messageText=e||""}_messageTextChanged(e,t){!this.comment||this.comment&&this.comment.id||this.debounce("store",()=>{const e=this._messageText,n={changeNum:this.changeNum,patchNum:this._getPatchNum(),path:this.comment.path,line:this.comment.line,range:this.comment.range};this._messageText&&this._messageText.length||!t?this.$.storage.setDraftComment(n,e):this.$.storage.eraseDraftComment(n)},400)}_handleAnchorClick(e){e.preventDefault(),this.comment.line&&this.dispatchEvent(new CustomEvent("comment-anchor-tap",{bubbles:!0,composed:!0,detail:{number:this.comment.line||"FILE",side:this.side}}))}_handleEdit(e){e.preventDefault(),this._messageText=this.comment.message,this.editing=!0,this.$.reporting.recordDraftInteraction()}_handleSave(e){if(e.preventDefault(),this.disabled)return;const t=this.comment.id?"UpdateDraftComment":"CreateDraftComment",n=this.$.reporting.getTimer(t);return this.set("comment.__editing",!1),this.save().then(()=>{n.end()})}_handleCancel(e){e.preventDefault(),this.comment.message&&0!==this.comment.message.trim().length&&this.comment.id?(this._messageText=this.comment.message,this.editing=!1):this._fireDiscard()}_fireDiscard(){this.cancelDebouncer("fire-update"),this.dispatchEvent(new CustomEvent("comment-discard",{detail:this._getEventPayload(),composed:!0,bubbles:!0}))}_handleFix(){this.dispatchEvent(new CustomEvent("create-fix-comment",{bubbles:!0,composed:!0,detail:this._getEventPayload()}))}_handleShowFix(){this.dispatchEvent(new CustomEvent("open-fix-preview",{bubbles:!0,composed:!0,detail:this._getEventPayload()}))}_hasNoFix(e){return!e||!e.fix_suggestions}_handleDiscard(e){e.preventDefault(),this.$.reporting.recordDraftInteraction(),this._messageText?this._openOverlay(this.confirmDiscardOverlay).then(()=>{this.confirmDiscardOverlay.querySelector("#confirmDiscardDialog").resetFocus()}):this._discardDraft()}_handleConfirmDiscard(e){e.preventDefault();const t=this.$.reporting.getTimer("DiscardDraftComment");return this._closeConfirmDiscardOverlay(),this._discardDraft().then(()=>{t.end()})}_discardDraft(){if(!this.comment.__draft)throw Error("Cannot discard a non-draft comment.");return this.discarding=!0,this.editing=!1,this.disabled=!0,this._eraseDraftComment(),this.comment.id?(this._xhrPromise=this._deleteDraft(this.comment).then(e=>{if(this.disabled=!1,!e.ok)return this.discarding=!1,e;this._fireDiscard()}).catch(e=>{throw this.disabled=!1,e}),this._xhrPromise):(this.disabled=!1,void this._fireDiscard())}_closeConfirmDiscardOverlay(){this._closeOverlay(this.confirmDiscardOverlay)}_getSavingMessage(e){return 0===e?"All changes saved":[Jw,e,1===e?"draft...":"drafts..."].join(" ")}_showStartRequest(){const e=++this._numPendingDraftRequests.number;this._updateRequestToast(e)}_showEndRequest(){const e=--this._numPendingDraftRequests.number;this._updateRequestToast(e)}_handleFailedDraftRequest(){this._numPendingDraftRequests.number--,this.cancelDebouncer("draft-toast")}_updateRequestToast(e){const t=this._getSavingMessage(e);this.debounce("draft-toast",()=>{document.body.dispatchEvent(new CustomEvent("show-alert",{detail:{message:t},bubbles:!0,composed:!0}))},200)}_saveDraft(e){return this._showStartRequest(),this.$.restAPI.saveDiffDraft(this.changeNum,this.patchNum,e).then(e=>(e.ok?this._showEndRequest():this._handleFailedDraftRequest(),e))}_deleteDraft(e){return this._showStartRequest(),this.$.restAPI.deleteDiffDraft(this.changeNum,this.patchNum,e).then(e=>(e.ok?this._showEndRequest():this._handleFailedDraftRequest(),e))}_getPatchNum(){return this.isOnParent()?"PARENT":this.patchNum}_loadLocalDraft(e,t,n){if([e,t,n].some(e=>void 0===e))return;if(!n||n.id||n.message||n.__otherEditing)return void delete n.__otherEditing;const i=this.$.storage.getDraftComment({changeNum:e,patchNum:this._getPatchNum(),path:n.path,line:n.line,range:n.range});i&&this.set("comment.message",i.message)}_handleToggleResolved(){this.$.reporting.recordDraftInteraction(),this.resolved=!this.resolved;const e=this._getEventPayload();e.comment.unresolved=!this.$.resolvedCheckbox.checked,this.dispatchEvent(new CustomEvent("comment-update",{detail:e,composed:!0,bubbles:!0})),this.editing||this.save(e.comment)}_handleCommentDelete(){this._openOverlay(this.confirmDeleteOverlay)}_handleCancelDeleteComment(){this._closeOverlay(this.confirmDeleteOverlay)}_openOverlay(e){return Ui($u()).appendChild(e),e.open()}_computeAuthorName(e,t){return[e,t].includes(void 0)?"":e.robot_id?e.robot_id:e.author?uo.getDisplayName(t,e.author):""}_computeHideRunDetails(e,t){return!e||!(e.robot_id&&e.url&&!t)}_closeOverlay(e){Ui($u()).removeChild(e),e.close()}_handleConfirmDeleteComment(){const e=this.confirmDeleteOverlay.querySelector("#confirmDeleteComment");this.$.restAPI.deleteComment(this.changeNum,this.patchNum,this.comment.id,e.message).then(e=>{this._handleCancelDeleteComment(),this.comment=e})}}customElements.define(Qw.is,Qw);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const eC=za`
  <style include="shared-styles">
    :host {
      font-family: var(--font-family);
      font-size: var(--font-size-normal);
      font-weight: var(--font-weight-normal);
      line-height: var(--line-height-normal);
    }
    gr-button {
      margin-left: var(--spacing-m);
    }
    gr-comment:not(:last-of-type) {
      border-bottom: 1px solid var(--comment-separator-color);
    }
    #actions {
      margin-left: auto;
      padding: var(--spacing-m);
    }
    #container {
      background-color: var(--comment-background-color);
      color: var(--comment-text-color);
      display: block;
      margin: 0 var(--spacing-s) var(--spacing-s);
      white-space: normal;
      box-shadow: var(--elevation-level-2);
      border-radius: var(--border-radius);
      /** This is required for firefox to continue the inheritance */
      -webkit-user-select: inherit;
      -moz-user-select: inherit;
      -ms-user-select: inherit;
      user-select: inherit;
    }
    #container.unresolved {
      background-color: var(--unresolved-comment-background-color);
    }
    #container.robotComment {
      background-color: var(--robot-comment-background-color);
    }
    #commentInfoContainer {
      border-top: 1px dotted var(--border-color);
      display: flex;
    }
    #unresolvedLabel {
      font-family: var(--font-family);
      margin: auto 0;
      padding: var(--spacing-m);
    }
    .pathInfo {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      padding: 0 var(--spacing-s) var(--spacing-s);
    }
    .descriptionText {
      margin-left: var(--spacing-m);
      font-style: italic;
    }
  </style>
  <template is="dom-if" if="[[showFilePath]]">
    <div class="pathInfo">
      <a
        href$="[[_getDiffUrlForComment(projectName, changeNum, path, patchNum)]]"
        >[[_computeDisplayPath(path)]]</a
      >
      <span class="descriptionText">Patchset [[patchNum]]</span>
    </div>
  </template>
  <div
    id="container"
    class$="[[_computeHostClass(unresolved, isRobotComment)]]"
  >
    <template
      id="commentList"
      is="dom-repeat"
      items="[[_orderedComments]]"
      as="comment"
    >
      <gr-comment
        comment="{{comment}}"
        comments="{{comments}}"
        robot-button-disabled="[[_shouldDisableAction(_showActions, _lastComment)]]"
        change-num="[[changeNum]]"
        patch-num="[[patchNum]]"
        draft="[[_isDraft(comment)]]"
        show-actions="[[_showActions]]"
        comment-side="[[comment.__commentSide]]"
        side="[[comment.side]]"
        project-config="[[_projectConfig]]"
        on-create-fix-comment="_handleCommentFix"
        on-comment-discard="_handleCommentDiscard"
        on-comment-save="_handleCommentSavedOrDiscarded"
      ></gr-comment>
    </template>
    <div
      id="commentInfoContainer"
      hidden$="[[_hideActions(_showActions, _lastComment)]]"
    >
      <span id="unresolvedLabel" hidden$="[[!unresolved]]">Unresolved</span>
      <div id="actions">
        <gr-button
          id="replyBtn"
          link=""
          class="action reply"
          on-click="_handleCommentReply"
          >Reply</gr-button
        >
        <gr-button
          id="quoteBtn"
          link=""
          class="action quote"
          on-click="_handleCommentQuote"
          >Quote</gr-button
        >
        <template is="dom-if" if="[[unresolved]]">
          <gr-button
            id="ackBtn"
            link=""
            class="action ack"
            on-click="_handleCommentAck"
            >Ack</gr-button
          >
          <gr-button
            id="doneBtn"
            link=""
            class="action done"
            on-click="_handleCommentDone"
            >Done</gr-button
          >
        </template>
      </div>
    </div>
  </div>
  <gr-reporting id="reporting"></gr-reporting>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-storage id="storage"></gr-storage>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,tC=/\n/g;class nC extends(ra([Wu,Vg],Zn(na(Ka)))){static get template(){return eC}static get is(){return"gr-comment-thread"}static get properties(){return{changeNum:String,comments:{type:Array,value:()=>[]},range:{type:Object,reflectToAttribute:!0},keyEventTarget:{type:Object,value:()=>document.body},commentSide:{type:String,reflectToAttribute:!0},patchNum:String,path:String,projectName:{type:String,observer:"_projectNameChanged"},hasDraft:{type:Boolean,notify:!0,reflectToAttribute:!0},isOnParent:{type:Boolean,value:!1},parentIndex:{type:Number,value:null},rootId:{type:String,notify:!0,computed:"_computeRootId(comments.*)"},showFilePath:{type:Boolean,value:!1},lineNum:{type:Number,reflectToAttribute:!0},unresolved:{type:Boolean,notify:!0,reflectToAttribute:!0},_showActions:Boolean,_lastComment:Object,_orderedComments:Array,_projectConfig:Object,isRobotComment:{type:Boolean,value:!1,reflectToAttribute:!0}}}static get observers(){return["_commentsChanged(comments.*)"]}get keyBindings(){return{"e shift+e":"_handleEKey"}}created(){super.created(),this.addEventListener("comment-update",e=>this._handleCommentUpdate(e))}attached(){super.attached(),this._getLoggedIn().then(e=>{this._showActions=e}),this._setInitialExpandedState()}addOrEditDraft(e,t){const n=this.comments[this.comments.length-1]||{};if(n.__draft){const e=this._commentElWithDraftID(n.id||n.__draftID);e.editing=!0,e.collapsed=!1}else{const i=t||(n?n.range:void 0),s=n?n.unresolved:void 0;this.addDraft(e,i,s)}}addDraft(e,t,n){const i=this._newDraft(e,t);i.__editing=!0,i.unresolved=!1!==n||n,this.push("comments",i)}fireRemoveSelf(){this.dispatchEvent(new CustomEvent("thread-discard",{detail:{rootId:this.rootId},bubbles:!1}))}_getDiffUrlForComment(e,t,n,i){return um.getUrlForDiffById(t,e,n,i,null,this.lineNum)}_computeDisplayPath(e){const t=this.lineNum?`#${this.lineNum}`:"";return this.computeDisplayPath(e)+t}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_commentsChanged(){this._orderedComments=this._sortedComments(this.comments),this.updateThreadProperties()}updateThreadProperties(){this._orderedComments.length&&(this._lastComment=this._getLastComment(),this.unresolved=this._lastComment.unresolved,this.hasDraft=this._lastComment.__draft,this.isRobotComment=!!this._lastComment.robot_id)}_shouldDisableAction(e,t){return!e||!t||!!t.__draft}_hideActions(e,t){return this._shouldDisableAction(e,t)||!!t.robot_id}_getLastComment(){return this._orderedComments[this._orderedComments.length-1]||{}}_handleEKey(e){if(!this.shouldSuppressKeyboardShortcut(e))if(e.detail.keyboardEvent.shiftKey)this._expandCollapseComments(!0);else{if(this.modifierPressed(e))return;this._expandCollapseComments(!1)}}_expandCollapseComments(e){const t=Ui(this.root).querySelectorAll("gr-comment");for(const n of t)n.collapsed=e}_setInitialExpandedState(){if(this._orderedComments)for(let e=0;e<this._orderedComments.length;e++){const t=this._orderedComments[e],n=!!t.robot_id,i=!this.unresolved||this._orderedComments.length-e-1>=5;void 0===t.collapsed&&(t.collapsed=!n&&i)}}_sortedComments(e){return e.slice().sort((e,t)=>{const n=(e.__date||sr.parseDate(e.updated))-(t.__date||sr.parseDate(t.updated));return t.__draft&&!e.__draft?-1:e.__draft&&!t.__draft?1:0!==n||e.id&&e.id.localeCompare?n||e.id.localeCompare(t.id):0})}_createReplyComment(e,t,n,i){this.$.reporting.recordDraftInteraction();const s=this._newReply(this._orderedComments[this._orderedComments.length-1].id,e.line,t,i,e.range);for(let e=0;e<this.comments.length;e++)if(this.comments[e].__editing){s.__otherEditing=!0;break}n&&(s.__editing=!0),this.push("comments",s),n||this.async(()=>{this._commentElWithDraftID(s.__draftID).save()},1)}_isDraft(e){return!!e.__draft}_processCommentReply(e){const t=this._lastComment;let n;if(e){n="> "+t.message.replace(tC,"\n> ")+"\n\n"}this._createReplyComment(t,n,!0,t.unresolved)}_handleCommentReply(e){this._processCommentReply()}_handleCommentQuote(e){this._processCommentReply(!0)}_handleCommentAck(e){const t=this._lastComment;this._createReplyComment(t,"Ack",!1,!1)}_handleCommentDone(e){const t=this._lastComment;this._createReplyComment(t,"Done",!1,!1)}_handleCommentFix(e){const t=e.detail.comment,n="> "+t.message.replace(tC,"\n> ")+"\n\n"+"Please fix.";this._createReplyComment(t,n,!1,!0)}_commentElWithDraftID(e){const t=Ui(this.root).querySelectorAll("gr-comment");for(const n of t)if(n.comment.id===e||n.comment.__draftID===e)return n;return null}_newReply(e,t,n,i,s){const a=this._newDraft(t);return a.in_reply_to=e,a.range=s,null!=n&&(a.message=n),void 0!==i&&(a.unresolved=i),a}_newDraft(e,t){const n={__draft:!0,__draftID:Math.random().toString(36),__date:new Date,path:this.path,patchNum:this.patchNum,side:this._getSide(this.isOnParent),__commentSide:this.commentSide};return e&&(n.line=e),t&&(n.range=t),this.parentIndex&&(n.parent=this.parentIndex),n}_getSide(e){return e?"PARENT":"REVISION"}_computeRootId(e){if(!e.base.length)return this.rootId;const t=e.base[0];return t.id||t.__draftID}_handleCommentDiscard(e){const t=Ui(e).rootTarget,n=t.comment,i=this._indexOf(n,this.comments);if(-1==i)throw Error("Cannot find comment "+JSON.stringify(t.comment));this.splice("comments",i,1),0===this.comments.length&&this.fireRemoveSelf(),this._handleCommentSavedOrDiscarded(e);for(const e of this.comments)if(e.__editing){const t={changeNum:this.changeNum,patchNum:this.patchNum,path:e.path,line:e.line};return this.$.storage.setDraftComment(t,e.message)}}_handleCommentSavedOrDiscarded(e){this.dispatchEvent(new CustomEvent("thread-changed",{detail:{rootId:this.rootId,path:this.path},bubbles:!1}))}_handleCommentUpdate(e){const t=e.detail.comment,n=this._indexOf(t,this.comments);-1!==n?(this.set(["comments",n],t),this.updateThreadProperties()):console.warn("Comment update for another comment thread.")}_indexOf(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(null!=i.__draftID&&i.__draftID==e.__draftID||null!=i.id&&i.id==e.id)return n}return-1}_computeHostClass(e){return this.isRobotComment?"robotComment":e?"unresolved":""}_projectNameChanged(e){e&&this.$.restAPI.getProjectConfig(e).then(e=>{this._projectConfig=e})}}customElements.define(nC.is,nC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const iC=za``
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,sC=new Map([[wm.COVERED,"Covered by tests."],[wm.NOT_COVERED,"Not covered by tests."],[wm.PARTIALLY_COVERED,"Partially covered by tests."],[wm.NOT_INSTRUMENTED,"Not instrumented by any tests."]]);class aC extends(Zn(na(Ka))){static get template(){return iC}static get is(){return"gr-coverage-layer"}static get properties(){return{coverageRanges:Array,side:String,_lineNumber:{type:Number,value:0},_index:{type:Number,value:0}}}annotate(e,t,n){if(!t||!t.classList.contains(this.side))return;const i=parseInt(t.getAttribute("data-value"),10);if(i&&!(i<1))for(i<this._lineNumber&&(this._index=0),this._lineNumber=i;this._index<this.coverageRanges.length;){const e=this.coverageRanges[this._index];if(!(this._lineNumber>e.code_range.end_line)){if(this._lineNumber<e.code_range.start_line)return;return t.classList.add(e.type),void(t.title=sC.get(e.type))}this._index++}}}customElements.define(aC.is,aC);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oC="left",rC="right",lC="edit_b",cC="edit_a";class dC extends(Zn(na(Ka))){static get is(){return"gr-diff-processor"}static get properties(){return{context:Number,groups:{type:Array,notify:!0},keyLocations:{type:Object,value:()=>({left:{},right:{}})},_asyncThreshold:{type:Number,value:64},_nextStepHandle:Number,_processPromise:{type:Object,value:null},_isScrolling:Boolean}}attached(){super.attached(),this.listen(window,"scroll","_handleWindowScroll")}detached(){super.detached(),this.cancel(),this.unlisten(window,"scroll","_handleWindowScroll")}_handleWindowScroll(){this._isScrolling=!0,this.debounce("resetIsScrolling",()=>{this._isScrolling=!1},50)}process(e,t){return this.cancel(),this.groups=[],this.push("groups",this._makeFileComments()),t?Promise.resolve():(this._processPromise=sr.makeCancelable(new Promise(t=>{const n={lineNums:{left:0,right:0},chunkIndex:0};e=this._splitLargeChunks(e),e=this._splitCommonChunksWithKeyLocations(e);let i=0;const s=()=>{if(this._isScrolling)return void(this._nextStepHandle=this.async(s,100));if(n.chunkIndex>=e.length)return t(),void(this._nextStepHandle=null);const a=this._processNext(n,e);for(const e of a.groups)this.push("groups",e),i+=e.lines.length;n.lineNums.left+=a.lineDelta.left,n.lineNums.right+=a.lineDelta.right,n.chunkIndex=a.newChunkIndex,i>=this._asyncThreshold?(i=0,this._nextStepHandle=this.async(s,1)):s.call(this)};s.call(this)})),this._processPromise.finally(()=>{this._processPromise=null}))}cancel(){null!=this._nextStepHandle&&(this.cancelAsync(this._nextStepHandle),this._nextStepHandle=null),this._processPromise&&this._processPromise.cancel()}_processNext(e,t){const n=this._firstUncollapsibleChunkIndex(t,e.chunkIndex);if(n===e.chunkIndex){const n=t[e.chunkIndex];return{lineDelta:{left:this._linesLeft(n).length,right:this._linesRight(n).length},groups:[this._chunkToGroup(n,e.lineNums.left+1,e.lineNums.right+1)],newChunkIndex:e.chunkIndex+1}}return this._processCollapsibleChunks(e,t,n)}_linesLeft(e){return e.ab||e.a||[]}_linesRight(e){return e.ab||e.b||[]}_firstUncollapsibleChunkIndex(e,t){let n=t;for(;n<e.length&&this._isCollapsibleChunk(e[n]);)n++;return n}_isCollapsibleChunk(e){return(e.ab||e.common)&&!e.keyLocation}_processCollapsibleChunks(e,t,n){const i=t.slice(e.chunkIndex,n),s=i.reduce((e,t)=>e+this._commonChunkLength(t),0);let a=this._chunksToGroups(i,e.lineNums.left+1,e.lineNums.right+1);if(-1!==this.context){const i=0===e.chunkIndex?0:this.context,o=s-(n===t.length?0:this.context);a=vo.hideInContextControl(a,i,o)}return{lineDelta:{left:s,right:s},groups:a,newChunkIndex:n}}_commonChunkLength(e){return console.assert(e.ab||e.common),console.assert(!e.a||e.b&&e.a.length===e.b.length,"common chunk needs same number of a and b lines: ",e),this._linesLeft(e).length}_chunksToGroups(e,t,n){return e.map(e=>{const i=this._chunkToGroup(e,t,n),s=this._commonChunkLength(e);return t+=s,n+=s,i})}_chunkToGroup(e,t,n){const i=new vo(e.ab?vo.Type.BOTH:vo.Type.DELTA,this._linesFromChunk(e,t,n));return i.keyLocation=e.keyLocation,i.dueToRebase=e.due_to_rebase,i.ignoredWhitespaceOnly=e.common,i}_linesFromChunk(e,t,n){if(e.ab)return e.ab.map((e,i)=>this._lineFromRow(bo.Type.BOTH,t,n,e,i));let i=[];return e.a&&(i=i.concat(this._linesFromRows(bo.Type.REMOVE,e.a,t,e[cC]))),e.b&&(i=i.concat(this._linesFromRows(bo.Type.ADD,e.b,n,e[lC]))),i}_linesFromRows(e,t,n,i){const s=i?this._convertIntralineInfos(t,i):void 0;return t.map((t,i)=>this._lineFromRow(e,n,n,t,i,s))}_lineFromRow(e,t,n,i,s,a){const o=new bo(e);return o.text=i,e!==bo.Type.ADD&&(o.beforeNumber=t+s),e!==bo.Type.REMOVE&&(o.afterNumber=n+s),a?(o.hasIntralineInfo=!0,o.highlights=a.filter(e=>e.contentIndex===s)):o.hasIntralineInfo=!1,o}_makeFileComments(){const e=new bo(bo.Type.BOTH);return e.beforeNumber=bo.FILE,e.afterNumber=bo.FILE,new vo(vo.Type.BOTH,[e])}_splitLargeChunks(e){const t=[];for(const n of e)if(n.ab)-1===this.context&&n.ab.length>240?(t.push({ab:n.ab.slice(0,120)}),t.push({ab:n.ab.slice(120)})):t.push(n);else for(const e of this._breakdownChunk(n))t.push(e);return t}_splitCommonChunksWithKeyLocations(e){const t=[];let n=1,i=1;for(const s of e){if(!s.ab&&!s.common){s.a&&(n+=s.a.length),s.b&&(i+=s.b.length),t.push(s);continue}if(s.common&&s.a.length!=s.b.length)throw new Error("DiffContent with common=true must always have equal length");const e=this._commonChunkLength(s),a=this._findChunkEndsAtKeyLocations(e,n,i);if(n+=e,i+=e,s.ab)t.push(...this._splitAtChunkEnds(s.ab,a).map(({lines:e,keyLocation:t})=>Object.assign({},s,{ab:e,keyLocation:t})));else if(s.common){const e=this._splitAtChunkEnds(s.a,a),n=this._splitAtChunkEnds(s.b,a);t.push(...e.map(({lines:e,keyLocation:t},i)=>Object.assign({},s,{a:e,b:n[i].lines,keyLocation:t})))}}return t}_findChunkEndsAtKeyLocations(e,t,n){const i=[];let s=0;for(let a=0;a<e;a++)(this.keyLocations[oC][t+a]||this.keyLocations[rC][n+a])&&(a>s&&(i.push({offset:a,keyLocation:!1}),s=a),i.push({offset:a+1,keyLocation:!0}));return e>s&&i.push({offset:e,keyLocation:!1}),i}_splitAtChunkEnds(e,t){const n=[];let i=0;for(const{offset:s,keyLocation:a}of t)n.push({lines:e.slice(i,s),keyLocation:a}),i=s;return n}_convertIntralineInfos(e,t){let n=0,i=0;const s=[];for(const[a,o]of t){let t=e[n]+"\n",r=0;for(;r<a;)i!==t.length?(i++,r++):(i=0,t=e[++n]+"\n");let l={contentIndex:n,startIndex:i};for(r=0;t&&r<o;)i!==t.length?(i++,r++):(i=0,t=e[++n]+"\n",s.push(l),l={contentIndex:n,startIndex:i});l.endIndex=i,s.push(l)}return s}_breakdownChunk(e){let t=null;return e.a&&!e.b?t="a":e.b&&!e.a?t="b":e.ab&&(t="ab"),t?this._breakdown(e[t],120).map(n=>{const i={};return i[t]=n,e.due_to_rebase&&(i.due_to_rebase=!0),i}):[e]}_breakdown(e,t){if(!e.length)return[];if(e.length<t)return[e];const n=e.slice(0,e.length-t),i=e.slice(e.length-t);return this._breakdown(n,t).concat([i])}}customElements.define(dC.is,dC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hC=za`
  <style include="gr-hovercard-shared-style">
    #container {
      padding: var(--spacing-l);
    }
  </style>
  <div id="container" role="tooltip" tabindex="-1">
    <slot></slot>
  </div>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class pC extends(Zn(df(na(Ka)))){static get template(){return hC}static get is(){return"gr-hovercard"}}customElements.define(pC.is,pC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const uC=za``,mC=/^(commentRanges\.\#?\d+)\.hovering$/;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC extends(Zn(na(Ka))){static get template(){return uC}static get is(){return"gr-ranged-comment-layer"}static get properties(){return{commentRanges:Array,_listeners:{type:Array,value:()=>[]},_rangesMap:{type:Object,value:()=>({left:{},right:{}})}}}static get observers(){return["_handleCommentRangesChange(commentRanges.*)"]}get styleModuleName(){return"gr-ranged-comment-styles"}annotate(e,t,n){let i=[];(n.type===bo.Type.REMOVE||n.type===bo.Type.BOTH&&"right"!==e.getAttribute("data-side"))&&(i=i.concat(this._getRangesForLine(n,"left"))),(n.type===bo.Type.ADD||n.type===bo.Type.BOTH&&"left"!==e.getAttribute("data-side"))&&(i=i.concat(this._getRangesForLine(n,"right")));for(const t of i)go.annotateElement(e,t.start,t.end-t.start,t.hovering?"style-scope gr-diff rangeHighlight":"style-scope gr-diff range")}addListener(e){this._listeners.push(e)}_notifyUpdateRange(e,t,n){for(const i of this._listeners)i(e,t,n)}_handleCommentRangesChange(e){if(!e)return;if("commentRanges"===e.path){this._rangesMap={left:{},right:{}};for(const{side:t,range:n,hovering:i}of e.value)this._updateRangesMap(t,n,i,(e,t,n,i)=>{e.push({start:t,end:n,hovering:i})})}const t=e.path.match(mC);if(t){const{side:e,range:n,hovering:i}=this.get(t[1]);this._updateRangesMap(e,n,i,(e,t,n,i)=>{const s=e.findIndex(e=>e.start===t&&e.end===n);e[s].hovering=i})}if("commentRanges.splices"===e.path)for(const t of e.value.indexSplices){const e=t.removed;for(const{side:t,range:n,hovering:i}of e)this._updateRangesMap(t,n,i,(e,t,n)=>{const i=e.findIndex(e=>e.start===t&&e.end===n);e.splice(i,1)});const n=t.object.slice(t.index,t.index+t.addedCount);for(const{side:e,range:t,hovering:i}of n)this._updateRangesMap(e,t,i,(e,t,n,i)=>{e.push({start:t,end:n,hovering:i})})}}_updateRangesMap(e,t,n,i){const s=this._rangesMap[e]||(this._rangesMap[e]={});for(let e=t.start_line;e<=t.end_line;e++){i(s[e]||(s[e]=[]),e===t.start_line?t.start_character:0,e===t.end_line?t.end_character:-1,n)}this._notifyUpdateRange(t.start_line,t.end_line,e)}_getRangesForLine(e,t){const n="left"===t?e.beforeNumber:e.afterNumber;return(this.get(["_rangesMap",t,n])||[]).map(i=>((i=Object.assign({},i)).end=-1===i.end?e.text.length:i.end,i.start>=i.end&&i.start<e.text.length&&(i.end=e.text.length,this.dispatchEvent(new CustomEvent("normalize-range",{bubbles:!0,composed:!0,detail:{lineNum:n,side:t}}))),i)).sort((e,t)=>e.hovering&&!t.hovering?1:0)}}customElements.define(gC.is,gC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _C=za`
  <div class="contentWrapper">
    <slot></slot>
  </div>
  <gr-ranged-comment-layer
    id="rangeLayer"
    comment-ranges="[[commentRanges]]"
  ></gr-ranged-comment-layer>
  <gr-coverage-layer
    id="coverageLayerLeft"
    coverage-ranges="[[_leftCoverageRanges]]"
    side="left"
  ></gr-coverage-layer>
  <gr-coverage-layer
    id="coverageLayerRight"
    coverage-ranges="[[_rightCoverageRanges]]"
    side="right"
  ></gr-coverage-layer>
  <gr-diff-processor id="processor" groups="{{_groups}}"></gr-diff-processor>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,fC="SIDE_BY_SIDE",bC="UNIFIED_DIFF",vC=/\s+$/;class yC extends(Zn(na(Ka))){static get template(){return _C}static get is(){return"gr-diff-builder"}static get properties(){return{diff:Object,changeNum:String,patchNum:String,viewMode:String,isImageDiff:Boolean,baseImage:Object,revisionImage:Object,parentIndex:Number,path:String,projectName:String,_builder:Object,_groups:Array,_layers:Array,_showTabs:Boolean,commentRanges:{type:Array,value:()=>[]},coverageRanges:{type:Array,value:()=>[]},_leftCoverageRanges:{type:Array,computed:"_computeLeftCoverageRanges(coverageRanges)"},_rightCoverageRanges:{type:Array,computed:"_computeRightCoverageRanges(coverageRanges)"},_cancelableRenderPromise:Object,layers:{type:Array,value:[]}}}get diffElement(){return this.queryEffectiveChildren("#diffTable")}static get observers(){return["_groupsChanged(_groups.splices)"]}_computeLeftCoverageRanges(e){return e.filter(e=>e&&"left"===e.side)}_computeRightCoverageRanges(e){return e.filter(e=>e&&"right"===e.side)}render(e,t){this._setupAnnotationLayers(),this._showTabs=!!t.show_tabs,this._showTrailingWhitespace=!!t.show_whitespace_errors,this.cancel(),this._builder=this._getDiffBuilder(this.diff,t),this.$.processor.context=t.context,this.$.processor.keyLocations=e,this._clearDiffContent(),this._builder.addColumns(this.diffElement,t.font_size);const n=!(!this.isImageDiff&&!this.diff.binary);return this.dispatchEvent(new CustomEvent("render-start",{bubbles:!0,composed:!0})),this._cancelableRenderPromise=sr.makeCancelable(this.$.processor.process(this.diff.content,n).then(()=>{this.isImageDiff&&this._builder.renderDiff(),this.dispatchEvent(new CustomEvent("render-content",{bubbles:!0,composed:!0}))})),this._cancelableRenderPromise.finally(()=>{this._cancelableRenderPromise=null}).catch(e=>{if(!e.isCanceled)return Promise.reject(e)})}_setupAnnotationLayers(){const e=[this._createTrailingWhitespaceLayer(),this._createIntralineLayer(),this._createTabIndicatorLayer(),this.$.rangeLayer,this.$.coverageLayerLeft,this.$.coverageLayerRight];this.layers&&e.push(...this.layers),this._layers=e}getLineElByChild(e){for(;e;){if(e instanceof Element){if(e.classList.contains("lineNum"))return e;if(e.classList.contains("section"))return null}e=e.previousSibling||e.parentElement}return null}getLineNumberByChild(e){const t=this.getLineElByChild(e);return t?parseInt(t.getAttribute("data-value"),10):null}getContentByLine(e,t,n){return this._builder.getContentByLine(e,t,n)}_getDiffRowByChild(e){for(;!e.classList.contains("diff-row")&&e.parentElement;)e=e.parentElement;return e}getContentByLineEl(e){if(!e)return;const t=e.getAttribute("data-value"),n=this.getSideByLineEl(e),i=Ui(this._getDiffRowByChild(e));return this.getContentByLine(t,n,i)}getLineElByNumber(e,t){const n=t?"."+t:"";return this.diffElement.querySelector('.lineNum[data-value="'+e+'"]'+n)}getContentsByLineRange(e,t,n){const i=[];return this._builder.findLinesByRange(e,t,n,null,i),i}getSideByLineEl(e){return e.classList.contains(wo.Side.RIGHT)?wo.Side.RIGHT:wo.Side.LEFT}emitGroup(e,t){this._builder.emitGroup(e,t)}showContext(e,t){const n=this._builder.groups,i=n.findIndex(e=>e.element===t);n.splice(i,1,...e);for(const n of e)this._builder.emitGroup(n,t);t.parentNode.removeChild(t),this.async(()=>this.dispatchEvent(new CustomEvent("render-content",{composed:!0,bubbles:!0})),1)}cancel(){this.$.processor.cancel(),this._cancelableRenderPromise&&(this._cancelableRenderPromise.cancel(),this._cancelableRenderPromise=null)}_handlePreferenceError(e){const t=`The value of the '${e}' user preference is `+"invalid. Fix in diff preferences";throw this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:t},bubbles:!0,composed:!0})),Error(`Invalid preference value: ${e}`)}_getDiffBuilder(e,t){if(isNaN(t.tab_size)||t.tab_size<=0)return void this._handlePreferenceError("tab size");if(isNaN(t.line_length)||t.line_length<=0)return void this._handlePreferenceError("diff width");const n=Object.assign({},t);"/COMMIT_MSG"===this.path&&(n.line_length=72);let i=null;if(this.isImageDiff)i=new So(e,n,this.diffElement,this.baseImage,this.revisionImage);else{if(e.binary)return new Ao(e,n,this.diffElement);this.viewMode===fC?i=new Co(e,n,this.diffElement,this._layers):this.viewMode===bC&&(i=new xo(e,n,this.diffElement,this._layers))}if(!i)throw Error("Unsupported diff view mode: "+this.viewMode);return i}_clearDiffContent(){this.diffElement.innerHTML=null}_groupsChanged(e){if(e)for(const t of e.indexSplices){let e;for(let n=0;n<t.addedCount;n++)e=t.object[t.index+n],this._builder.groups.push(e),this._builder.emitGroup(e)}}_createIntralineLayer(){return{annotate(e,t,n){for(const t of n.highlights){if(t.startIndex===t.endIndex)continue;const i=void 0===t.endIndex?n.text.length:t.endIndex;go.annotateElement(e,t.startIndex,i-t.startIndex,"style-scope gr-diff intraline")}}}}_createTabIndicatorLayer(){const e=()=>this._showTabs;return{annotate(t,n,i){if(!e())return;const s=i.text.split("\t");if(s)for(let e=0,n=0;e<s.length-1;e++)n+=s[e].length,go.annotateElement(t,n,1,"style-scope gr-diff tab-indicator"),n++}}}_createTrailingWhitespaceLayer(){const e=function(){return this._showTrailingWhitespace}.bind(this);return{annotate(t,n,i){if(!e())return;const s=i.text.match(vC);if(s){const e=go.getStringLength(i.text.substr(0,s.index)),n=go.getStringLength(s[0]);go.annotateElement(t,e,n,"style-scope gr-diff trailing-whitespace")}}}}setBlame(e){this._builder&&e&&this._builder.setBlame(e)}}customElements.define(yC.is,yC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wC=za`
  <style include="shared-styles">
    :host {
      cursor: pointer;
      font-family: var(--font-family);
      position: absolute;
      white-space: nowrap;
    }
  </style>
  <gr-tooltip
    id="tooltip"
    text="Press c to comment"
    position-below="[[positionBelow]]"
  ></gr-tooltip>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class CC extends(Zn(na(Ka))){static get template(){return wC}static get is(){return"gr-selection-action-box"}static get properties(){return{keyEventTarget:{type:Object,value:()=>document.body},positionBelow:Boolean}}created(){super.created(),this.addEventListener("mousedown",e=>this._handleMouseDown(e))}placeAbove(e){Ii();const t=this._getTargetBoundingRect(e),n=this.$.tooltip.getBoundingClientRect(),i=this._getParentBoundingClientRect();this.style.top=t.top-i.top-n.height-6+"px",this.style.left=t.left-i.left+(t.width-n.width)/2+"px"}placeBelow(e){Ii();const t=this._getTargetBoundingRect(e),n=this.$.tooltip.getBoundingClientRect(),i=this._getParentBoundingClientRect();this.style.top=t.top-i.top+n.height-6+"px",this.style.left=t.left-i.left+(t.width-n.width)/2+"px"}_getParentBoundingClientRect(){return(this.parentElement||this.parentNode.host).getBoundingClientRect()}_getTargetBoundingRect(e){let t;if(e instanceof Text){const n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect(),n.detach()}else t=e.getBoundingClientRect();return t}_handleMouseDown(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("create-comment-requested",{composed:!0,bubbles:!0})))}}customElements.define(CC.is,CC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const EC=za`
  <style include="shared-styles">
    :host {
      position: relative;
    }
    gr-selection-action-box {
      /**
         * Needs z-index to apear above wrapped content, since it's inseted
         * into DOM before it.
         */
      z-index: 10;
    }
  </style>
  <div class="contentWrapper">
    <slot></slot>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class SC extends(Zn(na(Ka))){static get template(){return EC}static get is(){return"gr-diff-highlight"}static get properties(){return{commentRanges:{type:Array,notify:!0},loggedIn:Boolean,_cachedDiffBuilder:Object,selectedRange:{type:Object,notify:!0}}}created(){super.created(),this.addEventListener("comment-thread-mouseleave",e=>this._handleCommentThreadMouseleave(e)),this.addEventListener("comment-thread-mouseenter",e=>this._handleCommentThreadMouseenter(e)),this.addEventListener("create-comment-requested",e=>this._handleRangeCommentRequest(e))}get diffBuilder(){return this._cachedDiffBuilder||(this._cachedDiffBuilder=Ui(this).querySelector("gr-diff-builder")),this._cachedDiffBuilder}handleSelectionChange(e,t){this.debounce("selectionChange",()=>this._handleSelection(e,t),10)}_getThreadEl(e){const t=Ui(e).path||[];for(const e of t)if(e.classList.contains("comment-thread"))return e;return null}_handleCommentThreadMouseenter(e){const t=this._getThreadEl(e),n=this._indexForThreadEl(t);void 0!==n&&this.set(["commentRanges",n,"hovering"],!0)}_handleCommentThreadMouseleave(e){const t=this._getThreadEl(e),n=this._indexForThreadEl(t);void 0!==n&&this.set(["commentRanges",n,"hovering"],!1)}_indexForThreadEl(e){const t=e.getAttribute("comment-side"),n=JSON.parse(e.getAttribute("range"));if(n)return this._indexOfCommentRange(t,n)}_indexOfCommentRange(e,t){return this.commentRanges.findIndex(n=>{return n.side===e&&(i=n.range,s=t,!i&&!s||!(!i||!s)&&i.start_line===s.start_line&&i.start_character===s.start_character&&i.end_line===s.end_line&&i.end_character===s.end_character);var i,s})}_getNormalizedRange(e){const t=e.rangeCount;if(0===t)return null;if(1===t)return this._normalizeRange(e.getRangeAt(0));{const n=this._normalizeRange(e.getRangeAt(0)),i=this._normalizeRange(e.getRangeAt(t-1));return{start:n.start,end:i.end}}}_normalizeRange(e){const t=Kr.normalize(e);return this._fixTripleClickSelection({start:this._normalizeSelectionSide(t.startContainer,t.startOffset),end:this._normalizeSelectionSide(t.endContainer,t.endOffset)},e)}_fixTripleClickSelection(e,t){if(!e.start)return e;const n=e.start,i=e.end,s=!i&&0===t.endOffset&&"TD"===t.endContainer.nodeName&&(t.endContainer.classList.contains("left")||t.endContainer.classList.contains("right")),a=i&&0===n.column&&0===i.column&&i.line===n.line+1,o=t.cloneContents().querySelector(".contentText"),r=o&&this._getLength(o)||0;return r&&(a||s)&&(e.end={node:n.node,column:r,side:n.side,line:n.line}),e}_normalizeSelectionSide(e,t){let n;if(!this.contains(e))return;const i=this.diffBuilder.getLineElByChild(e);if(!i)return;const s=this.diffBuilder.getSideByLineEl(i);if(!s)return;const a=this.diffBuilder.getLineNumberByChild(i);if(!a)return;const o=this.diffBuilder.getContentByLineEl(i);if(!o)return;const r=o.parentElement;if(r.contains(e)){const i=r.querySelector(".comment-thread");i&&i.contains(e)?(n=this._getLength(o),e=o):n=this._convertOffsetToColumn(e,t)}else e=o,n=0;return{node:e,side:s,line:a,column:n}}_positionActionBox(e,t,n){t>1?e.placeAbove(n):(e.positionBelow=!0,e.placeBelow(n))}_isRangeValid(e){if(!e||!e.start||!e.end)return!1;const t=e.start,n=e.end;return!(t.side!==n.side||n.line<t.line||t.line===n.line&&t.column===n.column)}_handleSelection(e,t){const n=this._getNormalizedRange(e);if(!this._isRangeValid(n))return void this._removeActionBox();const i=e.getRangeAt(0),s=n.start,a=n.end;if(s.line===a.line-1&&0===a.column){const e=i.cloneContents().querySelector(".contentText");return void(t&&0===this._getLength(e)&&this._fireCreateRangeComment(s.side,{start_line:s.line,start_character:0,end_line:s.line,end_character:s.column}))}let o=this.shadowRoot.querySelector("gr-selection-action-box");if(!o){o=document.createElement("gr-selection-action-box");const e=Ui(this.root);e.insertBefore(o,e.firstElementChild)}this.selectedRange={range:{start_line:s.line,start_character:s.column,end_line:a.line,end_character:a.column},side:s.side},s.line===a.line?this._positionActionBox(o,s.line,i):s.node instanceof Text?(s.column&&this._positionActionBox(o,s.line,s.node.splitText(s.column)),s.node.parentElement.normalize()):s.node.classList.contains("content")&&s.node.firstChild?this._positionActionBox(o,s.line,s.node.firstChild):this._positionActionBox(o,s.line,s.node)}_fireCreateRangeComment(e,t){this.dispatchEvent(new CustomEvent("create-range-comment",{detail:{side:e,range:t},composed:!0,bubbles:!0})),this._removeActionBox()}_handleRangeCommentRequest(e){if(e.stopPropagation(),!this.selectedRange)throw Error("Selected Range is needed for new range comment!");const{side:t,range:n}=this.selectedRange;this._fireCreateRangeComment(t,n)}_removeActionBox(){this.selectedRange=void 0;const e=this.shadowRoot.querySelector("gr-selection-action-box");e&&Ui(this.root).removeChild(e)}_convertOffsetToColumn(e,t){if(e instanceof Element&&e.classList.contains("content"))return t;for(;e.previousSibling||!e.parentElement.classList.contains("content");)e.previousSibling?(e=e.previousSibling,t+=this._getLength(e)):e=e.parentElement;return t}_traverseContentSiblings(e,t,n){const i=n&&n.left;let s=e;for(;s&&!(s instanceof Element&&"HL"!==s.tagName&&"SPAN"!==s.tagName);){const e=i?s.previousSibling:s.nextSibling;if(t(s))break;s=e}}_getLength(e){return e instanceof Element&&e.classList.contains("content")?this._getLength(e.querySelector(".contentText")):go.getLength(e)}}customElements.define(SC.is,SC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xC=za`
  <div class="contentWrapper">
    <slot></slot>
  </div>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,AC={descendedFromClass(e,t,n){let i=e.classList.contains(t);for(;!i&&e.parentElement&&(!n||e.parentElement!==n);)i=e.classList.contains(t),e=e.parentElement;return i}};window.Gerrit=window.Gerrit||{},window.Gerrit.DomUtilBehavior=AC;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const PC={COMMENT:"selected-comment",LEFT:"selected-left",RIGHT:"selected-right",BLAME:"selected-blame"};class kC extends(ra([AC],Zn(na(Ka)))){static get template(){return xC}static get is(){return"gr-diff-selection"}static get properties(){return{diff:Object,_cachedDiffBuilder:Object,_linesCache:{type:Object,value:{left:null,right:null}}}}static get observers(){return["_diffChanged(diff)"]}created(){super.created(),this.addEventListener("copy",e=>this._handleCopy(e)),In(this,"down",e=>this._handleDown(e))}attached(){super.attached(),this.classList.add(PC.RIGHT)}get diffBuilder(){return this._cachedDiffBuilder||(this._cachedDiffBuilder=Ui(this).querySelector("gr-diff-builder")),this._cachedDiffBuilder}_diffChanged(){this._linesCache={left:null,right:null}}_handleDownOnRangeComment(e){return!(!e||!e.nodeName||"gr-comment-thread"!==e.nodeName.toLowerCase())&&(this._setClasses([PC.COMMENT,"left"===e.commentSide?PC.LEFT:PC.RIGHT]),!0)}_handleDown(e){if(this._handleDownOnRangeComment(e.target))return;const t=this.diffBuilder.getLineElByChild(e.target),n=this._elementDescendedFromClass(e.target,"blame");if(!t&&!n)return;const i=[];if(n)i.push(PC.BLAME);else{const n=this._elementDescendedFromClass(e.target,"gr-comment"),s=this.diffBuilder.getSideByLineEl(t);i.push("left"===s?PC.LEFT:PC.RIGHT),n&&i.push(PC.COMMENT)}this._setClasses(i)}_setClasses(e){for(const t in PC)if(PC.hasOwnProperty(t)){const n=PC[t];e.includes(n)||this.classList.remove(PC[t])}for(const t of e)this.classList.contains(t)||this.classList.add(t)}_getCopyEventTarget(e){return Ui(e).rootTarget}_elementDescendedFromClass(e,t){return this.descendedFromClass(e,t,this.diffBuilder.diffElement)}_handleCopy(e){let t=!1;const n=this._getCopyEventTarget(e);if("textarea"===n.type)return;if(!this._elementDescendedFromClass(n,"diff-row"))return;this.classList.contains(PC.COMMENT)&&(t=!0);const i=this.diffBuilder.getLineElByChild(n);if(!i)return;const s=this.diffBuilder.getSideByLineEl(i),a=this._getSelectedText(s,t);a&&(e.clipboardData.setData("Text",a),e.preventDefault())}_getSelection(){const e=sr.querySelectorAll(document.body,"gr-diff");if(!e.length)return window.getSelection();const t=e.find(e=>{if(!e||!e.shadowRoot)return!1;const t=e.shadowRoot.getSelection();return t&&"None"!==t.type});return t?t.shadowRoot.getSelection():window.getSelection()}_getSelectedText(e,t){const n=this._getSelection();if(1!=n.rangeCount)return"";if(t)return this._getCommentLines(n,e);const i=Kr.normalize(n.getRangeAt(0)),s=this.diffBuilder.getLineElByChild(i.startContainer),a=this.diffBuilder.getLineElByChild(i.endContainer),o=!a&&0===i.endOffset&&"TD"===i.endContainer.nodeName&&(i.endContainer.classList.contains("left")||i.endContainer.classList.contains("right")),r=parseInt(s.getAttribute("data-value"),10);let l;return o?l=r+1:a&&(l=parseInt(a.getAttribute("data-value"),10)),this._getRangeFromDiff(r,i.startOffset,l,i.endOffset,e)}_getRangeFromDiff(e,t,n,i,s){const a=this._getDiffLines(s).slice(e-1,n);return a.length&&(a[a.length-1]=a[a.length-1].substring(0,i),a[0]=a[0].substring(t)),a.join("\n")}_getDiffLines(e){if(this._linesCache[e])return this._linesCache[e];let t=[];const n="left"===e?"a":"b";for(const e of this.diff.content)e.ab?t=t.concat(e.ab):e[n]&&(t=t.concat(e[n]));return this._linesCache[e]=t,t}_getCommentLines(e,t){const n=Kr.normalize(e.getRangeAt(0)),i=[],s=this.diffBuilder.diffElement.querySelectorAll(`.side-by-side [data-side="${t}"] .message *, .unified .message *`);for(let t=0;t<s.length;t++){const a=s[t];e.containsNode(a,!0)&&("container"!==a.parentElement.id&&"BLOCKQUOTE"!==a.parentElement.nodeName||i.length&&""!==i[i.length-1]&&i.push(""),"output"!==a.id||this._elementDescendedFromClass(a,"collapsed")||i.push(this._getTextContentForRange(a,e,n)))}return i.join("\n")}_getTextContentForRange(e,t,n){if(!t.containsNode(e,!0))return"";let i="";if(e instanceof Text)i=e.textContent,e===n.endContainer&&(i=i.substring(0,n.endOffset)),e===n.startContainer&&(i=i.substring(n.startOffset));else for(const s of e.childNodes)i+=this._getTextContentForRange(s,t,n);return i}}customElements.define(kC.is,kC);
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const TC=document.createElement("template");TC.innerHTML='<dom-module id="gr-syntax-theme">\n  <template>\n    <style>\n      /**\n       * @overview Highlight.js emits the following classes that do not have\n       * styles here:\n       *    subst, symbol, class, function, doctag, meta-string, section, name,\n       *    builtin-name, bulletm, code, formula, quote, addition, deletion,\n       *    attribute\n       * @see {@link http://highlightjs.readthedocs.io/en/latest/css-classes-reference.html}\n       */\n\n      .contentText {\n        color: var(--syntax-default-color);\n      }\n      .gr-syntax-attribute {\n        color: var(--syntax-attribute-color);\n      }\n      .gr-syntax-function {\n        color: var(--syntax-function-color);\n      }\n      .gr-syntax-meta {\n        color: var(--syntax-meta-color);\n      }\n      .gr-syntax-keyword,\n      .gr-syntax-name {\n        color: var(--syntax-keyword-color);\n      }\n      .gr-syntax-number {\n        color: var(--syntax-number-color);\n      }\n      .gr-syntax-selector-class {\n        color: var(--syntax-selector-class-color);\n      }\n      .gr-syntax-variable {\n        color: var(--syntax-variable-color);\n      }\n      .gr-syntax-template-variable {\n        color: var(--syntax-template-variable-color);\n      }\n      .gr-syntax-comment {\n        color: var(--syntax-comment-color);\n      }\n      .gr-syntax-string {\n        color: var(--syntax-string-color);\n      }\n      .gr-syntax-selector-id {\n        color: var(--syntax-selector-id-color);\n      }\n      .gr-syntax-built_in {\n        color: var(--syntax-built_in-color);\n      }\n      .gr-syntax-tag {\n        color: var(--syntax-tag-color);\n      }\n      .gr-syntax-link {\n        color: var(--syntax-link-color);\n      }\n      .gr-syntax-meta-keyword {\n        color: var(--syntax-meta-keyword-color);\n      }\n      .gr-syntax-type {\n        color: var(--syntax-type-color);\n      }\n      .gr-syntax-title {\n        color: var(--syntax-title-color);\n      }\n      .gr-syntax-attr {\n        color: var(--syntax-attr-color);\n      }\n      .gr-syntax-literal { /* XML/HTML Attribute */\n        color: var(--syntax-literal-color);\n      }\n      .gr-syntax-selector-pseudo {\n        color: var(--syntax-selector-pseudo-color);\n      }\n      .gr-syntax-regexp {\n        color: var(--syntax-regexp-color);\n      }\n      .gr-syntax-selector-attr {\n        color: var(--syntax-selector-attr-color);\n      }\n      .gr-syntax-template-tag {\n        color: var(--syntax-template-tag-color);\n      }\n      .gr-syntax-params {\n        color: var(--syntax-params-color);\n      }\n      .gr-syntax-doctag {\n        font-weight: var(--syntax-doctag-weight);\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(TC.content);
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const IC=document.createElement("template");IC.innerHTML='<dom-module id="gr-ranged-comment-theme">\n  <template>\n    <style>\n      .range {\n        background-color: var(--diff-highlight-range-color);\n        display: inline;\n      }\n      .rangeHighlight {\n        background-color: var(--diff-highlight-range-hover-color);\n        display: inline;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(IC.content);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const RC=za`
  <style include="shared-styles">
    :host(.no-left) .sideBySide .left,
    :host(.no-left) .sideBySide .left + td,
    :host(.no-left) .sideBySide .right:not([data-value]),
    :host(.no-left) .sideBySide .right:not([data-value]) + td {
      display: none;
    }
    :host {
      font-family: var(--monospace-font-family, ''), 'Roboto Mono';
      font-size: var(--font-size, var(--font-size-code, 12px));
      line-height: var(--line-height-code, 1.334);
    }

    .thread-group {
      display: block;
      max-width: var(--content-width, 80ch);
      white-space: normal;
      background-color: var(--diff-blank-background-color);
    }
    .diffContainer {
      display: flex;
      font-family: var(--monospace-font-family);
      @apply --diff-container-styles;
    }
    .diffContainer.hiddenscroll {
      margin-bottom: var(--spacing-m);
    }
    table {
      border-collapse: collapse;
      border-right: 1px solid var(--border-color);
      table-layout: fixed;
    }
    .lineNumButton {
      display: block;
      width: 100%;
      height: 100%;
      background-color: var(--diff-blank-background-color);
    }
    /*
      The only way to focus this (clicking) will apply our own focus styling,
      so this default styling is not needed and distracting.
      */
    .lineNumButton:focus {
      outline: none;
    }
    .image-diff .gr-diff {
      text-align: center;
    }
    .image-diff img {
      box-shadow: var(--elevation-level-1);
      max-width: 50em;
    }
    .image-diff .right.lineNumButton {
      border-left: 1px solid var(--border-color);
    }
    .image-diff label,
    .binary-diff label {
      font-family: var(--font-family);
      font-style: italic;
    }
    .diff-row {
      outline: none;
      user-select: none;
    }
    .diff-row.target-row.target-side-left .lineNumButton.left,
    .diff-row.target-row.target-side-right .lineNumButton.right,
    .diff-row.target-row.unified .lineNumButton {
      background-color: var(--diff-selection-background-color);
      color: var(--primary-text-color);
    }
    .content {
      background-color: var(--diff-blank-background-color);
    }
    .contentText {
      background-color: var(--view-background-color);
    }
    .blank {
      background-color: var(--diff-blank-background-color);
    }
    .image-diff .content {
      background-color: var(--diff-blank-background-color);
    }
    .full-width {
      width: 100%;
    }
    .full-width .contentText {
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .lineNumButton,
    .content {
      vertical-align: top;
      white-space: pre;
    }
    .contextLineNum,
    .lineNumButton {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;

      color: var(--deemphasized-text-color);
      padding: 0 var(--spacing-m);
      text-align: right;
    }
    .canComment .lineNumButton {
      cursor: pointer;
    }
    .content {
      /* Set min width since setting width on table cells still
           allows them to shrink. Do not set max width because
           CJK (Chinese-Japanese-Korean) glyphs have variable width */
      min-width: var(--content-width, 80ch);
      width: var(--content-width, 80ch);
    }
    .content.add .contentText .intraline,
      /* If there are no intraline info, consider everything changed */
      .content.add.no-intraline-info .contentText,
      .delta.total .content.add .contentText {
      background-color: var(--dark-add-highlight-color);
    }
    .content.add .contentText {
      background-color: var(--light-add-highlight-color);
    }
    .content.remove .contentText .intraline,
      /* If there are no intraline info, consider everything changed */
      .content.remove.no-intraline-info .contentText,
      .delta.total .content.remove .contentText {
      background-color: var(--dark-remove-highlight-color);
    }
    .content.remove .contentText {
      background-color: var(--light-remove-highlight-color);
    }

    /* dueToRebase */
    .dueToRebase .content.add .contentText .intraline,
    .delta.total.dueToRebase .content.add .contentText {
      background-color: var(--dark-rebased-add-highlight-color);
    }
    .dueToRebase .content.add .contentText {
      background-color: var(--light-rebased-add-highlight-color);
    }
    .dueToRebase .content.remove .contentText .intraline,
    .delta.total.dueToRebase .content.remove .contentText {
      background-color: var(--dark-rebased-remove-highlight-color);
    }
    .dueToRebase .content.remove .contentText {
      background-color: var(--light-remove-add-highlight-color);
    }

    /* ignoredWhitespaceOnly */
    .ignoredWhitespaceOnly .content.add .contentText .intraline,
    .delta.total.ignoredWhitespaceOnly .content.add .contentText,
    .ignoredWhitespaceOnly .content.add .contentText,
    .ignoredWhitespaceOnly .content.remove .contentText .intraline,
    .delta.total.ignoredWhitespaceOnly .content.remove .contentText,
    .ignoredWhitespaceOnly .content.remove .contentText {
      background-color: var(--view-background-color);
    }

    .content .contentText:empty:after {
      /* Newline, to ensure empty lines are one line-height tall. */
      content: '\\A';
    }
    .contextControl {
      background-color: var(--diff-context-control-background-color);
      border: 1px solid var(--diff-context-control-border-color);
      color: var(--diff-context-control-color);
    }
    .contextControl gr-button {
      display: inline-block;
      text-decoration: none;
      vertical-align: top;
      line-height: var(--line-height-mono, 18px);
      --gr-button: {
        color: var(--diff-context-control-color);
        padding: var(--spacing-xxs) var(--spacing-l);
      }
    }
    .contextControl gr-button iron-icon {
      /* should match line-height of gr-button */
      width: var(--line-height-mono, 18px);
      height: var(--line-height-mono, 18px);
    }
    .contextControl td:not(.lineNumButton) {
      text-align: center;
    }
    .displayLine .diff-row.target-row td {
      box-shadow: inset 0 -1px var(--border-color);
    }
    .br:after {
      /* Line feed */
      content: '\\A';
    }
    .tab {
      display: inline-block;
    }
    .tab-indicator:before {
      color: var(--diff-tab-indicator-color);
      /* >> character */
      content: '\\00BB';
      position: absolute;
    }
    /* Is defined after other background-colors, such that this
         rule wins in case of same specificity. */
    .trailing-whitespace,
    .content .trailing-whitespace,
    .trailing-whitespace .intraline,
    .content .trailing-whitespace .intraline {
      border-radius: var(--border-radius, 4px);
      background-color: var(--diff-trailing-whitespace-indicator);
    }
    #diffHeader {
      background-color: var(--table-header-background-color);
      border-bottom: 1px solid var(--border-color);
      color: var(--link-color);
      padding: var(--spacing-m) 0 var(--spacing-m) 48px;
    }
    #loadingError,
    #sizeWarning {
      display: none;
      margin: var(--spacing-l) auto;
      max-width: 60em;
      text-align: center;
    }
    #loadingError {
      color: var(--error-text-color);
    }
    #sizeWarning gr-button {
      margin: var(--spacing-l);
    }
    #loadingError.showError,
    #sizeWarning.warn {
      display: block;
    }
    .target-row td.blame {
      background: var(--diff-selection-background-color);
    }
    col.blame {
      display: none;
    }
    td.blame {
      display: none;
      padding: 0 var(--spacing-m);
      white-space: pre;
    }
    :host(.showBlame) col.blame {
      display: table-column;
    }
    :host(.showBlame) td.blame {
      display: table-cell;
    }
    td.blame > span {
      opacity: 0.6;
    }
    td.blame > span.startOfRange {
      opacity: 1;
    }
    td.blame .blameDate {
      font-family: var(--monospace-font-family);
      color: var(--link-color);
      text-decoration: none;
    }
    .full-width td.blame {
      overflow: hidden;
      width: 200px;
    }
    /** Support the line length indicator **/
    .full-width td.content .contentText {
      /* Base 64 encoded 1x1px of #ddd */
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mO8+x8AAr8B3gzOjaQAAAAASUVORK5CYII=');
      background-position: var(--line-limit) 0;
      background-repeat: repeat-y;
    }
    .newlineWarning {
      color: var(--deemphasized-text-color);
      text-align: center;
    }
    .newlineWarning.hidden {
      display: none;
    }
    .lineNum.COVERED .lineNumButton {
      background-color: var(--coverage-covered, #e0f2f1);
    }
    .lineNum.NOT_COVERED .lineNumButton {
      background-color: var(--coverage-not-covered, #ffd1a4);
    }
    .lineNum.PARTIALLY_COVERED .lineNumButton {
      background: linear-gradient(
        to right bottom,
        var(--coverage-not-covered, #ffd1a4) 0%,
        var(--coverage-not-covered, #ffd1a4) 50%,
        var(--coverage-covered, #e0f2f1) 50%,
        var(--coverage-covered, #e0f2f1) 100%
      );
    }

    /** BEGIN: Select and copy for Polymer 2 */
    /** Below was copied and modified from the original css in gr-diff-selection.html */
    .content,
    .contextControl,
    .blame {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .selected-left:not(.selected-comment)
      .side-by-side
      .left
      + .content
      .contentText,
    .selected-right:not(.selected-comment)
      .side-by-side
      .right
      + .content
      .contentText,
    .selected-left:not(.selected-comment)
      .unified
      .left.lineNum
      ~ .content:not(.both)
      .contentText,
    .selected-right:not(.selected-comment)
      .unified
      .right.lineNum
      ~ .content
      .contentText,
    .selected-left.selected-comment .side-by-side .left + .content .message,
    .selected-right.selected-comment
      .side-by-side
      .right
      + .content
      .message
      :not(.collapsedContent),
    .selected-comment .unified .message :not(.collapsedContent),
    .selected-blame .blame {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }

    /** Make comments selectable when selected */
    .selected-left.selected-comment
      ::slotted(gr-comment-thread[comment-side='left']),
    .selected-right.selected-comment
      ::slotted(gr-comment-thread[comment-side='right']) {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
    /** END: Select and copy for Polymer 2 */

    .whitespace-change-only-message {
      background-color: var(--diff-context-control-background-color);
      border: 1px solid var(--diff-context-control-border-color);
      text-align: center;
    }
  </style>
  <style include="gr-syntax-theme">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-ranged-comment-theme">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div id="diffHeader" hidden$="[[_computeDiffHeaderHidden(_diffHeaderItems)]]">
    <template is="dom-repeat" items="[[_diffHeaderItems]]">
      <div>[[item]]</div>
    </template>
  </div>
  <div
    class$="[[_computeContainerClass(loggedIn, viewMode, displayLine)]]"
    on-tap="_handleTap"
  >
    <gr-diff-selection diff="[[diff]]">
      <gr-diff-highlight
        id="highlights"
        logged-in="[[loggedIn]]"
        comment-ranges="{{_commentRanges}}"
      >
        <gr-diff-builder
          id="diffBuilder"
          comment-ranges="[[_commentRanges]]"
          coverage-ranges="[[coverageRanges]]"
          project-name="[[projectName]]"
          diff="[[diff]]"
          path="[[path]]"
          change-num="[[changeNum]]"
          patch-num="[[patchRange.patchNum]]"
          view-mode="[[viewMode]]"
          is-image-diff="[[isImageDiff]]"
          base-image="[[baseImage]]"
          layers="[[layers]]"
          revision-image="[[revisionImage]]"
        >
          <table
            id="diffTable"
            class$="[[_diffTableClass]]"
            role="presentation"
          ></table>

          <template
            is="dom-if"
            if="[[showNoChangeMessage(loading, prefs, _diffLength)]]"
          >
            <div class="whitespace-change-only-message">
              This file only contains whitespace changes. Modify the whitespace
              setting to see the changes.
            </div>
          </template>
        </gr-diff-builder>
      </gr-diff-highlight>
    </gr-diff-selection>
  </div>
  <div class$="[[_computeNewlineWarningClass(_newlineWarning, loading)]]">
    [[_newlineWarning]]
  </div>
  <div id="loadingError" class$="[[_computeErrorClass(errorMessage)]]">
    [[errorMessage]]
  </div>
  <div id="sizeWarning" class$="[[_computeWarningClass(_showWarning)]]">
    <p>
      Prevented render because "Whole file" is enabled and this diff is very
      large (about [[_diffLength]] lines).
    </p>
    <gr-button on-click="_handleLimitedBypass">
      Render with limited context
    </gr-button>
    <gr-button on-click="_handleFullBypass">
      Render anyway (may be slow)
    </gr-button>
  </div>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,LC="SIDE_BY_SIDE",DC="UNIFIED_DIFF";function OC(e){return e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("comment-thread")}class NC extends(ra([vm],Zn(na(Ka)))){static get template(){return RC}static get is(){return"gr-diff"}static get properties(){return{changeNum:String,noAutoRender:{type:Boolean,value:!1},patchRange:Object,path:{type:String,observer:"_pathObserver"},prefs:{type:Object,observer:"_prefsObserver"},projectName:String,displayLine:{type:Boolean,value:!1},isImageDiff:{type:Boolean},commitRange:Object,hidden:{type:Boolean,reflectToAttribute:!0},noRenderOnPrefsChange:Boolean,_commentRanges:{type:Array,value:()=>[]},coverageRanges:{type:Array,value:()=>[]},lineWrapping:{type:Boolean,value:!1,observer:"_lineWrappingObserver"},viewMode:{type:String,value:LC,observer:"_viewModeObserver"},lineOfInterest:Object,loading:{type:Boolean,value:!1,observer:"_loadingChanged"},loggedIn:{type:Boolean,value:!1},diff:{type:Object,observer:"_diffChanged"},_diffHeaderItems:{type:Array,value:[],computed:"_computeDiffHeaderItems(diff.*)"},_diffTableClass:{type:String,value:""},baseImage:Object,revisionImage:Object,_safetyBypass:{type:Number,value:null},_showWarning:Boolean,errorMessage:{type:String,value:null},blame:{type:Object,value:null,observer:"_blameChanged"},parentIndex:Number,showNewlineWarningLeft:{type:Boolean,value:!1},showNewlineWarningRight:{type:Boolean,value:!1},_newlineWarning:{type:String,computed:"_computeNewlineWarning(showNewlineWarningLeft, showNewlineWarningRight)"},_diffLength:Number,_incrementalNodeObserver:Object,_nodeObserver:Object,isAttached:Boolean,layers:Array}}static get observers(){return["_enableSelectionObserver(loggedIn, isAttached)"]}created(){super.created(),this.addEventListener("create-range-comment",e=>this._handleCreateRangeComment(e)),this.addEventListener("render-content",()=>this._handleRenderContent())}attached(){super.attached(),this._observeNodes()}detached(){super.detached(),this._unobserveIncrementalNodes(),this._unobserveNodes()}showNoChangeMessage(e,t,n){return!e&&t&&"IGNORE_NONE"!==t.ignore_whitespace&&0===n}_enableSelectionObserver(e,t){[e,t].some(e=>void 0===e)||(e&&t?(this.listen(document,"selectionchange","_handleSelectionChange"),this.listen(document,"mouseup","_handleMouseUp")):(this.unlisten(document,"selectionchange","_handleSelectionChange"),this.unlisten(document,"mouseup","_handleMouseUp")))}_handleSelectionChange(){const e=this._getShadowOrDocumentSelection();this.$.highlights.handleSelectionChange(e,!1)}_handleMouseUp(e){const t=this._getShadowOrDocumentSelection();this.$.highlights.handleSelectionChange(t,!0)}_getShadowOrDocumentSelection(){return this.root.getSelection?this.root.getSelection():document.getSelection()}_observeNodes(){this._nodeObserver=Ui(this).observeNodes(e=>{const t=e.addedNodes.filter(OC),n=e.removedNodes.filter(OC);this._updateRanges(t,n),this._redispatchHoverEvents(t)})}_updateRanges(e,t){function n(e){return{side:e.getAttribute("comment-side"),range:JSON.parse(e.getAttribute("range")),hovering:!1}}const i=e.map(n).filter(({range:e})=>e),s=t.map(n).filter(({range:e})=>e);for(const e of s){const t=this._commentRanges.findIndex(t=>t.side===e.side&&_m(t.range,e.range));this.splice("_commentRanges",t,1)}i&&i.length&&this.push("_commentRanges",...i)}_computeKeyLocations(){const e={left:{},right:{}};if(this.lineOfInterest){e[this.lineOfInterest.leftSide?"left":"right"][this.lineOfInterest.number]=!0}const t=Ui(this).getEffectiveChildNodes().filter(OC);for(const n of t){const t=n.getAttribute("comment-side"),i=Number(n.getAttribute("line-num"))||bo.FILE,s=n.range||{};e[t][i]=!0,s.start_line&&(e[t][s.start_line]=!0)}return e}_redispatchHoverEvents(e){for(const t of e)t.addEventListener("mouseenter",()=>{t.dispatchEvent(new CustomEvent("comment-thread-mouseenter",{bubbles:!0,composed:!0}))}),t.addEventListener("mouseleave",()=>{t.dispatchEvent(new CustomEvent("comment-thread-mouseleave",{bubbles:!0,composed:!0}))})}cancel(){this.$.diffBuilder.cancel(),this.cancelDebouncer("renderDiffTable")}getCursorStops(){return this.hidden&&this.noAutoRender?[]:Array.from(Ui(this.root).querySelectorAll(":not(.contextControl) > .diff-row"))}isRangeSelected(){return!!this.$.highlights.selectedRange}toggleLeftDiff(){this.toggleClass("no-left")}_blameChanged(e){this.$.diffBuilder.setBlame(e),e?this.classList.add("showBlame"):this.classList.remove("showBlame")}_computeContainerClass(e,t,n){const i=["diffContainer"];switch(t){case DC:i.push("unified");break;case LC:i.push("sideBySide");break;default:throw Error("Invalid view mode: ",t)}return xm()&&i.push("hiddenscroll"),e&&i.push("canComment"),n&&i.push("displayLine"),i.join(" ")}_handleTap(e){const t=Ui(e).localTarget;if(t.classList.contains("showContext"))this.dispatchEvent(new CustomEvent("diff-context-expanded",{detail:{numLines:e.detail.numLines},composed:!0,bubbles:!0})),this.$.diffBuilder.showContext(e.detail.groups,e.detail.section);else if(t.classList.contains("lineNum")||t.classList.contains("lineNumButton"))this.addDraftAtLine(t);else if("HL"===t.tagName||t.classList.contains("content")||t.classList.contains("contentText")){const e=this.$.diffBuilder.getLineElByChild(t);e&&this._selectLine(e)}}_selectLine(e){this.dispatchEvent(new CustomEvent("line-selected",{detail:{side:e.classList.contains("left")?mm:gm,number:e.getAttribute("data-value"),path:this.path},composed:!0,bubbles:!0}))}addDraftAtLine(e){if(this._selectLine(e),!this._isValidElForComment(e))return;const t=e.getAttribute("data-value");let n;t!==bo.FILE&&(n=parseInt(t,10),isNaN(n))?this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Invalid line number: "+t},composed:!0,bubbles:!0})):this._createComment(e,n)}createRangeComment(){if(!this.isRangeSelected())throw Error("Selection is needed for new range comment");const{side:e,range:t}=this.$.highlights.selectedRange;this._createCommentForSelection(e,t)}_createCommentForSelection(e,t){const n=t.end_line,i=this.$.diffBuilder.getLineElByNumber(n,e);this._isValidElForComment(i)&&this._createComment(i,n,e,t)}_handleCreateRangeComment(e){const t=e.detail.range,n=e.detail.side;this._createCommentForSelection(n,t)}_isValidElForComment(e){if(!this.loggedIn)return this.dispatchEvent(new CustomEvent("show-auth-required",{composed:!0,bubbles:!0})),!1;const t=e.classList.contains(mm)?this.patchRange.basePatchNum:this.patchRange.patchNum,n=this.patchNumEquals(t,this.EDIT_NAME),i=this.patchNumEquals(t,this.PARENT_NAME)&&this.patchNumEquals(this.patchRange.patchNum,this.EDIT_NAME);return n?(this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"You cannot comment on an edit."},composed:!0,bubbles:!0})),!1):!i||(this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"You cannot comment on the base patch set of an edit."},composed:!0,bubbles:!0})),!1)}_createComment(e,t,n,i){const s=this.$.diffBuilder.getContentByLineEl(e);if(!s)return;const a=s.parentElement;n=n||this._getCommentSideByLineAndContent(e,a);const o=this._getPatchNumByLineAndContent(e,a),r=this._getIsParentCommentByLineAndContent(e,a);this.dispatchEvent(new CustomEvent("create-comment",{bubbles:!0,composed:!0,detail:{lineNum:t,side:n,patchNum:o,isOnParent:r,range:i}}))}_getThreadGroupForLine(e){return e.querySelector(".thread-group")}_getOrCreateThreadGroup(e,t){let n=this._getThreadGroupForLine(e);return n||(n=document.createElement("div"),n.className="thread-group",n.setAttribute("data-side",t),e.appendChild(n)),n}_getPatchNumByLineAndContent(e,t){let n=this.patchRange.patchNum;return!e.classList.contains(mm)&&!t.classList.contains("remove")||"PARENT"===this.patchRange.basePatchNum||this.isMergeParent(this.patchRange.basePatchNum)||(n=this.patchRange.basePatchNum),n}_getIsParentCommentByLineAndContent(e,t){return!(!e.classList.contains(mm)&&!t.classList.contains("remove")||"PARENT"!==this.patchRange.basePatchNum&&!this.isMergeParent(this.patchRange.basePatchNum))}_getCommentSideByLineAndContent(e,t){let n="right";return(e.classList.contains(mm)||t.classList.contains("remove"))&&(n="left"),n}_prefsObserver(e,t){this._prefsEqual(e,t)||this._prefsChanged(e)}_prefsEqual(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every(n=>e[n]===t[n])&&i.every(n=>e[n]===t[n])}_pathObserver(){this._prefsChanged(this.prefs)}_viewModeObserver(){this._prefsChanged(this.prefs)}_cleanup(){this.cancel(),this._blame=null,this._safetyBypass=null,this._showWarning=!1,this.clearDiffContent()}_loadingChanged(e){e&&this._cleanup()}_lineWrappingObserver(){this._prefsChanged(this.prefs)}_prefsChanged(e){if(!e)return;this._blame=null;const t="/COMMIT_MSG"===this.path?72:e.line_length,n={};e.line_wrapping?(this._diffTableClass="full-width","SIDE_BY_SIDE"===this.viewMode&&(n["--content-width"]="none",n["--line-limit"]=t+"ch")):(this._diffTableClass="",n["--content-width"]=t+"ch"),e.font_size&&(n["--font-size"]=e.font_size+"px"),this.updateStyles(n),this.diff&&!this.noRenderOnPrefsChange&&this._debounceRenderDiffTable()}_diffChanged(e){e&&(this._cleanup(),this._diffLength=this.getDiffLength(e),this._debounceRenderDiffTable())}_debounceRenderDiffTable(){this.debounce("renderDiffTable",()=>this._renderDiffTable())}_renderDiffTable(){if(!this.prefs)return void this.dispatchEvent(new CustomEvent("render",{bubbles:!0,composed:!0}));if(-1===this.prefs.context&&this._diffLength>=1e4&&null===this._safetyBypass)return this._showWarning=!0,void this.dispatchEvent(new CustomEvent("render",{bubbles:!0,composed:!0}));this._showWarning=!1;const e=this._computeKeyLocations();this.$.diffBuilder.render(e,this._getBypassPrefs()).then(()=>{this.dispatchEvent(new CustomEvent("render",{bubbles:!0,composed:!0,detail:{contentRendered:!0}}))})}_handleRenderContent(){this._unobserveIncrementalNodes(),this._incrementalNodeObserver=Ui(this).observeNodes(e=>{const t=e.addedNodes.filter(OC);let n;for(const e of t){const t=e.getAttribute("line-num")||"FILE",i=e.getAttribute("comment-side"),s=this.$.diffBuilder.getLineElByNumber(t,i),a=this.$.diffBuilder.getContentByLineEl(s);if(!a)continue;const o=a.parentElement,r=this._getOrCreateThreadGroup(o,i),l=document.createElement("slot");l.name=e.getAttribute("slot"),Ui(r).appendChild(l),n=e}n&&n.replaceWith&&n.replaceWith(n)})}_unobserveIncrementalNodes(){this._incrementalNodeObserver&&Ui(this).unobserveNodes(this._incrementalNodeObserver)}_unobserveNodes(){this._nodeObserver&&Ui(this).unobserveNodes(this._nodeObserver)}_getBypassPrefs(){return null!==this._safetyBypass?Object.assign({},this.prefs,{context:this._safetyBypass}):this.prefs}clearDiffContent(){this._unobserveIncrementalNodes(),this.$.diffTable.innerHTML=null}_computeDiffHeaderItems(e){const t=e.base;return t&&t.diff_header?t.diff_header.filter(e=>!(e.startsWith("diff --git ")||e.startsWith("index ")||e.startsWith("+++ ")||e.startsWith("--- ")||"Binary files differ"===e)):[]}_computeDiffHeaderHidden(e){return 0===e.length}_handleFullBypass(){this._safetyBypass=-1,this._debounceRenderDiffTable()}_handleLimitedBypass(){this._safetyBypass=10,this._debounceRenderDiffTable()}_computeWarningClass(e){return e?"warn":""}_computeErrorClass(e){return e?"showError":""}expandAllContext(){this._handleFullBypass()}_computeNewlineWarning(e,t){const n=[];return e&&n.push("No newline at end of base file."),t&&n.push("No newline at end of revision file."),n.length?n.join(" — "):null}_computeNewlineWarningClass(e,t){return t||!e?"newlineWarning hidden":"newlineWarning"}getDiffLength(e){return e?e.content.reduce((e,t)=>t.hasOwnProperty("ab")?e+t.ab.length:e+Math.max(t.hasOwnProperty("a")?t.a.length:0,t.hasOwnProperty("b")?t.b.length:0),0):0}}customElements.define(NC.is,NC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const MC=za`
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class $C extends(Zn(na(Ka))){static get template(){return MC}static get is(){return"gr-lib-loader"}static get properties(){return{_hljsState:{type:Object,value:{configured:!1,loading:!1,callbacks:[]}}}}getHLJS(){return new Promise((e,t)=>{this._getHighlightLib()?e(this._getHighlightLib()):(this._hljsState.loading||(this._hljsState.loading=!0,this._loadScript(this._getHLJSUrl()).then(this._onHLJSLibLoaded.bind(this)).catch(t)),this._hljsState.callbacks.push(e))})}getDarkTheme(){return new Promise((e,t)=>{po(this._getLibRoot()+"styles/themes/dark-theme.html",()=>{const t=document.createElement("style");t.setAttribute("include","dark-theme");const n=document.createElement("custom-style");n.appendChild(t),e(n)},t)})}_onHLJSLibLoaded(){const e=this._getHighlightLib();this._hljsState.loading=!1,this.$.jsAPI.handleEvent(this.$.jsAPI.EventType.HIGHLIGHTJS_LOADED,{hljs:e});for(const t of this._hljsState.callbacks)t(e);this._hljsState.callbacks=[]}_getHighlightLib(){const e=window.hljs;return e&&!this._hljsState.configured&&(this._hljsState.configured=!0,e.configure({classPrefix:"gr-diff gr-syntax gr-syntax-"})),e}_getLibRoot(){return window.STATIC_RESOURCE_PATH?window.STATIC_RESOURCE_PATH+"/":"/"}_loadScript(e){return new Promise((t,n)=>{const i=document.createElement("script");e?(i.setAttribute("src",e),i.onload=t,i.onerror=n,Ui(document.head).appendChild(i)):n(new Error("Unable to load blank script url."))})}_getHLJSUrl(){const e=this._getLibRoot();return e?e+"bower_components/highlightjs/highlight.min.js":null}}customElements.define($C.is,$C);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const BC=za`
  <gr-lib-loader id="libLoader"></gr-lib-loader>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,FC={"application/dart":"dart","application/json":"json","application/x-powershell":"powershell","application/typescript":"typescript","application/xml":"xml","application/xquery":"xquery","application/x-erb":"erb","text/css":"css","text/html":"html","text/javascript":"js","text/jsx":"jsx","text/x-c":"cpp","text/x-c++src":"cpp","text/x-clojure":"clojure","text/x-cmake":"cmake","text/x-coffeescript":"coffeescript","text/x-common-lisp":"lisp","text/x-crystal":"crystal","text/x-csharp":"csharp","text/x-csrc":"cpp","text/x-d":"d","text/x-diff":"diff","text/x-django":"django","text/x-dockerfile":"dockerfile","text/x-ebnf":"ebnf","text/x-elm":"elm","text/x-erlang":"erlang","text/x-fortran":"fortran","text/x-fsharp":"fsharp","text/x-go":"go","text/x-groovy":"groovy","text/x-haml":"haml","text/x-handlebars":"handlebars","text/x-haskell":"haskell","text/x-haxe":"haxe","text/x-ini":"ini","text/x-java":"java","text/x-julia":"julia","text/x-kotlin":"kotlin","text/x-latex":"latex","text/x-less":"less","text/x-lua":"lua","text/x-mathematica":"mathematica","text/x-nginx-conf":"nginx","text/x-nsis":"nsis","text/x-objectivec":"objectivec","text/x-ocaml":"ocaml","text/x-perl":"perl","text/x-pgsql":"pgsql","text/x-php":"php","text/x-properties":"properties","text/x-protobuf":"protobuf","text/x-puppet":"puppet","text/x-python":"python","text/x-q":"q","text/x-ruby":"ruby","text/x-rustsrc":"rust","text/x-scala":"scala","text/x-scss":"scss","text/x-scheme":"scheme","text/x-shell":"shell","text/x-soy":"soy","text/x-spreadsheet":"excel","text/x-sh":"bash","text/x-sql":"sql","text/x-swift":"swift","text/x-systemverilog":"sv","text/x-tcl":"tcl","text/x-torque":"torque","text/x-twig":"twig","text/x-vb":"vb","text/x-verilog":"v","text/x-vhdl":"vhdl","text/x-yaml":"yaml","text/vbscript":"vbscript"},UC={"gr-diff gr-syntax gr-syntax-attr":!0,"gr-diff gr-syntax gr-syntax-attribute":!0,"gr-diff gr-syntax gr-syntax-built_in":!0,"gr-diff gr-syntax gr-syntax-comment":!0,"gr-diff gr-syntax gr-syntax-doctag":!0,"gr-diff gr-syntax gr-syntax-function":!0,"gr-diff gr-syntax gr-syntax-keyword":!0,"gr-diff gr-syntax gr-syntax-link":!0,"gr-diff gr-syntax gr-syntax-literal":!0,"gr-diff gr-syntax gr-syntax-meta":!0,"gr-diff gr-syntax gr-syntax-meta-keyword":!0,"gr-diff gr-syntax gr-syntax-name":!0,"gr-diff gr-syntax gr-syntax-number":!0,"gr-diff gr-syntax gr-syntax-params":!0,"gr-diff gr-syntax gr-syntax-regexp":!0,"gr-diff gr-syntax gr-syntax-selector-attr":!0,"gr-diff gr-syntax gr-syntax-selector-class":!0,"gr-diff gr-syntax gr-syntax-selector-id":!0,"gr-diff gr-syntax gr-syntax-selector-pseudo":!0,"gr-diff gr-syntax gr-syntax-selector-tag":!0,"gr-diff gr-syntax gr-syntax-string":!0,"gr-diff gr-syntax gr-syntax-tag":!0,"gr-diff gr-syntax gr-syntax-template-tag":!0,"gr-diff gr-syntax gr-syntax-template-variable":!0,"gr-diff gr-syntax gr-syntax-title":!0,"gr-diff gr-syntax gr-syntax-type":!0,"gr-diff gr-syntax gr-syntax-variable":!0},HC=/^\s*#(if|define).*</,jC=/L\'(\\)?.\'/g,GC=/(@[^\s]+)\(([^)]+)\)/g,VC=/</g;class zC extends(Zn(na(Ka))){static get template(){return BC}static get is(){return"gr-syntax-layer"}static get properties(){return{diff:{type:Object,observer:"_diffChanged"},enabled:{type:Boolean,value:!0},_baseRanges:{type:Array,value:()=>[]},_revisionRanges:{type:Array,value:()=>[]},_baseLanguage:String,_revisionLanguage:String,_listeners:{type:Array,value:()=>[]},_processHandle:Number,_processPromise:{type:Object,value:null},_hljs:Object}}addListener(e){this.push("_listeners",e)}removeListener(e){this._listeners=this._listeners.filter(t=>t!=e)}annotate(e,t,n){if(!this.enabled)return;let i;n.type===bo.Type.REMOVE||n.type===bo.Type.BOTH&&"right"!==e.getAttribute("data-side")?i="left":n.type!==bo.Type.ADD&&"left"===e.getAttribute("data-side")||(i="right");let s=[];"left"===i&&this._baseRanges.length>=n.beforeNumber?s=this._baseRanges[n.beforeNumber-1]||[]:"right"===i&&this._revisionRanges.length>=n.afterNumber&&(s=this._revisionRanges[n.afterNumber-1]||[]);for(const t of s)go.annotateElement(e,t.start,t.length,t.className)}_getLanguage(e){return e.language||FC[e.content_type]}process(){if(this._cancel(),this._baseRanges=[],this._revisionRanges=[],!this.enabled||!this.diff.content.length)return Promise.resolve();if(this.diff.meta_a&&(this._baseLanguage=this._getLanguage(this.diff.meta_a)),this.diff.meta_b&&(this._revisionLanguage=this._getLanguage(this.diff.meta_b)),!this._baseLanguage&&!this._revisionLanguage)return Promise.resolve();const e={sectionIndex:0,lineIndex:0,baseContext:void 0,revisionContext:void 0,lineNums:{left:1,right:1},lastNotify:{left:1,right:1}},t=new Map;return this._processPromise=sr.makeCancelable(this._loadHLJS().then(()=>new Promise(n=>{const i=()=>{if(this._processHandle=null,this._processNextLine(e,t),e.lineIndex++,this._isSectionDone(e)&&(e.lineIndex=0,e.sectionIndex++),e.sectionIndex>=this.diff.content.length)return n(),void this._notify(e);e.lineIndex%100==0?(this._notify(e),this._processHandle=this.async(i,10)):i.call(this)};this._processHandle=this.async(i,1)}))),this._processPromise.finally(()=>{this._processPromise=null})}_cancel(){null!=this._processHandle&&(this.cancelAsync(this._processHandle),this._processHandle=null),this._processPromise&&this._processPromise.cancel()}_diffChanged(){this._cancel(),this._baseRanges=[],this._revisionRanges=[]}_rangesFromString(e,t){const n=t.get(e);if(n)return n;const i=document.createElement("div");i.innerHTML=e;const s=this._rangesFromElement(i,0);return t.set(e,s),s}_rangesFromElement(e,t){let n=[];for(const i of e.childNodes){const e=go.getLength(i);"SPAN"===i.tagName&&"undefined"!==i.className&&(UC.hasOwnProperty(i.className)&&n.push({start:t,length:e,className:i.className}),i.children.length&&(n=n.concat(this._rangesFromElement(i,t)))),t+=e}return n}_processNextLine(e,t){let n,i;const s=this.diff.content[e.sectionIndex];let a;s.ab?(n=s.ab[e.lineIndex],i=s.ab[e.lineIndex],e.lineNums.left++,e.lineNums.right++):(s.a&&s.a.length>e.lineIndex&&(n=s.a[e.lineIndex],e.lineNums.left++),s.b&&s.b.length>e.lineIndex&&(i=s.b[e.lineIndex],e.lineNums.right++)),this._baseLanguage&&void 0!==n&&this._hljs.getLanguage(this._baseLanguage)&&(n=this._workaround(this._baseLanguage,n),a=this._hljs.highlight(this._baseLanguage,n,!0,e.baseContext),this.push("_baseRanges",this._rangesFromString(a.value,t)),e.baseContext=a.top),this._revisionLanguage&&void 0!==i&&this._hljs.getLanguage(this._revisionLanguage)&&(i=this._workaround(this._revisionLanguage,i),a=this._hljs.highlight(this._revisionLanguage,i,!0,e.revisionContext),this.push("_revisionRanges",this._rangesFromString(a.value,t)),e.revisionContext=a.top)}_workaround(e,t){return"cpp"===e?(HC.test(t)&&(t=t.replace(VC,"|")),jC.test(t)&&(t=t.replace(jC,'L"$1."')),t):"java"===e&&GC.test(t)?t.replace(GC,"$1 $2 "):"go"===e&&t.includes("'\\\\'")?t.replace("'\\\\'",'"\\\\"'):t}_isSectionDone(e){const t=this.diff.content[e.sectionIndex];return t.ab?e.lineIndex>=t.ab.length:(!t.a||e.lineIndex>=t.a.length)&&(!t.b||e.lineIndex>=t.b.length)}_notify(e){e.lineNums.left-e.lastNotify.left&&(this._notifyRange(e.lastNotify.left,e.lineNums.left,"left"),e.lastNotify.left=e.lineNums.left),e.lineNums.right-e.lastNotify.right&&(this._notifyRange(e.lastNotify.right,e.lineNums.right,"right"),e.lastNotify.right=e.lineNums.right)}_notifyRange(e,t,n){for(const i of this._listeners)i(e,t,n)}_loadHLJS(){return this.$.libLoader.getHLJS().then(e=>{this._hljs=e})}}customElements.define(zC.is,zC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const WC=za`
  <gr-diff
    id="diff"
    change-num="[[changeNum]]"
    no-auto-render="[[noAutoRender]]"
    patch-range="[[patchRange]]"
    path="[[path]]"
    prefs="[[prefs]]"
    project-name="[[projectName]]"
    display-line="[[displayLine]]"
    is-image-diff="[[isImageDiff]]"
    commit-range="[[commitRange]]"
    hidden$="[[hidden]]"
    no-render-on-prefs-change="[[noRenderOnPrefsChange]]"
    line-wrapping="[[lineWrapping]]"
    view-mode="[[viewMode]]"
    line-of-interest="[[lineOfInterest]]"
    logged-in="[[_loggedIn]]"
    loading="[[_loading]]"
    error-message="[[_errorMessage]]"
    base-image="[[_baseImage]]"
    revision-image="[[_revisionImage]]"
    coverage-ranges="[[_coverageRanges]]"
    blame="[[_blame]]"
    layers="[[_layers]]"
    diff="[[diff]]"
    show-newline-warning-left="[[_showNewlineWarningLeft(diff)]]"
    show-newline-warning-right="[[_showNewlineWarningRight(diff)]]"
  >
  </gr-diff>
  <gr-syntax-layer
    id="syntaxLayer"
    enabled="[[_syntaxHighlightingEnabled]]"
    diff="[[diff]]"
  ></gr-syntax-layer>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-reporting id="reporting" category="diff"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,qC="SIDE_BY_SIDE",KC="Diff Total Render",YC="Diff Content Render",XC="Diff Syntax Render";function JC(e){if(!e)return!1;const t=e.meta_a&&e.meta_a.content_type.startsWith("image/"),n=e.meta_b&&e.meta_b.content_type.startsWith("image/");return!(!e.binary||!t&&!n)}class ZC extends(ra([vm],Zn(na(Ka)))){static get template(){return WC}static get is(){return"gr-diff-host"}static get properties(){return{changeNum:String,noAutoRender:{type:Boolean,value:!1},patchRange:Object,path:String,prefs:{type:Object},projectName:String,displayLine:{type:Boolean,value:!1},isImageDiff:{type:Boolean,computed:"_computeIsImageDiff(diff)",notify:!0},commitRange:Object,filesWeblinks:{type:Object,value:()=>({}),notify:!0},hidden:{type:Boolean,reflectToAttribute:!0},noRenderOnPrefsChange:{type:Boolean,value:!1},comments:{type:Object,observer:"_commentsChanged"},lineWrapping:{type:Boolean,value:!1},viewMode:{type:String,value:qC},lineOfInterest:Object,showLoadFailure:Boolean,isBlameLoaded:{type:Boolean,notify:!0,computed:"_computeIsBlameLoaded(_blame)"},_loggedIn:{type:Boolean,value:!1},_loading:{type:Boolean,value:!1},_errorMessage:{type:String,value:null},_baseImage:Object,_revisionImage:Object,diff:{type:Object,notify:!0},_blame:{type:Object,value:null},_coverageRanges:{type:Array,value:()=>[]},_loadedWhitespaceLevel:String,_parentIndex:{type:Number,computed:"_computeParentIndex(patchRange.*)"},_syntaxHighlightingEnabled:{type:Boolean,computed:"_isSyntaxHighlightingEnabled(prefs.*, diff)"},_layers:{type:Array,value:[]}}}static get observers(){return["_whitespaceChanged(prefs.ignore_whitespace, _loadedWhitespaceLevel, noRenderOnPrefsChange)","_syntaxHighlightingChanged(noRenderOnPrefsChange, prefs.*)"]}created(){super.created(),this.addEventListener("create-comment",e=>this._handleCreateComment(e)),this.addEventListener("comment-discard",e=>this._handleCommentDiscard(e)),this.addEventListener("comment-update",e=>this._handleCommentUpdate(e)),this.addEventListener("comment-save",e=>this._handleCommentSave(e)),this.addEventListener("render-start",()=>this._handleRenderStart()),this.addEventListener("render-content",()=>this._handleRenderContent()),this.addEventListener("normalize-range",e=>this._handleNormalizeRange(e)),this.addEventListener("diff-context-expanded",e=>this._handleDiffContextExpanded(e))}ready(){super.ready(),this._canReload()&&this.reload()}attached(){super.attached(),this._getLoggedIn().then(e=>{this._loggedIn=e})}reload(e){this._loading=!0,this._errorMessage=null;const t=this._getIgnoreWhitespace(),n=[this.$.syntaxLayer];for(const e of this.$.jsAPI.getDiffLayers(this.path,this.changeNum,this.patchNum))n.push(e);this._layers=n,e&&this._listenToViewportRender(),this._coverageRanges=[],this._getCoverageData();const i=this._getDiff().then(e=>(this._loadedWhitespaceLevel=t,this._reportDiff(e),e)).catch(e=>(this._handleGetDiffError(e),null)),s=i.then(e=>e?this._loadDiffAssets(e):null);return Promise.all([i,s]).then(t=>{const n=t[0];return n?(this.filesWeblinks=this._getFilesWeblinks(n),new Promise(t=>{const i=n=>{n.detail&&n.detail.contentRendered?(this.$.reporting.time(XC),this.$.syntaxLayer.process().then(()=>{this.$.reporting.timeEnd(XC),this.$.reporting.timeEnd(KC),t()})):(this.$.reporting.timeEnd(KC),t()),this.removeEventListener("render",i),e&&this.$.reporting.diffViewContentDisplayed()};this.addEventListener("render",i),this.diff=n})):Promise.resolve()}).catch(e=>{console.warn("Error encountered loading diff:",e)}).then(()=>{this._loading=!1})}_getCoverageData(){const{changeNum:e,path:t,patchRange:{basePatchNum:n,patchNum:i}}=this;this.$.jsAPI.getCoverageAnnotationApi().then(s=>{if(!s)return;return s.getCoverageProvider()(e,t,n,i).then(a=>{if(!a||e!==this.changeNum||t!==this.path||n!==this.patchRange.basePatchNum||i!==this.patchRange.patchNum)return;const o=this._coverageRanges;this._coverageRanges=a,o.forEach(e=>{s.notify(t,e.code_range.start_line,e.code_range.end_line,e.side)}),a.forEach(e=>{s.notify(t,e.code_range.start_line,e.code_range.end_line,e.side)})})}).catch(e=>{console.warn("Loading coverage ranges failed: ",e)})}_getFilesWeblinks(e){return this.commitRange?{meta_a:um.getFileWebLinks(this.projectName,this.commitRange.baseCommit,this.path,{weblinks:e&&e.meta_a&&e.meta_a.web_links}),meta_b:um.getFileWebLinks(this.projectName,this.commitRange.commit,this.path,{weblinks:e&&e.meta_b&&e.meta_b.web_links})}:{}}cancel(){this.$.diff.cancel()}getCursorStops(){return this.$.diff.getCursorStops()}isRangeSelected(){return this.$.diff.isRangeSelected()}createRangeComment(){return this.$.diff.createRangeComment()}toggleLeftDiff(){this.$.diff.toggleLeftDiff()}loadBlame(){return this.$.restAPI.getBlame(this.changeNum,this.patchRange.patchNum,this.path,!0).then(e=>{if(!e.length)return this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"No blame information for this diff."},composed:!0,bubbles:!0})),Promise.reject("No blame information for this diff.");this._blame=e})}clearBlame(){this._blame=null}getThreadEls(){return Array.from(Ui(this.$.diff).querySelectorAll(".comment-thread"))}addDraftAtLine(e){this.$.diff.addDraftAtLine(e)}clearDiffContent(){this.$.diff.clearDiffContent()}expandAllContext(){this.$.diff.expandAllContext()}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_canReload(){return!(!this.changeNum||!this.patchRange||!this.path||this.noAutoRender)}_getDiff(){return new Promise((e,t)=>{this.$.restAPI.getDiff(this.changeNum,this.patchRange.basePatchNum,this.patchRange.patchNum,this.path,this._getIgnoreWhitespace(),t).then(e)})}_handleGetDiffError(e){409!==e.status?this.showLoadFailure?this._errorMessage=["Encountered error when loading the diff:",e.status,e.statusText].join(" "):this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0})):this.dispatchEvent(new CustomEvent("server-error",{detail:{response:e},composed:!0,bubbles:!0}))}_reportDiff(e){if(!e||!e.content)return;let t=0,n=0;e.content.forEach(e=>{if(e.ab)return;const i=Math.max(e.a?e.a.length:0,e.b?e.b.length:0);e.due_to_rebase?n+=i:t+=i});const i=n+t,s=i?Math.round(100*n/i):0;"PARENT"===this.patchRange.basePatchNum?this.$.reporting.reportInteraction("diff-against-parent"):0===s?this.$.reporting.reportInteraction("rebase-percent-zero"):this.$.reporting.reportInteraction("rebase-percent-nonzero",{percentRebaseDelta:s})}_loadDiffAssets(e){return JC(e)?this._getImages(e).then(e=>{this._baseImage=e.baseImage,this._revisionImage=e.revisionImage}):(this._baseImage=null,this._revisionImage=null,Promise.resolve())}_computeIsImageDiff(e){return JC(e)}_commentsChanged(e){const t=[];for(const n of[wo.Side.LEFT,wo.Side.RIGHT]){for(const t of e[n])t.__commentSide=n;t.push(...e[n])}this._clearThreads();const n=this._createThreads(t);for(const e of n){const t=this._createThreadElement(e);this._attachThreadElement(t)}}_sortComments(e){return e.slice(0).sort((e,t)=>t.__draft&&!e.__draft?-1:e.__draft&&!t.__draft?1:sr.parseDate(e.updated)-sr.parseDate(t.updated))}_createThreads(e){const t=this._sortComments(e),n=[];for(const e of t){if(e.in_reply_to){const t=n.find(t=>t.comments.some(t=>t.id===e.in_reply_to));if(t){t.comments.push(e);continue}}const t={start_datetime:e.updated,comments:[e],commentSide:e.__commentSide,patchNum:e.patch_set,rootId:e.id||e.__draftID,lineNum:e.line,isOnParent:"PARENT"===e.side};e.range&&(t.range=Object.assign({},e.range)),n.push(t)}return n}_computeIsBlameLoaded(e){return!!e}_getImages(e){return this.$.restAPI.getImagesForDiff(this.changeNum,e,this.patchRange)}_handleCreateComment(e){const{lineNum:t,side:n,patchNum:i,isOnParent:s,range:a}=e.detail;this._getOrCreateThread(i,t,n,a,s).addOrEditDraft(t,a),this.$.reporting.recordDraftInteraction()}_getOrCreateThread(e,t,n,i,s){let a=this._getThreadEl(t,n,i);return a||(a=this._createThreadElement({comments:[],commentSide:n,patchNum:e,lineNum:t,range:i,isOnParent:s}),this._attachThreadElement(a)),a}_attachThreadElement(e){Ui(this.$.diff).appendChild(e)}_clearThreads(){for(const e of this.getThreadEls()){const t=Ui(e).parentNode;Ui(t).removeChild(e)}}_createThreadElement(e){const t=document.createElement("gr-comment-thread");t.className="comment-thread",t.setAttribute("slot",`${e.commentSide}-${e.lineNum}`),t.comments=e.comments,t.commentSide=e.commentSide,t.isOnParent=!!e.isOnParent,t.parentIndex=this._parentIndex,t.changeNum=this.changeNum,t.patchNum=e.patchNum,t.lineNum=e.lineNum;const n=t=>{e.rootId=t.detail.value};t.addEventListener("root-id-changed",n),t.path=this.path,t.projectName=this.projectName,t.range=e.range;const i=e=>{const t=e.currentTarget,s=Ui(t).parentNode;Ui(s).removeChild(t),t.removeEventListener("root-id-changed",n),t.removeEventListener("thread-discard",i)};return t.addEventListener("thread-discard",i),t}_getThreadEl(e,t,n){let i;if(t===wo.Side.LEFT)i={beforeNumber:e};else{if(t!==wo.Side.RIGHT)throw new Error(`Unknown side: ${t}`);i={afterNumber:e}}const s=this._filterThreadElsForLocation(this.getThreadEls(),i,t).filter((function(e){return _m(JSON.parse(e.getAttribute("range")),n)}));return s.length?s[0]:null}_filterThreadElsForLocation(e,t,n){const i=[];return n!==gm&&i.push((function(e){return e.getAttribute("comment-side")==mm&&e.getAttribute("line-num")==t.beforeNumber})),n!==mm&&i.push((function(e){return e.getAttribute("comment-side")==gm&&e.getAttribute("line-num")==t.afterNumber})),"FILE"!==t.afterNumber&&"FILE"!==t.beforeNumber||i.push((function(e){return e.getAttribute("comment-side")==n&&!e.getAttribute("line-num")})),e.filter(e=>i.some(t=>t(e)))}_getIgnoreWhitespace(){return this.prefs&&this.prefs.ignore_whitespace?this.prefs.ignore_whitespace:"IGNORE_NONE"}_whitespaceChanged(e,t,n){[e,t,n].some(e=>void 0===e)||e===t||n||this.reload()}_syntaxHighlightingChanged(e,t){[e,t].some(e=>void 0===e)||"prefs.syntax_highlighting"===t.path&&(e||this.reload())}_computeParentIndex(e){return this.isMergeParent(e.base.basePatchNum)?this.getParentIndex(e.base.basePatchNum):null}_handleCommentSave(e){const t=e.detail.comment,n=e.detail.comment.__commentSide,i=this._findDraftIndex(t,n);this.set(["comments",n,i],t),this._handleCommentSaveOrDiscard()}_handleCommentDiscard(e){const t=e.detail.comment;this._removeComment(t),this._handleCommentSaveOrDiscard()}_handleCommentUpdate(e){const t=e.detail.comment,n=e.detail.comment.__commentSide;let i=this._findCommentIndex(t,n);-1===i&&(i=this._findDraftIndex(t,n)),-1!==i?this.set(["comments",n,i],t):this.push(["comments",n],t)}_handleCommentSaveOrDiscard(){this.dispatchEvent(new CustomEvent("diff-comments-modified",{bubbles:!0,composed:!0}))}_removeComment(e){const t=e.__commentSide;this._removeCommentFromSide(e,t)}_removeCommentFromSide(e,t){let n=this._findCommentIndex(e,t);-1===n&&(n=this._findDraftIndex(e,t)),-1!==n&&this.splice("comments."+t,n,1)}_findCommentIndex(e,t){return e.id&&this.comments[t]?this.comments[t].findIndex(t=>t.id===e.id):-1}_findDraftIndex(e,t){return e.__draftID&&this.comments[t]?this.comments[t].findIndex(t=>t.__draftID===e.__draftID):-1}_isSyntaxHighlightingEnabled(e,t){return!!(e&&e.base&&e.base.syntax_highlighting&&t)&&(!this._anyLineTooLong(t)&&this.$.diff.getDiffLength(t)<=2e4)}_anyLineTooLong(e){return!!e&&e.content.some(e=>(e.ab?e.ab:(e.a||[]).concat(e.b||[])).some(e=>e.length>=500))}_listenToViewportRender(){const e=t=>{t>120&&(this.$.reporting.diffViewDisplayed(),this.$.syntaxLayer.removeListener(e))};this.$.syntaxLayer.addListener(e)}_handleRenderStart(){this.$.reporting.time(KC),this.$.reporting.time(YC)}_handleRenderContent(){this.$.reporting.timeEnd(YC)}_handleNormalizeRange(e){this.$.reporting.reportInteraction("normalize-range",{side:e.detail.side,lineNum:e.detail.lineNum})}_handleDiffContextExpanded(e){this.$.reporting.reportInteraction("diff-context-expanded",{numLines:e.detail.numLines})}_lastChunkForSide(e,t){if(!e.content.length)return null;let n,i=e.content.length;do{i--,n=e.content[i]}while(i>=0&&!n.ab&&(t&&(!n.a||!n.a.length)||!t&&(!n.b||!n.b.length)));return-1===i?null:n}_hasTrailingNewlines(e,t){const n=this._lastChunkForSide(e,t);if(!n)return null;let i;return i=n.ab?n.ab:t?n.a:n.b,""===i[i.length-1]}_showNewlineWarningLeft(e){return!1===this._hasTrailingNewlines(e,!0)}_showNewlineWarningRight(e){return!1===this._hasTrailingNewlines(e,!1)}}customElements.define(ZC.is,ZC);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const QC=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div id="diffPreferences" class="gr-form-styles">
    <section>
      <span class="title">Context</span>
      <span class="value">
        <gr-select id="contextSelect" bind-value="{{diffPrefs.context}}">
          <select
            on-keypress="_handleDiffPrefsChanged"
            on-change="_handleDiffPrefsChanged"
          >
            <option value="3">3 lines</option>
            <option value="10">10 lines</option>
            <option value="25">25 lines</option>
            <option value="50">50 lines</option>
            <option value="75">75 lines</option>
            <option value="100">100 lines</option>
            <option value="-1">Whole file</option>
          </select>
        </gr-select>
      </span>
    </section>
    <section>
      <span class="title">Fit to screen</span>
      <span class="value">
        <input
          id="lineWrappingInput"
          type="checkbox"
          checked$="[[diffPrefs.line_wrapping]]"
          on-change="_handleLineWrappingTap"
        />
      </span>
    </section>
    <section>
      <span class="title">Diff width</span>
      <span class="value">
        <iron-input
          type="number"
          prevent-invalid-input=""
          allowed-pattern="[0-9]"
          bind-value="{{diffPrefs.line_length}}"
          on-keypress="_handleDiffPrefsChanged"
          on-change="_handleDiffPrefsChanged"
        >
          <input
            is="iron-input"
            type="number"
            id="columnsInput"
            prevent-invalid-input=""
            allowed-pattern="[0-9]"
            bind-value="{{diffPrefs.line_length}}"
            on-keypress="_handleDiffPrefsChanged"
            on-change="_handleDiffPrefsChanged"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Tab width</span>
      <span class="value">
        <iron-input
          type="number"
          prevent-invalid-input=""
          allowed-pattern="[0-9]"
          bind-value="{{diffPrefs.tab_size}}"
          on-keypress="_handleDiffPrefsChanged"
          on-change="_handleDiffPrefsChanged"
        >
          <input
            is="iron-input"
            type="number"
            id="tabSizeInput"
            prevent-invalid-input=""
            allowed-pattern="[0-9]"
            bind-value="{{diffPrefs.tab_size}}"
            on-keypress="_handleDiffPrefsChanged"
            on-change="_handleDiffPrefsChanged"
          />
        </iron-input>
      </span>
    </section>
    <section hidden$="[[!diffPrefs.font_size]]">
      <span class="title">Font size</span>
      <span class="value">
        <iron-input
          type="number"
          prevent-invalid-input=""
          allowed-pattern="[0-9]"
          bind-value="{{diffPrefs.font_size}}"
          on-keypress="_handleDiffPrefsChanged"
          on-change="_handleDiffPrefsChanged"
        >
          <input
            is="iron-input"
            type="number"
            id="fontSizeInput"
            prevent-invalid-input=""
            allowed-pattern="[0-9]"
            bind-value="{{diffPrefs.font_size}}"
            on-keypress="_handleDiffPrefsChanged"
            on-change="_handleDiffPrefsChanged"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Show tabs</span>
      <span class="value">
        <input
          id="showTabsInput"
          type="checkbox"
          checked$="[[diffPrefs.show_tabs]]"
          on-change="_handleShowTabsTap"
        />
      </span>
    </section>
    <section>
      <span class="title">Show trailing whitespace</span>
      <span class="value">
        <input
          id="showTrailingWhitespaceInput"
          type="checkbox"
          checked$="[[diffPrefs.show_whitespace_errors]]"
          on-change="_handleShowTrailingWhitespaceTap"
        />
      </span>
    </section>
    <section>
      <span class="title">Syntax highlighting</span>
      <span class="value">
        <input
          id="syntaxHighlightInput"
          type="checkbox"
          checked$="[[diffPrefs.syntax_highlighting]]"
          on-change="_handleSyntaxHighlightTap"
        />
      </span>
    </section>
    <section>
      <span class="title">Automatically mark viewed files reviewed</span>
      <span class="value">
        <input
          id="automaticReviewInput"
          type="checkbox"
          checked$="[[!diffPrefs.manual_review]]"
          on-change="_handleAutomaticReviewTap"
        />
      </span>
    </section>
    <section>
      <div class="pref">
        <span class="title">Ignore Whitespace</span>
        <span class="value">
          <gr-select bind-value="{{diffPrefs.ignore_whitespace}}">
            <select
              on-keypress="_handleDiffPrefsChanged"
              on-change="_handleDiffPrefsChanged"
            >
              <option value="IGNORE_NONE">None</option>
              <option value="IGNORE_TRAILING">Trailing</option>
              <option value="IGNORE_LEADING_AND_TRAILING"
                >Leading &amp; trailing</option
              >
              <option value="IGNORE_ALL">All</option>
            </select>
          </gr-select>
        </span>
      </div>
    </section>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class eE extends(Zn(na(Ka))){static get template(){return QC}static get is(){return"gr-diff-preferences"}static get properties(){return{hasUnsavedChanges:{type:Boolean,notify:!0,value:!1},diffPrefs:Object}}loadData(){return this.$.restAPI.getDiffPreferences().then(e=>{this.diffPrefs=e})}_handleDiffPrefsChanged(){this.hasUnsavedChanges=!0}_handleLineWrappingTap(){this.set("diffPrefs.line_wrapping",this.$.lineWrappingInput.checked),this._handleDiffPrefsChanged()}_handleShowTabsTap(){this.set("diffPrefs.show_tabs",this.$.showTabsInput.checked),this._handleDiffPrefsChanged()}_handleShowTrailingWhitespaceTap(){this.set("diffPrefs.show_whitespace_errors",this.$.showTrailingWhitespaceInput.checked),this._handleDiffPrefsChanged()}_handleSyntaxHighlightTap(){this.set("diffPrefs.syntax_highlighting",this.$.syntaxHighlightInput.checked),this._handleDiffPrefsChanged()}_handleAutomaticReviewTap(){this.set("diffPrefs.manual_review",!this.$.automaticReviewInput.checked),this._handleDiffPrefsChanged()}save(){return this.$.restAPI.saveDiffPreferences(this.diffPrefs).then(e=>{this.hasUnsavedChanges=!1})}}customElements.define(eE.is,eE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tE=za`
  <style include="shared-styles">
    .diffHeader,
    .diffActions {
      padding: var(--spacing-l) var(--spacing-xl);
    }
    .diffHeader,
    .diffActions {
      background-color: var(--dialog-background-color);
    }
    .diffHeader {
      border-bottom: 1px solid var(--border-color);
      font-weight: var(--font-weight-bold);
    }
    .diffActions {
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: flex-end;
    }
    .diffPrefsOverlay gr-button {
      margin-left: var(--spacing-l);
    }
    div.edited:after {
      color: var(--deemphasized-text-color);
      content: ' *';
    }
    #diffPreferences {
      display: flex;
      padding: var(--spacing-s) var(--spacing-xl);
    }
  </style>
  <gr-overlay id="diffPrefsOverlay" with-backdrop="">
    <div class$="diffHeader [[_computeHeaderClass(_diffPrefsChanged)]]">
      Diff Preferences
    </div>
    <gr-diff-preferences
      id="diffPreferences"
      diff-prefs="{{_editableDiffPrefs}}"
      has-unsaved-changes="{{_diffPrefsChanged}}"
    ></gr-diff-preferences>
    <div class="diffActions">
      <gr-button id="cancelButton" link="" on-click="_handleCancelDiff">
        Cancel
      </gr-button>
      <gr-button
        id="saveButton"
        link=""
        primary=""
        on-click="_handleSaveDiffPreferences"
        disabled$="[[!_diffPrefsChanged]]"
      >
        Save
      </gr-button>
    </div>
  </gr-overlay>
`
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class nE extends(Zn(na(Ka))){static get template(){return tE}static get is(){return"gr-diff-preferences-dialog"}static get properties(){return{diffPrefs:Object,_editableDiffPrefs:Object,_diffPrefsChanged:Boolean}}getFocusStops(){return{start:this.$.diffPreferences.$.contextSelect,end:this.$.saveButton}}resetFocus(){this.$.diffPreferences.$.contextSelect.focus()}_computeHeaderClass(e){return e?"edited":""}_handleCancelDiff(e){e.stopPropagation(),this.$.diffPrefsOverlay.close()}open(){this._editableDiffPrefs=JSON.parse(JSON.stringify(this.diffPrefs)),this.$.diffPrefsOverlay.open().then(()=>{const e=this.getFocusStops();this.$.diffPrefsOverlay.setFocusStops(e),this.resetFocus()})}_handleSaveDiffPreferences(){this.diffPrefs=this._editableDiffPrefs,this.$.diffPreferences.save().then(()=>{this.dispatchEvent(new CustomEvent("reload-diff-preference",{composed:!0,bubbles:!1})),this.$.diffPrefsOverlay.close()})}}customElements.define(nE.is,nE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const iE=za`
  <style include="shared-styles">
    :host {
      align-items: center;
      display: flex;
      justify-content: flex-end;
    }
    #actions {
      margin-right: var(--spacing-l);
    }
    gr-button,
    gr-dropdown {
      --gr-button: {
        height: 1.8em;
      }
    }
    gr-dropdown {
      --gr-dropdown-item: {
        background-color: transparent;
        border: none;
        color: var(--link-color);
        text-transform: uppercase;
      }
    }
  </style>
  <gr-dropdown
    id="actions"
    items="[[_fileActions]]"
    down-arrow=""
    vertical-offset="20"
    on-tap-item="_handleActionTap"
    link=""
    >Actions</gr-dropdown
  >
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class sE extends(Zn(na(Ka))){static get template(){return iE}static get is(){return"gr-edit-file-controls"}static get properties(){return{filePath:String,_allFileActions:{type:Array,value:()=>Object.values(Ro.Actions)},_fileActions:{type:Array,computed:"_computeFileActions(_allFileActions)"}}}_handleActionTap(e){e.preventDefault(),e.stopPropagation(),this._dispatchFileAction(e.detail.id,this.filePath)}_dispatchFileAction(e,t){this.dispatchEvent(new CustomEvent("file-action-tap",{detail:{action:e,path:t},bubbles:!0,composed:!0}))}_computeFileActions(e){return e.map(e=>({name:e.label,id:e.id}))}}customElements.define(sE.is,sE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const aE=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    .row {
      align-items: center;
      border-top: 1px solid var(--border-color);
      display: flex;
      min-height: calc(var(--line-height-normal) + 2 * var(--spacing-s));
      padding: var(--spacing-xs) var(--spacing-l) var(--spacing-xs)
        calc(var(--spacing-l) - 0.35rem);
    }
    :host(.loading) .row {
      opacity: 0.5;
    }
    :host(.editMode) .hideOnEdit {
      display: none;
    }
    .showOnEdit {
      display: none;
    }
    :host(.editMode) .showOnEdit {
      display: initial;
    }
    .invisible {
      visibility: hidden;
    }
    .header-row {
      background-color: var(--background-color-secondary);
    }
    .controlRow {
      align-items: center;
      display: flex;
      height: 2.25em;
      justify-content: center;
    }
    .controlRow.invisible,
    .show-hide.invisible {
      display: none;
    }
    .reviewed,
    .status {
      align-items: center;
      display: inline-flex;
    }
    .reviewed,
    .status {
      display: inline-block;
      text-align: left;
      width: 1.5em;
    }
    .file-row {
      cursor: pointer;
    }
    .file-row.expanded {
      border-bottom: 1px solid var(--border-color);
      position: -webkit-sticky;
      position: sticky;
      top: 0;
      /* Has to visible above the diff view, and by default has a lower
         z-index. setting to 1 places it directly above. */
      z-index: 1;
    }
    .file-row:hover {
      background-color: var(--hover-background-color);
    }
    .file-row.selected {
      background-color: var(--selection-background-color);
    }
    .file-row.expanded,
    .file-row.expanded:hover {
      background-color: var(--expanded-background-color);
    }
    .path {
      cursor: pointer;
      flex: 1;
      /* Wrap it into multiple lines if too long. */
      white-space: normal;
      word-break: break-word;
    }
    .oldPath {
      color: var(--deemphasized-text-color);
    }
    .header-stats {
      text-align: center;
      min-width: 7.5em;
    }
    .stats {
      text-align: right;
      min-width: 7.5em;
    }
    .comments {
      padding-left: var(--spacing-l);
      min-width: 7.5em;
    }
    .row:not(.header-row) .stats,
    .total-stats {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      display: flex;
    }
    .sizeBars {
      margin-left: var(--spacing-m);
      min-width: 7em;
      text-align: center;
    }
    .sizeBars.hide {
      display: none;
    }
    .added,
    .removed {
      display: inline-block;
      min-width: 3.5em;
    }
    .added {
      color: var(--vote-text-color-recommended);
    }
    .removed {
      color: var(--vote-text-color-disliked);
      text-align: left;
      min-width: 4em;
      padding-left: var(--spacing-s);
    }
    .drafts {
      color: #c62828;
      font-weight: var(--font-weight-bold);
    }
    .show-hide {
      margin-left: var(--spacing-s);
      width: 1.9em;
    }
    .fileListButton {
      margin: var(--spacing-m);
    }
    .totalChanges {
      justify-content: flex-end;
      text-align: right;
    }
    .warning {
      color: var(--deemphasized-text-color);
    }
    input.show-hide {
      display: none;
    }
    label.show-hide {
      cursor: pointer;
      display: block;
      min-width: 2em;
    }
    gr-diff {
      display: block;
      overflow-x: auto;
    }
    .truncatedFileName {
      display: none;
    }
    .mobile {
      display: none;
    }
    .reviewed {
      margin-left: var(--spacing-xxl);
      width: 15em;
    }
    .reviewed label {
      color: var(--link-color);
      opacity: 0;
      justify-content: flex-end;
      width: 100%;
    }
    .reviewed label:hover {
      cursor: pointer;
      opacity: 100;
    }
    .row:focus {
      outline: none;
    }
    .row:hover .reviewed label,
    .row:focus .reviewed label,
    .row.expanded .reviewed label {
      opacity: 100;
    }
    .reviewed input {
      display: none;
    }
    .reviewedLabel {
      color: var(--deemphasized-text-color);
      margin-right: var(--spacing-l);
      opacity: 0;
    }
    .reviewedLabel.isReviewed {
      display: initial;
      opacity: 100;
    }
    .editFileControls {
      width: 7em;
    }
    .markReviewed,
    .pathLink {
      display: inline-block;
      margin: -2px 0;
      padding: var(--spacing-s) 0;
      text-decoration: none;
    }
    .pathLink:hover {
      text-decoration: underline;
    }

    /** copy on file path **/
    .pathLink gr-copy-clipboard,
    .oldPath gr-copy-clipboard {
      display: inline-block;
      visibility: hidden;
      vertical-align: bottom;
      text-decoration: none;
      --gr-button: {
        padding: 0px;
      }
    }
    .pathLink:hover gr-copy-clipboard,
    .oldPath:hover gr-copy-clipboard {
      visibility: visible;
    }

    /** small screen breakpoint: 768px */
    @media screen and (max-width: 55em) {
      .desktop {
        display: none;
      }
      .mobile {
        display: block;
      }
      .row.selected {
        background-color: var(--view-background-color);
      }
      .stats {
        display: none;
      }
      .reviewed,
      .status {
        justify-content: flex-start;
      }
      .reviewed {
        display: none;
      }
      .comments {
        min-width: initial;
      }
      .expanded .fullFileName,
      .truncatedFileName {
        display: inline;
      }
      .expanded .truncatedFileName,
      .fullFileName {
        display: none;
      }
    }
  </style>
  <div id="container" on-click="_handleFileListClick">
    <div class="header-row row">
      <div class="status"></div>
      <div class="path">File</div>
      <div class="comments">Comments</div>
      <div class="sizeBars">Size</div>
      <div class="header-stats">Delta</div>
      <template is="dom-if" if="[[_showDynamicColumns]]">
        <template
          is="dom-repeat"
          items="[[_dynamicHeaderEndpoints]]"
          as="headerEndpoint"
        >
          <gr-endpoint-decorator name$="[[headerEndpoint]]">
          </gr-endpoint-decorator>
        </template>
      </template>
      <!-- Empty div here exists to keep spacing in sync with file rows. -->
      <div class="reviewed hideOnEdit" hidden$="[[!_loggedIn]]"></div>
      <div class="editFileControls showOnEdit"></div>
      <div class="show-hide"></div>
    </div>

    <template
      is="dom-repeat"
      items="[[_shownFiles]]"
      id="files"
      as="file"
      initial-count="[[fileListIncrement]]"
      target-framerate="1"
    >
      [[_reportRenderedRow(index)]]
      <div class="stickyArea">
        <div
          class$="file-row row [[_computePathClass(file.__path, _expandedFiles.*)]]"
          data-file$="[[_computeFileData(file)]]"
          tabindex="-1"
        >
          <div
            class$="[[_computeClass('status', file.__path)]]"
            tabindex="0"
            title$="[[_computeFileStatusLabel(file.status)]]"
            aria-label$="[[_computeFileStatusLabel(file.status)]]"
          >
            [[_computeFileStatus(file.status)]]
          </div>
          <!-- TODO: Remove data-url as it appears its not used -->
          <span
            data-url="[[_computeDiffURL(change, patchRange, file.__path, editMode)]]"
            class="path"
          >
            <a
              class="pathLink"
              href$="[[_computeDiffURL(change, patchRange, file.__path, editMode)]]"
            >
              <span
                title$="[[computeDisplayPath(file.__path)]]"
                class="fullFileName"
              >
                [[computeDisplayPath(file.__path)]]
              </span>
              <span
                title$="[[computeDisplayPath(file.__path)]]"
                class="truncatedFileName"
              >
                [[computeTruncatedPath(file.__path)]]
              </span>
              <gr-copy-clipboard
                hide-input=""
                text="[[file.__path]]"
              ></gr-copy-clipboard>
            </a>
            <template is="dom-if" if="[[file.old_path]]">
              <div class="oldPath" title$="[[file.old_path]]">
                [[file.old_path]]
                <gr-copy-clipboard
                  hide-input=""
                  text="[[file.old_path]]"
                ></gr-copy-clipboard>
              </div>
            </template>
          </span>
          <div class="comments desktop">
            <span class="drafts">
              [[_computeDraftsString(changeComments, patchRange, file.__path)]]
            </span>
            [[_computeCommentsString(changeComments, patchRange, file.__path)]]
          </div>
          <div class="comments mobile">
            <span class="drafts">
              [[_computeDraftsStringMobile(changeComments, patchRange,
              file.__path)]]
            </span>
            [[_computeCommentsStringMobile(changeComments, patchRange,
            file.__path)]]
          </div>
          <div class$="[[_computeSizeBarsClass(_showSizeBars, file.__path)]]">
            <svg width="61" height="8">
              <rect
                x$="[[_computeBarAdditionX(file, _sizeBarLayout)]]"
                y="0"
                height="8"
                fill="#388E3C"
                width$="[[_computeBarAdditionWidth(file, _sizeBarLayout)]]"
              ></rect>
              <rect
                x$="[[_computeBarDeletionX(_sizeBarLayout)]]"
                y="0"
                height="8"
                fill="#D32F2F"
                width$="[[_computeBarDeletionWidth(file, _sizeBarLayout)]]"
              ></rect>
            </svg>
          </div>
          <div class$="[[_computeClass('stats', file.__path)]]">
            <span
              class="added"
              tabindex="0"
              aria-label$="[[file.lines_inserted]] lines added"
              hidden$="[[file.binary]]"
            >
              +[[file.lines_inserted]]
            </span>
            <span
              class="removed"
              tabindex="0"
              aria-label$="[[file.lines_deleted]] lines removed"
              hidden$="[[file.binary]]"
            >
              -[[file.lines_deleted]]
            </span>
            <span
              class$="[[_computeBinaryClass(file.size_delta)]]"
              hidden$="[[!file.binary]]"
            >
              [[_formatBytes(file.size_delta)]] [[_formatPercentage(file.size,
              file.size_delta)]]
            </span>
          </div>
          <template is="dom-if" if="[[_showDynamicColumns]]">
            <template
              is="dom-repeat"
              items="[[_dynamicContentEndpoints]]"
              as="contentEndpoint"
            >
              <div class$="[[_computeClass('', file.__path)]]">
                <gr-endpoint-decorator name="[[contentEndpoint]]">
                  <gr-endpoint-param name="changeNum" value="[[changeNum]]">
                  </gr-endpoint-param>
                  <gr-endpoint-param name="patchRange" value="[[patchRange]]">
                  </gr-endpoint-param>
                  <gr-endpoint-param name="path" value="[[file.__path]]">
                  </gr-endpoint-param>
                </gr-endpoint-decorator>
              </div>
            </template>
          </template>
          <div class="reviewed hideOnEdit" hidden$="[[!_loggedIn]]" hidden="">
            <span
              class$="reviewedLabel [[_computeReviewedClass(file.isReviewed)]]"
              >Reviewed</span
            >
            <label>
              <input
                class="reviewed"
                type="checkbox"
                checked="[[file.isReviewed]]"
              />
              <span
                class="markReviewed"
                title$="[[_reviewedTitle(file.isReviewed)]]"
                >[[_computeReviewedText(file.isReviewed)]]</span
              >
            </label>
          </div>
          <div class="editFileControls showOnEdit">
            <template is="dom-if" if="[[editMode]]">
              <gr-edit-file-controls
                class$="[[_computeClass('', file.__path)]]"
                file-path="[[file.__path]]"
              ></gr-edit-file-controls>
            </template>
          </div>
          <div class="show-hide">
            <label
              class="show-hide"
              data-path$="[[file.__path]]"
              data-expand="true"
            >
              <input
                type="checkbox"
                class="show-hide"
                checked$="[[_isFileExpanded(file.__path, _expandedFiles.*)]]"
                data-path$="[[file.__path]]"
                data-expand="true"
              />
              <iron-icon
                id="icon"
                icon="[[_computeShowHideIcon(file.__path, _expandedFiles.*)]]"
              >
              </iron-icon>
            </label>
          </div>
        </div>
        <template
          is="dom-if"
          if="[[_isFileExpanded(file.__path, _expandedFiles.*)]]"
        >
          <gr-diff-host
            no-auto-render=""
            show-load-failure=""
            display-line="[[_displayLine]]"
            hidden="[[!_isFileExpanded(file.__path, _expandedFiles.*)]]"
            change-num="[[changeNum]]"
            patch-range="[[patchRange]]"
            path="[[file.__path]]"
            prefs="[[diffPrefs]]"
            project-name="[[change.project]]"
            no-render-on-prefs-change=""
            view-mode="[[diffViewMode]]"
          ></gr-diff-host>
        </template>
      </div>
    </template>
  </div>
  <div class="row totalChanges" hidden$="[[_hideChangeTotals]]">
    <div class="total-stats">
      <span
        class="added"
        tabindex="0"
        aria-label$="[[_patchChange.inserted]] lines added"
      >
        +[[_patchChange.inserted]]
      </span>
      <span
        class="removed"
        tabindex="0"
        aria-label$="[[_patchChange.deleted]] lines removed"
      >
        -[[_patchChange.deleted]]
      </span>
    </div>
    <template is="dom-if" if="[[_showDynamicColumns]]">
      <template
        is="dom-repeat"
        items="[[_dynamicSummaryEndpoints]]"
        as="summaryEndpoint"
      >
        <gr-endpoint-decorator name="[[summaryEndpoint]]">
        </gr-endpoint-decorator>
      </template>
    </template>
    <!-- Empty div here exists to keep spacing in sync with file rows. -->
    <div class="reviewed hideOnEdit" hidden$="[[!_loggedIn]]"></div>
    <div class="editFileControls showOnEdit"></div>
    <div class="show-hide"></div>
  </div>
  <div class="row totalChanges" hidden$="[[_hideBinaryChangeTotals]]">
    <div class="total-stats">
      <span class="added" aria-label="Total lines added">
        [[_formatBytes(_patchChange.size_delta_inserted)]]
        [[_formatPercentage(_patchChange.total_size,
        _patchChange.size_delta_inserted)]]
      </span>
      <span class="removed" aria-label="Total lines removed">
        [[_formatBytes(_patchChange.size_delta_deleted)]]
        [[_formatPercentage(_patchChange.total_size,
        _patchChange.size_delta_deleted)]]
      </span>
    </div>
  </div>
  <div
    class$="row controlRow [[_computeFileListControlClass(numFilesShown, _files)]]"
  >
    <gr-button
      class="fileListButton"
      id="incrementButton"
      link=""
      on-click="_incrementNumFilesShown"
    >
      [[_computeIncrementText(numFilesShown, _files)]]
    </gr-button>
    <gr-tooltip-content
      has-tooltip="[[_computeWarnShowAll(_files)]]"
      show-icon="[[_computeWarnShowAll(_files)]]"
      title$="[[_computeShowAllWarning(_files)]]"
    >
      <gr-button
        class="fileListButton"
        id="showAllButton"
        link=""
        on-click="_showAllFiles"
      >
        [[_computeShowAllText(_files)]] </gr-button
      ><!--
  --></gr-tooltip-content>
  </div>
  <gr-diff-preferences-dialog
    id="diffPreferencesDialog"
    diff-prefs="{{diffPrefs}}"
    on-reload-diff-preference="_handleReloadingDiffPreference"
  >
  </gr-diff-preferences-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-storage id="storage"></gr-storage>
  <gr-diff-cursor id="diffCursor"></gr-diff-cursor>
  <gr-cursor-manager
    id="fileCursor"
    scroll-behavior="keep-visible"
    focus-on-move=""
    cursor-target-class="selected"
  ></gr-cursor-manager>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,oE={asyncForeach(e,t){if(!e.length)return Promise.resolve();let n=!1;return t(e[0],()=>{n=!0}).then(i=>n?Promise.resolve():this.asyncForeach(e.slice(1),t))}};window.Gerrit=window.Gerrit||{},window.Gerrit.AsyncForeachBehavior=oE;
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const rE={A:"Added",C:"Copied",D:"Deleted",M:"Modified",R:"Renamed",W:"Rewritten",U:"Unchanged"};class lE extends(ra([oE,AC,Wu,vm,Vg],Zn(na(Ka)))){static get template(){return aE}static get is(){return"gr-file-list"}static get properties(){return{patchRange:Object,patchNum:String,changeNum:String,changeComments:Object,drafts:Object,revisions:Array,projectConfig:Object,selectedIndex:{type:Number,notify:!0},keyEventTarget:{type:Object,value:()=>document.body},change:Object,diffViewMode:{type:String,notify:!0,observer:"_updateDiffPreferences"},editMode:{type:Boolean,observer:"_editModeChanged"},filesExpanded:{type:String,value:Lo.FilesExpandedState.NONE,notify:!0},_filesByPath:Object,_files:{type:Array,observer:"_filesChanged",value:()=>[]},_loggedIn:{type:Boolean,value:!1},_reviewed:{type:Array,value:()=>[]},diffPrefs:{type:Object,notify:!0,observer:"_updateDiffPreferences"},_userPrefs:Object,_showInlineDiffs:Boolean,numFilesShown:{type:Number,notify:!0},_patchChange:{type:Object,computed:"_calculatePatchChange(_files)"},fileListIncrement:Number,_hideChangeTotals:{type:Boolean,computed:"_shouldHideChangeTotals(_patchChange)"},_hideBinaryChangeTotals:{type:Boolean,computed:"_shouldHideBinaryChangeTotals(_patchChange)"},_shownFiles:{type:Array,computed:"_computeFilesShown(numFilesShown, _files)"},_reportinShownFilesIncrement:Number,_expandedFiles:{type:Array,value:()=>[]},_displayLine:Boolean,_loading:{type:Boolean,observer:"_loadingChanged"},_sizeBarLayout:{type:Object,computed:"_computeSizeBarLayout(_shownFiles.*)"},_showSizeBars:{type:Boolean,value:!0,computed:"_computeShowSizeBars(_userPrefs)"},_cancelForEachDiff:Function,_showDynamicColumns:{type:Boolean,computed:"_computeShowDynamicColumns(_dynamicHeaderEndpoints, _dynamicContentEndpoints, _dynamicSummaryEndpoints)"},_dynamicHeaderEndpoints:{type:Array},_dynamicContentEndpoints:{type:Array},_dynamicSummaryEndpoints:{type:Array}}}static get observers(){return["_expandedFilesChanged(_expandedFiles.splices)","_computeFiles(_filesByPath, changeComments, patchRange, _reviewed, _loading)"]}get keyBindings(){return{esc:"_handleEscKey"}}keyboardShortcuts(){return{[this.Shortcut.LEFT_PANE]:"_handleLeftPane",[this.Shortcut.RIGHT_PANE]:"_handleRightPane",[this.Shortcut.TOGGLE_INLINE_DIFF]:"_handleToggleInlineDiff",[this.Shortcut.TOGGLE_ALL_INLINE_DIFFS]:"_handleToggleAllInlineDiffs",[this.Shortcut.CURSOR_NEXT_FILE]:"_handleCursorNext",[this.Shortcut.CURSOR_PREV_FILE]:"_handleCursorPrev",[this.Shortcut.NEXT_LINE]:"_handleCursorNext",[this.Shortcut.PREV_LINE]:"_handleCursorPrev",[this.Shortcut.NEW_COMMENT]:"_handleNewComment",[this.Shortcut.OPEN_LAST_FILE]:"_handleOpenLastFile",[this.Shortcut.OPEN_FIRST_FILE]:"_handleOpenFirstFile",[this.Shortcut.OPEN_FILE]:"_handleOpenFile",[this.Shortcut.NEXT_CHUNK]:"_handleNextChunk",[this.Shortcut.PREV_CHUNK]:"_handlePrevChunk",[this.Shortcut.TOGGLE_FILE_REVIEWED]:"_handleToggleFileReviewed",[this.Shortcut.TOGGLE_LEFT_PANE]:"_handleToggleLeftPane",[this.Shortcut.EXPAND_ALL_COMMENT_THREADS]:null,[this.Shortcut.COLLAPSE_ALL_COMMENT_THREADS]:null}}created(){super.created(),this.addEventListener("keydown",e=>this._scopedKeydownHandler(e))}attached(){super.attached(),tr.awaitPluginsLoaded().then(()=>{this._dynamicHeaderEndpoints=ir.getDynamicEndpoints("change-view-file-list-header"),this._dynamicContentEndpoints=ir.getDynamicEndpoints("change-view-file-list-content"),this._dynamicSummaryEndpoints=ir.getDynamicEndpoints("change-view-file-list-summary"),this._dynamicHeaderEndpoints.length!==this._dynamicContentEndpoints.length&&console.warn("Different number of dynamic file-list header and content."),this._dynamicHeaderEndpoints.length!==this._dynamicSummaryEndpoints.length&&console.warn("Different number of dynamic file-list headers and summary.")})}detached(){super.detached(),this._cancelDiffs()}_scopedKeydownHandler(e){13===e.keyCode&&this._handleOpenFile(e)}reload(){if(!this.changeNum||!this.patchRange.patchNum)return Promise.resolve();this._loading=!0,this.collapseAllDiffs();const e=[];return e.push(this._getFiles().then(e=>{this._filesByPath=e})),e.push(this._getLoggedIn().then(e=>this._loggedIn=e).then(e=>{if(e)return this._getReviewedFiles().then(e=>{this._reviewed=e})})),e.push(this._getDiffPreferences().then(e=>{this.diffPrefs=e})),e.push(this._getPreferences().then(e=>{this._userPrefs=e})),Promise.all(e).then(()=>{this._loading=!1,this._detectChromiteButler(),this.$.reporting.fileListDisplayed()})}_detectChromiteButler(){!!document.getElementById("butler-suggested-owners")&&this.$.reporting.reportExtension("butler")}get diffs(){const e=Ui(this.root).querySelectorAll("gr-diff-host");return Array.from(e).filter(e=>!!e&&!!e.style&&"none"!==e.style.display)}openDiffPrefs(){this.$.diffPreferencesDialog.open()}_calculatePatchChange(e){return e.filter(e=>!this.isMagicPath(e.__path)).reduce((e,t)=>{const n=t.lines_inserted?t.lines_inserted:0,i=t.lines_deleted?t.lines_deleted:0,s=t.size&&t.binary?t.size:0,a=t.binary&&t.size_delta>0?t.size_delta:0,o=t.binary&&t.size_delta<0?t.size_delta:0;return{inserted:e.inserted+n,deleted:e.deleted+i,size_delta_inserted:e.size_delta_inserted+a,size_delta_deleted:e.size_delta_deleted+o,total_size:e.total_size+s}},{inserted:0,deleted:0,size_delta_inserted:0,size_delta_deleted:0,total_size:0})}_getDiffPreferences(){return this.$.restAPI.getDiffPreferences()}_getPreferences(){return this.$.restAPI.getPreferences()}_toggleFileExpanded(e){const t=this._expandedFiles.findIndex(t=>t.path===e.path);-1===t?this.push("_expandedFiles",e):this.splice("_expandedFiles",t,1)}_toggleFileExpandedByIndex(e){this._toggleFileExpanded(this._computeFileData(this._files[e]))}_updateDiffPreferences(){this.diffs.length&&(this.$.reporting.time("ExpandAllDiffs"),this._renderInOrder(this._expandedFiles,this.diffs,this._expandedFiles.length))}_forEachDiff(e){const t=this.diffs;for(let n=0;n<t.length;n++)e(t[n])}expandAllDiffs(){this._showInlineDiffs=!0;const e=[];let t;for(let n=0;n<this._shownFiles.length;n++)t=this._shownFiles[n].__path,this._expandedFiles.some(e=>e.path===t)||e.push(this._computeFileData(this._shownFiles[n]));this.splice(...["_expandedFiles",0,0].concat(e))}collapseAllDiffs(){this._showInlineDiffs=!1,this._expandedFiles=[],this.filesExpanded=this._computeExpandedFiles(this._expandedFiles.length,this._files.length),this.$.diffCursor.handleDiffUpdate()}_computeCommentsString(e,t,n){const i=e.computeUnresolvedNum({patchNum:t.basePatchNum,path:n})+e.computeUnresolvedNum({patchNum:t.patchNum,path:n}),s=e.computeCommentCount({patchNum:t.basePatchNum,path:n})+e.computeCommentCount({patchNum:t.patchNum,path:n}),a=Yr.computePluralString(s,"comment"),o=Yr.computeString(i,"unresolved");return a+(a&&o?" ":"")+(o?`(${o})`:"")}_computeDraftsString(e,t,n){const i=e.computeDraftCount({patchNum:t.basePatchNum,path:n})+e.computeDraftCount({patchNum:t.patchNum,path:n});return Yr.computePluralString(i,"draft")}_computeDraftsStringMobile(e,t,n){const i=e.computeDraftCount({patchNum:t.basePatchNum,path:n})+e.computeDraftCount({patchNum:t.patchNum,path:n});return Yr.computeShortString(i,"d")}_computeCommentsStringMobile(e,t,n){const i=e.computeCommentCount({patchNum:t.basePatchNum,path:n})+e.computeCommentCount({patchNum:t.patchNum,path:n});return Yr.computeShortString(i,"c")}_reviewFile(e,t){if(this.editMode)return;const n=this._files.findIndex(t=>t.__path===e),i=t||!this._files[n].isReviewed;this.set(["_files",n,"isReviewed"],i),n<this._shownFiles.length&&this.notifyPath(`_shownFiles.${n}.isReviewed`),this._saveReviewedState(e,i)}_saveReviewedState(e,t){return this.$.restAPI.saveFileReviewed(this.changeNum,this.patchRange.patchNum,e,t)}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_getReviewedFiles(){return this.editMode?Promise.resolve([]):this.$.restAPI.getReviewedFiles(this.changeNum,this.patchRange.patchNum)}_getFiles(){return this.$.restAPI.getChangeOrEditFiles(this.changeNum,this.patchRange)}_normalizeChangeFilesResponse(e){if(!e)return[];const t=Object.keys(e).sort(this.specialFilePathCompare),n=[];for(let i=0;i<t.length;i++){const s=e[t[i]];s.__path=t[i],s.lines_inserted=s.lines_inserted||0,s.lines_deleted=s.lines_deleted||0,s.size_delta=s.size_delta||0,n.push(s)}return n}_handleFileListClick(e){let t=e.target;for(;!t.classList.contains("row")&&t.parentElement;)t=t.parentElement;if(!t.dataset.file)return;const n=JSON.parse(t.dataset.file),i=n.path;if(e.target.classList.contains("markReviewed"))return e.preventDefault(),this._reviewFile(i);i&&!this.descendedFromClass(e.target,"pathLink")&&(this.descendedFromClass(e.target,"editFileControls")||(e.preventDefault(),this._toggleFileExpanded(n)))}_computeFileData(e){const t={path:e.__path};return e.old_path&&(t.oldPath=e.old_path),t}_handleLeftPane(e){this.shouldSuppressKeyboardShortcut(e)||this._noDiffsExpanded()||(e.preventDefault(),this.$.diffCursor.moveLeft())}_handleRightPane(e){this.shouldSuppressKeyboardShortcut(e)||this._noDiffsExpanded()||(e.preventDefault(),this.$.diffCursor.moveRight())}_handleToggleInlineDiff(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||-1===this.$.fileCursor.index||(e.preventDefault(),this._toggleFileExpandedByIndex(this.$.fileCursor.index))}_handleToggleAllInlineDiffs(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),this._toggleInlineDiffs())}_handleCursorNext(e){if(!this.shouldSuppressKeyboardShortcut(e)&&!this.modifierPressed(e))if(this._showInlineDiffs)e.preventDefault(),this.$.diffCursor.moveDown(),this._displayLine=!0;else{if(40===this.getKeyboardEvent(e).keyCode)return;e.preventDefault(),this.$.fileCursor.next(),this.selectedIndex=this.$.fileCursor.index}}_handleCursorPrev(e){if(!this.shouldSuppressKeyboardShortcut(e)&&!this.modifierPressed(e))if(this._showInlineDiffs)e.preventDefault(),this.$.diffCursor.moveUp(),this._displayLine=!0;else{if(38===this.getKeyboardEvent(e).keyCode)return;e.preventDefault(),this.$.fileCursor.previous(),this.selectedIndex=this.$.fileCursor.index}}_handleNewComment(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.diffCursor.createCommentInPlace())}_handleOpenLastFile(e){this.shouldSuppressKeyboardShortcut(e)||this.getKeyboardEvent(e).metaKey||(e.preventDefault(),this._openSelectedFile(this._files.length-1))}_handleOpenFirstFile(e){this.shouldSuppressKeyboardShortcut(e)||this.getKeyboardEvent(e).metaKey||(e.preventDefault(),this._openSelectedFile(0))}_handleOpenFile(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._showInlineDiffs?this._openCursorFile():this._openSelectedFile())}_handleNextChunk(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)&&!this.isModifierPressed(e,"shiftKey")||this._noDiffsExpanded()||(e.preventDefault(),this.isModifierPressed(e,"shiftKey")?this.$.diffCursor.moveToNextCommentThread():this.$.diffCursor.moveToNextChunk())}_handlePrevChunk(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)&&!this.isModifierPressed(e,"shiftKey")||this._noDiffsExpanded()||(e.preventDefault(),this.isModifierPressed(e,"shiftKey")?this.$.diffCursor.moveToPreviousCommentThread():this.$.diffCursor.moveToPreviousChunk())}_handleToggleFileReviewed(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._files[this.$.fileCursor.index]&&this._reviewFile(this._files[this.$.fileCursor.index].__path))}_handleToggleLeftPane(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),this._forEachDiff(e=>{e.toggleLeftDiff()}))}_toggleInlineDiffs(){this._showInlineDiffs?this.collapseAllDiffs():this.expandAllDiffs()}_openCursorFile(){const e=this.$.diffCursor.getTargetDiffElement();um.navigateToDiff(this.change,e.path,e.patchRange.patchNum,this.patchRange.basePatchNum)}_openSelectedFile(e){null!=e&&this.$.fileCursor.setCursorAtIndex(e),this._files[this.$.fileCursor.index]&&um.navigateToDiff(this.change,this._files[this.$.fileCursor.index].__path,this.patchRange.patchNum,this.patchRange.basePatchNum)}_addDraftAtTarget(){const e=this.$.diffCursor.getTargetDiffElement(),t=this.$.diffCursor.getTargetLineElement();e&&t&&e.addDraftAtLine(t)}_shouldHideChangeTotals(e){return 0===e.inserted&&0===e.deleted}_shouldHideBinaryChangeTotals(e){return 0===e.size_delta_inserted&&0===e.size_delta_deleted}_computeFileStatus(e){return e||"M"}_computeDiffURL(e,t,n,i){if(![e,t,n,i].some(e=>void 0===e))return i&&n!==this.MERGE_LIST_PATH?um.getEditUrlForDiff(e,n,t.patchNum,t.basePatchNum):um.getUrlForDiff(e,n,t.patchNum,t.basePatchNum)}_formatBytes(e){if(0==e)return"+/-0 B";const t=Math.floor(Math.log(Math.abs(e))/Math.log(1024));return(e>0?"+":"")+parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][t]}_formatPercentage(e,t){const n=e-t;return 0===n?"":"("+(t>0?"+":"-")+Math.round(Math.abs(100*t/n))+"%)"}_computeBinaryClass(e){if(0!==e)return e>=0?"added":"removed"}_computeClass(e,t){const n=[];return e&&n.push(e),t!==this.COMMIT_MESSAGE_PATH&&t!==this.MERGE_LIST_PATH||n.push("invisible"),n.join(" ")}_computePathClass(e,t){return this._isFileExpanded(e,t)?"expanded":""}_computeShowHideIcon(e,t){return this._isFileExpanded(e,t)?"gr-icons:expand-less":"gr-icons:expand-more"}_computeFiles(e,t,n,i,s){if([e,t,n,i,s].some(e=>void 0===e))return;if(s||!t)return;const a=t.getPaths(n),o=Object.assign({},e);Object.keys(a).forEach(e=>{o.hasOwnProperty(e)||(o[e]={status:"U"})});const r=new Set(i||[]);for(const e in o)o.hasOwnProperty(e)&&(o[e].isReviewed=r.has(e));this._files=this._normalizeChangeFilesResponse(o)}_computeFilesShown(e,t){if([e,t].some(e=>void 0===e))return;const n=this._shownFiles?this._shownFiles.length:0,i=t.slice(0,e);return this.dispatchEvent(new CustomEvent("files-shown-changed",{detail:{length:i.length},composed:!0,bubbles:!0})),this.$.reporting.time("FileListRenderTime"),this._reportinShownFilesIncrement=Math.max(0,i.length-n),i}_updateDiffCursor(){this.$.diffCursor.splice(...["diffs",0,this.$.diffCursor.diffs.length].concat(this.diffs))}_filesChanged(){if(this._files&&this._files.length>0){Ii();const e=Array.from(Ui(this.root).querySelectorAll(".file-row"));this.$.fileCursor.stops=e,this.$.fileCursor.setCursorAtIndex(this.selectedIndex,!0)}}_incrementNumFilesShown(){this.numFilesShown+=this.fileListIncrement}_computeFileListControlClass(e,t){return e>=t.length?"invisible":""}_computeIncrementText(e,t){if(!t)return"";return"Show "+Math.min(this.fileListIncrement,t.length-e)+" more"}_computeShowAllText(e){return e?"Show all "+e.length+" files":""}_computeWarnShowAll(e){return e.length>1e3}_computeShowAllWarning(e){return this._computeWarnShowAll(e)?"Warning: showing all "+e.length+" files may take several seconds.":""}_showAllFiles(){this.numFilesShown=this._files.length}_computePatchSetDescription(e,t){if([e,t].some(e=>void 0===e))return"";const n=this.getRevisionByPatchNum(e,t);return n&&n.description?n.description.substring(0,500):""}_computeFileStatusLabel(e){const t=this._computeFileStatus(e);return rE.hasOwnProperty(t)?rE[t]:"Status Unknown"}_isFileExpanded(e,t){return t.base.some(t=>t.path===e)}_computeExpandedFiles(e,t){return 0===e?Lo.FilesExpandedState.NONE:e===t?Lo.FilesExpandedState.ALL:Lo.FilesExpandedState.SOME}_expandedFilesChanged(e){const t=this.diffs.filter(e=>-1===this._expandedFiles.findIndex(t=>t.path===e.path));if(this._clearCollapsedDiffs(t),!e)return;this.filesExpanded=this._computeExpandedFiles(this._expandedFiles.length,this._files.length);const n=e.indexSplices.map(e=>e.object.slice(e.index,e.index+e.addedCount)).reduce((e,t)=>e.concat(t),[]);Ii(),this.$.reporting.time("ExpandAllDiffs"),n.length&&this._renderInOrder(n,this.diffs,n.length),this._updateDiffCursor(),this.$.diffCursor.handleDiffUpdate()}_clearCollapsedDiffs(e){for(const t of e)t.cancel(),t.clearDiffContent()}_renderInOrder(e,t,n){let i=0;return new Promise(e=>{this.dispatchEvent(new CustomEvent("reload-drafts",{detail:{resolve:e},composed:!0,bubbles:!0}))}).then(()=>this.asyncForeach(e,(e,s)=>{const a=e.path;this._cancelForEachDiff=s,i++,console.log("Expanding diff",i,"of",n,":",a);const o=this._findDiffByPath(a,t);if(!o)return console.warn(`Did not find <gr-diff-host> element for ${a}`),Promise.resolve();o.comments=this.changeComments.getCommentsBySideForFile(e,this.patchRange,this.projectConfig);const r=[o.reload()];return this._loggedIn&&!this.diffPrefs.manual_review&&r.push(this._reviewFile(a,!0)),Promise.all(r)}).then(()=>{this._cancelForEachDiff=null,this._nextRenderParams=null,console.log("Finished expanding",n,"diff(s)"),this.$.reporting.timeEndWithAverage("ExpandAllDiffs","ExpandAllPerDiff",n),this.$.diffCursor.handleDiffUpdate()}))}_cancelDiffs(){this._cancelForEachDiff&&this._cancelForEachDiff(),this._forEachDiff(e=>e.cancel())}_findDiffByPath(e,t){for(let n=0;n<t.length;n++)if(t[n].path===e)return t[n]}reloadCommentsForThreadWithRootId(e,t){if(!this._expandedFiles.some(e=>e.path===t))return;const n=this.diffs.find(e=>e.path===t).getThreadEls().find(t=>t.rootId===e);if(!n)return;const i=this.changeComments.getCommentsForThread(e);i?(n.comments=i.map(e=>Object.assign(e,{__commentSide:n.commentSide})),Ii()):n.fireRemoveSelf()}_handleEscKey(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._displayLine=!1)}_loadingChanged(e){this.debounce("loading-change",()=>{this.classList.toggle("loading",e&&!!this._files.length)},100)}_editModeChanged(e){this.classList.toggle("editMode",e)}_computeReviewedClass(e){return e?"isReviewed":""}_computeReviewedText(e){return e?"MARK UNREVIEWED":"MARK REVIEWED"}_showBarsForPath(e){return e!==this.COMMIT_MESSAGE_PATH&&e!==this.MERGE_LIST_PATH}_computeSizeBarLayout(e){if(!e||!e.base)return;const t={maxInserted:0,maxDeleted:0,maxAdditionWidth:0,maxDeletionWidth:0,deletionOffset:0};e.base.filter(e=>this._showBarsForPath(e.__path)).forEach(e=>{e.lines_inserted&&(t.maxInserted=Math.max(t.maxInserted,e.lines_inserted)),e.lines_deleted&&(t.maxDeleted=Math.max(t.maxDeleted,e.lines_deleted))});const n=t.maxInserted/(t.maxInserted+t.maxDeleted);return isNaN(n)||(t.maxAdditionWidth=60*n,t.maxDeletionWidth=60-t.maxAdditionWidth,t.deletionOffset=t.maxAdditionWidth+1),t}_computeBarAdditionWidth(e,t){if(0===t.maxInserted||!e.lines_inserted||!this._showBarsForPath(e.__path))return 0;const n=t.maxAdditionWidth*e.lines_inserted/t.maxInserted;return 0===n?0:Math.max(1.5,n)}_computeBarAdditionX(e,t){return t.maxAdditionWidth-this._computeBarAdditionWidth(e,t)}_computeBarDeletionWidth(e,t){if(0===t.maxDeleted||!e.lines_deleted||!this._showBarsForPath(e.__path))return 0;const n=t.maxDeletionWidth*e.lines_deleted/t.maxDeleted;return 0===n?0:Math.max(1.5,n)}_computeBarDeletionX(e){return e.deletionOffset}_computeShowSizeBars(e){return!!e.size_bar_in_change_table}_computeSizeBarsClass(e,t){let n="";return e?this._showBarsForPath(t)||(n="invisible"):n="hide",`sizeBars desktop ${n}`}_computeShowDynamicColumns(e,t,n){return e&&t&&n&&e.length===t.length&&e.length===n.length}_noDiffsExpanded(){return this.filesExpanded===Lo.FilesExpandedState.NONE}_reportRenderedRow(e){return e===this._shownFiles.length-1&&this.async(()=>{this.$.reporting.timeEndWithAverage("FileListRenderTime","FileListRenderTimePerFile",this._reportinShownFilesIncrement)},1),""}_reviewedTitle(e){return e?"Mark as not reviewed (shortcut: r)":"Mark as reviewed (shortcut: r)"}_handleReloadingDiffPreference(){this._getDiffPreferences().then(e=>{this.diffPrefs=e})}}customElements.define(lE.is,lE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cE=za`
  <style include="shared-styles">
    :host {
      background-color: var(--dialog-background-color);
      display: block;
      max-height: 80vh;
      overflow-y: auto;
      padding: 4.5em var(--spacing-l) var(--spacing-l) var(--spacing-l);
    }
    header {
      background-color: var(--dialog-background-color);
      border-bottom: 1px solid var(--border-color);
      left: 0;
      padding: var(--spacing-l);
      position: absolute;
      right: 0;
      top: 0;
    }
    #title {
      display: inline-block;
      font-family: var(--header-font-family);
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-h3);
      line-height: var(--line-height-h3);
      margin-top: var(--spacing-xs);
    }
    #filterInput {
      display: inline-block;
      float: right;
      margin: 0 var(--spacing-l);
      padding: var(--spacing-xs);
    }
    .closeButtonContainer {
      float: right;
    }
    ul {
      margin-bottom: var(--spacing-l);
    }
    ul li {
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      background: var(--chip-background-color);
      display: inline-block;
      margin: 0 var(--spacing-xs) var(--spacing-s) var(--spacing-xs);
      padding: var(--spacing-xs) var(--spacing-s);
    }
    .loading.loaded {
      display: none;
    }
  </style>
  <header>
    <h1 id="title">Included In:</h1>
    <span class="closeButtonContainer">
      <gr-button id="closeButton" link="" on-click="_handleCloseTap"
        >Close</gr-button
      >
    </span>
    <iron-input placeholder="Filter" on-bind-value-changed="_onFilterChanged">
      <input
        id="filterInput"
        is="iron-input"
        placeholder="Filter"
        on-bind-value-changed="_onFilterChanged"
      />
    </iron-input>
  </header>
  <div class$="[[_computeLoadingClass(_loaded)]]">Loading...</div>
  <template
    is="dom-repeat"
    items="[[_computeGroups(_includedIn, _filterText)]]"
    as="group"
  >
    <div>
      <span>[[group.title]]:</span>
      <ul>
        <template is="dom-repeat" items="[[group.items]]">
          <li>[[item]]</li>
        </template>
      </ul>
    </div>
  </template>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class dE extends(Zn(na(Ka))){static get template(){return cE}static get is(){return"gr-included-in-dialog"}static get properties(){return{changeNum:{type:Object,observer:"_resetData"},_includedIn:Object,_loaded:{type:Boolean,value:!1},_filterText:{type:String,value:""}}}loadData(){if(this.changeNum)return this._filterText="",this.$.restAPI.getChangeIncludedIn(this.changeNum).then(e=>{e&&(this._includedIn=e,this._loaded=!0)})}_resetData(){this._includedIn=null,this._loaded=!1}_computeGroups(e,t){if(!e)return[];const n=e=>!t.length||-1!==e.toLowerCase().indexOf(t.toLowerCase()),i=[{title:"Branches",items:e.branches.filter(n)},{title:"Tags",items:e.tags.filter(n)}];if(e.external)for(const t of Object.keys(e.external))i.push({title:t,items:e.external[t].filter(n)});return i.filter(e=>e.items.length)}_handleCloseTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!1}))}_computeLoadingClass(e){return e?"loading loaded":"loading"}_onFilterChanged(){this.debounce("filter-change",()=>{this._filterText=this.$.filterInput.bindValue},100)}}customElements.define(dE.is,dE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hE=za`
  <style include="shared-styles">
    :host {
      display: block;
      word-wrap: break-word;
    }
    .file {
      padding: var(--spacing-s) 0;
    }
    .container {
      display: flex;
      padding: var(--spacing-s) 0;
    }
    .lineNum {
      margin-right: var(--spacing-s);
      min-width: 135px;
      text-align: right;
    }
    .message {
      flex: 1;
      --gr-formatted-text-prose-max-width: 80ch;
    }
    @media screen and (max-width: 50em) {
      .container {
        flex-direction: column;
      }
      .lineNum {
        margin-right: 0;
        min-width: initial;
        text-align: left;
      }
    }
  </style>
  <template
    is="dom-repeat"
    items="[[_computeFilesFromComments(comments)]]"
    as="file"
  >
    <div class="file">
      <a class="fileLink" href="[[_computeDiffURL(file, changeNum, comments)]]"
        >[[computeDisplayPath(file)]]</a
      >
    </div>
    <template
      is="dom-repeat"
      items="[[_computeCommentsForFile(comments, file)]]"
      as="comment"
    >
      <div class="container">
        <a
          class="lineNum"
          href$="[[_computeDiffLineURL(file, changeNum, comment.patch_set, comment)]]"
        >
          <span hidden$="[[!comment.line]]">
            <span>[[_computePatchDisplayName(comment)]]</span>
            Line <span>[[comment.line]]</span>
          </span>
          <span hidden$="[[comment.line]]">
            File comment:
          </span>
        </a>
        <gr-formatted-text
          class="message"
          no-trailing-margin=""
          content="[[comment.message]]"
          config="[[projectConfig.commentlinks]]"
        ></gr-formatted-text>
      </div>
    </template>
  </template>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class pE extends(ra([Go,Vg,L_],Zn(na(Ka)))){static get template(){return hE}static get is(){return"gr-comment-list"}static get properties(){return{changeNum:Number,comments:Object,patchNum:Number,projectName:String,projectConfig:Object}}_computeFilesFromComments(e){return Object.keys(e||{}).sort(this.specialFilePathCompare)}_isOnParent(e){return"PARENT"===e.side}_computeDiffURL(e,t,n){if([e,t,n].some(e=>void 0===e))return;const i=this._computeCommentsForFile(n,e);return 0!==i.length?um.getUrlForDiffById(t,this.projectName,e,i[0].patch_set):void 0}_computeDiffLineURL(e,t,n,i){const s=i.hasOwnProperty("parent")?-i.parent:null;return um.getUrlForDiffById(t,this.projectName,e,n,s,i.line,this._isOnParent(i))}_computeCommentsForFile(e,t){return(e[t]||[]).slice()}_computePatchDisplayName(e){return this._isOnParent(e)?"Base, ":e.patch_set!=this.patchNum?`PS${e.patch_set}, `:""}}customElements.define(pE.is,pE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const uE=za`
  <style include="gr-voting-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    :host {
      display: block;
      position: relative;
      cursor: pointer;
      overflow-y: hidden;
    }
    :host(.expanded) {
      cursor: auto;
    }
    .collapsed .contentContainer {
      align-items: center;
      color: var(--deemphasized-text-color);
      display: flex;
      white-space: nowrap;
    }
    .contentContainer {
      padding: var(--spacing-m) var(--spacing-l);
    }
    .collapsed .contentContainer {
      /* For expanded state we inherit the alternating background color
           that is set in gr-messages-list. */
      background-color: var(--background-color-primary);
    }
    .name {
      font-weight: var(--font-weight-bold);
    }
    .message {
      --gr-formatted-text-prose-max-width: 80ch;
    }
    .collapsed .message {
      max-width: none;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .collapsed .author,
    .collapsed .content,
    .collapsed .message,
    .collapsed .updateCategory,
    gr-account-chip {
      display: inline;
    }
    gr-button {
      margin: 0 -4px;
    }
    .collapsed gr-comment-list,
    .collapsed .replyBtn,
    .collapsed .deleteBtn,
    .collapsed .hideOnCollapsed,
    .hideOnOpen {
      display: none;
    }
    .replyBtn {
      margin-right: var(--spacing-m);
    }
    .collapsed .hideOnOpen {
      display: block;
    }
    .collapsed .content {
      flex: 1;
      margin-right: var(--spacing-m);
      min-width: 0;
      overflow: hidden;
    }
    .collapsed .content.messageContent {
      text-overflow: ellipsis;
    }
    .collapsed .dateContainer {
      position: static;
    }
    .collapsed .author {
      overflow: hidden;
      color: var(--primary-text-color);
      margin-right: var(--spacing-s);
    }
    .authorLabel {
      min-width: 160px;
      display: inline-block;
    }
    .expanded .author {
      cursor: pointer;
      margin-bottom: var(--spacing-m);
    }
    .expanded .content {
      padding-left: 40px;
    }
    .dateContainer {
      position: absolute;
      /* right and top values should match .contentContainer padding */
      right: var(--spacing-l);
      top: var(--spacing-m);
    }
    .dateContainer .patchset {
      margin-right: var(--spacing-m);
      color: var(--deemphasized-text-color);
    }
    .dateContainer .patchset:before {
      content: 'Patchset ';
    }
    span.date {
      color: var(--deemphasized-text-color);
    }
    span.date:hover {
      text-decoration: underline;
    }
    .dateContainer iron-icon {
      cursor: pointer;
      vertical-align: top;
    }
    .score {
      border-radius: var(--border-radius);
      color: var(--primary-text-color);
      display: inline-block;
      padding: 0 var(--spacing-s);
      text-align: center;
    }
    .score,
    .commentsSummary {
      margin-right: var(--spacing-s);
      min-width: 115px;
    }
    .expanded .commentsSummary {
      display: none;
    }
    .commentsIcon {
      vertical-align: top;
    }
    .score.removed {
      background-color: var(--vote-color-neutral);
    }
    .score.negative {
      background-color: var(--vote-color-disliked);
    }
    .score.negative.min {
      background-color: var(--vote-color-rejected);
    }
    .score.positive {
      background-color: var(--vote-color-recommended);
    }
    .score.positive.max {
      background-color: var(--vote-color-approved);
    }
    gr-account-label {
      --gr-account-label-text-style: {
        font-weight: var(--font-weight-bold);
      }
    }
    @media screen and (max-width: 50em) {
      .expanded .content {
        padding-left: 0;
      }
      .score,
      .commentsSummary,
      .authorLabel {
        min-width: 0px;
      }
      .dateContainer .patchset:before {
        content: 'PS ';
      }
    }
  </style>
  <div class$="[[_computeClass(_expanded)]]">
    <div class="contentContainer">
      <div class="author" on-click="_handleAuthorClick">
        <span hidden$="[[!showOnBehalfOf]]">
          <span class="name">[[message.real_author.name]]</span>
          on behalf of
        </span>
        <gr-account-label
          account="[[author]]"
          class="authorLabel"
        ></gr-account-label>
        <template
          is="dom-repeat"
          items="[[_getScores(message, labelExtremes)]]"
          as="score"
        >
          <span class$="score [[_computeScoreClass(score, labelExtremes)]]">
            [[score.label]] [[score.value]]
          </span>
        </template>
      </div>
      <template is="dom-if" if="[[_commentCountText]]">
        <div class="commentsSummary">
          <iron-icon icon="gr-icons:comment" class="commentsIcon"></iron-icon>
          <span class="numberOfComments">[[_commentCountText]]</span>
        </div>
      </template>
      <template is="dom-if" if="[[message.message]]">
        <div class="content messageContent">
          <div class="message hideOnOpen">[[_messageContentCollapsed]]</div>
          <gr-formatted-text
            no-trailing-margin=""
            class="message hideOnCollapsed"
            content="[[_messageContentExpanded]]"
            config="[[_projectConfig.commentlinks]]"
          ></gr-formatted-text>
          <template is="dom-if" if="[[_messageContentExpanded]]">
            <div
              class="replyActionContainer"
              hidden$="[[!showReplyButton]]"
              hidden=""
            >
              <gr-button
                class="replyBtn"
                link=""
                small=""
                on-click="_handleReplyTap"
              >
                Reply
              </gr-button>
              <gr-button
                disabled$="[[_isDeletingChangeMsg]]"
                class="deleteBtn"
                hidden$="[[!_isAdmin]]"
                hidden=""
                link=""
                small=""
                on-click="_handleDeleteMessage"
              >
                Delete
              </gr-button>
            </div>
          </template>
          <gr-comment-list
            comments="[[comments]]"
            change-num="[[changeNum]]"
            patch-num="[[message._revision_number]]"
            project-name="[[projectName]]"
            project-config="[[_projectConfig]]"
          ></gr-comment-list>
        </div>
      </template>
      <template is="dom-if" if="[[_computeIsReviewerUpdate(message)]]">
        <div class="content">
          <template is="dom-repeat" items="[[message.updates]]" as="update">
            <div class="updateCategory">
              [[update.message]]
              <template
                is="dom-repeat"
                items="[[update.reviewers]]"
                as="reviewer"
              >
                <gr-account-chip account="[[reviewer]]"> </gr-account-chip>
              </template>
            </div>
          </template>
        </div>
      </template>
      <span class="dateContainer">
        <template is="dom-if" if="[[message._revision_number]]">
          <span class="patchset">[[message._revision_number]]</span>
        </template>
        <template is="dom-if" if="[[!message.id]]">
          <span class="date">
            <gr-date-formatter
              has-tooltip=""
              show-date-and-time=""
              date-str="[[message.date]]"
            ></gr-date-formatter>
          </span>
        </template>
        <template is="dom-if" if="[[message.id]]">
          <span class="date" on-click="_handleAnchorClick">
            <gr-date-formatter
              has-tooltip=""
              show-date-and-time=""
              date-str="[[message.date]]"
            ></gr-date-formatter>
          </span>
        </template>
        <iron-icon
          id="expandToggle"
          on-click="_toggleExpanded"
          title="Toggle expanded state"
          icon="[[_computeExpandToggleIcon(_expanded)]]"
        ></iron-icon>
      </span>
    </div>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,mE=/^Patch Set \d+:\s*(.*)/,gE=/^(-?)([A-Za-z0-9-]+?)([+-]\d+)?$/;class _E extends(Zn(na(Ka))){static get template(){return uE}static get is(){return"gr-message"}static get properties(){return{changeNum:Number,message:Object,author:{type:Object,computed:"_computeAuthor(message)"},comments:{type:Object},config:Object,hideAutomated:{type:Boolean,value:!1},hidden:{type:Boolean,computed:"_computeIsHidden(hideAutomated, isAutomated)",reflectToAttribute:!0},isAutomated:{type:Boolean,computed:"_computeIsAutomated(message)"},showOnBehalfOf:{type:Boolean,computed:"_computeShowOnBehalfOf(message)"},showReplyButton:{type:Boolean,computed:"_computeShowReplyButton(message, _loggedIn)"},projectName:{type:String,observer:"_projectNameChanged"},labelExtremes:Object,_projectConfig:Object,_expanded:{type:Object,computed:"_computeExpanded(message.expanded)"},_messageContentExpanded:{type:String,computed:"_computeMessageContentExpanded(message.message, message.tag)"},_messageContentCollapsed:{type:String,computed:"_computeMessageContentCollapsed(message.message, message.tag)"},_commentCountText:{type:Number,computed:"_computeCommentCountText(comments)"},_loggedIn:{type:Boolean,value:!1},_isAdmin:{type:Boolean,value:!1},_isDeletingChangeMsg:{type:Boolean,value:!1}}}static get observers(){return["_updateExpandedClass(message.expanded)"]}created(){super.created(),this.addEventListener("click",e=>this._handleClick(e))}ready(){super.ready(),this.$.restAPI.getConfig().then(e=>{this.config=e}),this.$.restAPI.getLoggedIn().then(e=>{this._loggedIn=e}),this.$.restAPI.getIsAdmin().then(e=>{this._isAdmin=e})}_updateExpandedClass(e){e?this.classList.add("expanded"):this.classList.remove("expanded")}_computeCommentCountText(e){if(!e)return;let t=0;for(const n in e)if(e.hasOwnProperty(n)){t+=(e[n]||[]).length}return 0===t?void 0:1===t?"1 comment":`${t} comments`}_computeMessageContentExpanded(e,t){return this._computeMessageContent(e,t,!0)}_computeMessageContentCollapsed(e,t){return this._computeMessageContent(e,t,!1)}_computeMessageContent(e,t,n){e=e||"";const i=(t=t||"").endsWith(":newPatchSet")||t.endsWith(":newWipPatchSet");return e.split("\n").filter(e=>!(!n&&e.startsWith(">"))&&((!e.startsWith("(")||!e.endsWith(" comment)"))&&((!e.startsWith("(")||!e.endsWith(" comments)"))&&!(!i&&e.match(mE))))).map(e=>(i&&(e=e.replace(mE,"$1")),e)).join("\n").trim()}_computeAuthor(e){return e.author||e.updated_by}_computeShowOnBehalfOf(e){const t=e.author||e.updated_by;return!(!t||!e.real_author||t._account_id==e.real_author._account_id)}_computeShowReplyButton(e,t){return e&&!!e.message&&t&&!this._computeIsAutomated(e)}_computeExpanded(e){return e}_handleClick(e){this.message.expanded||(e.stopPropagation(),this.set("message.expanded",!0))}_handleAuthorClick(e){this.message.expanded&&(e.stopPropagation(),this.set("message.expanded",!1))}_computeIsAutomated(e){return!!(e.reviewer||this._computeIsReviewerUpdate(e)||e.tag&&e.tag.startsWith("autogenerated"))}_computeIsHidden(e,t){return e&&t}_computeIsReviewerUpdate(e){return"REVIEWER_UPDATE"===e.type}_getScores(e,t){if(!e||!e.message||!t)return[];const n=e.message.split("\n",1)[0],i=mE;if(!n.match(i))return[];const s=n.split(i)[1];return s?s.split(" ").map(e=>e.match(gE)).filter(e=>e&&4===e.length&&t.hasOwnProperty(e[2])).map(e=>({label:e[2],value:"-"===e[1]?"removed":e[3]})):[]}_computeScoreClass(e,t){if([e,t].some(e=>void 0===e))return"";if("removed"===e.value)return"removed";const n=[];e.value>0?n.push("positive"):e.value<0&&n.push("negative");const i=t[e.label];if(i){const t=parseInt(e.value,10);t===i.max?n.push("max"):t===i.min&&n.push("min")}return n.join(" ")}_computeClass(e){const t=[];return t.push(e?"expanded":"collapsed"),t.join(" ")}_handleAnchorClick(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("message-anchor-tap",{bubbles:!0,composed:!0,detail:{id:this.message.id}}))}_handleReplyTap(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("reply",{detail:{message:this.message},composed:!0,bubbles:!0}))}_handleDeleteMessage(e){e.preventDefault(),this.message&&this.message.id&&(this._isDeletingChangeMsg=!0,this.$.restAPI.deleteChangeCommitMessage(this.changeNum,this.message.id).then(()=>{this._isDeletingChangeMsg=!1,this.dispatchEvent(new CustomEvent("change-message-deleted",{detail:{message:this.message},composed:!0,bubbles:!0}))}))}_projectNameChanged(e){this.$.restAPI.getProjectConfig(e).then(e=>{this._projectConfig=e})}_computeExpandToggleIcon(e){return e?"gr-icons:expand-less":"gr-icons:expand-more"}_toggleExpanded(e){e.stopPropagation(),this.set("message.expanded",!this.message.expanded)}}customElements.define(_E.is,_E);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fE=za`
  <style include="shared-styles">
    :host,
    .messageListControls {
      display: flex;
      justify-content: space-between;
    }
    .header {
      align-items: center;
      border-top: 1px solid var(--border-color);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-s) var(--spacing-l);
    }
    #messageControlsContainer {
      padding: 0 var(--spacing-l);
    }
    .highlighted {
      animation: 3s fadeOut;
    }
    @keyframes fadeOut {
      0% {
        background-color: var(--emphasis-color);
      }
      100% {
        background-color: var(--view-background-color);
      }
    }
    #messageControlsContainer {
      align-items: center;
      background-color: var(--background-color-secondary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      height: 2.25em;
      justify-content: center;
    }
    #messageControlsContainer gr-button {
      padding: var(--spacing-s) 0;
    }
    .container {
      align-items: center;
      display: flex;
    }
    gr-message:not(:last-of-type) {
      border-bottom: 1px solid var(--border-color);
    }
    gr-message:nth-child(2n) {
      background-color: var(--background-color-secondary);
    }
    gr-message:nth-child(2n + 1) {
      background-color: var(--background-color-tertiary);
    }
  </style>
  <div class="header">
    <span
      id="automatedMessageToggleContainer"
      class="container"
      hidden$="[[!_hasAutomatedMessages(messages)]]"
    >
      <paper-toggle-button
        id="automatedMessageToggle"
        checked="{{_hideAutomated}}"
      ></paper-toggle-button
      >Only comments
      <span class="transparent separator"></span>
    </span>
    <gr-button
      id="collapse-messages"
      link=""
      title="[[_expandAllTitle]]"
      on-click="_handleExpandCollapseTap"
    >
      [[_expandAllState]]
    </gr-button>
  </div>
  <span
    id="messageControlsContainer"
    hidden$="[[_computeShowHideTextHidden(_visibleMessages, _processedMessages, _hideAutomated, _visibleMessages.length)]]"
  >
    <gr-button id="oldMessagesBtn" link="" on-click="_handleShowAllTap">
      [[_computeNumMessagesText(_visibleMessages, _processedMessages,
      _hideAutomated, _visibleMessages.length)]]
    </gr-button>
    <span
      class="container"
      hidden$="[[_computeIncrementHidden(_visibleMessages, _processedMessages, _hideAutomated, _visibleMessages.length)]]"
    >
      <span class="transparent separator"></span>
      <gr-button
        id="incrementMessagesBtn"
        link=""
        on-click="_handleIncrementShownMessages"
      >
        [[_computeIncrementText(_visibleMessages, _processedMessages,
        _hideAutomated, _visibleMessages.length)]]
      </gr-button>
    </span>
  </span>
  <template is="dom-repeat" items="[[_visibleMessages]]" as="message">
    <gr-message
      change-num="[[changeNum]]"
      message="[[message]]"
      comments="[[_computeCommentsForMessage(changeComments, message)]]"
      hide-automated="[[_hideAutomated]]"
      project-name="[[projectName]]"
      show-reply-button="[[showReplyButtons]]"
      on-message-anchor-tap="_handleAnchorClick"
      label-extremes="[[_labelExtremes]]"
      data-message-id$="[[message.id]]"
    ></gr-message>
  </template>
  <gr-reporting id="reporting" category="message-list"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,bE="show-all-messages",vE="show-more-messages",yE={EXPAND_ALL:"Expand All",COLLAPSE_ALL:"Collapse All"};class wE extends(ra([Wu],Zn(na(Ka)))){static get template(){return fE}static get is(){return"gr-messages-list"}static get properties(){return{changeNum:Number,messages:{type:Array,value:()=>[]},reviewerUpdates:{type:Array,value:()=>[]},changeComments:Object,projectName:String,showReplyButtons:{type:Boolean,value:!1},labels:Object,_expandAllState:{type:String,value:yE.EXPAND_ALL},_expandAllTitle:{type:String,computed:"_computeExpandAllTitle(_expandAllState)"},_hideAutomated:{type:Boolean,value:!1},_processedMessages:{type:Array,computed:"_computeItems(messages, reviewerUpdates)",observer:"_processedMessagesChanged"},_visibleMessages:{type:Array,value:()=>[]},_labelExtremes:{type:Object,computed:"_computeLabelExtremes(labels.*)"}}}scrollToMessage(e){let t=this.shadowRoot.querySelector('[data-message-id="'+e+'"]');if(!t){let n;for(n=0;n<this._processedMessages.length&&this._processedMessages[n].id!==e;n++);if(n===this._processedMessages.length)return;const i=this._processedMessages.slice(n,-this._visibleMessages.length);this.splice(...["_visibleMessages",0,0].concat(i)),Ii(),t=this.shadowRoot.querySelector('[data-message-id="'+e+'"]')}t.set("message.expanded",!0);let n=t.offsetTop;for(let e=t.offsetParent;e;e=e.offsetParent)n+=e.offsetTop;window.scrollTo(0,n),this._highlightEl(t)}_isAutomated(e){return!!(e.reviewer||e.tag&&e.tag.startsWith("autogenerated"))}_computeItems(e,t){if([e,t].some(e=>void 0===e))return[];e=e||[],t=t||[];let n,i,s=0,a=0,o=[];for(let t=0;t<e.length;t++)e[t]._index=t;for(;s<e.length||a<t.length;){if(s>=e.length){o=o.concat(t.slice(a));break}if(a>=t.length){o=o.concat(e.slice(s));break}n=n||sr.parseDate(e[s].date),i=i||sr.parseDate(t[a].date),i<n?(o.push(t[a++]),i=null):(o.push(e[s++]),n=null)}return o.forEach(e=>{void 0===e.expanded&&(e.expanded=!1)}),o}_updateExpandedStateOfAllMessages(e){if(this._processedMessages)for(let t=0;t<this._processedMessages.length;t++)this._processedMessages[t].expanded=e;if(this._visibleMessages)for(let e=0;e<this._visibleMessages.length;e++)this.notifyPath(`_visibleMessages.${e}.expanded`)}_computeExpandAllTitle(e){return e===yE.COLLAPSED_ALL?this.createTitle(this.Shortcut.COLLAPSE_ALL_MESSAGES,this.ShortcutSection.ACTIONS):e===yE.EXPAND_ALL?this.createTitle(this.Shortcut.EXPAND_ALL_MESSAGES,this.ShortcutSection.ACTIONS):""}_highlightEl(e){const t=Ui(this.root).querySelectorAll(".highlighted");for(const e of t)e.classList.remove("highlighted");e.addEventListener("animationend",(function t(){e.removeEventListener("animationend",t),e.classList.remove("highlighted")})),e.classList.add("highlighted")}handleExpandCollapse(e){this._expandAllState=e?yE.COLLAPSE_ALL:yE.EXPAND_ALL,this._updateExpandedStateOfAllMessages(e)}_handleExpandCollapseTap(e){e.preventDefault(),this.handleExpandCollapse(this._expandAllState===yE.EXPAND_ALL)}_handleAnchorClick(e){this.scrollToMessage(e.detail.id)}_hasAutomatedMessages(e){if(!e)return!1;for(const t of e)if(this._isAutomated(t))return!0;return!1}_computeCommentsForMessage(e,t){if([e,t].some(e=>void 0===e))return{};const n=e.getAllPublishedComments();if(void 0===t._index||!n||!this.messages)return{};const i=this.messages||[],s=t._index,a=t.author&&t.author._account_id,o=sr.parseDate(t.date).getTime();let r;if(s>0)for(let e=s-1;e>=0;e--)if(i[e]&&i[e].author&&i[e].author._account_id===a){r=sr.parseDate(i[e].date).getTime();break}const l={};for(const e in n){if(!n.hasOwnProperty(e))continue;const t=n[e];for(let n=0;n<t.length;n++){if(t[n].author&&t[n].author._account_id!==a)continue;const i=sr.parseDate(t[n].updated).getTime();if(i<=o){if(r&&i<=r)continue;l[e]=l[e]||[],l[e].push(t[n])}}}return l}_getDelta(e,t,n){if([e,t].some(e=>void 0===e))return 0;let i=5;const s=t.length-e.length;if(n){let e,n=0;for(e=s;e>0&&n<5;e--)this._isAutomated(t[e-1])||n++;i=s-e}return Math.min(s,i)}_numRemaining(e,t,n){return[e,t].some(e=>void 0===e)?0:n?this._getHumanMessages(t).length-this._getHumanMessages(e).length:t.length-e.length}_computeIncrementText(e,t,n){let i=this._getDelta(e,t,n);return i=Math.min(this._numRemaining(e,t,n),i),"Show "+Math.min(5,i)+" more"}_getHumanMessages(e){return e.filter(e=>!this._isAutomated(e))}_computeShowHideTextHidden(e,t,n){return[e,t].some(e=>void 0===e)?0:(n&&(t=this._getHumanMessages(t),e=this._getHumanMessages(e)),e.length>=t.length)}_handleShowAllTap(){this._visibleMessages=this._processedMessages,this.$.reporting.reportInteraction(bE)}_handleIncrementShownMessages(){const e=this._getDelta(this._visibleMessages,this._processedMessages,this._hideAutomated),t=this._visibleMessages.length,n=this._processedMessages.slice(-(t+e),-t);this.splice(...["_visibleMessages",0,0].concat(n)),this.$.reporting.reportInteraction(vE)}_processedMessagesChanged(e){if(e){if(this._visibleMessages=e.slice(-20),0===e.length)return;const t=e.map(e=>e.tag||e.type||(e.comments?"comments":"none")).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{all:e.length});this.$.reporting.reportInteraction("messages-count",t)}}_computeNumMessagesText(e,t,n){const i=this._numRemaining(e,t,n);return 1===i?"Show 1 message":"Show all "+i+" messages"}_computeIncrementHidden(e,t,n){return this._numRemaining(e,t,n)<=this._getDelta(e,t,n)}_computeLabelExtremes(e){const t={},n=e.base;if(!n)return t;for(const e of Object.keys(n)){if(!n[e]||!n[e].values)continue;const i=Object.keys(n[e].values).map(e=>parseInt(e,10));i.sort((e,t)=>e-t),i.length&&(t[e]={min:i[0],max:i[i.length-1]})}return t}}customElements.define(wE.is,wE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const CE=za`
  <style include="shared-styles">
    :host {
      display: flex;
      justify-content: space-between;
    }
    .header {
      align-items: center;
      border-top: 1px solid var(--border-color);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-s) var(--spacing-l);
    }
    .highlighted {
      animation: 3s fadeOut;
    }
    @keyframes fadeOut {
      0% {
        background-color: var(--emphasis-color);
      }
      100% {
        background-color: var(--view-background-color);
      }
    }
    .container {
      align-items: center;
      display: flex;
    }
    gr-message:not(:last-of-type) {
      border-bottom: 1px solid var(--border-color);
    }
    gr-message:nth-child(2n) {
      background-color: var(--background-color-secondary);
    }
    gr-message:nth-child(2n + 1) {
      background-color: var(--background-color-tertiary);
    }
  </style>
  <div class="header">
    <span
      id="automatedMessageToggleContainer"
      class="container"
      hidden$="[[!_hasAutomatedMessages(messages)]]"
    >
      <paper-toggle-button
        id="automatedMessageToggle"
        checked="{{_hideAutomated}}"
      ></paper-toggle-button
      >Only comments
      <span class="transparent separator"></span>
    </span>
    <gr-button
      id="collapse-messages"
      link=""
      title="[[_expandAllTitle]]"
      on-click="_handleExpandCollapseTap"
    >
      [[_expandAllState]]
    </gr-button>
  </div>
  <template
    id="messageRepeat"
    is="dom-repeat"
    items="[[_combinedMessages]]"
    as="message"
    filter="_isMessageVisible"
  >
    <gr-message
      change-num="[[changeNum]]"
      message="[[message]]"
      comments="[[_computeCommentsForMessage(changeComments, message)]]"
      project-name="[[projectName]]"
      show-reply-button="[[showReplyButtons]]"
      on-message-anchor-tap="_handleAnchorClick"
      label-extremes="[[_labelExtremes]]"
      data-message-id$="[[message.id]]"
    ></gr-message>
  </template>
  <gr-reporting id="reporting" category="message-list"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,EE={EXPAND_ALL:"Expand All",COLLAPSE_ALL:"Collapse All"};class SE extends(ra([Wu],Zn(na(Ka)))){static get template(){return CE}static get is(){return"gr-messages-list-experimental"}static get properties(){return{changeNum:Number,messages:{type:Array,value:()=>[]},reviewerUpdates:{type:Array,value:()=>[]},changeComments:Object,projectName:String,showReplyButtons:{type:Boolean,value:!1},labels:Object,_expandAllState:{type:String,value:EE.EXPAND_ALL},_expandAllTitle:{type:String,computed:"_computeExpandAllTitle(_expandAllState)"},_hideAutomated:{type:Boolean,value:!1,observer:"_hideAutomatedChanged"},_combinedMessages:{type:Array,computed:"_computeCombinedMessages(messages, reviewerUpdates)",observer:"_combinedMessagesChanged"},_labelExtremes:{type:Object,computed:"_computeLabelExtremes(labels.*)"}}}scrollToMessage(e){const t=`[data-message-id="${e}"]`,n=this.shadowRoot.querySelector(t);if(!n&&!this._hideAutomated)return void console.warn(`Failed to scroll to message: ${e}`);if(!n)return this._hideAutomated=!1,void setTimeout(()=>this.scrollToMessage(e));n.set("message.expanded",!0);let i=n.offsetTop;for(let e=n.offsetParent;e;e=e.offsetParent)i+=e.offsetTop;window.scrollTo(0,i),this._highlightEl(n)}_isAutomated(e){const t=!(!e.reviewer&&"REVIEWER_UPDATE"!==e.type),n=!(!e.tag||!e.tag.startsWith("autogenerated"));return t||n}_hideAutomatedChanged(e){this.$.messageRepeat.render()}_isMessageVisible(e){return!(this._hideAutomated&&this._isAutomated(e))}_computeCombinedMessages(e,t){e=e||[],t=t||[];let n,i,s=0,a=0,o=[];for(let t=0;t<e.length;t++)e[t]._index=t;for(;s<e.length||a<t.length;){if(s>=e.length){o=o.concat(t.slice(a));break}if(a>=t.length){o=o.concat(e.slice(s));break}n=n||sr.parseDate(e[s].date),i=i||sr.parseDate(t[a].date),i<n?(o.push(t[a++]),i=null):(o.push(e[s++]),n=null)}return o.forEach(e=>{void 0===e.expanded&&(e.expanded=!1)}),o}_updateExpandedStateOfAllMessages(e){if(this._combinedMessages)for(let t=0;t<this._combinedMessages.length;t++)this._combinedMessages[t].expanded=e,this.notifyPath(`_combinedMessages.${t}.expanded`)}_computeExpandAllTitle(e){return e===EE.COLLAPSED_ALL?this.createTitle(this.Shortcut.COLLAPSE_ALL_MESSAGES,this.ShortcutSection.ACTIONS):e===EE.EXPAND_ALL?this.createTitle(this.Shortcut.EXPAND_ALL_MESSAGES,this.ShortcutSection.ACTIONS):""}_highlightEl(e){const t=Ui(this.root).querySelectorAll(".highlighted");for(const e of t)e.classList.remove("highlighted");e.addEventListener("animationend",(function t(){e.removeEventListener("animationend",t),e.classList.remove("highlighted")})),e.classList.add("highlighted")}handleExpandCollapse(e){this._expandAllState=e?EE.COLLAPSE_ALL:EE.EXPAND_ALL,this._updateExpandedStateOfAllMessages(e)}_handleExpandCollapseTap(e){e.preventDefault(),this.handleExpandCollapse(this._expandAllState===EE.EXPAND_ALL)}_handleAnchorClick(e){this.scrollToMessage(e.detail.id)}_hasAutomatedMessages(e){if(!e)return!1;for(const t of e)if(this._isAutomated(t))return!0;return!1}_computeCommentsForMessage(e,t){if([e,t].some(e=>void 0===e))return{};const n=e.getAllPublishedComments();if(void 0===t._index||!n||!this.messages)return{};const i=e=>e.change_message_id===t.id,s={};for(const e in n){if(!n.hasOwnProperty(e))continue;const t=n[e].filter(i);t.length&&(s[e]=t)}return s}_combinedMessagesChanged(e){if(e){if(0===e.length)return;const t=e.map(e=>e.tag||e.type||(e.comments?"comments":"none")).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{all:e.length});this.$.reporting.reportInteraction("messages-count",t)}}_computeLabelExtremes(e){const t={},n=e.base;if(!n)return t;for(const e of Object.keys(n)){if(!n[e]||!n[e].values)continue;const i=Object.keys(n[e].values).map(e=>parseInt(e,10));i.sort((e,t)=>e-t),i.length&&(t[e]={min:i[0],max:i[i.length-1]})}return t}}customElements.define(SE.is,SE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xE=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    h3 {
      margin: var(--spacing-m) 0 0;
    }
    section {
      margin-bottom: 1.4em; /* Same as line height for collapse purposes */
    }
    a {
      display: block;
    }
    .changeContainer,
    a {
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .changeContainer {
      display: flex;
    }
    .changeContainer.thisChange:before {
      content: '➔';
      width: 1.2em;
    }
    h4,
    section div {
      display: flex;
    }
    h4:before,
    section div:before {
      content: ' ';
      flex-shrink: 0;
      width: 1.2em;
    }
    .note {
      color: var(--error-text-color);
    }
    .relatedChanges a {
      display: inline-block;
    }
    .strikethrough {
      color: var(--deemphasized-text-color);
      text-decoration: line-through;
    }
    .status {
      color: var(--deemphasized-text-color);
      font-weight: var(--font-weight-bold);
      margin-left: var(--spacing-xs);
    }
    .notCurrent {
      color: #e65100;
    }
    .indirectAncestor {
      color: #33691e;
    }
    .submittable {
      color: #1b5e20;
    }
    .submittableCheck {
      color: var(--vote-text-color-recommended);
      display: none;
    }
    .submittableCheck.submittable {
      display: inline;
    }
    .hidden,
    .mobile {
      display: none;
    }
    @media screen and (max-width: 60em) {
      .mobile {
        display: block;
      }
    }
  </style>
  <div>
    <section
      class="relatedChanges"
      hidden$="[[!_relatedResponse.changes.length]]"
      hidden=""
    >
      <h4>Relation chain</h4>
      <template
        is="dom-repeat"
        items="[[_relatedResponse.changes]]"
        as="related"
      >
        <div
          class$="rightIndent [[_computeChangeContainerClass(change, related)]]"
        >
          <a
            href$="[[_computeChangeURL(related._change_number, related.project, related._revision_number)]]"
            class$="[[_computeLinkClass(related)]]"
            title$="[[related.commit.subject]]"
          >
            [[related.commit.subject]]
          </a>
          <span class$="[[_computeChangeStatusClass(related)]]">
            ([[_computeChangeStatus(related)]])
          </span>
        </div>
      </template>
    </section>
    <section
      id="submittedTogether"
      class$="[[_computeSubmittedTogetherClass(_submittedTogether)]]"
    >
      <h4>Submitted together</h4>
      <template
        is="dom-repeat"
        items="[[_submittedTogether.changes]]"
        as="related"
      >
        <div class$="[[_computeChangeContainerClass(change, related)]]">
          <a
            href$="[[_computeChangeURL(related._number, related.project)]]"
            class$="[[_computeLinkClass(related)]]"
            title$="[[related.project]]: [[related.branch]]: [[related.subject]]"
          >
            [[related.project]]: [[related.branch]]: [[related.subject]]
          </a>
          <span
            tabindex="-1"
            title="Submittable"
            class$="submittableCheck [[_computeLinkClass(related)]]"
            >✓</span
          >
        </div>
      </template>
      <template is="dom-if" if="[[_submittedTogether.non_visible_changes]]">
        <div class="note">
          [[_computeNonVisibleChangesNote(_submittedTogether.non_visible_changes)]]
        </div>
      </template>
    </section>
    <section hidden$="[[!_sameTopic.length]]" hidden="">
      <h4>Same topic</h4>
      <template is="dom-repeat" items="[[_sameTopic]]" as="change">
        <div>
          <a
            href$="[[_computeChangeURL(change._number, change.project)]]"
            class$="[[_computeLinkClass(change)]]"
            title$="[[change.project]]: [[change.branch]]: [[change.subject]]"
          >
            [[change.project]]: [[change.branch]]: [[change.subject]]
          </a>
        </div>
      </template>
    </section>
    <section hidden$="[[!_conflicts.length]]" hidden="">
      <h4>Merge conflicts</h4>
      <template is="dom-repeat" items="[[_conflicts]]" as="change">
        <div>
          <a
            href$="[[_computeChangeURL(change._number, change.project)]]"
            class$="[[_computeLinkClass(change)]]"
            title$="[[change.subject]]"
          >
            [[change.subject]]
          </a>
        </div>
      </template>
    </section>
    <section hidden$="[[!_cherryPicks.length]]" hidden="">
      <h4>Cherry picks</h4>
      <template is="dom-repeat" items="[[_cherryPicks]]" as="change">
        <div>
          <a
            href$="[[_computeChangeURL(change._number, change.project)]]"
            class$="[[_computeLinkClass(change)]]"
            title$="[[change.branch]]: [[change.subject]]"
          >
            [[change.branch]]: [[change.subject]]
          </a>
        </div>
      </template>
    </section>
  </div>
  <div hidden$="[[!loading]]">Loading...</div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class AE extends(ra([vm,zg],Zn(na(Ka)))){static get template(){return xE}static get is(){return"gr-related-changes-list"}static get properties(){return{change:Object,hasParent:{type:Boolean,notify:!0,value:!1},patchNum:String,parentChange:Object,hidden:{type:Boolean,value:!1,reflectToAttribute:!0},loading:{type:Boolean,notify:!0},mergeable:Boolean,_connectedRevisions:{type:Array,computed:"_computeConnectedRevisions(change, patchNum, _relatedResponse.changes)"},_relatedResponse:{type:Object,value:()=>({changes:[]})},_submittedTogether:{type:Object,value:()=>({changes:[]})},_conflicts:{type:Array,value:()=>[]},_cherryPicks:{type:Array,value:()=>[]},_sameTopic:{type:Array,value:()=>[]}}}static get observers(){return["_resultsChanged(_relatedResponse, _submittedTogether, _conflicts, _cherryPicks, _sameTopic)"]}clear(){this.loading=!0,this.hidden=!0,this._relatedResponse={changes:[]},this._submittedTogether={changes:[]},this._conflicts=[],this._cherryPicks=[],this._sameTopic=[]}reload(){if(!this.change||!this.patchNum)return Promise.resolve();this.loading=!0;const e=[this._getRelatedChanges().then(e=>{this._relatedResponse=e,this._fireReloadEvent(),this.hasParent=this._calculateHasParent(this.change.change_id,e.changes)}),this._getSubmittedTogether().then(e=>{this._submittedTogether=e,this._fireReloadEvent()}),this._getCherryPicks().then(e=>{this._cherryPicks=e,this._fireReloadEvent()})];return this.changeIsOpen(this.change)&&this.mergeable&&e.push(this._getConflicts().then(e=>{this._conflicts=e||[],this._fireReloadEvent()})),e.push(this._getServerConfig().then(e=>this.change.topic&&!e.change.submit_whole_topic?this._getChangesWithSameTopic().then(e=>{this._sameTopic=e}):(this._sameTopic=[],this._sameTopic))),Promise.all(e).then(()=>{this.loading=!1})}_fireReloadEvent(){Ii(),this.dispatchEvent(new CustomEvent("new-section-loaded"))}_calculateHasParent(e,t){return t.length>0&&t[t.length-1].change_id!==e}_getRelatedChanges(){return this.$.restAPI.getRelatedChanges(this.change._number,this.patchNum)}_getSubmittedTogether(){return this.$.restAPI.getChangesSubmittedTogether(this.change._number)}_getServerConfig(){return this.$.restAPI.getConfig()}_getConflicts(){return this.$.restAPI.getChangeConflicts(this.change._number)}_getCherryPicks(){return this.$.restAPI.getChangeCherryPicks(this.change.project,this.change.change_id,this.change._number)}_getChangesWithSameTopic(){return this.$.restAPI.getChangesWithSameTopic(this.change.topic,this.change._number)}_computeChangeURL(e,t,n){return um.getUrlForChangeById(e,t,n)}_computeChangeContainerClass(e,t){const n=["changeContainer"];return[t,e].some(e=>void 0===e)?n:(this._changesEqual(t,e)&&n.push("thisChange"),n.join(" "))}_changesEqual(e,t){return this._getChangeNumber(e)===this._getChangeNumber(t)}_getChangeNumber(e){return e?e.hasOwnProperty("_change_number")?e._change_number:e._number:0}_computeLinkClass(e){const t=[];return e.status==this.ChangeStatus.ABANDONED&&t.push("strikethrough"),e.submittable&&t.push("submittable"),t.join(" ")}_computeChangeStatusClass(e){const t=["status"];return e._revision_number!=e._current_revision_number?t.push("notCurrent"):this._isIndirectAncestor(e)?t.push("indirectAncestor"):e.submittable?t.push("submittable"):e.status==this.ChangeStatus.NEW&&t.push("hidden"),t.join(" ")}_computeChangeStatus(e){switch(e.status){case this.ChangeStatus.MERGED:return"Merged";case this.ChangeStatus.ABANDONED:return"Abandoned"}return e._revision_number!=e._current_revision_number?"Not current":this._isIndirectAncestor(e)?"Indirect ancestor":e.submittable?"Submittable":""}_resultsChanged(e,t,n,i,s){if([e,t,n,i,s].some(e=>void 0===e))return;const a=[e&&e.changes,t&&t.changes,n,i,s];for(let e=0;e<a.length;e++)if(a[e]&&a[e].length>0)return this.hidden=!1,void this.dispatchEvent(new CustomEvent("update",{composed:!0,bubbles:!1}));this.hidden=!0}_isIndirectAncestor(e){return!this._connectedRevisions.includes(e.commit.commit)}_computeConnectedRevisions(e,t,n){if([e,t,n].some(e=>void 0===e))return;const i=[];let s;if(!e)return[];for(const n in e.revisions)this.patchNumEquals(e.revisions[n]._number,t)&&(s=n);const a=n.map(e=>e.commit);let o=a.length-1;for(;o>=0;){const e=a[o].commit;if(i.push(e),e==s)break;o--}for(;o>=0;){for(let e=0;e<a[o].parents.length;e++)if(i.includes(a[o].parents[e].commit)){i.push(a[o].commit);break}--o}return i}_computeSubmittedTogetherClass(e){return!e||0===e.changes.length&&!e.non_visible_changes?"hidden":""}_computeNonVisibleChangesNote(e){return`(+ ${e} non-visible ${1===e?"change":"changes"})`}}customElements.define(AE.is,AE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const PE=za`
  <style include="shared-styles">
    gr-diff {
      --content-width: 90vw;
    }
    .diffContainer {
      padding: var(--spacing-l) 0;
      border-bottom: 1px solid var(--border-color);
    }
    .file-name {
      display: block;
      padding: var(--spacing-s) var(--spacing-l);
      background-color: var(--background-color-secondary);
      border-bottom: 1px solid var(--border-color);
    }
    .fixActions {
      display: flex;
      justify-content: flex-end;
    }
    gr-button {
      margin-left: var(--spacing-m);
    }
    .fix-picker {
      display: flex;
      align-items: center;
      margin-right: var(--spacing-l);
    }
  </style>
  <gr-overlay id="applyFixOverlay" with-backdrop="">
    <gr-dialog
      id="applyFixDialog"
      on-confirm="_handleApplyFix"
      confirm-label="[[_getApplyFixButtonLabel(_isApplyFixLoading)]]"
      disabled="[[_disableApplyFixButton]]"
      confirm-tooltip="[[_computeTooltip(change, _patchNum)]]"
      on-cancel="onCancel"
    >
      <div slot="header">[[_robotId]] - [[getFixDescription(_currentFix)]]</div>
      <div slot="main">
        <template is="dom-repeat" items="[[_currentPreviews]]">
          <div class="file-name">
            <span>[[item.filepath]]</span>
          </div>
          <div class="diffContainer">
            <gr-diff
              prefs="[[overridePartialPrefs(prefs)]]"
              change-num="[[changeNum]]"
              path="[[item.filepath]]"
              diff="[[item.preview]]"
            ></gr-diff>
          </div>
        </template>
      </div>
      <div
        slot="footer"
        class="fix-picker"
        hidden$="[[hasSingleFix(_fixSuggestions)]]"
      >
        <span
          >Suggested fix [[addOneTo(_selectedFixIdx)]] of
          [[_fixSuggestions.length]]</span
        >
        <gr-button
          id="prevFix"
          on-click="_onPrevFixClick"
          disabled$="[[_noPrevFix(_selectedFixIdx)]]"
        >
          <iron-icon icon="gr-icons:chevron-left"></iron-icon>
        </gr-button>
        <gr-button
          id="nextFix"
          on-click="_onNextFixClick"
          disabled$="[[_noNextFix(_selectedFixIdx, _fixSuggestions)]]"
        >
          <iron-icon icon="gr-icons:chevron-right"></iron-icon>
        </gr-button>
      </div>
    </gr-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class kE extends(Zn(na(Ka))){static get template(){return PE}static get is(){return"gr-apply-fix-dialog"}static get properties(){return{prefs:Array,change:Object,changeNum:String,_patchNum:Number,_robotId:String,_currentFix:Object,_currentPreviews:{type:Array,value:()=>[]},_fixSuggestions:Array,_isApplyFixLoading:{type:Boolean,value:!1},_selectedFixIdx:Number,_disableApplyFixButton:{type:Boolean,computed:"_computeDisableApplyFixButton(_isApplyFixLoading, change, _patchNum)"}}}open(e){if(this._patchNum=e.detail.patchNum,this._fixSuggestions=e.detail.comment.fix_suggestions,this._robotId=e.detail.comment.robot_id,null==this._fixSuggestions||0==this._fixSuggestions.length)return Promise.resolve();this._selectedFixIdx=0;const t=[];return t.push(this._showSelectedFixSuggestion(this._fixSuggestions[0]),this.$.applyFixOverlay.open()),Promise.all(t).then(()=>{this.$.applyFixOverlay.fire("iron-resize")})}attached(){super.attached(),this.refitOverlay=()=>{this.$.applyFixOverlay.fire("iron-resize")},this.addEventListener("diff-context-expanded",this.refitOverlay)}detached(){super.detached(),this.removeEventListener("diff-context-expanded",this.refitOverlay)}_showSelectedFixSuggestion(e){return this._currentFix=e,this._fetchFixPreview(e.fix_id)}_fetchFixPreview(e){return this.$.restAPI.getRobotCommentFixPreview(this.changeNum,this._patchNum,e).then(e=>{if(null!=e){const t=Object.keys(e).map(t=>({filepath:t,preview:e[t]}));this._currentPreviews=t}}).catch(e=>{throw this._close(),e})}hasSingleFix(e){return 1===(e||{}).length}overridePartialPrefs(e){return Object.assign({},e,{line_length:50})}onCancel(e){e&&e.stopPropagation(),this._close()}addOneTo(e){return e+1}_onPrevFixClick(e){if(e&&e.stopPropagation(),this._selectedFixIdx>=1&&null!=this._fixSuggestions)return this._selectedFixIdx-=1,this._showSelectedFixSuggestion(this._fixSuggestions[this._selectedFixIdx])}_onNextFixClick(e){if(e&&e.stopPropagation(),this._fixSuggestions&&this._selectedFixIdx<this._fixSuggestions.length)return this._selectedFixIdx+=1,this._showSelectedFixSuggestion(this._fixSuggestions[this._selectedFixIdx])}_noPrevFix(e){return 0===e}_noNextFix(e,t){return null==t||e===t.length-1}_close(){this._currentFix={},this._currentPreviews=[],this._isApplyFixLoading=!1,this.dispatchEvent(new CustomEvent("close-fix-preview",{bubbles:!0,composed:!0})),this.$.applyFixOverlay.close()}_getApplyFixButtonLabel(e){return e?"Saving...":"Apply Fix"}_computeTooltip(e,t){if(!e||null==t)return"";return e.revisions[e.current_revision]._number!==t?"Fix can only be applied to the latest patchset":""}_computeDisableApplyFixButton(e,t,n){if(!t||null==e||null==n)return!0;return n!==t.revisions[t.current_revision]._number||e}_handleApplyFix(e){if(e&&e.stopPropagation(),null!=this._currentFix&&null!=this._currentFix.fix_id)return this._isApplyFixLoading=!0,this.$.restAPI.applyFixSuggestion(this.changeNum,this._patchNum,this._currentFix.fix_id).then(e=>{e&&e.ok&&(um.navigateToChange(this.change,"edit",this._patchNum),this._close()),this._isApplyFixLoading=!1})}getFixDescription(e){return null!=e&&e.description?e.description:""}}customElements.define(kE.is,kE),
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
ma({is:"iron-selector",behaviors:[Nm]});
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const TE=za`
  <style include="gr-voting-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    .labelNameCell,
    .buttonsCell,
    .selectedValueCell {
      padding: var(--spacing-s) var(--spacing-m);
      display: table-cell;
    }
    /* We want the :hover highlight to extend to the border of the dialog. */
    .labelNameCell {
      padding-left: var(--spacing-xl);
    }
    .selectedValueCell {
      padding-right: var(--spacing-xl);
    }
    /* This is a trick to let the selectedValueCell take the remaining width. */
    .labelNameCell,
    .buttonsCell {
      white-space: nowrap;
    }
    .selectedValueCell {
      width: 75%;
    }
    .labelMessage {
      color: var(--deemphasized-text-color);
    }
    gr-button {
      min-width: 42px;
      box-sizing: border-box;
      --gr-button: {
        background-color: var(
          --button-background-color,
          var(--table-header-background-color)
        );
        color: var(--primary-text-color);
        padding: 0 var(--spacing-m);
        @apply --vote-chip-styles;
      }
    }
    gr-button.iron-selected[vote='max'] {
      --button-background-color: var(--vote-color-approved);
    }
    gr-button.iron-selected[vote='positive'] {
      --button-background-color: var(--vote-color-recommended);
    }
    gr-button.iron-selected[vote='min'] {
      --button-background-color: var(--vote-color-rejected);
    }
    gr-button.iron-selected[vote='negative'] {
      --button-background-color: var(--vote-color-disliked);
    }
    gr-button.iron-selected[vote='neutral'] {
      --button-background-color: var(--vote-color-neutral);
    }
    .placeholder {
      display: inline-block;
      width: 42px;
      height: 1px;
    }
    .placeholder::before {
      content: ' ';
    }
    .selectedValueCell {
      color: var(--deemphasized-text-color);
      font-style: italic;
    }
    .selectedValueCell.hidden {
      display: none;
    }
    @media only screen and (max-width: 50em) {
      .selectedValueCell {
        display: none;
      }
    }
  </style>
  <span class="labelNameCell">[[label.name]]</span>
  <div class="buttonsCell">
    <template
      is="dom-repeat"
      items="[[_computeBlankItems(permittedLabels, label.name, 'start')]]"
      as="value"
    >
      <span class="placeholder" data-label$="[[label.name]]"></span>
    </template>
    <iron-selector
      id="labelSelector"
      attr-for-selected="data-value"
      selected="[[_computeLabelValue(labels, permittedLabels, label)]]"
      hidden$="[[!_computeAnyPermittedLabelValues(permittedLabels, label.name)]]"
      on-selected-item-changed="_setSelectedValueText"
    >
      <template is="dom-repeat" items="[[_items]]" as="value">
        <gr-button
          vote$="[[_computeVoteAttribute(value, index, _items.length)]]"
          has-tooltip=""
          data-name$="[[label.name]]"
          data-value$="[[value]]"
          title$="[[_computeLabelValueTitle(labels, label.name, value)]]"
        >
          [[value]]</gr-button
        >
      </template>
    </iron-selector>
    <template
      is="dom-repeat"
      items="[[_computeBlankItems(permittedLabels, label.name, 'end')]]"
      as="value"
    >
      <span class="placeholder" data-label$="[[label.name]]"></span>
    </template>
    <span
      class="labelMessage"
      hidden$="[[_computeAnyPermittedLabelValues(permittedLabels, label.name)]]"
    >
      You don't have permission to edit this label.
    </span>
  </div>
  <div
    class$="selectedValueCell [[_computeHiddenClass(permittedLabels, label.name)]]"
  >
    <span id="selectedValueLabel">[[_selectedValueText]]</span>
  </div>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class IE extends(Zn(na(Ka))){static get template(){return TE}static get is(){return"gr-label-score-row"}static get properties(){return{label:Object,labels:Object,name:{type:String,reflectToAttribute:!0},permittedLabels:Object,labelValues:Object,_selectedValueText:{type:String,value:"No value selected"},_items:{type:Array,computed:"_computePermittedLabelValues(permittedLabels, label.name)"}}}get selectedItem(){if(this._ironSelector)return this._ironSelector.selectedItem}get selectedValue(){if(this._ironSelector)return this._ironSelector.selected}setSelectedValue(e){this._ironSelector&&this._ironSelector.select(e)}get _ironSelector(){return this.$&&this.$.labelSelector}_computeBlankItems(e,t,n){if(!(e&&e[t]&&e[t].length&&this.labelValues&&Object.keys(this.labelValues).length))return[];const i=this.labelValues[parseInt(e[t][0],10)];if("start"===n)return new Array(i);const s=this.labelValues[parseInt(e[t][e[t].length-1],10)];return new Array(Object.keys(this.labelValues).length-s-1)}_getLabelValue(e,t,n){return n.value?n.value:e[n.name].hasOwnProperty("default_value")&&t.hasOwnProperty(n.name)?t[n.name].find(t=>parseInt(t,10)===e[n.name].default_value):void 0}_computeVoteAttribute(e,t,n){return e<0&&0===t?"min":e<0?"negative":e>0&&t===n-1?"max":e>0?"positive":"neutral"}_computeLabelValue(e,t,n){if([e,t,n].some(e=>void 0===e))return null;if(!e[n.name])return null;const i=this._getLabelValue(e,t,n),s=null!=t[n.name]?t[n.name].length:0;for(let e=0;e<s;e++){const s=t[n.name][e];if(s===i)return s}return null}_setSelectedValueText(e){if(!e.target.selectedItem)return;this._selectedValueText=e.target.selectedItem.getAttribute("title"),this.updateStyles();const t=e.target.selectedItem.dataset.name,n=e.target.selectedItem.dataset.value;this.dispatchEvent(new CustomEvent("labels-changed",{detail:{name:t,value:n},bubbles:!0,composed:!0}))}_computeAnyPermittedLabelValues(e,t){return e&&e.hasOwnProperty(t)&&e[t].length}_computeHiddenClass(e,t){return this._computeAnyPermittedLabelValues(e,t)?"":"hidden"}_computePermittedLabelValues(e,t){if(![e,t].some(e=>void 0===e))return e[t]}_computeLabelValueTitle(e,t,n){return e[t]&&e[t].values&&e[t].values[n]}}customElements.define(IE.is,IE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const RE=za`
  <style include="shared-styles">
    .scoresTable {
      display: table;
      width: 100%;
    }
    .mergedMessage {
      font-style: italic;
      text-align: center;
      width: 100%;
    }
    gr-label-score-row:hover {
      background-color: var(--hover-background-color);
    }
    gr-label-score-row {
      display: table-row;
    }
    gr-label-score-row.no-access {
      display: var(--label-no-access-display, table-row);
    }
  </style>
  <div class="scoresTable">
    <template is="dom-repeat" items="[[_labels]]" as="label">
      <gr-label-score-row
        class$="[[_computeLabelAccessClass(label.name, permittedLabels)]]"
        label="[[label]]"
        name="[[label.name]]"
        labels="[[change.labels]]"
        permitted-labels="[[permittedLabels]]"
        label-values="[[_labelValues]]"
      ></gr-label-score-row>
    </template>
  </div>
  <div class="mergedMessage" hidden$="[[!_changeIsMerged(change.status)]]">
    Because this change has been merged, votes may not be decreased.
  </div>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class LE extends(Zn(na(Ka))){static get template(){return RE}static get is(){return"gr-label-scores"}static get properties(){return{_labels:{type:Array,computed:"_computeLabels(change.labels.*, account)"},permittedLabels:{type:Object,observer:"_computeColumns"},change:Object,account:Object,_labelValues:Object}}getLabelValues(){const e={};for(const t in this.permittedLabels){if(!this.permittedLabels.hasOwnProperty(t))continue;const n=this.shadowRoot.querySelector(`gr-label-score-row[name="${t}"]`);if(!n)continue;if(!n.selectedItem)continue;const i=parseInt(n.selectedValue,10);let s=this._getVoteForAccount(this.change.labels,t,this.account);null!==s&&(s=parseInt(s,10)),i!==s&&(e[t]=i)}return e}_getStringLabelValue(e,t,n){for(const i in e[t].values)if(parseInt(i,10)===n)return i;return n}_getVoteForAccount(e,t,n){const i=e[t];if(i.all&&i.all.length>0)for(let s=0;s<i.all.length;s++)if(i.all[s]._account_id==n._account_id)return this._getStringLabelValue(e,t,i.all[s].value);return null}_computeLabels(e,t){if([e,t].some(e=>void 0===e))return;const n=e.base;return n?Object.keys(n).sort().map(e=>({name:e,value:this._getVoteForAccount(n,e,this.account)})):[]}_computeColumns(e){const t=Object.keys(e),n={};for(const i of t)for(const t of e[i])n[parseInt(t,10)]=!0;const i=Object.keys(n).sort((e,t)=>e-t);for(let e=0;e<i.length;e++)n[i[e]]=e;this._labelValues=n}_changeIsMerged(e){return"MERGED"===e}_computeLabelAccessClass(e,t){return null==e||null==t?"":t.hasOwnProperty(e)&&t[e].length?"access":"no-access"}}customElements.define(LE.is,LE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const DE=za`
  <style include="shared-styles">
    #threads {
      display: block;
      padding: var(--spacing-l);
    }
    gr-comment-thread {
      display: block;
      margin-bottom: var(--spacing-m);
      max-width: 80ch;
    }
    .header {
      align-items: center;
      background-color: var(--table-header-background-color);
      border-bottom: 1px solid var(--border-color);
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: left;
      min-height: 3.2em;
      padding: var(--spacing-m) var(--spacing-l);
    }
    .toggleItem.draftToggle {
      display: none;
    }
    .toggleItem.draftToggle.show {
      display: flex;
    }
    .toggleItem {
      align-items: center;
      display: flex;
      margin-right: var(--spacing-l);
    }
    .draftsOnly:not(.unresolvedOnly) gr-comment-thread[has-draft],
    .unresolvedOnly:not(.draftsOnly) gr-comment-thread[unresolved],
    .draftsOnly.unresolvedOnly gr-comment-thread[has-draft][unresolved] {
      display: block;
    }
  </style>
  <template is="dom-if" if="[[!hideToggleButtons]]">
    <div class="header">
      <div class="toggleItem">
        <paper-toggle-button
          id="unresolvedToggle"
          checked="{{_unresolvedOnly}}"
        ></paper-toggle-button>
        Only unresolved threads
      </div>
      <div
        class$="toggleItem draftToggle [[_computeShowDraftToggle(loggedIn)]]"
      >
        <paper-toggle-button
          id="draftToggle"
          checked="{{_draftsOnly}}"
        ></paper-toggle-button>
        Only threads with drafts
      </div>
    </div>
  </template>
  <div id="threads">
    <template is="dom-if" if="[[!threads.length]]">
      [[emptyThreadMsg]]
    </template>
    <template
      is="dom-repeat"
      items="[[_filteredThreads]]"
      as="thread"
      initial-count="5"
      target-framerate="60"
    >
      <gr-comment-thread
        show-file-path=""
        change-num="[[changeNum]]"
        comments="[[thread.comments]]"
        comment-side="[[thread.commentSide]]"
        project-name="[[change.project]]"
        is-on-parent="[[_isOnParent(thread.commentSide)]]"
        line-num="[[thread.line]]"
        patch-num="[[thread.patchNum]]"
        path="[[thread.path]]"
        root-id="{{thread.rootId}}"
        on-thread-changed="_handleCommentsChanged"
        on-thread-discard="_handleThreadDiscard"
      ></gr-comment-thread>
    </template>
  </div>
`
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class OE extends(Zn(na(Ka))){static get template(){return DE}static get is(){return"gr-thread-list"}static get properties(){return{change:Object,threads:Array,changeNum:String,loggedIn:Boolean,_sortedThreads:{type:Array},_filteredThreads:{type:Array,computed:"_computeFilteredThreads(_sortedThreads, _unresolvedOnly, _draftsOnly,onlyShowRobotCommentsWithHumanReply)"},_unresolvedOnly:{type:Boolean,value:!1},_draftsOnly:{type:Boolean,value:!1},onlyShowRobotCommentsWithHumanReply:{type:Boolean,value:!1},hideToggleButtons:{type:Boolean,value:!1},emptyThreadMsg:{type:String,value:"There are no inline comment threads on any diff for this change."}}}static get observers(){return["_computeSortedThreads(threads.*)"]}_computeShowDraftToggle(e){return e?"show":""}_computeSortedThreads(e){const t=e.base;if(!t)return[];this._updateSortedThreads(t)}_updateSortedThreads(e){this._sortedThreads=e.map(this._getThreadWithSortInfo).sort((e,t)=>{if(t.unresolved||e.unresolved){if(!e.unresolved)return 1;if(!t.unresolved)return-1}if(t.hasDraft||e.hasDraft){if(!e.hasDraft)return 1;if(!t.hasDraft)return-1}if(e.thread.path!==t.thread.path)return e.thread.path.localeCompare(t.thread.path);if([e,t].some(e=>void 0===e.thread.line)){if(!e.thread.line)return-1;if(!t.thread.line)return 1}else if(e.thread.line!==t.thread.line)return e.thread.line-t.thread.line;const n=e.__date||sr.parseDate(e.updated),i=(t.__date||sr.parseDate(t.updated))-n;return 0!==i||e.id&&e.id.localeCompare?i||e.id.localeCompare(t.id):0})}_computeFilteredThreads(e,t,n,i){if(![e,t,n,i].some(e=>void 0===e))return e.filter(e=>{if(n)return e.hasDraft;if(t)return e.unresolved;{const t=e&&e.thread&&e.thread.comments;let n=!1,s=!1;return t.forEach(e=>{e.robot_id?n=!0:n&&(s=!0)}),n&&i?s:e}}).map(e=>e.thread)}_getThreadWithSortInfo(e){const t=e.comments[e.comments.length-1]||{};return{thread:e,unresolved:!!(t.__draft&&e.comments.length>1?e.comments[e.comments.length-2]:t).unresolved,hasDraft:!!t.__draft,updated:t.updated||t.__date}}removeThread(e){for(let t=0;t<this.threads.length;t++)if(this.threads[t].rootId===e)return this.splice("threads",t,1),void Ii()}_handleThreadDiscard(e){this.removeThread(e.detail.rootId)}_handleCommentsChanged(e){this.dispatchEvent(new CustomEvent("thread-list-modified",{detail:{rootId:e.detail.rootId,path:e.detail.path}}))}_isOnParent(e){return!!e}}customElements.define(OE.is,OE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const NE=za`
  <style include="shared-styles">
    :host {
      background-color: var(--dialog-background-color);
      display: block;
      max-height: 90vh;
    }
    :host([disabled]) {
      pointer-events: none;
    }
    :host([disabled]) .container {
      opacity: 0.5;
    }
    .container {
      display: flex;
      flex-direction: column;
      max-height: 100%;
    }
    section {
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
      padding: var(--spacing-m) var(--spacing-xl);
      width: 100%;
    }
    section.labelsContainer {
      /* We want the :hover highlight to extend to the border of the dialog. */
      padding: var(--spacing-m) 0;
    }
    .actions {
      background-color: var(--dialog-background-color);
      bottom: 0;
      display: flex;
      justify-content: space-between;
      position: sticky;
      /* @see Issue 8602 */
      z-index: 1;
    }
    .actions .right gr-button {
      margin-left: var(--spacing-l);
    }
    .peopleContainer,
    .labelsContainer {
      flex-shrink: 0;
    }
    .peopleContainer {
      border-top: none;
      display: table;
    }
    .peopleList {
      display: flex;
    }
    .peopleListLabel {
      color: var(--deemphasized-text-color);
      margin-top: var(--spacing-xs);
      min-width: 6em;
      padding-right: var(--spacing-m);
    }
    gr-account-list {
      display: flex;
      flex-wrap: wrap;
      flex: 1;
    }
    #reviewerConfirmationOverlay {
      padding: var(--spacing-l);
      text-align: center;
    }
    .reviewerConfirmationButtons {
      margin-top: var(--spacing-l);
    }
    .groupName {
      font-weight: var(--font-weight-bold);
    }
    .groupSize {
      font-style: italic;
    }
    .textareaContainer {
      min-height: 12em;
      position: relative;
    }
    .textareaContainer,
    #textarea,
    gr-endpoint-decorator {
      display: flex;
      width: 100%;
    }
    gr-endpoint-decorator[name='reply-label-scores'] {
      display: block;
    }
    .previewContainer gr-formatted-text {
      background: var(--table-header-background-color);
      padding: var(--spacing-l);
    }
    .draftsContainer h3 {
      margin-top: var(--spacing-xs);
    }
    #checkingStatusLabel,
    #notLatestLabel {
      margin-left: var(--spacing-l);
    }
    #checkingStatusLabel {
      color: var(--deemphasized-text-color);
      font-style: italic;
    }
    #notLatestLabel,
    #savingLabel {
      color: var(--error-text-color);
    }
    #savingLabel {
      display: none;
    }
    #savingLabel.saving {
      display: inline;
    }
    #pluginMessage {
      color: var(--deemphasized-text-color);
      margin-left: var(--spacing-l);
      margin-bottom: var(--spacing-m);
    }
    #pluginMessage:empty {
      display: none;
    }
  </style>
  <div class="container" tabindex="-1">
    <section class="peopleContainer">
      <div class="peopleList">
        <div class="peopleListLabel">Reviewers</div>
        <gr-account-list
          id="reviewers"
          accounts="{{_reviewers}}"
          removable-values="[[change.removable_reviewers]]"
          filter="[[filterReviewerSuggestion]]"
          pending-confirmation="{{_reviewerPendingConfirmation}}"
          placeholder="Add reviewer..."
          on-account-text-changed="_handleAccountTextEntry"
          suggestions-provider="[[_getReviewerSuggestionsProvider(change)]]"
        >
        </gr-account-list>
      </div>
      <div class="peopleList">
        <div class="peopleListLabel">CC</div>
        <gr-account-list
          id="ccs"
          accounts="{{_ccs}}"
          filter="[[filterCCSuggestion]]"
          pending-confirmation="{{_ccPendingConfirmation}}"
          allow-any-input=""
          placeholder="Add CC..."
          on-account-text-changed="_handleAccountTextEntry"
          suggestions-provider="[[_getCcSuggestionsProvider(change)]]"
        >
        </gr-account-list>
      </div>
      <gr-overlay
        id="reviewerConfirmationOverlay"
        on-iron-overlay-canceled="_cancelPendingReviewer"
      >
        <div class="reviewerConfirmation">
          Group
          <span class="groupName">
            [[_pendingConfirmationDetails.group.name]]
          </span>
          has
          <span class="groupSize">
            [[_pendingConfirmationDetails.count]]
          </span>
          members.
          <br />
          Are you sure you want to add them all?
        </div>
        <div class="reviewerConfirmationButtons">
          <gr-button on-click="_confirmPendingReviewer">Yes</gr-button>
          <gr-button on-click="_cancelPendingReviewer">No</gr-button>
        </div>
      </gr-overlay>
    </section>
    <section class="textareaContainer">
      <gr-endpoint-decorator name="reply-text">
        <gr-textarea
          id="textarea"
          class="message"
          autocomplete="on"
          placeholder="[[_messagePlaceholder]]"
          fixed-position-dropdown=""
          hide-border="true"
          monospace="true"
          disabled="{{disabled}}"
          rows="4"
          text="{{draft}}"
          on-bind-value-changed="_handleHeightChanged"
        >
        </gr-textarea>
      </gr-endpoint-decorator>
    </section>
    <section class="previewContainer">
      <label>
        <input type="checkbox" checked="{{_previewFormatting::change}}" />
        Preview formatting
      </label>
      <gr-formatted-text
        content="[[draft]]"
        hidden$="[[!_previewFormatting]]"
        config="[[projectConfig.commentlinks]]"
      ></gr-formatted-text>
    </section>
    <section class="labelsContainer">
      <gr-endpoint-decorator name="reply-label-scores">
        <gr-label-scores
          id="labelScores"
          account="[[_account]]"
          change="[[change]]"
          on-labels-changed="_handleLabelsChanged"
          permitted-labels="[[permittedLabels]]"
        ></gr-label-scores>
      </gr-endpoint-decorator>
      <div id="pluginMessage">[[_pluginMessage]]</div>
    </section>
    <section
      class="draftsContainer"
      hidden$="[[_computeHideDraftList(draftCommentThreads)]]"
    >
      <div class="includeComments">
        <input
          type="checkbox"
          id="includeComments"
          checked="{{_includeComments::change}}"
        />
        <label for="includeComments"
          >Publish [[_computeDraftsTitle(draftCommentThreads)]]</label
        >
      </div>
      <gr-thread-list
        id="commentList"
        hidden$="[[!_includeComments]]"
        threads="[[draftCommentThreads]]"
        change="[[change]]"
        change-num="[[change._number]]"
        logged-in="true"
        hide-toggle-buttons=""
        on-thread-list-modified="_onThreadListModified"
      >
      </gr-thread-list>
      <span
        id="savingLabel"
        class$="[[_computeSavingLabelClass(_savingComments)]]"
      >
        Saving comments...
      </span>
    </section>
    <section class="actions">
      <div class="left">
        <span
          id="checkingStatusLabel"
          hidden$="[[!_isState(knownLatestState, 'checking')]]"
        >
          Checking whether patch [[patchNum]] is latest...
        </span>
        <span
          id="notLatestLabel"
          hidden$="[[!_isState(knownLatestState, 'not-latest')]]"
        >
          [[_computePatchSetWarning(patchNum, _labelsChanged)]]
          <gr-button link="" on-click="_reload">Reload</gr-button>
        </span>
      </div>
      <div class="right">
        <gr-button
          link=""
          id="cancelButton"
          class="action cancel"
          on-click="_cancelTapHandler"
          >Cancel</gr-button
        >
        <template is="dom-if" if="[[canBeStarted]]">
          <!-- Use 'Send' here as the change may only about reviewers / ccs
              and when this button is visible, the next button will always
              be 'Start review' -->
          <gr-button
            link=""
            disabled="[[_isState(knownLatestState, 'not-latest')]]"
            class="action save"
            has-tooltip=""
            title="[[_saveTooltip]]"
            on-click="_saveClickHandler"
            >Save</gr-button
          >
        </template>
        <gr-button
          id="sendButton"
          primary=""
          disabled="[[_sendDisabled]]"
          class="action send"
          has-tooltip=""
          title$="[[_computeSendButtonTooltip(canBeStarted)]]"
          on-click="_sendTapHandler"
          >[[_sendButtonLabel]]</gr-button
        >
      </div>
    </section>
  </div>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-storage id="storage"></gr-storage>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,ME={ANY:"any",BODY:"body",CCS:"cc",REVIEWERS:"reviewers"},$E="REVIEWER",BE="CC",FE="latest",UE="checking",HE="not-latest",jE="Start review",GE="Send",VE="Save but do not send notification or change review state",zE="Mark as ready for review and send reply",WE="Send reply";class qE extends(ra([Go,Wu,vm,zg],Zn(na(Ka)))){static get template(){return NE}static get is(){return"gr-reply-dialog"}constructor(){super(),this.FocusTarget=ME}static get properties(){return{change:Object,patchNum:String,canBeStarted:{type:Boolean,value:!1},disabled:{type:Boolean,value:!1,reflectToAttribute:!0},draft:{type:String,value:"",observer:"_draftChanged"},quote:{type:String,value:""},filterReviewerSuggestion:{type:Function,value(){return this._filterReviewerSuggestionGenerator(!1)}},filterCCSuggestion:{type:Function,value(){return this._filterReviewerSuggestionGenerator(!0)}},permittedLabels:Object,projectConfig:Object,knownLatestState:String,underReview:{type:Boolean,value:!0},_account:Object,_ccs:Array,_ccPendingConfirmation:{type:Object,observer:"_reviewerPendingConfirmationUpdated"},_messagePlaceholder:{type:String,computed:"_computeMessagePlaceholder(canBeStarted)"},_owner:Object,_pendingConfirmationDetails:Object,_includeComments:{type:Boolean,value:!0},_reviewers:Array,_reviewerPendingConfirmation:{type:Object,observer:"_reviewerPendingConfirmationUpdated"},_previewFormatting:{type:Boolean,value:!1,observer:"_handleHeightChanged"},_reviewersPendingRemove:{type:Object,value:{CC:[],REVIEWER:[]}},_sendButtonLabel:{type:String,computed:"_computeSendButtonLabel(canBeStarted)"},_savingComments:Boolean,_reviewersMutated:{type:Boolean,value:!1},_labelsChanged:{type:Boolean,value:!1},_saveTooltip:{type:String,value:VE,readOnly:!0},_pluginMessage:{type:String,value:""},_commentEditing:{type:Boolean,value:!1},_sendDisabled:{type:Boolean,computed:"_computeSendButtonDisabled(canBeStarted, draftCommentThreads, draft, _reviewersMutated, _labelsChanged, _includeComments, disabled, _commentEditing)",observer:"_sendDisabledChanged"},draftCommentThreads:{type:Array,observer:"_handleHeightChanged"}}}get keyBindings(){return{esc:"_handleEscKey","ctrl+enter meta+enter":"_handleEnterKey"}}static get observers(){return["_changeUpdated(change.reviewers.*, change.owner)","_ccsChanged(_ccs.splices)","_reviewersChanged(_reviewers.splices)"]}attached(){super.attached(),this._getAccount().then(e=>{this._account=e||{}}),this.addEventListener("comment-editing-changed",e=>{this._commentEditing=e.detail})}ready(){super.ready(),this.$.jsAPI.addElement(this.$.jsAPI.Element.REPLY_DIALOG,this)}open(e){this.knownLatestState=UE,this.fetchChangeUpdates(this.change,this.$.restAPI).then(e=>{this.knownLatestState=e.isLatest?FE:HE}),this._focusOn(e),this.quote&&this.quote.length?(this.draft=this.quote,this.quote=""):this.draft=this._loadStoredDraft(),this.$.restAPI.hasPendingDiffDrafts()&&(this._savingComments=!0,this.$.restAPI.awaitPendingDiffDrafts().then(()=>{this.dispatchEvent(new CustomEvent("comment-refresh",{composed:!0,bubbles:!0})),this._savingComments=!1}))}focus(){this._focusOn(ME.ANY)}getFocusStops(){const e=this._sendDisabled?this.$.cancelButton:this.$.sendButton;return{start:this.$.reviewers.focusStart,end:e}}setLabelValue(e,t){const n=this.$.labelScores.shadowRoot.querySelector(`gr-label-score-row[name="${e}"]`);n&&n.setSelectedValue(t)}getLabelValue(e){const t=this.$.labelScores.shadowRoot.querySelector(`gr-label-score-row[name="${e}"]`);return t?t.selectedValue:null}_handleEscKey(e){this.cancel()}_handleEnterKey(e){this._submit()}_ccsChanged(e){this._reviewerTypeChanged(e,BE)}_reviewersChanged(e){this._reviewerTypeChanged(e,$E)}_reviewerTypeChanged(e,t){if(e&&e.indexSplices){let n,i,s;this._reviewersMutated=!0,this._processReviewerChange(e.indexSplices,t);const a=$E===t;for(const t of e.indexSplices)for(let e=0;e<t.addedCount;e++){if(s=t.object[t.index+e],n=this._accountOrGroupKey(s),i=(a?this._ccs:this._reviewers).findIndex(e=>this._accountOrGroupKey(e)===n),i>=0){this.splice(a?"_ccs":"_reviewers",i,1);const e=a?"CC":"reviewer",t=a?"reviewer":"CC",o=(s.name||s.email||n)+` moved from ${e} to ${t}.`;this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:o},composed:!0,bubbles:!0}))}}}}_processReviewerChange(e,t){for(const n of e)for(const e of n.removed){if(!this._reviewersPendingRemove[t])return void console.err("Invalid type "+t+" for reviewer.");this._reviewersPendingRemove[t].push(e)}}_purgeReviewersPendingRemove(e,t){let n;const i=t||{};for(const t in this._reviewersPendingRemove)if(this._reviewersPendingRemove.hasOwnProperty(t)){if(!e){n=this._reviewersPendingRemove[t];for(let e=0;e<n.length;e++)i[n[e]._account_id]||this._removeAccount(n[e],t)}this._reviewersPendingRemove[t]=[]}}_removeAccount(e,t){if(!e._pendingAdd)return this.$.restAPI.removeChangeReviewer(this.change._number,e._account_id).then(n=>{if(!n.ok)return n;const i=this.change.reviewers[t]||[];for(let n=0;n<i.length;n++)if(i[n]._account_id==e._account_id){this.splice(`change.reviewers.${t}`,n,1);break}})}_mapReviewer(e){let t,n;return e.account?t=e.account._account_id||e.account.email:e.group&&(t=e.group.id,n=e.group.confirmed),{reviewer:t,confirmed:n}}send(e,t){this.$.reporting.time("SendReply");const n={drafts:e?"PUBLISH_ALL_REVISIONS":"KEEP",labels:this.$.labelScores.getLabelValues()};t&&(n.ready=!0),null!=this.draft&&(n.message=this.draft);const i={};n.reviewers=this.$.reviewers.additions().map(e=>(e.account&&(i[e.account._account_id]=!0),this._mapReviewer(e)));const s=this.$.ccs;if(s)for(let e of s.additions())e.account&&(i[e.account._account_id]=!0),e=this._mapReviewer(e),e.state="CC",n.reviewers.push(e);this.disabled=!0;const a=this._handle400Error.bind(this);return this._saveReview(n,a).then(e=>e?e.ok?(this.draft="",this._includeComments=!0,this.dispatchEvent(new CustomEvent("send",{composed:!0,bubbles:!1})),i):(this.dispatchEvent(new CustomEvent("server-error",{detail:{response:e},composed:!0,bubbles:!0})),{}):{}).then(e=>(this.disabled=!1,e)).catch(e=>{throw this.disabled=!1,e})}_focusOn(e){if(e&&e!==ME.ANY||(e=this._chooseFocusTarget()),e===ME.BODY){const e=this.$.textarea;e.async(e.getNativeTextarea().focus.bind(e.getNativeTextarea()))}else if(e===ME.REVIEWERS){const e=this.$.reviewers.focusStart;e.async(e.focus)}else if(e===ME.CCS){const e=this.$.ccs.focusStart;e.async(e.focus)}}_chooseFocusTarget(){return this._account&&this.change&&this.change.owner&&this._account._account_id===this.change.owner._account_id&&(!this._reviewers||0===this._reviewers.length)?ME.REVIEWERS:ME.BODY}_handle400Error(e){return this.disabled=!1,this.$.restAPI.getResponseObject(e.clone()).then(t=>{if(400===e.status&&t){const n=[];for(const e of["reviewers","ccs"])if(t.hasOwnProperty(e))for(const i of Object.values(t[e]))i.error&&n.push(i.error);e={ok:!1,status:e.status,text:()=>Promise.resolve(n.join(", "))}}return this.dispatchEvent(new CustomEvent("server-error",{detail:{response:e},composed:!0,bubbles:!0})),null})}_computeHideDraftList(e){return 0===e.length}_computeDraftsTitle(e){const t=e.length;return 0==t?"":1==t?"1 Draft":t>1?t+" Drafts":void 0}_computeMessagePlaceholder(e){return e?"Add a note for your reviewers...":"Say something nice..."}_changeUpdated(e,t){[e,t].some(e=>void 0===e)||this._rebuildReviewerArrays(e.base,t)}_rebuildReviewerArrays(e,t){this._owner=t;const n=[],i=[];for(const s in e)if(e.hasOwnProperty(s)){if("REVIEWER"!==s&&"CC"!==s){console.warn("unexpected reviewer state:",s);continue}for(const a of e[s])if(a._account_id!==t._account_id)switch(s){case"REVIEWER":n.push(a);break;case"CC":i.push(a)}}this._ccs=i,this._reviewers=n}_accountOrGroupKey(e){return e.id||e._account_id}_filterReviewerSuggestionGenerator(e){return t=>{let n;if(t.account?n=t.account:t.group?n=t.group:console.warn("received suggestion that was neither account nor group:",t),n._account_id===this._owner._account_id)return!1;const i=this._accountOrGroupKey(n),s=e=>this._accountOrGroupKey(e)===i;return e?void 0===this._ccs.find(s):void 0===this._reviewers.find(s)}}_getAccount(){return this.$.restAPI.getAccount()}_cancelTapHandler(e){e.preventDefault(),this.cancel()}cancel(){this.dispatchEvent(new CustomEvent("cancel",{composed:!0,bubbles:!1})),this.$.textarea.closeDropdown(),this._purgeReviewersPendingRemove(!0),this._rebuildReviewerArrays(this.change.reviewers,this._owner)}_saveClickHandler(e){e.preventDefault(),this.$.ccs.submitEntryText()&&this.send(this._includeComments,!1).then(e=>{this._purgeReviewersPendingRemove(!1,e)})}_sendTapHandler(e){e.preventDefault(),this._submit()}_submit(){if(this.$.ccs.submitEntryText()){if(!this._sendDisabled)return this.send(this._includeComments,this.canBeStarted).then(e=>{this._purgeReviewersPendingRemove(!1,e)}).catch(e=>{this.dispatchEvent(new CustomEvent("show-error",{bubbles:!0,composed:!0,detail:{message:`Error submitting review ${e}`}}))});this.dispatchEvent(new CustomEvent("show-alert",{bubbles:!0,composed:!0,detail:{message:"Cannot send an empty reply."}}))}}_saveReview(e,t){return this.$.restAPI.saveChangeReview(this.change._number,this.patchNum,e,t)}_reviewerPendingConfirmationUpdated(e){null===e?this.$.reviewerConfirmationOverlay.close():(this._pendingConfirmationDetails=this._ccPendingConfirmation||this._reviewerPendingConfirmation,this.$.reviewerConfirmationOverlay.open())}_confirmPendingReviewer(){this._ccPendingConfirmation?(this.$.ccs.confirmGroup(this._ccPendingConfirmation.group),this._focusOn(ME.CCS)):(this.$.reviewers.confirmGroup(this._reviewerPendingConfirmation.group),this._focusOn(ME.REVIEWERS))}_cancelPendingReviewer(){this._ccPendingConfirmation=null,this._reviewerPendingConfirmation=null;const e=this._ccPendingConfirmation?ME.CCS:ME.REVIEWERS;this._focusOn(e)}_getStorageLocation(){return this.change?{changeNum:this.change._number,patchNum:"@change",path:"@change"}:{}}_loadStoredDraft(){const e=this.$.storage.getDraftComment(this._getStorageLocation());return e?e.message:""}_handleAccountTextEntry(){this._reviewersMutated=!0}_draftChanged(e,t){this.debounce("store",()=>{!e.length&&t?this.$.storage.eraseDraftComment(this._getStorageLocation()):e.length&&this.$.storage.setDraftComment(this._getStorageLocation(),this.draft)},400)}_handleHeightChanged(e){this.dispatchEvent(new CustomEvent("autogrow",{composed:!0,bubbles:!0}))}_handleLabelsChanged(){this._labelsChanged=0!==Object.keys(this.$.labelScores.getLabelValues()).length}_isState(e,t){return e===t}_reload(){um.navigateToChange(this.change),this.cancel()}_computeSendButtonLabel(e){return e?GE+" and "+jE:GE}_computeSendButtonTooltip(e){return e?zE:WE}_computeSavingLabelClass(e){return e?"saving":""}_computeSendButtonDisabled(e,t,n,i,s,a,o,r){if([e,t,n,i,s,a,o,r].some(e=>void 0===e))return;if(r||o)return!0;if(!0===e)return!1;return!(a&&t.length||n.length||i||s)}_computePatchSetWarning(e,t){let n=`Patch ${e} is not latest.`;return t&&(n+=" Voting on a non-latest patch will have no effect."),n}setPluginMessage(e){this._pluginMessage=e}_sendDisabledChanged(e){this.dispatchEvent(new CustomEvent("send-disabled-changed"))}_getReviewerSuggestionsProvider(e){const t=Jr.create(this.$.restAPI,e._number,Xr.REVIEWER);return t.init(),t}_getCcSuggestionsProvider(e){const t=Jr.create(this.$.restAPI,e._number,Xr.CC);return t.init(),t}_onThreadListModified(){this.dispatchEvent(new CustomEvent("comment-refresh",{composed:!0,bubbles:!0}))}}customElements.define(qE.is,qE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const KE=za`
  <style include="shared-styles">
    :host {
      background-color: var(--dialog-background-color);
      display: block;
    }
    .main {
      width: 100%;
    }
    ol {
      margin-left: var(--spacing-xl);
      list-style: decimal;
    }
    p {
      margin-bottom: var(--spacing-m);
    }
  </style>
  <gr-dialog confirm-label="Done" cancel-label="" on-confirm="_handleCloseTap">
    <div class="header" slot="header">How to update this change:</div>
    <div class="main" slot="main">
      <ol>
        <li>
          <p>
            Checkout this change locally and make your desired modifications to
            the files.
          </p>
          <template is="dom-if" if="[[_fetchCommand]]">
            <gr-shell-command command="[[_fetchCommand]]"></gr-shell-command>
          </template>
        </li>
        <li>
          <p>
            Update the local commit with your modifications using the following
            command.
          </p>
          <gr-shell-command command="[[_commitCommand]]"></gr-shell-command>
          <p>
            Leave the "Change-Id:" line of the commit message as is.
          </p>
        </li>
        <li>
          <p>Push the updated commit to Gerrit.</p>
          <gr-shell-command command="[[_pushCommand]]"></gr-shell-command>
        </li>
        <li>
          <p>Refresh this page to view the the update.</p>
        </li>
      </ol>
    </div>
  </gr-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,YE=["checkout","cherry pick","pull"];class XE extends(Zn(na(Ka))){static get template(){return KE}static get is(){return"gr-upload-help-dialog"}static get properties(){return{revision:Object,targetBranch:String,_commitCommand:{type:String,value:"git add . && git commit --amend --no-edit",readOnly:!0},_fetchCommand:{type:String,computed:"_computeFetchCommand(revision, _preferredDownloadCommand, _preferredDownloadScheme)"},_preferredDownloadCommand:String,_preferredDownloadScheme:String,_pushCommand:{type:String,computed:"_computePushCommand(targetBranch)"}}}attached(){super.attached(),this.$.restAPI.getLoggedIn().then(e=>{if(e)return this.$.restAPI.getPreferences()}).then(e=>{e&&(this._preferredDownloadCommand=e.download_command,this._preferredDownloadScheme=e.download_scheme)})}_handleCloseTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!1}))}_computeFetchCommand(e,t,n){if([e,t,n].some(e=>void 0===e))return;if(!e)return;if(!e||!e.fetch)return;let i=n;if(!i){const t=Object.keys(e.fetch).sort();if(0===t.length)return;i=t[0]}if(!e.fetch[i]||!e.fetch[i].commands)return;const s={};if(Object.entries(e.fetch[i].commands).forEach(([e,t])=>{s[e.toLowerCase()]=t}),t&&s[t.toLowerCase()])return s[t.toLowerCase()];for(let e=0;e<YE.length;e++)if(s[YE[e]])return s[YE[e]]}_computePushCommand(e){return"git push origin HEAD:refs/for/"+e}}customElements.define(XE.is,XE);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const JE=za`
  <style include="shared-styles">
    .container:not(.loading) {
      background-color: var(--background-color-tertiary);
    }
    .container.loading {
      color: var(--deemphasized-text-color);
      padding: var(--spacing-l);
    }
    .header {
      align-items: center;
      background-color: var(--background-color-primary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      padding: var(--spacing-s) var(--spacing-l);
      z-index: 99; /* Less than gr-overlay's backdrop */
    }
    .header.editMode {
      background-color: var(--edit-mode-background-color);
    }
    .header .download {
      margin-right: var(--spacing-l);
    }
    gr-change-status {
      display: initial;
      margin-left: var(--spacing-s);
    }
    gr-change-status:first-child {
      margin-left: 0;
    }
    .headerTitle {
      align-items: center;
      display: flex;
      flex: 1;
    }
    .headerSubject {
      font-family: var(--header-font-family);
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-h3);
      line-height: var(--line-height-h3);
      margin-left: var(--spacing-l);
    }
    .changeNumberColon {
      color: transparent;
    }
    .changeCopyClipboard {
      margin-left: var(--spacing-s);
    }
    #replyBtn {
      margin-bottom: var(--spacing-l);
    }
    gr-change-star {
      margin-left: var(--spacing-s);
      --gr-change-star-size: var(--line-height-normal);
    }
    a.changeNumber {
      margin-left: var(--spacing-xs);
    }
    gr-reply-dialog {
      width: 60em;
    }
    .changeStatus {
      text-transform: capitalize;
    }
    /* Strong specificity here is needed due to
         https://github.com/Polymer/polymer/issues/2531 */
    .container .changeInfo {
      display: flex;
      background-color: var(--background-color-secondary);
    }
    section {
      background-color: var(--view-background-color);
      box-shadow: var(--elevation-level-1);
    }
    .changeId {
      color: var(--deemphasized-text-color);
      font-family: var(--font-family);
      margin-top: var(--spacing-l);
    }
    .changeMetadata {
      /* Limit meta section to half of the screen at max */
      max-width: 50%;
    }
    .commitMessage {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      margin-right: var(--spacing-l);
      margin-bottom: var(--spacing-l);
      /* Account for border and padding and rounding errors. */
      max-width: calc(72ch + 2px + 2 * var(--spacing-m) + 0.4px);
    }
    .commitMessage gr-linked-text {
      word-break: break-word;
    }
    #commitMessageEditor {
      /* Account for border and padding and rounding errors. */
      min-width: calc(72ch + 2px + 2 * var(--spacing-m) + 0.4px);
    }
    .editCommitMessage {
      margin-top: var(--spacing-l);

      --gr-button: {
        padding: 5px 0px;
      }
    }
    .changeStatuses,
    .commitActions,
    .statusText {
      align-items: center;
      display: flex;
    }
    .changeStatuses {
      flex-wrap: wrap;
    }
    .mainChangeInfo {
      display: flex;
      flex: 1;
      flex-direction: column;
      min-width: 0;
    }
    #commitAndRelated {
      align-content: flex-start;
      display: flex;
      flex: 1;
      overflow-x: hidden;
    }
    .relatedChanges {
      flex: 1 1 auto;
      overflow: hidden;
      padding: var(--spacing-l) 0;
    }
    .mobile {
      display: none;
    }
    .warning {
      color: var(--error-text-color);
    }
    hr {
      border: 0;
      border-top: 1px solid var(--border-color);
      height: 0;
      margin-bottom: var(--spacing-l);
    }
    #relatedChanges.collapsed {
      margin-bottom: var(--spacing-l);
      max-height: var(--relation-chain-max-height, 2em);
      overflow: hidden;
    }
    .commitContainer {
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      margin: var(--spacing-l) 0;
      padding: 0 var(--spacing-l);
    }
    .collapseToggleContainer {
      display: flex;
      margin-bottom: 8px;
    }
    #relatedChangesToggle {
      display: none;
    }
    #relatedChangesToggle.showToggle {
      display: flex;
    }
    .collapseToggleContainer gr-button {
      display: block;
    }
    #relatedChangesToggle {
      margin-left: var(--spacing-l);
      padding-top: var(--related-change-btn-top-padding, 0);
    }
    .showOnEdit {
      display: none;
    }
    .scrollable {
      overflow: auto;
    }
    .text {
      white-space: pre;
    }
    gr-commit-info {
      display: inline-block;
    }
    paper-tabs {
      background-color: var(--background-color-tertiary);
      margin-top: var(--spacing-m);
      height: calc(var(--line-height-h3) + var(--spacing-m));
      --paper-tabs-selection-bar-color: var(--link-color);
    }
    paper-tab {
      box-sizing: border-box;
      max-width: 12em;
      --paper-tab-ink: var(--link-color);
    }
    gr-thread-list,
    gr-messages-list,
    gr-messages-list-experimental {
      display: block;
    }
    gr-thread-list {
      min-height: 250px;
    }
    #includedInOverlay {
      width: 65em;
    }
    #uploadHelpOverlay {
      width: 50em;
    }
    #metadata {
      --metadata-horizontal-padding: var(--spacing-l);
      padding-top: var(--spacing-l);
      width: 100%;
    }
    /* NOTE: If you update this breakpoint, also update the
      BREAKPOINT_RELATED_MED in the JS */
    @media screen and (max-width: 75em) {
      .relatedChanges {
        padding: 0;
      }
      #relatedChanges {
        padding-top: var(--spacing-l);
      }
      #commitAndRelated {
        flex-direction: column;
        flex-wrap: nowrap;
      }
      #commitMessageEditor {
        min-width: 0;
      }
      .commitMessage {
        margin-right: 0;
      }
      .mainChangeInfo {
        padding-right: 0;
      }
    }
    /* NOTE: If you update this breakpoint, also update the
      BREAKPOINT_RELATED_SMALL in the JS */
    @media screen and (max-width: 50em) {
      .mobile {
        display: block;
      }
      .header {
        align-items: flex-start;
        flex-direction: column;
        flex: 1;
        padding: var(--spacing-s) var(--spacing-l);
      }
      gr-change-star {
        vertical-align: middle;
      }
      .headerTitle {
        flex-wrap: wrap;
        font-family: var(--header-font-family);
        font-size: var(--font-size-h3);
        font-weight: var(--font-weight-h3);
        line-height: var(--line-height-h3);
      }
      .desktop {
        display: none;
      }
      .reply {
        display: block;
        margin-right: 0;
        /* px because don't have the same font size */
        margin-bottom: 6px;
      }
      .changeInfo-column:not(:last-of-type) {
        margin-right: 0;
        padding-right: 0;
      }
      .changeInfo,
      #commitAndRelated {
        flex-direction: column;
        flex-wrap: nowrap;
      }
      .commitContainer {
        margin: 0;
        padding: var(--spacing-l);
      }
      .changeMetadata {
        margin-top: var(--spacing-xs);
        max-width: none;
      }
      #metadata,
      .mainChangeInfo {
        padding: 0;
      }
      .commitActions {
        display: block;
        margin-top: var(--spacing-l);
        width: 100%;
      }
      .commitMessage {
        flex: initial;
        margin: 0;
      }
      /* Change actions are the only thing thant need to remain visible due
        to the fact that they may have the currently visible overlay open. */
      #mainContent.overlayOpen .hideOnMobileOverlay {
        display: none;
      }
      gr-reply-dialog {
        height: 100vh;
        min-width: initial;
        width: 100vw;
      }
      #replyOverlay {
        z-index: var(--reply-overlay-z-index);
      }
    }
    .patch-set-dropdown {
      margin: var(--spacing-m) 0 0 var(--spacing-m);
    }
    .show-robot-comments {
      margin: var(--spacing-m);
    }
  </style>
  <div class="container loading" hidden$="[[!_loading]]">Loading...</div>
  <!-- TODO(taoalpha): remove on-show-checks-table,
    Gerrit should not have any thing too special for a plugin,
    replace with a generic event: show-primary-tab. -->
  <div
    id="mainContent"
    class="container"
    on-show-checks-table="_setActivePrimaryTab"
    hidden$="{{_loading}}"
  >
    <section class="changeInfoSection">
      <div class$="[[_computeHeaderClass(_editMode)]]">
        <div class="headerTitle">
          <div class="changeStatuses">
            <template is="dom-repeat" items="[[_changeStatuses]]" as="status">
              <gr-change-status
                max-width="100"
                status="[[status]]"
              ></gr-change-status>
            </template>
          </div>
          <div class="statusText">
            <template
              is="dom-if"
              if="[[_computeShowCommitInfo(_changeStatus, _change.current_revision)]]"
            >
              <span class="text"> as </span>
              <gr-commit-info
                change="[[_change]]"
                commit-info="[[_computeMergedCommitInfo(_change.current_revision, _change.revisions)]]"
                server-config="[[_serverConfig]]"
              ></gr-commit-info>
            </template>
          </div>
          <gr-change-star
            id="changeStar"
            change="{{_change}}"
            on-toggle-star="_handleToggleStar"
            hidden$="[[!_loggedIn]]"
          ></gr-change-star>

          <a
            class="changeNumber"
            aria-label$="[[_computeChangePermalinkAriaLabel(_change._number)]]"
            href$="[[_computeChangeUrl(_change)]]"
            >[[_change._number]]</a
          >
          <span class="changeNumberColon">:&nbsp;</span>
          <span class="headerSubject">[[_change.subject]]</span>
          <gr-copy-clipboard
            class="changeCopyClipboard"
            hide-input=""
            text="[[_computeCopyTextForTitle(_change)]]"
          >
          </gr-copy-clipboard>
        </div>
        <!-- end headerTitle -->
        <div class="commitActions" hidden$="[[!_loggedIn]]">
          <gr-change-actions
            id="actions"
            change="[[_change]]"
            disable-edit="[[disableEdit]]"
            has-parent="[[hasParent]]"
            actions="[[_change.actions]]"
            revision-actions="{{_currentRevisionActions}}"
            change-num="[[_changeNum]]"
            change-status="[[_change.status]]"
            commit-num="[[_commitInfo.commit]]"
            latest-patch-num="[[computeLatestPatchNum(_allPatchSets)]]"
            commit-message="[[_latestCommitMessage]]"
            edit-patchset-loaded="[[hasEditPatchsetLoaded(_patchRange.*)]]"
            edit-mode="[[_editMode]]"
            edit-based-on-current-patch-set="[[hasEditBasedOnCurrentPatchSet(_allPatchSets)]]"
            private-by-default="[[_projectConfig.private_by_default]]"
            on-reload-change="_handleReloadChange"
            on-edit-tap="_handleEditTap"
            on-stop-edit-tap="_handleStopEditTap"
            on-download-tap="_handleOpenDownloadDialog"
          ></gr-change-actions>
        </div>
        <!-- end commit actions -->
      </div>
      <!-- end header -->
      <div class="changeInfo">
        <div class="changeInfo-column changeMetadata hideOnMobileOverlay">
          <gr-change-metadata
            id="metadata"
            change="{{_change}}"
            account="[[_account]]"
            revision="[[_selectedRevision]]"
            commit-info="[[_commitInfo]]"
            server-config="[[_serverConfig]]"
            parent-is-current="[[_parentIsCurrent]]"
            on-show-reply-dialog="_handleShowReplyDialog"
          >
          </gr-change-metadata>
        </div>
        <div id="mainChangeInfo" class="changeInfo-column mainChangeInfo">
          <div id="commitAndRelated" class="hideOnMobileOverlay">
            <div class="commitContainer">
              <div>
                <gr-button
                  id="replyBtn"
                  class="reply"
                  title="[[createTitle(Shortcut.OPEN_REPLY_DIALOG,
                        ShortcutSection.ACTIONS)]]"
                  hidden$="[[!_loggedIn]]"
                  primary=""
                  disabled="[[_replyDisabled]]"
                  on-click="_handleReplyTap"
                  >[[_replyButtonLabel]]</gr-button
                >
              </div>
              <div id="commitMessage" class="commitMessage">
                <gr-editable-content
                  id="commitMessageEditor"
                  editing="[[_editingCommitMessage]]"
                  content="{{_latestCommitMessage}}"
                  storage-key="[[_computeCommitMessageKey(_change._number, _change.current_revision)]]"
                  remove-zero-width-space=""
                  collapsed$="[[_computeCommitMessageCollapsed(_commitCollapsed, _commitCollapsible)]]"
                >
                  <gr-linked-text
                    pre=""
                    content="[[_latestCommitMessage]]"
                    config="[[_projectConfig.commentlinks]]"
                    remove-zero-width-space=""
                  ></gr-linked-text>
                </gr-editable-content>
                <gr-button
                  link=""
                  class="editCommitMessage"
                  on-click="_handleEditCommitMessage"
                  hidden$="[[_hideEditCommitMessage]]"
                  >Edit</gr-button
                >
                <div
                  class="changeId"
                  hidden$="[[!_changeIdCommitMessageError]]"
                >
                  <hr />
                  Change-Id:
                  <span
                    class$="[[_computeChangeIdClass(_changeIdCommitMessageError)]]"
                    title$="[[_computeTitleAttributeWarning(_changeIdCommitMessageError)]]"
                  >
                    [[_change.change_id]]
                  </span>
                </div>
              </div>
              <div
                id="commitCollapseToggle"
                class="collapseToggleContainer"
                hidden$="[[!_commitCollapsible]]"
              >
                <gr-button
                  link=""
                  id="commitCollapseToggleButton"
                  class="collapseToggleButton"
                  on-click="_toggleCommitCollapsed"
                >
                  [[_computeCollapseText(_commitCollapsed)]]
                </gr-button>
              </div>
              <gr-endpoint-decorator name="commit-container">
                <gr-endpoint-param name="change" value="[[_change]]">
                </gr-endpoint-param>
                <gr-endpoint-param
                  name="revision"
                  value="[[_selectedRevision]]"
                >
                </gr-endpoint-param>
              </gr-endpoint-decorator>
            </div>
            <div class="relatedChanges">
              <gr-related-changes-list
                id="relatedChanges"
                class$="[[_computeRelatedChangesClass(_relatedChangesCollapsed)]]"
                change="[[_change]]"
                mergeable="[[_mergeable]]"
                has-parent="{{hasParent}}"
                on-update="_updateRelatedChangeMaxHeight"
                patch-num="[[computeLatestPatchNum(_allPatchSets)]]"
                on-new-section-loaded="_computeShowRelatedToggle"
              >
              </gr-related-changes-list>
              <div id="relatedChangesToggle" class="collapseToggleContainer">
                <gr-button
                  link=""
                  id="relatedChangesToggleButton"
                  class="collapseToggleButton"
                  on-click="_toggleRelatedChangesCollapsed"
                >
                  [[_computeCollapseText(_relatedChangesCollapsed)]]
                </gr-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <paper-tabs id="primaryTabs" on-selected-changed="_setActivePrimaryTab">
      <paper-tab data-name$="[[_constants.PrimaryTabs.FILES]]">Files</paper-tab>
      <template
        is="dom-repeat"
        items="[[_dynamicTabHeaderEndpoints]]"
        as="tabHeader"
      >
        <paper-tab data-name$="[[tabHeader]]">
          <gr-endpoint-decorator name$="[[tabHeader]]">
            <gr-endpoint-param name="change" value="[[_change]]">
            </gr-endpoint-param>
            <gr-endpoint-param name="revision" value="[[_selectedRevision]]">
            </gr-endpoint-param>
          </gr-endpoint-decorator>
        </paper-tab>
      </template>
      <paper-tab data-name$="[[_constants.PrimaryTabs.FINDINGS]]">
        Findings
      </paper-tab>
    </paper-tabs>

    <section class="patchInfo">
      <div
        hidden$="[[!_isTabActive(_constants.PrimaryTabs.FILES, _activeTabs)]]"
      >
        <gr-file-list-header
          id="fileListHeader"
          account="[[_account]]"
          all-patch-sets="[[_allPatchSets]]"
          change="[[_change]]"
          change-num="[[_changeNum]]"
          revision-info="[[_revisionInfo]]"
          change-comments="[[_changeComments]]"
          commit-info="[[_commitInfo]]"
          change-url="[[_computeChangeUrl(_change)]]"
          edit-mode="[[_editMode]]"
          logged-in="[[_loggedIn]]"
          server-config="[[_serverConfig]]"
          shown-file-count="[[_shownFileCount]]"
          diff-prefs="[[_diffPrefs]]"
          diff-view-mode="{{viewState.diffMode}}"
          patch-num="{{_patchRange.patchNum}}"
          base-patch-num="{{_patchRange.basePatchNum}}"
          files-expanded="[[_filesExpanded]]"
          diff-prefs-disabled="[[_diffPrefsDisabled]]"
          on-open-diff-prefs="_handleOpenDiffPrefs"
          on-open-download-dialog="_handleOpenDownloadDialog"
          on-open-upload-help-dialog="_handleOpenUploadHelpDialog"
          on-open-included-in-dialog="_handleOpenIncludedInDialog"
          on-expand-diffs="_expandAllDiffs"
          on-collapse-diffs="_collapseAllDiffs"
        >
        </gr-file-list-header>
        <gr-file-list
          id="fileList"
          class="hideOnMobileOverlay"
          diff-prefs="{{_diffPrefs}}"
          change="[[_change]]"
          change-num="[[_changeNum]]"
          patch-range="{{_patchRange}}"
          change-comments="[[_changeComments]]"
          drafts="[[_diffDrafts]]"
          revisions="[[_change.revisions]]"
          project-config="[[_projectConfig]]"
          selected-index="{{viewState.selectedFileIndex}}"
          diff-view-mode="[[viewState.diffMode]]"
          edit-mode="[[_editMode]]"
          num-files-shown="{{_numFilesShown}}"
          files-expanded="{{_filesExpanded}}"
          file-list-increment="{{_numFilesShown}}"
          on-files-shown-changed="_setShownFiles"
          on-file-action-tap="_handleFileActionTap"
          on-reload-drafts="_reloadDraftsWithCallback"
        >
        </gr-file-list>
      </div>

      <template
        is="dom-if"
        if="[[_isTabActive(_constants.PrimaryTabs.FINDINGS, _activeTabs)]]"
      >
        <gr-dropdown-list
          class="patch-set-dropdown"
          items="[[_robotCommentsPatchSetDropdownItems]]"
          on-value-change="_handleRobotCommentPatchSetChanged"
          value="[[_currentRobotCommentsPatchSet]]"
        >
        </gr-dropdown-list>
        <gr-thread-list
          threads="[[_robotCommentThreads]]"
          change="[[_change]]"
          change-num="[[_changeNum]]"
          logged-in="[[_loggedIn]]"
          hide-toggle-buttons
          empty-thread-msg="[[_messages.NO_ROBOT_COMMENTS_THREADS_MSG]]"
          on-thread-list-modified="_handleReloadDiffComments"
        >
        </gr-thread-list>
        <template is="dom-if" if="[[_showRobotCommentsButton]]">
          <gr-button
            class="show-robot-comments"
            on-click="_toggleShowRobotComments"
          >
            [[_computeShowText(_showAllRobotComments)]]
          </gr-button>
        </template>
      </template>

      <template
        is="dom-if"
        if="[[_isTabActive(_selectedTabPluginHeader, _activeTabs)]]"
      >
        <gr-endpoint-decorator name$="[[_selectedTabPluginEndpoint]]">
          <gr-endpoint-param name="change" value="[[_change]]">
          </gr-endpoint-param>
          <gr-endpoint-param name="revision" value="[[_selectedRevision]]">
          </gr-endpoint-param>
        </gr-endpoint-decorator>
      </template>
    </section>

    <gr-endpoint-decorator name="change-view-integration">
      <gr-endpoint-param name="change" value="[[_change]]"> </gr-endpoint-param>
      <gr-endpoint-param name="revision" value="[[_selectedRevision]]">
      </gr-endpoint-param>
    </gr-endpoint-decorator>

    <paper-tabs id="secondaryTabs" on-selected-changed="_setActiveSecondaryTab">
      <paper-tab
        data-name$="[[_constants.SecondaryTabs.CHANGE_LOG]]"
        class="changeLog"
      >
        Change Log
      </paper-tab>
      <paper-tab
        data-name$="[[_constants.SecondaryTabs.COMMENT_THREADS]]"
        class="commentThreads"
      >
        <gr-tooltip-content
          has-tooltip=""
          title$="[[_computeTotalCommentCounts(_change.unresolved_comment_count, _changeComments)]]"
        >
          <span>Comment Threads</span></gr-tooltip-content
        >
      </paper-tab>
    </paper-tabs>
    <section class="changeLog">
      <template
        is="dom-if"
        if="[[_isTabActive(_constants.SecondaryTabs.CHANGE_LOG, _activeTabs)]]"
      >
        <template is="dom-if" if="[[!_isChangeLogExperimentEnabled()]]">
          <gr-messages-list
            class="hideOnMobileOverlay"
            change-num="[[_changeNum]]"
            labels="[[_change.labels]]"
            messages="[[_change.messages]]"
            reviewer-updates="[[_change.reviewer_updates]]"
            change-comments="[[_changeComments]]"
            project-name="[[_change.project]]"
            show-reply-buttons="[[_loggedIn]]"
            on-message-anchor-tap="_handleMessageAnchorTap"
            on-reply="_handleMessageReply"
          ></gr-messages-list>
        </template>
        <template is="dom-if" if="[[_isChangeLogExperimentEnabled()]]">
          <gr-messages-list-experimental
            class="hideOnMobileOverlay"
            change-num="[[_changeNum]]"
            labels="[[_change.labels]]"
            messages="[[_change.messages]]"
            reviewer-updates="[[_change.reviewer_updates]]"
            change-comments="[[_changeComments]]"
            project-name="[[_change.project]]"
            show-reply-buttons="[[_loggedIn]]"
            on-message-anchor-tap="_handleMessageAnchorTap"
            on-reply="_handleMessageReply"
          ></gr-messages-list-experimental>
        </template>
      </template>
      <template
        is="dom-if"
        if="[[_isTabActive(_constants.SecondaryTabs.COMMENT_THREADS, _activeTabs)]]"
      >
        <gr-thread-list
          threads="[[_commentThreads]]"
          change="[[_change]]"
          change-num="[[_changeNum]]"
          logged-in="[[_loggedIn]]"
          only-show-robot-comments-with-human-reply=""
          on-thread-list-modified="_handleReloadDiffComments"
        ></gr-thread-list>
      </template>
    </section>
  </div>

  <gr-apply-fix-dialog
    id="applyFixDialog"
    prefs="[[_diffPrefs]]"
    change="[[_change]]"
    change-num="[[_changeNum]]"
  ></gr-apply-fix-dialog>
  <gr-overlay id="downloadOverlay" with-backdrop="">
    <gr-download-dialog
      id="downloadDialog"
      change="[[_change]]"
      patch-num="[[_patchRange.patchNum]]"
      config="[[_serverConfig.download]]"
      on-close="_handleDownloadDialogClose"
    ></gr-download-dialog>
  </gr-overlay>
  <gr-overlay id="uploadHelpOverlay" with-backdrop="">
    <gr-upload-help-dialog
      revision="[[_currentRevision]]"
      target-branch="[[_change.branch]]"
      on-close="_handleCloseUploadHelpDialog"
    ></gr-upload-help-dialog>
  </gr-overlay>
  <gr-overlay id="includedInOverlay" with-backdrop="">
    <gr-included-in-dialog
      id="includedInDialog"
      change-num="[[_changeNum]]"
      on-close="_handleIncludedInDialogClose"
    ></gr-included-in-dialog>
  </gr-overlay>
  <gr-overlay
    id="replyOverlay"
    class="scrollable"
    no-cancel-on-outside-click=""
    no-cancel-on-esc-key=""
    with-backdrop=""
  >
    <gr-reply-dialog
      id="replyDialog"
      change="{{_change}}"
      patch-num="[[computeLatestPatchNum(_allPatchSets)]]"
      permitted-labels="[[_change.permitted_labels]]"
      draft-comment-threads="[[_draftCommentThreads]]"
      project-config="[[_projectConfig]]"
      can-be-started="[[_canStartReview]]"
      on-send="_handleReplySent"
      on-cancel="_handleReplyCancel"
      on-autogrow="_handleReplyAutogrow"
      on-send-disabled-changed="_resetReplyOverlayFocusStops"
      hidden$="[[!_loggedIn]]"
    >
    </gr-reply-dialog>
  </gr-overlay>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-comment-api id="commentAPI"></gr-comment-api>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,ZE={FILES:"_files",FINDINGS:"_findings"},QE={CHANGE_LOG:"_changeLog",COMMENT_THREADS:"_commentThreads"},eS="mismatch",tS="missing",nS=/^Change-Id\:\s(I[0-9a-f]{8,40})/gm,iS=/^(R|CC)=/gm,sS=/[ \t]+$/gm,aS="A newer patch set has been uploaded",oS="This change has been restored",rS="This change has been abandoned",lS="This change has been merged",cS="There are new messages on this change",dS="SIDE_BY_SIDE",hS="UNIFIED_DIFF";class pS extends(ra([Wu,vm,zg],Zn(na(Ka)))){static get template(){return JE}static get is(){return"gr-change-view"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},viewState:{type:Object,notify:!0,value:()=>({}),observer:"_viewStateChanged"},backPage:String,hasParent:Boolean,keyEventTarget:{type:Object,value:()=>document.body},disableEdit:{type:Boolean,value:!1},disableDiffPrefs:{type:Boolean,value:!1},_diffPrefsDisabled:{type:Boolean,computed:"_computeDiffPrefsDisabled(disableDiffPrefs, _loggedIn)"},_commentThreads:Array,_draftCommentThreads:{type:Array},_robotCommentThreads:{type:Array,computed:"_computeRobotCommentThreads(_commentThreads, _currentRobotCommentsPatchSet, _showAllRobotComments)"},_serverConfig:{type:Object,observer:"_startUpdateCheckTimer"},_diffPrefs:Object,_numFilesShown:{type:Number,value:200,observer:"_numFilesShownChanged"},_account:{type:Object,value:{}},_prefs:Object,_changeComments:Object,_canStartReview:{type:Boolean,computed:"_computeCanStartReview(_change)"},_comments:Object,_change:{type:Object,observer:"_changeChanged"},_revisionInfo:{type:Object,computed:"_getRevisionInfo(_change)"},_commitInfo:Object,_currentRevision:{type:Object,computed:"_computeCurrentRevision(_change.current_revision, _change.revisions)",observer:"_handleCurrentRevisionUpdate"},_files:Object,_changeNum:String,_diffDrafts:{type:Object,value:()=>({})},_editingCommitMessage:{type:Boolean,value:!1},_hideEditCommitMessage:{type:Boolean,computed:"_computeHideEditCommitMessage(_loggedIn, _editingCommitMessage, _change, _editMode, _commitCollapsed, _commitCollapsible)"},_diffAgainst:String,_latestCommitMessage:{type:String,value:""},_constants:{type:Object,value:{SecondaryTabs:QE,PrimaryTabs:ZE}},_messages:{type:Object,value:{NO_ROBOT_COMMENTS_THREADS_MSG:"There are no findings for this patchset."}},_lineHeight:Number,_changeIdCommitMessageError:{type:String,computed:"_computeChangeIdCommitMessageError(_latestCommitMessage, _change)"},_patchRange:{type:Object},_filesExpanded:String,_basePatchNum:String,_selectedRevision:Object,_currentRevisionActions:Object,_allPatchSets:{type:Array,computed:"computeAllPatchSets(_change, _change.revisions.*)"},_loggedIn:{type:Boolean,value:!1},_loading:Boolean,_projectConfig:Object,_replyButtonLabel:{type:String,value:"Reply",computed:"_computeReplyButtonLabel(_diffDrafts.*, _canStartReview)"},_selectedPatchSet:String,_shownFileCount:Number,_initialLoadComplete:{type:Boolean,value:!1},_replyDisabled:{type:Boolean,value:!0,computed:"_computeReplyDisabled(_serverConfig)"},_changeStatus:{type:String,computed:"changeStatusString(_change)"},_changeStatuses:{type:String,computed:"_computeChangeStatusChips(_change, _mergeable, _submitEnabled)"},_commitCollapsed:{type:Boolean,value:!0},_commitCollapsible:{type:Boolean,computed:"_computeCommitCollapsible(_latestCommitMessage)"},_relatedChangesCollapsed:{type:Boolean,value:!0},_updateCheckTimerHandle:Number,_editMode:{type:Boolean,computed:"_computeEditMode(_patchRange.*, params.*)"},_showRelatedToggle:{type:Boolean,value:!1,observer:"_updateToggleContainerClass"},_parentIsCurrent:{type:Boolean,computed:"_isParentCurrent(_currentRevisionActions)"},_submitEnabled:{type:Boolean,computed:"_isSubmitEnabled(_currentRevisionActions)"},_mergeable:{type:Boolean,value:void 0},_showFileTabContent:{type:Boolean,value:!0},_dynamicTabHeaderEndpoints:{type:Array},_dynamicTabContentEndpoints:{type:Array},_selectedTabPluginEndpoint:{type:String},_selectedTabPluginHeader:{type:String},_robotCommentsPatchSetDropdownItems:{type:Array,value:()=>[],computed:"_computeRobotCommentsPatchSetDropdownItems(_change, _commentThreads)"},_currentRobotCommentsPatchSet:{type:Number},_activeTabs:{type:Array,value:[ZE.FILES,QE.CHANGE_LOG]},_showAllRobotComments:{type:Boolean,value:!1},_showRobotCommentsButton:{type:Boolean,value:!1}}}static get observers(){return["_labelsChanged(_change.labels.*)","_paramsAndChangeChanged(params, _change)","_patchNumChanged(_patchRange.patchNum)"]}keyboardShortcuts(){return{[this.Shortcut.SEND_REPLY]:null,[this.Shortcut.EMOJI_DROPDOWN]:null,[this.Shortcut.REFRESH_CHANGE]:"_handleRefreshChange",[this.Shortcut.OPEN_REPLY_DIALOG]:"_handleOpenReplyDialog",[this.Shortcut.OPEN_DOWNLOAD_DIALOG]:"_handleOpenDownloadDialogShortcut",[this.Shortcut.TOGGLE_DIFF_MODE]:"_handleToggleDiffMode",[this.Shortcut.TOGGLE_CHANGE_STAR]:"_handleToggleChangeStar",[this.Shortcut.UP_TO_DASHBOARD]:"_handleUpToDashboard",[this.Shortcut.EXPAND_ALL_MESSAGES]:"_handleExpandAllMessages",[this.Shortcut.COLLAPSE_ALL_MESSAGES]:"_handleCollapseAllMessages",[this.Shortcut.OPEN_DIFF_PREFS]:"_handleOpenDiffPrefsShortcut",[this.Shortcut.EDIT_TOPIC]:"_handleEditTopic"}}constructor(){super(),this.flagsService=e.flagsService}created(){super.created(),this.addEventListener("topic-changed",()=>this._handleTopicChanged()),this.addEventListener("fullscreen-overlay-opened",()=>this._handleHideBackgroundContent()),this.addEventListener("fullscreen-overlay-closed",()=>this._handleShowBackgroundContent()),this.addEventListener("diff-comments-modified",()=>this._handleReloadCommentThreads())}attached(){super.attached(),this._getServerConfig().then(e=>{this._serverConfig=e}),this._getLoggedIn().then(e=>{this._loggedIn=e,e&&this.$.restAPI.getAccount().then(e=>{this._account=e}),this._setDiffViewMode()}),tr.awaitPluginsLoaded().then(()=>{this._dynamicTabHeaderEndpoints=ir.getDynamicEndpoints("change-view-tab-header"),this._dynamicTabContentEndpoints=ir.getDynamicEndpoints("change-view-tab-content"),this._dynamicTabContentEndpoints.length!==this._dynamicTabHeaderEndpoints.length&&console.warn("Different number of tab headers and tab content.")}).then(()=>this._initActiveTabs(this.params)),this.addEventListener("comment-save",this._handleCommentSave.bind(this)),this.addEventListener("comment-refresh",this._reloadDrafts.bind(this)),this.addEventListener("comment-discard",this._handleCommentDiscard.bind(this)),this.addEventListener("change-message-deleted",()=>this._reload()),this.addEventListener("editable-content-save",this._handleCommitMessageSave.bind(this)),this.addEventListener("editable-content-cancel",this._handleCommitMessageCancel.bind(this)),this.addEventListener("open-fix-preview",this._onOpenFixPreview.bind(this)),this.addEventListener("close-fix-preview",this._onCloseFixPreview.bind(this)),this.listen(window,"scroll","_handleScroll"),this.listen(document,"visibilitychange","_handleVisibilityChange"),this.addEventListener("show-primary-tab",e=>this._setActivePrimaryTab(e)),this.addEventListener("show-secondary-tab",e=>this._setActiveSecondaryTab(e))}detached(){super.detached(),this.unlisten(window,"scroll","_handleScroll"),this.unlisten(document,"visibilitychange","_handleVisibilityChange"),this._updateCheckTimerHandle&&this._cancelUpdateCheckTimer()}_isChangeLogExperimentEnabled(){return this.flagsService.isEnabled("UiFeature__cleaner_changelog")}get messagesList(){const e=this._isChangeLogExperimentEnabled()?"gr-messages-list-experimental":"gr-messages-list";return this.shadowRoot.querySelector(e)}get threadList(){return this.shadowRoot.querySelector("gr-thread-list")}_setDiffViewMode(e){if(e||!this.viewState.diffViewMode)return this._getPreferences().then(e=>{this.viewState.diffMode||this.set("viewState.diffMode",e.default_diff_view)}).then(()=>{this.viewState.diffMode||this.set("viewState.diffMode","SIDE_BY_SIDE")})}_onOpenFixPreview(e){this.$.applyFixDialog.open(e)}_onCloseFixPreview(e){this._reload()}_handleToggleDiffMode(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.viewState.diffMode===dS?this.$.fileListHeader.setDiffViewMode(hS):this.$.fileListHeader.setDiffViewMode(dS))}_isTabActive(e,t){return t.includes(e)}_setActiveTab(e,t){const{activeTabName:n,activeTabIndex:i,scrollIntoView:s}=t,a=e.querySelectorAll("paper-tab");let o=-1;if(void 0!==i)o=i;else for(let e=0;e<=a.length;e++){if(a[e].dataset.name===n){o=e;break}}if(-1===o)return void console.warn("tab not found with given info",t);const r=a[o].dataset.name;return s&&e.scrollIntoView(),e.selected!==o&&(e.selected=o,this.$.reporting.reportInteraction("show-tab",{tabName:r})),r}_setActivePrimaryTab(e){const t=this.shadowRoot.querySelector("#primaryTabs"),n=this._setActiveTab(t,{activeTabName:e.detail.tab,activeTabIndex:e.detail.value,scrollIntoView:e.detail.scrollIntoView});if(n){this._activeTabs=[n,this._activeTabs[1]];const e=(this._dynamicTabHeaderEndpoints||[]).indexOf(n);-1!==e?(this._selectedTabPluginEndpoint=this._dynamicTabContentEndpoints[e],this._selectedTabPluginHeader=this._dynamicTabHeaderEndpoints[e]):(this._selectedTabPluginEndpoint="",this._selectedTabPluginHeader="")}}_setActiveSecondaryTab(e){const t=this.shadowRoot.querySelector("#secondaryTabs"),n=this._setActiveTab(t,{activeTabName:e.detail.tab,activeTabIndex:e.detail.value,scrollIntoView:e.detail.scrollIntoView});n&&(this._activeTabs=[this._activeTabs[0],n])}_handleEditCommitMessage(){this._editingCommitMessage=!0,this.$.commitMessageEditor.focusTextarea()}_handleCommitMessageSave(e){const t=e.detail.content.replace(sS,"");this.$.jsAPI.handleCommitMessage(this._change,t),this.$.commitMessageEditor.disabled=!0,this.$.restAPI.putChangeCommitMessage(this._changeNum,t).then(e=>{this.$.commitMessageEditor.disabled=!1,e.ok&&(this._latestCommitMessage=this._prepareCommitMsgForLinkify(t),this._editingCommitMessage=!1,this._reloadWindow())}).catch(e=>{this.$.commitMessageEditor.disabled=!1})}_reloadWindow(){window.location.reload()}_handleCommitMessageCancel(e){this._editingCommitMessage=!1}_computeChangeStatusChips(e,t,n){if([e,t].some(e=>void 0===e))return;if(null===t)return[];const i={includeDerived:!0,mergeable:!!t,submitEnabled:!!n};return this.changeStatuses(e,i)}_computeHideEditCommitMessage(e,t,n,i,s,a){return!!(!e||t||n&&n.status===this.ChangeStatus.MERGED||i||s&&a)}_robotCommentCountPerPatchSet(e){return e.reduce((e,t)=>{const n=t.comments,i=n.reduce((e,t)=>t.robot_id?e+1:e,0);return e[n[0].patch_set]=(e[n[0].patch_set]||0)+i,e},{})}_computeText(e,t){const n=this._robotCommentCountPerPatchSet(t)[e._number]||0;if(0===n)return`Patchset ${e._number}`;const i=1===n?"finding":"findings";return`Patchset ${e._number}`+` (${n} ${i})`}_computeRobotCommentsPatchSetDropdownItems(e,t){return e&&t&&e.revisions?Object.values(e.revisions).filter(e=>"edit"!==e._number).map(e=>({text:this._computeText(e,t),value:e._number})).sort((e,t)=>t.value-e.value):[]}_handleCurrentRevisionUpdate(e){this._currentRobotCommentsPatchSet=e._number}_handleRobotCommentPatchSetChanged(e){const t=parseInt(e.detail.value);t!==this._currentRobotCommentsPatchSet&&(this._currentRobotCommentsPatchSet=t)}_computeShowText(e){return e?"Show Less":"Show more"}_toggleShowRobotComments(){this._showAllRobotComments=!this._showAllRobotComments}_computeRobotCommentThreads(e,t,n){if(!e||!t)return[];const i=e.filter(e=>{const n=e.comments||[];return n.length&&n[0].robot_id&&n[0].patch_set===t});return this._showRobotCommentsButton=i.length>10,i.slice(0,n?void 0:10)}_handleReloadCommentThreads(){this._reloadDrafts().then(()=>{this._commentThreads=this._changeComments.getAllThreadsForChange().map(e=>Object.assign({},e)),Ii()})}_handleReloadDiffComments(e){this._reloadDrafts().then(()=>{this.$.fileList.reloadCommentsForThreadWithRootId(e.detail.rootId,e.detail.path),Ii()})}_computeTotalCommentCounts(e,t){if(!t)return;const n=t.computeDraftCount(),i=Yr.computeString(e,"unresolved"),s=Yr.computePluralString(n,"draft");return i+(i&&s?", ":"")+s}_handleCommentSave(e){const t=e.detail.comment;if(!t.__draft)return;t.patch_set=t.patch_set||this._patchRange.patchNum;const n=Object.assign({},this._diffDrafts);if(!n[t.path])return n[t.path]=[t],void(this._diffDrafts=n);for(let e=0;e<this._diffDrafts[t.path].length;e++)if(this._diffDrafts[t.path][e].id===t.id)return n[t.path][e]=t,void(this._diffDrafts=n);n[t.path].push(t),n[t.path].sort((e,t)=>(e.line||-1)-(t.line||-1)),this._diffDrafts=n}_handleCommentDiscard(e){const t=e.detail.comment;if(!t.__draft)return;if(!this._diffDrafts[t.path])return;let n=-1;for(let e=0;e<this._diffDrafts[t.path].length;e++)if(this._diffDrafts[t.path][e].id===t.id){n=e;break}if(-1===n)return;t.patch_set=t.patch_set||this._patchRange.patchNum;const i=Object.assign({},this._diffDrafts);i[t.path].splice(n,1),0===i[t.path].length&&delete i[t.path],this._diffDrafts=i}_handleReplyTap(e){e.preventDefault(),this._openReplyDialog(this.$.replyDialog.FocusTarget.ANY)}_handleOpenDiffPrefs(){this.$.fileList.openDiffPrefs()}_handleOpenIncludedInDialog(){this.$.includedInDialog.loadData().then(()=>{Ii(),this.$.includedInOverlay.refit()}),this.$.includedInOverlay.open()}_handleIncludedInDialogClose(e){this.$.includedInOverlay.close()}_handleOpenDownloadDialog(){this.$.downloadOverlay.open().then(()=>{this.$.downloadOverlay.setFocusStops(this.$.downloadDialog.getFocusStops()),this.$.downloadDialog.focus()})}_handleDownloadDialogClose(e){this.$.downloadOverlay.close()}_handleOpenUploadHelpDialog(e){this.$.uploadHelpOverlay.open()}_handleCloseUploadHelpDialog(e){this.$.uploadHelpOverlay.close()}_handleMessageReply(e){const t=e.detail.message.message.split("\n").map(e=>"> "+e).join("\n")+"\n\n";this.$.replyDialog.quote=t,this._openReplyDialog(this.$.replyDialog.FocusTarget.BODY)}_handleHideBackgroundContent(){this.$.mainContent.classList.add("overlayOpen")}_handleShowBackgroundContent(){this.$.mainContent.classList.remove("overlayOpen")}_handleReplySent(e){this.addEventListener("change-details-loaded",()=>{this.$.reporting.timeEnd("SendReply")},{once:!0}),this.$.replyOverlay.close(),this._reload()}_handleReplyCancel(e){this.$.replyOverlay.close()}_handleReplyAutogrow(e){this.debounce("reply-overlay-refit",()=>{this.$.replyOverlay.refit()},500)}_handleShowReplyDialog(e){let t=this.$.replyDialog.FocusTarget.REVIEWERS;e.detail.value&&e.detail.value.ccsOnly&&(t=this.$.replyDialog.FocusTarget.CCS),this._openReplyDialog(t)}_handleScroll(){this.debounce("scroll",()=>{this.viewState.scrollTop=document.body.scrollTop},150)}_setShownFiles(e){this._shownFileCount=e.detail.length}_expandAllDiffs(){this.$.fileList.expandAllDiffs()}_collapseAllDiffs(){this.$.fileList.collapseAllDiffs()}_paramsChanged(e){if(e.view!==um.View.CHANGE)return void(this._initialLoadComplete=!1);e.changeNum&&e.project&&this.$.restAPI.setInProjectLookup(e.changeNum,e.project);const t=this._patchRange&&void 0!==e.patchNum&&void 0!==e.basePatchNum&&(this._patchRange.patchNum!==e.patchNum||this._patchRange.basePatchNum!==e.basePatchNum);this._changeNum!==e.changeNum&&(this._initialLoadComplete=!1);const n={patchNum:e.patchNum,basePatchNum:e.basePatchNum||"PARENT"};if(this.$.fileList.collapseAllDiffs(),this._patchRange=n,this._initialLoadComplete&&t)return null==n.patchNum&&(n.patchNum=this.computeLatestPatchNum(this._allPatchSets)),void this._reloadPatchNumDependentResources().then(()=>{this._sendShowChangeEvent()});this._changeNum=e.changeNum,this.$.relatedChanges.clear(),this._reload(!0).then(()=>{this._performPostLoadTasks()}),tr.awaitPluginsLoaded().then(()=>{this._initActiveTabs(e)})}_initActiveTabs(e={}){let t=ZE.FILES;e.queryMap&&e.queryMap.has("tab")&&(t=e.queryMap.get("tab")),this._setActivePrimaryTab({detail:{tab:t}});let n=QE.CHANGE_LOG;e.queryMap&&e.queryMap.has("secondaryTab")&&(n=e.queryMap.get("secondaryTab")),this._setActiveSecondaryTab({detail:{tab:n}})}_sendShowChangeEvent(){this.$.jsAPI.handleEvent(this.$.jsAPI.EventType.SHOW_CHANGE,{change:this._change,patchNum:this._patchRange.patchNum,info:{mergeable:this._mergeable}})}_performPostLoadTasks(){this._maybeShowReplyDialog(),this._maybeShowRevertDialog(),this._sendShowChangeEvent(),this.async(()=>{this.viewState.scrollTop?document.documentElement.scrollTop=document.body.scrollTop=this.viewState.scrollTop:this._maybeScrollToMessage(window.location.hash),this._initialLoadComplete=!0})}_paramsAndChangeChanged(e,t){if([e,t].some(e=>void 0===e))return;const n=this.viewState.patchRange;this.viewState.changeNum===this._changeNum&&n.basePatchNum===this._patchRange.basePatchNum&&n.patchNum===this._patchRange.patchNum||this._resetFileListViewState()}_viewStateChanged(e){this._numFilesShown=e.numFilesShown?e.numFilesShown:200}_numFilesShownChanged(e){this.viewState.numFilesShown=e}_handleMessageAnchorTap(e){const t="#message-"+e.detail.id,n=um.getUrlForChange(this._change,this._patchRange.patchNum,this._patchRange.basePatchNum,this._editMode,t);history.replaceState(null,"",n)}_maybeScrollToMessage(e){e.startsWith("#message-")&&this.messagesList.scrollToMessage(e.substr("#message-".length))}_getLocationSearch(){return window.location.search}_getUrlParameter(e){const t=this._getLocationSearch().substring(1).split("&");for(let n=0;n<t.length;n++){const i=t[n].split("=");if(i[0]==e)return i[0]}return null}_maybeShowRevertDialog(){tr.awaitPluginsLoaded().then(this._getLoggedIn.bind(this)).then(e=>{e&&this._change&&this._change.status===this.ChangeStatus.MERGED&&this._getUrlParameter("revert")&&this.$.actions.showRevertDialog()})}_maybeShowReplyDialog(){this._getLoggedIn().then(e=>{e&&this.viewState.showReplyDialog&&(this._openReplyDialog(this.$.replyDialog.FocusTarget.ANY),this.async(()=>{this.$.replyOverlay.center()},100),this.async(()=>{this.$.replyOverlay.center()},1e3),this.set("viewState.showReplyDialog",!1))})}_resetFileListViewState(){this.set("viewState.selectedFileIndex",0),this.set("viewState.scrollTop",0),this.viewState.changeNum&&this.viewState.changeNum!==this._changeNum&&(this._setDiffViewMode(!0),this.set("_numFilesShown",200)),this.set("viewState.changeNum",this._changeNum),this.set("viewState.patchRange",this._patchRange)}_changeChanged(e){if(!e||!this._patchRange||!this._allPatchSets)return;const t=this._getBasePatchNum(e,this._patchRange);this.set("_patchRange.patchNum",this._patchRange.patchNum||this.computeLatestPatchNum(this._allPatchSets)),this.set("_patchRange.basePatchNum",t);const n=e.subject+" ("+e.change_id.substr(0,9)+")";this.dispatchEvent(new CustomEvent("title-change",{detail:{title:n},composed:!0,bubbles:!0}))}_getBasePatchNum(e,t){if(t.basePatchNum&&"PARENT"!==t.basePatchNum)return t.basePatchNum;const n=this._getRevisionInfo(e);if(!n)return"PARENT";const i=n.getParentCountMap(),s=i.hasOwnProperty(1)?i[1]:1,a=this._prefs&&"FIRST_PARENT"===this._prefs.default_base_for_merges;return s>1&&a&&!t.patchNum?-1:"PARENT"}_computeChangeUrl(e){return um.getUrlForChange(e)}_computeShowCommitInfo(e,t){return"Merged"===e&&t}_computeMergedCommitInfo(e,t){const n=t[e];return n&&n.commit?(n.commit.commit||(n.commit.commit=e),n.commit):{}}_computeChangeIdClass(e){return e===eS?"warning":""}_computeTitleAttributeWarning(e){return e===eS?"Change-Id mismatch":e===tS?"No Change-Id in commit message":void 0}_computeChangeIdCommitMessageError(e,t){if([e,t].some(e=>void 0===e))return;if(!e)return tS;let n,i;for(;i=nS.exec(e);)n=i[1];return n?n===t.change_id?null:eS:tS}_computeLabelNames(e){return Object.keys(e).sort()}_computeLabelValues(e,t){const n=[],i=t[e];if(!i)return n;const s=i.all||[];for(const i of s)if(i.value&&i.value!=t[e].default_value){let e,t="";i.value>0?(t="+",e="approved"):i.value<0&&(e="notApproved"),n.push({value:t+i.value,className:e,account:i})}return n}_computeReplyButtonLabel(e,t){if([e,t].some(e=>void 0===e))return"Reply";if(t)return"Start Review";const n=e&&e.base||{},i=Object.keys(n).reduce((e,t)=>e+n[t].length,0);let s="Reply";return i>0&&(s+=" ("+i+")"),s}_handleOpenReplyDialog(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||this._getLoggedIn().then(t=>{t?(e.preventDefault(),this._openReplyDialog(this.$.replyDialog.FocusTarget.ANY)):this.dispatchEvent(new CustomEvent("show-auth-required",{composed:!0,bubbles:!0}))})}_handleOpenDownloadDialogShortcut(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.downloadOverlay.open())}_handleEditTopic(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.metadata.editTopic())}_handleRefreshChange(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),um.navigateToChange(this._change))}_handleToggleChangeStar(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.changeStar.toggleStar())}_handleUpToDashboard(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._determinePageBack())}_handleExpandAllMessages(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.messagesList.handleExpandCollapse(!0))}_handleCollapseAllMessages(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.messagesList.handleExpandCollapse(!1))}_handleOpenDiffPrefsShortcut(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||this._diffPrefsDisabled||(e.preventDefault(),this.$.fileList.openDiffPrefs())}_determinePageBack(){um.navigateToRelativeUrl(this.backPage||um.getUrlForRoot())}_handleLabelRemoved(e,t){for(const n of e)for(const e of n.removed){const n=t.split("."),i=n.splice(0,n.length-2),s=this.get(i);if(s.approved&&s.approved._account_id===e._account_id)return void this._reload()}}_labelsChanged(e){e&&(e.value&&e.value.indexSplices&&this._handleLabelRemoved(e.value.indexSplices,e.path),this.$.jsAPI.handleEvent(this.$.jsAPI.EventType.LABEL_CHANGE,{change:this._change}))}_openReplyDialog(e){this.$.replyOverlay.open().finally(()=>{this._resetReplyOverlayFocusStops(),this.$.replyDialog.open(e),Ii(),this.$.replyOverlay.center()})}_handleReloadChange(e){return this._reload().then(()=>{const t=e.detail.action;"rebase"!==t&&"submit"!==t||um.navigateToChange(this._change)})}_handleGetChangeDetailError(e){this.dispatchEvent(new CustomEvent("page-error",{detail:{response:e},composed:!0,bubbles:!0}))}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_getServerConfig(){return this.$.restAPI.getConfig()}_getProjectConfig(){if(this._change)return this.$.restAPI.getProjectConfig(this._change.project).then(e=>{this._projectConfig=e})}_getPreferences(){return this.$.restAPI.getPreferences()}_prepareCommitMsgForLinkify(e){return e.replace(iS,"$1=​")}_processEdit(e,t){t&&(e.revisions[t.commit.commit]={_number:this.EDIT_NAME,basePatchNum:t.base_patch_set_number,commit:t.commit,fetch:t.fetch},this._patchRange.patchNum||e.current_revision!==t.base_revision||(e.current_revision=t.commit.commit,this.set("_patchRange.patchNum",this.EDIT_NAME),e.revisions[t.commit.commit].actions=e.revisions[t.base_revision].actions))}_getChangeDetail(){const e=this.$.restAPI.getChangeDetail(this._changeNum,this._handleGetChangeDetailError.bind(this)),t=this._getEdit(),n=this._getPreferences();return Promise.all([e,t,n]).then(([e,t,n])=>{if(this._prefs=n,!e)return"";this._processEdit(e,t),e.topic||(e.topic=null),e.reviewer_updates||(e.reviewer_updates=null);const i=this._getLatestRevisionSHA(e),s=e.revisions[i];s.commit&&s.commit.message?this._latestCommitMessage=this._prepareCommitMsgForLinkify(s.commit.message):this._latestCommitMessage=null;const a=getComputedStyle(this).lineHeight;this._lineHeight=parseInt(a.slice(0,a.length-2),10),this._change=e,this._patchRange&&this._patchRange.patchNum&&!this.patchNumEquals(this._patchRange.patchNum,s._number)?this._selectedRevision=Object.values(this._change.revisions).find(e=>{const t=this._patchRange.patchNum;return"edit"===t?e._number===t:e._number===parseInt(t,10)}):(s.commit.commit||(s.commit.commit=i),this._commitInfo=s.commit,this._selectedRevision=s)})}_isSubmitEnabled(e){return!!(e&&e.submit&&e.submit.enabled)}_isParentCurrent(e){return!e||!e.rebase||!e.rebase.enabled}_getEdit(){return this.$.restAPI.getChangeEdit(this._changeNum,!0)}_getLatestCommitMessage(){return this.$.restAPI.getChangeCommitInfo(this._changeNum,this.computeLatestPatchNum(this._allPatchSets)).then(e=>{if(!e)return Promise.resolve();this._latestCommitMessage=this._prepareCommitMsgForLinkify(e.message)})}_getLatestRevisionSHA(e){if(e.current_revision)return e.current_revision;let t=null,n=-1;for(const i in e.revisions)e.revisions.hasOwnProperty(i)&&e.revisions[i]._number>n&&(t=i,n=e.revisions[i]._number);return t}_getCommitInfo(){return this.$.restAPI.getChangeCommitInfo(this._changeNum,this._patchRange.patchNum).then(e=>{this._commitInfo=e})}_reloadDraftsWithCallback(e){return this._reloadDrafts().then(()=>e.detail.resolve())}_reloadComments(){return this.$.commentAPI.loadAll(this._changeNum).then(e=>this._recomputeComments(e))}_reloadDrafts(){return this.$.commentAPI.reloadDrafts(this._changeNum).then(e=>this._recomputeComments(e))}_recomputeComments(e){this._changeComments=e,this._diffDrafts=Object.assign({},this._changeComments.drafts),this._commentThreads=this._changeComments.getAllThreadsForChange().map(e=>Object.assign({},e)),this._draftCommentThreads=this._commentThreads.filter(e=>e.comments[e.comments.length-1].__draft)}_reload(e){this._loading=!0,this._relatedChangesCollapsed=!0,this.$.reporting.time("ChangeReloaded"),this.$.reporting.time("ChangeDataLoaded");const t=[],n=this._getChangeDetail();t.push(n);const i=n.then(()=>{this._loading=!1,this.dispatchEvent(new CustomEvent("change-details-loaded",{bubbles:!0,composed:!0}))}).then(()=>{this.$.reporting.timeEnd("ChangeReloaded"),e&&this.$.reporting.changeDisplayed()}),s=n.then(()=>this._getProjectConfig());t.push(s);const a=this._reloadComments();let o;if(t.push(a),this._patchRange&&this._patchRange.patchNum){const e=this._reloadPatchNumDependentResources();t.push(e);const n=Promise.all([e,i]),s=n.then(()=>this._getMergeability());t.push(s);const a=n.then(()=>this.$.actions.reload());t.push(a),o=Promise.all([s,a])}else{const e=i.then(()=>this.$.fileList.reload());t.push(e);const n=i.then(()=>this._latestCommitMessage?Promise.resolve():this._getLatestCommitMessage());t.push(n);const s=i.then(()=>this._getMergeability());t.push(s),o=s}if(e){this._editingCommitMessage=!1;const e=o.then(()=>this.$.relatedChanges.reload());t.push(e)}return Promise.all(t).then(()=>{this.$.reporting.timeEnd("ChangeDataLoaded"),e&&this.$.reporting.changeFullyLoaded()}),o}_reloadPatchNumDependentResources(){return Promise.all([this._getCommitInfo(),this.$.fileList.reload()])}_getMergeability(){return this._change?this._change.status===this.ChangeStatus.MERGED||this._change.status===this.ChangeStatus.ABANDONED?(this._mergeable=!1,Promise.resolve()):(this._mergeable=null,this.$.restAPI.getMergeable(this._changeNum).then(e=>{this._mergeable=e.mergeable})):(this._mergeable=null,Promise.resolve())}_computeCanStartReview(e){return!!(e.actions&&e.actions.ready&&e.actions.ready.enabled)}_computeReplyDisabled(){return!1}_computeChangePermalinkAriaLabel(e){return"Change "+e}_computeCommitMessageCollapsed(e,t){return t&&e}_computeRelatedChangesClass(e){return e?"collapsed":""}_computeCollapseText(e){return e?"▼ Show more":"▲ Show less"}_computeCopyTextForTitle(e){return`${e._number}: ${e.subject} | `+`${location.protocol}//${location.host}`+`${this._computeChangeUrl(e)}`}_toggleCommitCollapsed(){this._commitCollapsed=!this._commitCollapsed,this._commitCollapsed&&window.scrollTo(0,0)}_toggleRelatedChangesCollapsed(){this._relatedChangesCollapsed=!this._relatedChangesCollapsed,this._relatedChangesCollapsed&&window.scrollTo(0,0)}_computeCommitCollapsible(e){return!!e&&e.split("\n").length>=30}_getOffsetHeight(e){return e.offsetHeight}_getScrollHeight(e){return e.scrollHeight}_getLineHeight(e){const t=getComputedStyle(e).lineHeight;return Math.round(t.slice(0,t.length-2))}_updateRelatedChangeMaxHeight(){let e;if(window.matchMedia("(max-width: 50em)").matches)e=400;else if(window.matchMedia("(max-width: 75em)").matches){e=Math.max(this._getOffsetHeight(this.$.mainChangeInfo)-this._getOffsetHeight(this.$.commitMessage)-60,100)}else e=this._commitCollapsible?this._getOffsetHeight(this.$.commitMessage):this._getOffsetHeight(this.$.commitAndRelated)-30;const t={},n=e%this._getLineHeight(this.$.relatedChanges);e-=n,t["--relation-chain-max-height"]=e+"px",this._commitCollapsible&&(t["--related-change-btn-top-padding"]=n+"px"),this.updateStyles(t)}_computeShowRelatedToggle(){return sr.getComputedStyleValue("--relation-chain-max-height",this)||this._updateRelatedChangeMaxHeight(),this._getScrollHeight(this.$.relatedChanges)?this._getScrollHeight(this.$.relatedChanges)>this._getOffsetHeight(this.$.relatedChanges)+this._getLineHeight(this.$.relatedChanges)?this._showRelatedToggle=!0:void(this._showRelatedToggle=!1):this._showRelatedToggle=!1}_updateToggleContainerClass(e){e?this.$.relatedChangesToggle.classList.add("showToggle"):this.$.relatedChangesToggle.classList.remove("showToggle")}_startUpdateCheckTimer(){!this._serverConfig||!this._serverConfig.change||void 0===this._serverConfig.change.update_delay||this._serverConfig.change.update_delay<=0||(this._updateCheckTimerHandle=this.async(()=>{this.fetchChangeUpdates(this._change,this.$.restAPI).then(e=>{let t=null;e.isLatest?e.newStatus===this.ChangeStatus.MERGED?t=lS:e.newStatus===this.ChangeStatus.ABANDONED?t=rS:e.newStatus===this.ChangeStatus.NEW?t=oS:e.newMessages&&(t=cS):t=aS,t?(this._cancelUpdateCheckTimer(),this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:t,dismissOnNavigation:!0,action:"Reload",callback:function(){um.navigateToChange(this._change)}.bind(this)},composed:!0,bubbles:!0}))):this._startUpdateCheckTimer()})},1e3*this._serverConfig.change.update_delay))}_cancelUpdateCheckTimer(){this._updateCheckTimerHandle&&this.cancelAsync(this._updateCheckTimerHandle),this._updateCheckTimerHandle=null}_handleVisibilityChange(){document.hidden&&this._updateCheckTimerHandle?this._cancelUpdateCheckTimer():this._updateCheckTimerHandle||this._startUpdateCheckTimer()}_handleTopicChanged(){this.$.relatedChanges.reload()}_computeHeaderClass(e){const t=["header"];return e&&t.push("editMode"),t.join(" ")}_computeEditMode(e,t){if([e,t].some(e=>void 0===e))return;if(t.base&&t.base.edit)return!0;const n=e.base||{};return this.patchNumEquals(n.patchNum,this.EDIT_NAME)}_handleFileActionTap(e){e.preventDefault();const t=this.$.fileListHeader.$.editControls,n=e.detail.path;switch(e.detail.action){case Ro.Actions.DELETE.id:t.openDeleteDialog(n);break;case Ro.Actions.OPEN.id:um.navigateToRelativeUrl(um.getEditUrlForDiff(this._change,n,this._patchRange.patchNum));break;case Ro.Actions.RENAME.id:t.openRenameDialog(n);break;case Ro.Actions.RESTORE.id:t.openRestoreDialog(n)}}_computeCommitMessageKey(e,t){return`c${e}_rev${t}`}_patchNumChanged(e){if(!this._selectedRevision)return;let t=parseInt(e,10);"edit"===e&&(t=e),t!==this._selectedRevision._number&&(this._selectedRevision=Object.values(this._change.revisions).find(e=>e._number===t))}_handleEditTap(){if(Object.values(this._change.revisions).find(e=>e._number===this.EDIT_NAME))return void um.navigateToChange(this._change,this.EDIT_NAME);let e;this.patchNumEquals(this._patchRange.patchNum,this.computeLatestPatchNum(this._allPatchSets))||(e=this._patchRange.patchNum),um.navigateToChange(this._change,e,null,!0)}_handleStopEditTap(){um.navigateToChange(this._change,this._patchRange.patchNum)}_resetReplyOverlayFocusStops(){this.$.replyOverlay.setFocusStops(this.$.replyDialog.getFocusStops())}_handleToggleStar(e){this.$.restAPI.saveChangeStarred(e.detail.change._number,e.detail.starred)}_getRevisionInfo(e){return new ym(e)}_computeCurrentRevision(e,t){return e&&t&&t[e]}_computeDiffPrefsDisabled(e,t){return e||!t}}customElements.define(pS.is,pS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const uS=za`
  <style include="shared-styles">
    .main {
      max-height: 40em;
      max-width: 60em;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    @media screen and (max-width: 50em) {
      .main {
        max-height: none;
        max-width: 50em;
      }
    }
    .signInLink {
      text-decoration: none;
    }
  </style>
  <gr-dialog
    id="dialog"
    cancel-label=""
    on-confirm="_handleConfirm"
    confirm-label="Dismiss"
    confirm-on-enter=""
  >
    <div class="header" slot="header">An error occurred</div>
    <div class="main" slot="main">[[text]]</div>
    <gr-button
      id="signIn"
      class$="signInLink"
      hidden$="[[!showSignInButton]]"
      link=""
      slot="footer"
    >
      <a href$="[[loginUrl]]" class="signInLink">Sign in</a>
    </gr-button>
  </gr-dialog>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class mS extends(Zn(na(Ka))){static get template(){return uS}static get is(){return"gr-error-dialog"}static get properties(){return{text:String,loginUrl:{type:String,value:"/login"},showSignInButton:{type:Boolean,value:!1}}}_handleConfirm(){this.dispatchEvent(new CustomEvent("dismiss"))}}customElements.define(mS.is,mS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gS=za`
  <style include="shared-styles">
    /**
       * ALERT: DO NOT ADD TRANSITION PROPERTIES WITHOUT PROPERLY UNDERSTANDING
       * HOW THEY ARE USED IN THE CODE.
       */
    :host([toast]) {
      background-color: var(--tooltip-background-color);
      bottom: 1.25rem;
      border-radius: var(--border-radius);
      box-shadow: var(--elevation-level-2);
      color: var(--view-background-color);
      left: 1.25rem;
      position: fixed;
      transform: translateY(5rem);
      transition: transform var(--gr-alert-transition-duration, 80ms) ease-out;
      z-index: 1000;
    }
    :host([shown]) {
      transform: translateY(0);
    }
    /**
       * NOTE: To avoid style being overwritten by outside of the shadow DOM
       * (as outside styles always win), .content-wrapper is introduced as a
       * wrapper around main content to have better encapsulation, styles that
       * may be affected by outside should be defined on it.
       * In this case, \`padding:0px\` is defined in main.css for all elements
       * with the universal selector: *.
       */
    .content-wrapper {
      padding: var(--spacing-l) var(--spacing-xl);
    }
    .text {
      color: var(--tooltip-text-color);
      display: inline-block;
      max-height: 10rem;
      max-width: 80vw;
      vertical-align: bottom;
      word-break: break-all;
    }
    .action {
      color: var(--link-color);
      font-weight: var(--font-weight-bold);
      margin-left: var(--spacing-l);
      text-decoration: none;
      --gr-button: {
        padding: 0;
      }
    }
  </style>
  <div class="content-wrapper">
    <span class="text">[[text]]</span>
    <gr-button
      link=""
      class="action"
      hidden$="[[_hideActionButton]]"
      on-click="_handleActionTap"
      >[[actionText]]</gr-button
    >
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class _S extends(Zn(na(Ka))){static get template(){return gS}static get is(){return"gr-alert"}static get properties(){return{text:String,actionText:String,type:String,shown:{type:Boolean,value:!0,readOnly:!0,reflectToAttribute:!0},toast:{type:Boolean,value:!0,reflectToAttribute:!0},_hideActionButton:Boolean,_boundTransitionEndHandler:{type:Function,value(){return this._handleTransitionEnd.bind(this)}},_actionCallback:Function}}attached(){super.attached(),this.addEventListener("transitionend",this._boundTransitionEndHandler)}detached(){super.detached(),this.removeEventListener("transitionend",this._boundTransitionEndHandler)}show(e,t,n){this.text=e,this.actionText=t,this._hideActionButton=!t,this._actionCallback=n,$u().appendChild(this),this._setShown(!0)}hide(){this._setShown(!1),this._hasZeroTransitionDuration()&&$u().removeChild(this)}_hasZeroTransitionDuration(){const e=window.getComputedStyle(this);return 0===Math.round(100*parseFloat(e.transitionDuration))}_handleTransitionEnd(e){this.shown||$u().removeChild(this)}_handleActionTap(e){e.preventDefault(),this._actionCallback&&this._actionCallback()}}customElements.define(_S.is,_S);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fS=za`
  <gr-overlay with-backdrop="" id="errorOverlay">
    <gr-error-dialog
      id="errorDialog"
      on-dismiss="_handleDismissErrorDialog"
      confirm-label="Dismiss"
      confirm-on-enter=""
      login-url="[[loginUrl]]"
    ></gr-error-dialog>
  </gr-overlay>
  <gr-overlay
    id="noInteractionOverlay"
    with-backdrop=""
    always-on-top=""
    no-cancel-on-esc-key=""
    no-cancel-on-outside-click=""
  >
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class bS extends(ra([Go],Zn(na(Ka)))){static get template(){return fS}static get is(){return"gr-error-manager"}static get properties(){return{knownAccountId:Number,_alertElement:Object,_hideAlertHandle:Number,_refreshingCredentials:{type:Boolean,value:!1},_lastCredentialCheck:{type:Number,value:()=>Date.now()},loginUrl:{type:String,value:"/login"}}}constructor(){super(),this._authService=wp,this._authErrorHandlerDeregistrationHook}attached(){super.attached(),this.listen(document,"server-error","_handleServerError"),this.listen(document,"network-error","_handleNetworkError"),this.listen(document,"show-alert","_handleShowAlert"),this.listen(document,"show-error","_handleShowErrorDialog"),this.listen(document,"visibilitychange","_handleVisibilityChange"),this.listen(document,"show-auth-required","_handleAuthRequired"),this._authErrorHandlerDeregistrationHook=vp.on("auth-error",e=>{this._handleAuthError(e.message,e.action)})}detached(){super.detached(),this._clearHideAlertHandle(),this.unlisten(document,"server-error","_handleServerError"),this.unlisten(document,"network-error","_handleNetworkError"),this.unlisten(document,"show-auth-required","_handleAuthRequired"),this.unlisten(document,"visibilitychange","_handleVisibilityChange"),this.unlisten(document,"show-error","_handleShowErrorDialog"),this._authErrorHandlerDeregistrationHook()}_shouldSuppressError(e){return e.includes("too many files to find conflicts")}_handleAuthRequired(){this._showAuthErrorAlert("Log in is required to perform that action.","Log in.")}_handleAuthError(e,t){this.$.noInteractionOverlay.open().then(()=>{this._showAuthErrorAlert(e,t)})}_handleServerError(e){const{request:t,response:n}=e.detail;n.text().then(e=>{const i=t&&(t.anonymizedUrl||t.url),{status:s,statusText:a}=n;if(403!==n.status||this._authService.isAuthed||"Authentication required\n"!==e){if(403===n.status&&this._authService.isAuthed&&"Authentication required\n"===e)this._authService.clearCache(),this.$.restAPI.getLoggedIn();else if(!this._shouldSuppressError(e)){const t=n.headers&&n.headers.get("X-Gerrit-Trace");404===n.status?this._showNotFoundMessageWithTip({status:s,statusText:a,errorText:e,url:i,trace:t}):this._showErrorDialog(this._constructServerErrorMsg({status:s,statusText:a,errorText:e,url:i,trace:t}))}}else this._handleAuthRequired();console.log(`server error: ${e}`)})}_showNotFoundMessageWithTip({status:e,statusText:t,errorText:n,url:i,trace:s}){this.$.restAPI.getLoggedIn().then(a=>{const o=a?"You might have not enough privileges.":"You might have not enough privileges. Sign in and try again.";this._showErrorDialog(this._constructServerErrorMsg({status:e,statusText:t,errorText:n,url:i,trace:s,tip:o}),{showSignInButton:!a})})}_constructServerErrorMsg({errorText:e,status:t,statusText:n,url:i,trace:s,tip:a}){let o="";return a&&(o+=`${a}\n\n`),o+=`Error ${t}`,n&&(o+=` (${n})`),(e||i)&&(o+=": "),e&&(o+=e),i&&(o+=`\nEndpoint: ${i}`),s&&(o+=`\nTrace Id: ${s}`),o}_handleShowAlert(e){this._showAlert(e.detail.message,e.detail.action,e.detail.callback,e.detail.dismissOnNavigation)}_handleNetworkError(e){this._showAlert("Server unavailable"),console.error(e.detail.error.message)}_showAlert(e,t,n,i){if(this._alertElement){if("AUTH"===this._alertElement.type)return;this._hideAlert()}this._clearHideAlertHandle(),i?this.listen(document,"location-change","_hideAlert"):this._hideAlertHandle=this.async(this._hideAlert,5e3);const s=this._createToastAlert();s.show(e,t,n),this._alertElement=s}_hideAlert(){this._alertElement&&(this._alertElement.hide(),this._alertElement=null,this.unlisten(document,"location-change","_hideAlert"))}_clearHideAlertHandle(){null!=this._hideAlertHandle&&(this.cancelAsync(this._hideAlertHandle),this._hideAlertHandle=null)}_showAuthErrorAlert(e,t){this._alertElement&&this._alertElement.hide(),this._alertElement=this._createToastAlert(),this._alertElement.type="AUTH",this._alertElement.show(e,t,this._createLoginPopup.bind(this)),this._refreshingCredentials=!0,this._requestCheckLoggedIn(),document.hidden||this._handleVisibilityChange()}_createToastAlert(){const e=document.createElement("gr-alert");return e.toast=!0,e}_handleVisibilityChange(){if(!1!==document.hidden)return;const e=Date.now()-this._lastCredentialCheck;!this._refreshingCredentials&&void 0!==this.knownAccountId&&e>6e5&&(this._lastCredentialCheck=Date.now(),this._checkSignedIn())}_requestCheckLoggedIn(){this.debounce("checkLoggedIn",this._checkSignedIn,6e4)}_checkSignedIn(){this._lastCredentialCheck=Date.now(),this.$.restAPI.invalidateAccountsCache(),this._authService.clearCache(),this.$.restAPI.getLoggedIn().then(e=>{this._refreshingCredentials&&(e?this.$.restAPI.getAccount().then(e=>{if(this._refreshingCredentials){if(e._account_id!==this.knownAccountId)return void this._reloadPage();this._handleCredentialRefreshed()}}):this._requestCheckLoggedIn())})}_reloadPage(){window.location.reload()}_createLoginPopup(){const e=["width=690","height=500","left="+(window.screenLeft+(window.outerWidth-690)/2),"top="+(window.screenTop+(window.outerHeight-500)/2)];window.open(this.getBaseUrl()+"/login/%3FcloseAfterLogin","_blank",e.join(",")),this.listen(window,"focus","_handleWindowFocus")}_handleCredentialRefreshed(){this.unlisten(window,"focus","_handleWindowFocus"),this._refreshingCredentials=!1,this._hideAlert(),this._showAlert("Credentials refreshed."),this.$.noInteractionOverlay.close(),this._authService.clearCache()}_handleWindowFocus(){this.flushDebouncer("checkLoggedIn")}_handleShowErrorDialog(e){this._showErrorDialog(e.detail.message)}_handleDismissErrorDialog(){this.$.errorOverlay.close()}_showErrorDialog(e,t){this.$.reporting.reportErrorDialog(e),this.$.errorDialog.text=e,this.$.errorDialog.showSignInButton=t&&t.showSignInButton,this.$.errorOverlay.open()}}customElements.define(bS.is,bS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vS=za`
  <style include="shared-styles">
    .key {
      background-color: var(--chip-background-color);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      display: inline-block;
      font-weight: var(--font-weight-bold);
      padding: var(--spacing-xxs) var(--spacing-m);
      text-align: center;
    }
  </style>
  <template is="dom-repeat" items="[[binding]]">
    <template is="dom-if" if="[[index]]">
      or
    </template>
    <template is="dom-repeat" items="[[_computeModifiers(item)]]" as="modifier">
      <span class="key modifier">[[modifier]]</span>
    </template>
    <span class="key">[[_computeKey(item)]]</span>
  </template>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class yS extends(Zn(na(Ka))){static get template(){return vS}static get is(){return"gr-key-binding-display"}static get properties(){return{binding:Array}}_computeModifiers(e){return e.slice(0,e.length-1)}_computeKey(e){return e[e.length-1]}}customElements.define(yS.is,yS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wS=za`
  <style include="shared-styles">
    :host {
      display: block;
      max-height: 100vh;
      overflow-y: auto;
    }
    header {
      padding: var(--spacing-l);
    }
    main {
      display: flex;
      padding: 0 var(--spacing-xxl) var(--spacing-xxl);
    }
    header {
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
    }
    table:last-of-type {
      margin-left: var(--spacing-xxl);
    }
    td {
      padding: var(--spacing-xs) 0;
    }
    td:first-child {
      padding-right: var(--spacing-m);
      text-align: right;
    }
    .header {
      font-weight: var(--font-weight-bold);
      padding-top: var(--spacing-l);
    }
    .modifier {
      font-weight: var(--font-weight-normal);
    }
  </style>
  <header>
    <h3>Keyboard shortcuts</h3>
    <gr-button link="" on-click="_handleCloseTap">Close</gr-button>
  </header>
  <main>
    <table>
      <tbody>
        <template is="dom-repeat" items="[[_left]]">
          <tr>
            <td></td>
            <td class="header">[[item.section]]</td>
          </tr>
          <template is="dom-repeat" items="[[item.shortcuts]]" as="shortcut">
            <tr>
              <td>
                <gr-key-binding-display binding="[[shortcut.binding]]">
                </gr-key-binding-display>
              </td>
              <td>[[shortcut.text]]</td>
            </tr>
          </template>
        </template>
      </tbody>
    </table>
    <template is="dom-if" if="[[_right]]">
      <table>
        <tbody>
          <template is="dom-repeat" items="[[_right]]">
            <tr>
              <td></td>
              <td class="header">[[item.section]]</td>
            </tr>
            <template is="dom-repeat" items="[[item.shortcuts]]" as="shortcut">
              <tr>
                <td>
                  <gr-key-binding-display binding="[[shortcut.binding]]">
                  </gr-key-binding-display>
                </td>
                <td>[[shortcut.text]]</td>
              </tr>
            </template>
          </template>
        </tbody>
      </table>
    </template>
  </main>
  <footer></footer>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,{ShortcutSection:CS}=qu;class ES extends(ra([Wu],Zn(na(Ka)))){static get template(){return wS}static get is(){return"gr-keyboard-shortcuts-dialog"}static get properties(){return{_left:Array,_right:Array,_propertyBySection:{type:Object,value:()=>({[CS.EVERYWHERE]:"_everywhere",[CS.NAVIGATION]:"_navigation",[CS.DASHBOARD]:"_dashboard",[CS.CHANGE_LIST]:"_changeList",[CS.ACTIONS]:"_actions",[CS.REPLY_DIALOG]:"_replyDialog",[CS.FILE_LIST]:"_fileList",[CS.DIFFS]:"_diffs"})}}}ready(){super.ready(),this._ensureAttribute("role","dialog")}attached(){super.attached(),this.addKeyboardShortcutDirectoryListener(this._onDirectoryUpdated.bind(this))}detached(){super.detached(),this.removeKeyboardShortcutDirectoryListener(this._onDirectoryUpdated.bind(this))}_handleCloseTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!1}))}_onDirectoryUpdated(e){const t=[],n=[];e.has(CS.EVERYWHERE)&&t.push({section:CS.EVERYWHERE,shortcuts:e.get(CS.EVERYWHERE)}),e.has(CS.NAVIGATION)&&t.push({section:CS.NAVIGATION,shortcuts:e.get(CS.NAVIGATION)}),e.has(CS.ACTIONS)&&n.push({section:CS.ACTIONS,shortcuts:e.get(CS.ACTIONS)}),e.has(CS.REPLY_DIALOG)&&n.push({section:CS.REPLY_DIALOG,shortcuts:e.get(CS.REPLY_DIALOG)}),e.has(CS.FILE_LIST)&&n.push({section:CS.FILE_LIST,shortcuts:e.get(CS.FILE_LIST)}),e.has(CS.DIFFS)&&n.push({section:CS.DIFFS,shortcuts:e.get(CS.DIFFS)}),this.set("_left",t),this.set("_right",n)}}customElements.define(ES.is,ES);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const SS=za`
  <style include="shared-styles">
    gr-dropdown {
      padding: 0 var(--spacing-m);
      --gr-button: {
        color: var(--header-text-color);
      }
      --gr-dropdown-item: {
        color: var(--primary-text-color);
      }
    }
    gr-avatar {
      height: 2em;
      width: 2em;
      vertical-align: middle;
    }
  </style>
  <gr-dropdown
    link=""
    items="[[links]]"
    top-content="[[topContent]]"
    horizontal-align="right"
  >
    <span hidden$="[[_hasAvatars]]" hidden="">[[_accountName(account)]]</span>
    <gr-avatar
      account="[[account]]"
      hidden$="[[!_hasAvatars]]"
      hidden=""
      image-size="56"
      aria-label="Account avatar"
    ></gr-avatar>
  </gr-dropdown>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,xS=/\$\{([\w]+)\}/g;class AS extends(ra([gf],Zn(na(Ka)))){static get template(){return SS}static get is(){return"gr-account-dropdown"}static get properties(){return{account:Object,config:Object,links:{type:Array,computed:"_getLinks(_switchAccountUrl, _path)"},topContent:{type:Array,computed:"_getTopContent(account)"},_path:{type:String,value:"/"},_hasAvatars:Boolean,_switchAccountUrl:String}}attached(){super.attached(),this._handleLocationChange(),this.listen(window,"location-change","_handleLocationChange"),this.$.restAPI.getConfig().then(e=>{this.config=e,e&&e.auth&&e.auth.switch_account_url?this._switchAccountUrl=e.auth.switch_account_url:this._switchAccountUrl="",this._hasAvatars=!!(e&&e.plugin&&e.plugin.has_avatars)})}detached(){super.detached(),this.unlisten(window,"location-change","_handleLocationChange")}_getLinks(e,t){if([e,t].some(e=>void 0===e))return;const n=[{name:"Settings",url:"/settings/"}];if(e){const i={path:t},s=this._interpolateUrl(e,i);n.push({name:"Switch account",url:s,external:!0})}return n.push({name:"Sign out",url:"/logout"}),n}_getTopContent(e){return[{text:this._accountName(e),bold:!0},{text:e.email?e.email:""}]}_handleLocationChange(){this._path=window.location.pathname+window.location.search+window.location.hash}_interpolateUrl(e,t){return e.replace(xS,(e,n)=>t[n]||"")}_accountName(e){return this.getUserName(this.config,e)}}customElements.define(AS.is,AS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const PS=za`
  <style include="shared-styles">
    form {
      display: flex;
    }
    gr-autocomplete {
      background-color: var(--view-background-color);
      border-radius: var(--border-radius);
      flex: 1;
      outline: none;
    }
  </style>
  <form>
    <gr-autocomplete
      show-search-icon=""
      id="searchInput"
      text="{{_inputVal}}"
      query="[[query]]"
      on-commit="_handleInputCommit"
      allow-non-suggested-values=""
      multi=""
      threshold="[[_threshold]]"
      tab-complete=""
      vertical-offset="30"
    ></gr-autocomplete>
  </form>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`,kS=["added:","age:","age:1week","assignee:","author:","branch:","bug:","cc:","cc:self","change:","cherrypickof:","comment:","commentby:","commit:","committer:","conflicts:","deleted:","delta:","dir:","directory:","ext:","extension:","file:","footer:","from:","has:","has:draft","has:edit","has:star","has:stars","has:unresolved","hashtag:","intopic:","is:","is:abandoned","is:assigned","is:closed","is:ignored","is:merged","is:open","is:owner","is:private","is:reviewed","is:reviewer","is:starred","is:submittable","is:watched","is:wip","label:","message:","onlyexts:","onlyextensions:","owner:","ownerin:","parentproject:","project:","projects:","query:","ref:","reviewedby:","reviewer:","reviewer:self","reviewerin:","size:","star:","status:","status:abandoned","status:closed","status:merged","status:open","status:reviewed","submissionid:","topic:","tr:"],TS=new Set(kS.concat(kS.map(e=>`-${e}`))),IS=/(?:[^\s"]+|"[^"]*")+\s*/g;
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS extends(ra([Wu,L_],Zn(na(Ka)))){static get template(){return PS}static get is(){return"gr-search-bar"}static get properties(){return{value:{type:String,value:"",notify:!0,observer:"_valueChanged"},keyEventTarget:{type:Object,value:()=>document.body},query:{type:Function,value(){return this._getSearchSuggestions.bind(this)}},projectSuggestions:{type:Function,value:()=>()=>Promise.resolve([])},groupSuggestions:{type:Function,value:()=>()=>Promise.resolve([])},accountSuggestions:{type:Function,value:()=>()=>Promise.resolve([])},_inputVal:String,_threshold:{type:Number,value:1}}}attached(){super.attached(),this.$.restAPI.getConfig().then(e=>{const t=e&&e.index&&e.index.mergeabilityComputationBehavior;"API_REF_UPDATED_AND_CHANGE_REINDEX"!==t&&"REF_UPDATED_AND_CHANGE_REINDEX"!==t||this._addOperator("is:mergeable")})}_addOperator(e,t=!0){TS.add(e),t&&TS.add(`-${e}`)}keyboardShortcuts(){return{[this.Shortcut.SEARCH]:"_handleSearch"}}_valueChanged(e){this._inputVal=e}_handleInputCommit(e){this._preventDefaultAndNavigateToInputVal(e)}_preventDefaultAndNavigateToInputVal(e){e.preventDefault();const t=Ui(e).rootTarget;t.$.input?t.$.input.blur():t.blur();const n=this._inputVal&&this._inputVal.trim();if(n){if([...TS].some(e=>e.endsWith(":")&&e===n))return;this.dispatchEvent(new CustomEvent("handle-search",{detail:{inputVal:this._inputVal}}))}}_fetchSuggestions(e){const t=e.split(":"),n=t[0],i=t[1]||"";switch(n){case"ownerin":case"reviewerin":return this.groupSuggestions(n,i);case"parentproject":case"project":return this.projectSuggestions(n,i);case"author":case"cc":case"commentby":case"committer":case"from":case"owner":case"reviewedby":case"reviewer":return this.accountSuggestions(n,i);default:return Promise.resolve([...TS].filter(t=>t.includes(e)).map(e=>({text:e})))}}_getSearchSuggestions(e){const t=e.match(IS),n=t[t.length-1].toLowerCase();return this._fetchSuggestions(n).then(e=>e&&e.length?e.sort((e,t)=>{const i=e.text.toLowerCase().indexOf(n),s=t.text.toLowerCase().indexOf(n);return i===s?e.text.localeCompare(t.text):-1===i?1:-1===s?-1:i-s}).slice(0,9).map(({text:e,label:t})=>({name:e,value:e,label:t})):[])}_handleSearch(e){const t=this.getKeyboardEvent(e);this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)&&!t.shiftKey||(e.preventDefault(),this.$.searchInput.focus(),this.$.searchInput.selectAll())}}customElements.define(RS.is,RS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const LS=za`
  <style include="shared-styles"></style>
  <gr-search-bar
    id="search"
    value="{{searchQuery}}"
    on-handle-search="_handleSearch"
    project-suggestions="[[_projectSuggestions]]"
    group-suggestions="[[_groupSuggestions]]"
    account-suggestions="[[_accountSuggestions]]"
  ></gr-search-bar>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class DS extends(ra([gf],Zn(na(Ka)))){static get template(){return LS}static get is(){return"gr-smart-search"}static get properties(){return{searchQuery:String,_config:Object,_projectSuggestions:{type:Function,value(){return this._fetchProjects.bind(this)}},_groupSuggestions:{type:Function,value(){return this._fetchGroups.bind(this)}},_accountSuggestions:{type:Function,value(){return this._fetchAccounts.bind(this)}}}}attached(){super.attached(),this.$.restAPI.getConfig().then(e=>{this._config=e})}_handleSearch(e){const t=e.detail.inputVal;t&&um.navigateToSearchQuery(t)}_fetchProjects(e,t){return this.$.restAPI.getSuggestedProjects(t,10).then(t=>{if(!t)return[];return Object.keys(t).map(t=>({text:e+":"+t}))})}_fetchGroups(e,t){return 0===t.length?Promise.resolve([]):this.$.restAPI.getSuggestedGroups(t,10).then(t=>{if(!t)return[];return Object.keys(t).map(t=>({text:e+":"+t}))})}_fetchAccounts(e,t){return 0===t.length?Promise.resolve([]):this.$.restAPI.getSuggestedAccounts(t,10).then(t=>t?this._mapAccountsHelper(t,e):[]).then(n=>"self".startsWith(t)?n.concat([{text:e+":self"}]):"me".startsWith(t)?n.concat([{text:e+":me"}]):n)}_mapAccountsHelper(e,t){return e.map(e=>{const n=this.getUserName(this._serverConfig,e);return{label:e.name||"",text:e.email?`${t}:${e.email}`:`${t}:"${n}"`}})}}customElements.define(DS.is,DS);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const OS=za`
  <style include="shared-styles">
    :host {
      display: block;
    }
    nav {
      align-items: center;
      display: flex;
    }
    .bigTitle {
      color: var(--header-text-color);
      font-size: var(--header-title-font-size);
      text-decoration: none;
    }
    .bigTitle:hover {
      text-decoration: underline;
    }
    .titleText::before {
      background-image: var(--header-icon);
      background-size: var(--header-icon-size) var(--header-icon-size);
      background-repeat: no-repeat;
      content: '';
      display: inline-block;
      height: var(--header-icon-size);
      margin-right: calc(var(--header-icon-size) / 4);
      vertical-align: text-bottom;
      width: var(--header-icon-size);
    }
    .titleText::after {
      content: var(--header-title-content);
    }
    ul {
      list-style: none;
      padding-left: var(--spacing-l);
    }
    .links > li {
      cursor: default;
      display: inline-block;
      padding: 0;
      position: relative;
    }
    .linksTitle {
      display: inline-block;
      font-weight: var(--font-weight-bold);
      position: relative;
      text-transform: uppercase;
    }
    .linksTitle:hover {
      opacity: 0.75;
    }
    .rightItems {
      align-items: center;
      display: flex;
      flex: 1;
      justify-content: flex-end;
    }
    .rightItems gr-endpoint-decorator:not(:empty) {
      margin-left: var(--spacing-l);
    }
    gr-smart-search {
      flex-grow: 1;
      margin: 0 var(--spacing-m);
      max-width: 500px;
    }
    gr-dropdown,
    .browse {
      padding: var(--spacing-m);
    }
    gr-dropdown {
      --gr-dropdown-item: {
        color: var(--primary-text-color);
      }
    }
    .settingsButton {
      margin-left: var(--spacing-m);
    }
    .browse {
      color: var(--header-text-color);
      /* Same as gr-button */
      margin: 5px 4px;
      text-decoration: none;
    }
    .invisible,
    .settingsButton,
    gr-account-dropdown {
      display: none;
    }
    :host([loading]) .accountContainer,
    :host([logged-in]) .loginButton,
    :host([logged-in]) .registerButton {
      display: none;
    }
    :host([logged-in]) .settingsButton,
    :host([logged-in]) gr-account-dropdown {
      display: inline;
    }
    .accountContainer {
      align-items: center;
      display: flex;
      margin: 0 calc(0 - var(--spacing-m)) 0 var(--spacing-m);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .loginButton,
    .registerButton {
      padding: var(--spacing-m) var(--spacing-l);
    }
    .dropdown-trigger {
      text-decoration: none;
    }
    .dropdown-content {
      background-color: var(--view-background-color);
      box-shadow: var(--elevation-level-2);
    }
    /*
       * We are not using :host to do this, because :host has a lowest css priority
       * compared to others. This means that using :host to do this would break styles.
       */
    .linksTitle,
    .bigTitle,
    .loginButton,
    .registerButton,
    iron-icon,
    gr-account-dropdown {
      color: var(--header-text-color);
    }
    #mobileSearch {
      display: none;
    }
    @media screen and (max-width: 50em) {
      .bigTitle {
        font-family: var(--header-font-family);
        font-size: var(--font-size-h3);
        font-weight: var(--font-weight-h3);
        line-height: var(--line-height-h3);
      }
      gr-smart-search,
      .browse,
      .rightItems .hideOnMobile,
      .links > li.hideOnMobile {
        display: none;
      }
      #mobileSearch {
        display: inline-flex;
      }
      .accountContainer {
        margin-left: var(--spacing-m) !important;
      }
      gr-dropdown {
        padding: var(--spacing-m) 0 var(--spacing-m) var(--spacing-m);
      }
    }
  </style>
  <nav>
    <a href$="[[_computeRelativeURL('/')]]" class="bigTitle">
      <gr-endpoint-decorator name="header-title">
        <span class="titleText"></span>
      </gr-endpoint-decorator>
    </a>
    <ul class="links">
      <template is="dom-repeat" items="[[_links]]" as="linkGroup">
        <li class$="[[_computeLinkGroupClass(linkGroup)]]">
          <gr-dropdown
            link=""
            down-arrow=""
            items="[[linkGroup.links]]"
            horizontal-align="left"
          >
            <span class="linksTitle" id="[[linkGroup.title]]">
              [[linkGroup.title]]
            </span>
          </gr-dropdown>
        </li>
      </template>
    </ul>
    <div class="rightItems">
      <gr-endpoint-decorator
        class="hideOnMobile"
        name="header-small-banner"
      ></gr-endpoint-decorator>
      <gr-smart-search
        id="search"
        search-query="{{searchQuery}}"
      ></gr-smart-search>
      <gr-endpoint-decorator
        class="hideOnMobile"
        name="header-browse-source"
      ></gr-endpoint-decorator>
      <div class="accountContainer" id="accountContainer">
        <iron-icon
          id="mobileSearch"
          icon="gr-icons:search"
          on-tap="_onMobileSearchTap"
        ></iron-icon>
        <div class$="[[_computeIsInvisible(_registerURL)]]">
          <a class="registerButton" href$="[[_registerURL]]">
            [[_registerText]]
          </a>
        </div>
        <a class="loginButton" href$="[[loginUrl]]">Sign in</a>
        <a
          class="settingsButton"
          href$="[[_generateSettingsLink()]]"
          title="Settings"
        >
          <iron-icon icon="gr-icons:settings"></iron-icon>
        </a>
        <gr-account-dropdown account="[[_account]]"></gr-account-dropdown>
      </div>
    </div>
  </nav>
  <gr-js-api-interface id="jsAPI"></gr-js-api-interface>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;let NS;const MS=[{getDocsBaseUrl(e,t){return NS||(NS=new Promise(n=>{e&&e.gerrit&&e.gerrit.doc_url?n(e.gerrit.doc_url):t.probePath(this.getBaseUrl()+"/Documentation/index.html").then(e=>{n(e?this.getBaseUrl()+"/Documentation":null)})})),NS},_clearDocsBaseUrlCache(){NS=void 0}},Go];window.Gerrit=window.Gerrit||{},window.Gerrit.DocsUrlBehavior=MS;
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $S=[{title:"Changes",links:[{url:"/q/status:open+-is:wip",name:"Open"},{url:"/q/status:merged",name:"Merged"},{url:"/q/status:abandoned",name:"Abandoned"}]}],BS=[{url:"/index.html",name:"Table of Contents"},{url:"/user-search.html",name:"Searching"},{url:"/user-upload.html",name:"Uploading"},{url:"/access-control.html",name:"Access Control"},{url:"/rest-api.html",name:"REST API"},{url:"/intro-project-owner.html",name:"Project Owner Guide"}],FS=new Set(["LDAP","LDAP_BIND","CUSTOM_EXTENSION"]);class US extends(ra([Ub,Go,MS],Zn(na(Ka)))){static get template(){return OS}static get is(){return"gr-main-header"}static get properties(){return{searchQuery:{type:String,notify:!0},loggedIn:{type:Boolean,reflectToAttribute:!0},loading:{type:Boolean,reflectToAttribute:!0},_account:Object,_adminLinks:{type:Array,value:()=>[]},_defaultLinks:{type:Array,value:()=>$S},_docBaseUrl:{type:String,value:null},_links:{type:Array,computed:"_computeLinks(_defaultLinks, _userLinks, _adminLinks, _topMenus, _docBaseUrl)"},loginUrl:{type:String,value:"/login"},_userLinks:{type:Array,value:()=>[]},_topMenus:{type:Array,value:()=>[]},_registerText:{type:String,value:"Sign up"},_registerURL:{type:String,value:null}}}static get observers(){return["_accountLoaded(_account)"]}ready(){super.ready(),this._ensureAttribute("role","banner")}attached(){super.attached(),this._loadAccount(),this._loadConfig()}detached(){super.detached()}reload(){this._loadAccount()}_computeRelativeURL(e){return"//"+window.location.host+this.getBaseUrl()+e}_computeLinks(e,t,n,i,s){if([e,t,n,i,s].some(e=>void 0===e))return;const a=e.map(e=>({title:e.title,links:e.links.slice()}));t&&t.length>0&&a.push({title:"Your",links:t.slice()});const o=this._getDocLinks(s,BS);o.length&&a.push({title:"Documentation",links:o,class:"hideOnMobile"}),a.push({title:"Browse",links:n.slice()});const r=[];a.forEach(e=>{r[e.title]=e.links});for(const e of i){const t=e.items.map(this._fixCustomMenuItem).filter(e=>!e.url.includes("${projectName}"));e.name in r?t.forEach(t=>{r[e.name].push(t)}):a.push({title:e.name,links:r[e.name]=t})}return a}_getDocLinks(e,t){return e&&t?t.map(t=>{let n=e;return n&&"/"===n[n.length-1]&&(n=n.substring(0,n.length-1)),{url:n+t.url,name:t.name,target:"_blank"}}):[]}_loadAccount(){this.loading=!0;const e=[this.$.restAPI.getAccount(),this.$.restAPI.getTopMenus(),tr.awaitPluginsLoaded()];return Promise.all(e).then(e=>{const t=e[0];return this._account=t,this.loggedIn=!!t,this.loading=!1,this._topMenus=e[1],this.getAdminLinks(t,this.$.restAPI.getAccountCapabilities.bind(this.$.restAPI),this.$.jsAPI.getAdminMenuLinks.bind(this.$.jsAPI)).then(e=>{this._adminLinks=e.links})})}_loadConfig(){this.$.restAPI.getConfig().then(e=>(this._retrieveRegisterURL(e),this.getDocsBaseUrl(e,this.$.restAPI))).then(e=>{this._docBaseUrl=e})}_accountLoaded(e){e&&this.$.restAPI.getPreferences().then(e=>{this._userLinks=e&&e.my?e.my.map(this._fixCustomMenuItem):[]})}_retrieveRegisterURL(e){FS.has(e.auth.auth_type)&&(this._registerURL=e.auth.register_url,e.auth.register_text&&(this._registerText=e.auth.register_text))}_computeIsInvisible(e){return e?"":"invisible"}_fixCustomMenuItem(e){return e.url.startsWith("#")&&(e.url=e.url.slice(1)),delete e.target,e}_generateSettingsLink(){return this.getBaseUrl()+"/settings/"}_onMobileSearchTap(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("mobile-search",{composed:!0,bubbles:!1}))}_computeLinkGroupClass(e){return e&&e.class?e.class:""}}customElements.define(US.is,US);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const HS=za`
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,jS="/",GS=/^\/dashboard\/(.+)$/,VS=/^\/dashboard\/?$/,zS=/^\/p\/(.+)\/\+\/dashboard\/(.+)/,WS=/^\/settings\/agreements\/?/,qS=/^\/settings\/new-agreement\/?/,KS=/^\/register(\/.*)?$/,YS=/\/log(in|out)(\/(.+))?$/,XS=/.*/,JS=/^\/admin\/groups\/(?:uuid-)?([^,]+)$/,ZS=/^\/groups\/self/,QS=/^\/admin\/groups\/(?:uuid-)?(.+),info$/,ex=/^\/admin\/groups\/(?:uuid-)?(.+),audit-log$/,tx=/^\/admin\/groups\/(?:uuid-)?(.+),members$/,nx=/^\/admin\/groups(,(\d+))?(\/)?$/,ix="/admin/groups/q/filter::filter",sx="/admin/groups/q/filter::filter,:offset",ax=/^\/admin\/create-project\/?$/,ox=/^\/admin\/create-group\/?$/,rx=/^\/admin\/(projects)\/?(.+)?$/,lx=/^\/admin\/repos\/([^,]+)$/,cx=/^\/admin\/repos\/(.+),commands$/,dx=/^\/admin\/repos\/(.+),access$/,hx=/^\/admin\/repos\/(.+),dashboards$/,px=/^\/admin\/repos(,(\d+))?(\/)?$/,ux="/admin/repos/q/filter::filter",mx="/admin/repos/q/filter::filter,:offset",gx=/^\/admin\/repos\/(.+),branches(,(.+))?$/,_x="/admin/repos/:repo,branches/q/filter::filter",fx="/admin/repos/:repo,branches/q/filter::filter,:offset",bx=/^\/admin\/repos\/(.+),tags(,(.+))?$/,vx="/admin/repos/:repo,tags/q/filter::filter",yx="/admin/repos/:repo,tags/q/filter::filter,:offset",wx=/^\/plugins\/(.+)$/,Cx=/^\/admin\/plugins(\/)?$/,Ex=/^\/admin\/plugins(,(\d+))?(\/)?$/,Sx="/admin/plugins/q/filter::filter",xx="/admin/plugins/q/filter::filter,:offset",Ax=/^\/q\/([^,]+)(,(\d+))?$/,Px=/^\/q\/.+,n,z$/,kx=/^\/c\/(\d+)\/?(((-?\d+|edit)(\.\.(\d+|edit))?))?\/?$/,Tx=/^\/(\d+)\/?/,Ix=/^\/c\/(.+)\/\+\/(\d+)(\/?((-?\d+|edit)(\.\.(\d+|edit))?))?\/?$/,Rx=/^\/c\/(.+)\/\+\/(\d+)(\/(\d+))?,edit\/?$/,Lx=/^\/c\/(.+)\/\+\/(\d+)(\/((-?\d+|edit)(\.\.(\d+|edit))?(\/(.+))))\/?$/,Dx=/^\/c\/(.+)\/\+\/(\d+)\/(\d+|edit)\/(.+),edit(\#\d+)?$/,Ox=/^\/c\/(\d+)\/((-?\d+|edit)(\.\.(\d+|edit))?)\/(.+)/,Nx=/^\/c\/((.+)\/\+\/)?(\d+)(\/?((-?\d+|edit)(\.\.(\d+|edit))?\/(.+))?)@[ab]?\d+$/,Mx=/^\/settings\/?/,$x=/^\/settings\/VE\/(\S+)/,Bx=/^\/c\/(.+)\/\ \/(.+)$/,Fx=/^\/x\/([\w-]+)\/([\w-]+)\/?/,Ux="/Documentation/q/filter::filter",Hx=/^\/Documentation\/q\/(.*)$/,jx=/^\/Documentation(\/)?(.+)?/,Gx=/^([ab]?)(\d+)$/,Vx=/\+/g,zx=/^\?*/,Wx=/@([ab]?\d+)$/,qx=/,n,z$/,Kx=/\$\{(project|repo)\}/g,Yx=document.querySelector("#app");Yx||console.log("No gr-app found (running tests)"),function(){const e=document.createElement("gr-reporting");window.addEventListener("WebComponentsReady",()=>{e.timeEnd("WebComponentsReady")})}();class Xx extends(ra([Go,vm,L_],Zn(na(Ka)))){static get template(){return HS}static get is(){return"gr-router"}static get properties(){return{_app:{type:Object,value:Yx},_isRedirecting:Boolean,_isInitialLoad:{type:Boolean,value:!0}}}start(){this._app&&this._startRouter()}_setParams(e){this._appElement().params=e}_appElement(){return document.getElementById("app-element")||document.getElementById("app").shadowRoot.getElementById("app-element")}_redirect(e){this._isRedirecting=!0,_p.redirect(e)}_generateUrl(e){const t=this.getBaseUrl();let n="";const i=um.View;if(e.view===i.SEARCH)n=this._generateSearchUrl(e);else if(e.view===i.CHANGE)n=this._generateChangeUrl(e);else if(e.view===i.DASHBOARD)n=this._generateDashboardUrl(e);else if(e.view===i.DIFF||e.view===i.EDIT)n=this._generateDiffOrEditUrl(e);else if(e.view===i.GROUP)n=this._generateGroupUrl(e);else if(e.view===i.REPO)n=this._generateRepoUrl(e);else if(e.view===i.ROOT)n="/";else{if(e.view!==i.SETTINGS)throw new Error("Can't generate");n=this._generateSettingsUrl(e)}return t+n}_generateWeblinks(e){const t=e.type;switch(t){case um.WeblinkType.FILE:return this._getFileWebLinks(e);case um.WeblinkType.CHANGE:return this._getChangeWeblinks(e);case um.WeblinkType.PATCHSET:return this._getPatchSetWeblink(e);default:console.warn(`Unsupported weblink ${t}!`)}}_getPatchSetWeblink(e){const{commit:t,options:n}=e,{weblinks:i,config:s}=n||{},a=t&&t.slice(0,7),o=this._getBrowseCommitWeblink(i,s);return o&&o.url?{name:a,url:o.url}:{name:a}}_firstCodeBrowserWeblink(e){const t=["gitiles","browse","gitweb"];for(let n=0;n<t.length;n++){const i=e.find(e=>e.name===t[n]);if(i)return i}return null}_getBrowseCommitWeblink(e,t){if(!e)return null;let n;return t&&t.gerrit&&t.gerrit.primary_weblink_name&&(n=e.find(e=>e.name===t.gerrit.primary_weblink_name)),n||(n=this._firstCodeBrowserWeblink(e)),n||null}_getChangeWeblinks({repo:e,commit:t,options:{weblinks:n,config:i}}){if(!n||!n.length)return[];const s=this._getBrowseCommitWeblink(n,i);return n.filter(e=>!s||!s.name||e.name!==s.name)}_getFileWebLinks({repo:e,commit:t,file:n,options:{weblinks:i}}){return i}_generateSearchUrl(e){let t="";if(e.offset&&e.offset>0&&(t=","+e.offset),e.query)return"/q/"+this.encodeURL(e.query,!0)+t;const n=[];return e.owner&&n.push("owner:"+this.encodeURL(e.owner,!1)),e.project&&n.push("project:"+this.encodeURL(e.project,!1)),e.branch&&n.push("branch:"+this.encodeURL(e.branch,!1)),e.topic&&n.push('topic:"'+this.encodeURL(e.topic,!1)+'"'),e.hashtag&&n.push('hashtag:"'+this.encodeURL(e.hashtag.toLowerCase(),!1)+'"'),e.statuses&&(1===e.statuses.length?n.push("status:"+this.encodeURL(e.statuses[0],!1)):e.statuses.length>1&&n.push("("+e.statuses.map(e=>`status:${this.encodeURL(e,!1)}`).join(" OR ")+")")),"/q/"+n.join("+")+t}_generateChangeUrl(e){let t=this._getPatchRangeExpression(e);t.length&&(t="/"+t);let n=`${t}`;if(e.querystring?n+="?"+e.querystring:e.edit&&(n+=",edit"),e.messageHash&&(n+=e.messageHash),e.project){return`/c/${this.encodeURL(e.project,!0)}/+/${e.changeNum}${n}`}return`/c/${e.changeNum}${n}`}_generateDashboardUrl(e){const t=e.repo||e.project||null;if(e.sections){const n=this._sectionsToEncodedParams(e.sections,t);return e.title&&n.push("title="+encodeURIComponent(e.title)),`/dashboard/${e.user?e.user:""}?${n.join("&")}`}if(t){return`/p/${this.encodeURL(t,!0)}/+/dashboard/${e.dashboard}`}return`/dashboard/${e.user||"self"}`}_sectionsToEncodedParams(e,t){return e.map(e=>{const n=t?e.query.replace(Kx,t):e.query;return encodeURIComponent(e.name)+"="+encodeURIComponent(n)})}_generateDiffOrEditUrl(e){let t=this._getPatchRangeExpression(e);t.length&&(t="/"+t);let n=`${t}/${this.encodeURL(e.path,!0)}`;if(e.view===um.View.EDIT&&(n+=",edit"),e.lineNum&&(n+="#",e.leftSide&&(n+="b"),n+=e.lineNum),e.project){return`/c/${this.encodeURL(e.project,!0)}/+/${e.changeNum}${n}`}return`/c/${e.changeNum}${n}`}_generateGroupUrl(e){let t=`/admin/groups/${this.encodeURL(e.groupId+"",!0)}`;return e.detail===um.GroupDetailView.MEMBERS?t+=",members":e.detail===um.GroupDetailView.LOG&&(t+=",audit-log"),t}_generateRepoUrl(e){let t=`/admin/repos/${this.encodeURL(e.repoName+"",!0)}`;return e.detail===um.RepoDetailView.ACCESS?t+=",access":e.detail===um.RepoDetailView.BRANCHES?t+=",branches":e.detail===um.RepoDetailView.TAGS?t+=",tags":e.detail===um.RepoDetailView.COMMANDS?t+=",commands":e.detail===um.RepoDetailView.DASHBOARDS&&(t+=",dashboards"),t}_generateSettingsUrl(e){return"/settings"}_getPatchRangeExpression(e){let t="";return e.patchNum&&(t=""+e.patchNum),e.basePatchNum&&(t=e.basePatchNum+".."+t),t}_normalizeLegacyRouteParams(e){return e.changeNum?this.$.restAPI.getFromProjectLookup(e.changeNum).then(t=>{t?(e.project=t,this._normalizePatchRangeParams(e),this._redirect(this._generateUrl(e))):this._show404()}):Promise.resolve()}_normalizePatchRangeParams(e){const t=null!==e.basePatchNum&&void 0!==e.basePatchNum,n=null!==e.patchNum&&void 0!==e.patchNum;let i=!1;return t&&this.patchNumEquals(e.basePatchNum,e.patchNum)?(i=!0,e.basePatchNum=null):t&&!n&&(e.patchNum=e.basePatchNum,e.basePatchNum=null),i}_redirectToLogin(e){const t=this.getBaseUrl()||"";_p("/login/"+encodeURIComponent(e.substring(t.length)))}_getHashFromCanonicalPath(e){return e.split("#").slice(1).join("#")}_parseLineAddress(e){const t=e.match(Gx);return t?{leftSide:!!t[1],lineNum:parseInt(t[2],10)}:null}_redirectIfNotLoggedIn(e){return this.$.restAPI.getLoggedIn().then(t=>t?Promise.resolve():(this._redirectToLogin(e.canonicalPath),Promise.reject(new Error)))}_loadUserMiddleware(e,t){this.$.restAPI.getLoggedIn().then(()=>{t()})}_queryStringMiddleware(e,t){let n=new Map;e.querystring&&(n=window.URLSearchParams?new URLSearchParams(e.querystring):new Map(this._parseQueryString(e.querystring))),e.queryMap=n,t()}_mapRoute(e,t,n){this[t]?_p(e,(e,t)=>this._loadUserMiddleware(e,t),(e,t)=>this._queryStringMiddleware(e,t),e=>{this.$.reporting.locationChanged(t),(n?this._redirectIfNotLoggedIn(e):Promise.resolve()).then(()=>{this[t](e)})}):console.error("Attempted to map route to unknown method: ",t)}_startRouter(){const e=this.getBaseUrl();e&&_p.base(e),um.setup(e=>{_p.show(e)},this._generateUrl.bind(this),e=>this._generateWeblinks(e),e=>e),_p.exit("*",(e,t)=>{this._isRedirecting||this.$.reporting.beforeLocationChanged(),this._isRedirecting=!1,this._isInitialLoad=!1,t()}),_p((e,t)=>{document.body.scrollTop=0,e.hash.match(Fx)?this._redirect(e.hash):(this.async(()=>{this.dispatchEvent(new CustomEvent("location-change",{detail:{hash:window.location.hash,pathname:window.location.pathname},composed:!0,bubbles:!0}))},1),t())}),this._mapRoute(jS,"_handleRootRoute"),this._mapRoute(GS,"_handleDashboardRoute"),this._mapRoute(VS,"_handleCustomDashboardRoute"),this._mapRoute(zS,"_handleProjectDashboardRoute"),this._mapRoute(QS,"_handleGroupInfoRoute",!0),this._mapRoute(ex,"_handleGroupAuditLogRoute",!0),this._mapRoute(tx,"_handleGroupMembersRoute",!0),this._mapRoute(nx,"_handleGroupListOffsetRoute",!0),this._mapRoute(sx,"_handleGroupListFilterOffsetRoute",!0),this._mapRoute(ix,"_handleGroupListFilterRoute",!0),this._mapRoute(ZS,"_handleGroupSelfRedirectRoute",!0),this._mapRoute(JS,"_handleGroupRoute",!0),this._mapRoute(rx,"_handleProjectsOldRoute"),this._mapRoute(cx,"_handleRepoCommandsRoute",!0),this._mapRoute(dx,"_handleRepoAccessRoute"),this._mapRoute(hx,"_handleRepoDashboardsRoute"),this._mapRoute(gx,"_handleBranchListOffsetRoute"),this._mapRoute(fx,"_handleBranchListFilterOffsetRoute"),this._mapRoute(_x,"_handleBranchListFilterRoute"),this._mapRoute(bx,"_handleTagListOffsetRoute"),this._mapRoute(yx,"_handleTagListFilterOffsetRoute"),this._mapRoute(vx,"_handleTagListFilterRoute"),this._mapRoute(ox,"_handleCreateGroupRoute",!0),this._mapRoute(ax,"_handleCreateProjectRoute",!0),this._mapRoute(px,"_handleRepoListOffsetRoute"),this._mapRoute(mx,"_handleRepoListFilterOffsetRoute"),this._mapRoute(ux,"_handleRepoListFilterRoute"),this._mapRoute(lx,"_handleRepoRoute"),this._mapRoute(wx,"_handlePassThroughRoute"),this._mapRoute(Ex,"_handlePluginListOffsetRoute",!0),this._mapRoute(xx,"_handlePluginListFilterOffsetRoute",!0),this._mapRoute(Sx,"_handlePluginListFilterRoute",!0),this._mapRoute(Cx,"_handlePluginListRoute",!0),this._mapRoute(Px,"_handleQueryLegacySuffixRoute"),this._mapRoute(Ax,"_handleQueryRoute"),this._mapRoute(Nx,"_handleLegacyLinenum"),this._mapRoute(Tx,"_handleChangeNumberLegacyRoute"),this._mapRoute(Dx,"_handleDiffEditRoute",!0),this._mapRoute(Rx,"_handleChangeEditRoute",!0),this._mapRoute(Lx,"_handleDiffRoute"),this._mapRoute(Ix,"_handleChangeRoute"),this._mapRoute(kx,"_handleChangeLegacyRoute"),this._mapRoute(Ox,"_handleDiffLegacyRoute"),this._mapRoute(WS,"_handleAgreementsRoute",!0),this._mapRoute(qS,"_handleNewAgreementsRoute",!0),this._mapRoute($x,"_handleSettingsLegacyRoute",!0),this._mapRoute(Mx,"_handleSettingsRoute",!0),this._mapRoute(KS,"_handleRegisterRoute"),this._mapRoute(YS,"_handlePassThroughRoute"),this._mapRoute(Bx,"_handleImproperlyEncodedPlusRoute"),this._mapRoute(Fx,"_handlePluginScreen"),this._mapRoute(Ux,"_handleDocumentationSearchRoute"),this._mapRoute(Hx,"_handleDocumentationSearchRedirectRoute"),this._mapRoute(jx,"_handleDocumentationRedirectRoute"),this._mapRoute(XS,"_handleDefaultRoute"),_p.start()}_handleRootRoute(e){if(e.querystring.match(/^closeAfterLogin/))return window.close(),null;let t=this._getHashFromCanonicalPath(e.canonicalPath);if(t){"/"!==t[0]&&(t="/"+t),t.includes("/ /")&&e.canonicalPath.includes("/+/")&&(t=t.replace("/ /","/+/"));const n=this.getBaseUrl();let i=n+t;return t.startsWith("/VE/")&&(i=n+"/settings"+t),this._redirect(i),null}return this.$.restAPI.getLoggedIn().then(e=>{e?this._redirect("/dashboard/self"):this._redirect("/q/status:open+-is:wip")})}_decodeQueryString(e){return decodeURIComponent(e.replace(Vx," "))}_parseQueryString(e){if(!(e=e.replace(zx,"")))return[];const t=[];return e.split("&").forEach(e=>{const n=e.indexOf("=");let i,s;n<0?(i=this._decodeQueryString(e),s=""):(i=this._decodeQueryString(e.substring(0,n)),s=this._decodeQueryString(e.substring(n+1))),i&&t.push([i,s])}),t}_handleDashboardRoute(e){return this.$.restAPI.getLoggedIn().then(t=>{t?this._setParams({view:um.View.DASHBOARD,user:e.params[0]}):"self"===e.params[0].toLowerCase()?this._redirectToLogin(e.canonicalPath):this._redirect("/q/owner:"+encodeURIComponent(e.params[0]))})}_handleCustomDashboardRoute(e,t){const n=void 0!==t?t:window.location.search,i=this._parseQueryString(n);let s="Custom Dashboard";const a=i.find(e=>"title"===e[0].toLowerCase());a&&(s=a[1]);const o=i.find(e=>"foreach"===e[0].toLowerCase());let r=null;o&&(r=o[1]);const l=i.filter(e=>e[0]&&e[1]&&"title"!==e[0].toLowerCase()&&"foreach"!==e[0].toLowerCase()).map(e=>{const t=r?`${r} ${e[1]}`:e[1];return{name:e[0],query:t}});return l.length>0?(this._setParams({view:um.View.DASHBOARD,user:"self",sections:l,title:s}),Promise.resolve()):(this._redirect("/dashboard/self"),Promise.resolve())}_handleProjectDashboardRoute(e){const t=e.params[0];this._setParams({view:um.View.DASHBOARD,project:t,dashboard:decodeURIComponent(e.params[1])}),this.$.reporting.setRepoName(t)}_handleGroupInfoRoute(e){this._redirect("/admin/groups/"+encodeURIComponent(e.params[0]))}_handleGroupSelfRedirectRoute(e){this._redirect("/settings/#Groups")}_handleGroupRoute(e){this._setParams({view:um.View.GROUP,groupId:e.params[0]})}_handleGroupAuditLogRoute(e){this._setParams({view:um.View.GROUP,detail:um.GroupDetailView.LOG,groupId:e.params[0]})}_handleGroupMembersRoute(e){this._setParams({view:um.View.GROUP,detail:um.GroupDetailView.MEMBERS,groupId:e.params[0]})}_handleGroupListOffsetRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-admin-group-list",offset:e.params[1]||0,filter:null,openCreateModal:"create"===e.hash})}_handleGroupListFilterOffsetRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-admin-group-list",offset:e.params.offset,filter:e.params.filter})}_handleGroupListFilterRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-admin-group-list",filter:e.params.filter||null})}_handleProjectsOldRoute(e){let t="";e.params[1]&&(t=encodeURIComponent(e.params[1]),e.params[1].includes(",")&&(t=encodeURIComponent(e.params[1]).replace("%2C",","))),this._redirect(`/admin/repos/${t}`)}_handleRepoCommandsRoute(e){const t=e.params[0];this._setParams({view:um.View.REPO,detail:um.RepoDetailView.COMMANDS,repo:t}),this.$.reporting.setRepoName(t)}_handleRepoAccessRoute(e){const t=e.params[0];this._setParams({view:um.View.REPO,detail:um.RepoDetailView.ACCESS,repo:t}),this.$.reporting.setRepoName(t)}_handleRepoDashboardsRoute(e){const t=e.params[0];this._setParams({view:um.View.REPO,detail:um.RepoDetailView.DASHBOARDS,repo:t}),this.$.reporting.setRepoName(t)}_handleBranchListOffsetRoute(e){this._setParams({view:um.View.REPO,detail:um.RepoDetailView.BRANCHES,repo:e.params[0],offset:e.params[2]||0,filter:null})}_handleBranchListFilterOffsetRoute(e){this._setParams({view:um.View.REPO,detail:um.RepoDetailView.BRANCHES,repo:e.params.repo,offset:e.params.offset,filter:e.params.filter})}_handleBranchListFilterRoute(e){this._setParams({view:um.View.REPO,detail:um.RepoDetailView.BRANCHES,repo:e.params.repo,filter:e.params.filter||null})}_handleTagListOffsetRoute(e){this._setParams({view:um.View.REPO,detail:um.RepoDetailView.TAGS,repo:e.params[0],offset:e.params[2]||0,filter:null})}_handleTagListFilterOffsetRoute(e){this._setParams({view:um.View.REPO,detail:um.RepoDetailView.TAGS,repo:e.params.repo,offset:e.params.offset,filter:e.params.filter})}_handleTagListFilterRoute(e){this._setParams({view:um.View.REPO,detail:um.RepoDetailView.TAGS,repo:e.params.repo,filter:e.params.filter||null})}_handleRepoListOffsetRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-repo-list",offset:e.params[1]||0,filter:null,openCreateModal:"create"===e.hash})}_handleRepoListFilterOffsetRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-repo-list",offset:e.params.offset,filter:e.params.filter})}_handleRepoListFilterRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-repo-list",filter:e.params.filter||null})}_handleCreateProjectRoute(e){this._redirect("/admin/repos#create")}_handleCreateGroupRoute(e){this._redirect("/admin/groups#create")}_handleRepoRoute(e){const t=e.params[0];this._setParams({view:um.View.REPO,repo:t}),this.$.reporting.setRepoName(t)}_handlePluginListOffsetRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-plugin-list",offset:e.params[1]||0,filter:null})}_handlePluginListFilterOffsetRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-plugin-list",offset:e.params.offset,filter:e.params.filter})}_handlePluginListFilterRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-plugin-list",filter:e.params.filter||null})}_handlePluginListRoute(e){this._setParams({view:um.View.ADMIN,adminView:"gr-plugin-list"})}_handleQueryRoute(e){this._setParams({view:um.View.SEARCH,query:e.params[0],offset:e.params[2]})}_handleQueryLegacySuffixRoute(e){this._redirect(e.path.replace(qx,""))}_handleChangeNumberLegacyRoute(e){this._redirect("/c/"+encodeURIComponent(e.params[0]))}_handleChangeRoute(e){const t={project:e.params[0],changeNum:e.params[1],basePatchNum:e.params[4],patchNum:e.params[6],view:um.View.CHANGE,queryMap:e.queryMap};this.$.reporting.setRepoName(t.project),this._redirectOrNavigate(t)}_handleDiffRoute(e){const t={project:e.params[0],changeNum:e.params[1],basePatchNum:e.params[4],patchNum:e.params[6],path:e.params[8],view:um.View.DIFF},n=this._parseLineAddress(e.hash);n&&(t.leftSide=n.leftSide,t.lineNum=n.lineNum),this.$.reporting.setRepoName(t.project),this._redirectOrNavigate(t)}_handleChangeLegacyRoute(e){const t={changeNum:e.params[0],basePatchNum:e.params[3],patchNum:e.params[5],view:um.View.CHANGE,querystring:e.querystring};this._normalizeLegacyRouteParams(t)}_handleLegacyLinenum(e){this._redirect(e.path.replace(Wx,"#$1"))}_handleDiffLegacyRoute(e){const t={changeNum:e.params[0],basePatchNum:e.params[2],patchNum:e.params[4],path:e.params[5],view:um.View.DIFF},n=this._parseLineAddress(e.hash);n&&(t.leftSide=n.leftSide,t.lineNum=n.lineNum),this._normalizeLegacyRouteParams(t)}_handleDiffEditRoute(e){const t=e.params[0];this._redirectOrNavigate({project:t,changeNum:e.params[1],patchNum:e.params[2],path:e.params[3],lineNum:e.hash,view:um.View.EDIT}),this.$.reporting.setRepoName(t)}_handleChangeEditRoute(e){const t=e.params[0];this._redirectOrNavigate({project:t,changeNum:e.params[1],patchNum:e.params[3],view:um.View.CHANGE,edit:!0}),this.$.reporting.setRepoName(t)}_redirectOrNavigate(e){this._normalizePatchRangeParams(e)?this._redirect(this._generateUrl(e)):this._setParams(e)}_handleAgreementsRoute(){this._redirect("/settings/#Agreements")}_handleNewAgreementsRoute(e){e.params.view=um.View.AGREEMENTS,this._setParams(e.params)}_handleSettingsLegacyRoute(e){const t=e.params[0].replace(/ /g,"+");this._setParams({view:um.View.SETTINGS,emailToken:t})}_handleSettingsRoute(e){this._setParams({view:um.View.SETTINGS})}_handleRegisterRoute(e){this._setParams({justRegistered:!0});let t=e.params[0]||"/";t.startsWith("/register")&&(t="/"),"/"===t[0]&&this._redirect(this.getBaseUrl()+t)}_handlePassThroughRoute(){location.reload()}_handleImproperlyEncodedPlusRoute(e){let t=this._getHashFromCanonicalPath(e.canonicalPath);t.length&&(t="#"+t),this._redirect(`/c/${e.params[0]}/+/${e.params[1]}${t}`)}_handlePluginScreen(e){const t=um.View.PLUGIN_SCREEN,n=e.params[0],i=e.params[1];this._setParams({view:t,plugin:n,screen:i})}_handleDocumentationSearchRoute(e){this._setParams({view:um.View.DOCUMENTATION_SEARCH,filter:e.params.filter||null})}_handleDocumentationSearchRedirectRoute(e){this._redirect("/Documentation/q/filter:"+encodeURIComponent(e.params[0]))}_handleDocumentationRedirectRoute(e){e.params[1]?location.reload():this._redirect("/Documentation/index.html")}_handleDefaultRoute(){this._isInitialLoad?this._show404():this._handlePassThroughRoute()}_show404(){this._appElement().dispatchEvent(new CustomEvent("page-error",{detail:{response:{status:404}}}))}}customElements.define(Xx.is,Xx);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jx=za`
  <style include="shared-styles">
    :host {
      box-sizing: border-box;
      display: block;
      min-height: var(--header-height);
      position: relative;
    }
    header {
      background: inherit;
      border: inherit;
      display: inline;
      height: inherit;
    }
    .floating {
      left: 0;
      position: fixed;
      width: 100%;
      will-change: top;
    }
    .fixedAtTop {
      border-bottom: 1px solid #a4a4a4;
      box-shadow: var(--elevation-level-2);
    }
  </style>
  <header
    id="header"
    class$="[[_computeHeaderClass(_headerFloating, _topLast)]]"
  >
    <slot></slot>
  </header>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class Zx extends(Zn(na(Ka))){static get template(){return Jx}static get is(){return"gr-fixed-panel"}static get properties(){return{floatingDisabled:{type:Boolean,value:!1},readyForMeasure:{type:Boolean,observer:"_readyForMeasureObserver"},keepOnScroll:{type:Boolean,value:!1},_isMeasured:{type:Boolean,value:!1},_topInitial:Number,_topLast:Number,_headerHeight:Number,_headerFloating:{type:Boolean,value:!1},_observer:{type:Object,value:null},floatingHeight:{type:Number,value:0,notify:!0},_webComponentsReady:Boolean}}static get observers(){return["_updateFloatingHeight(floatingDisabled, _isMeasured, _headerHeight)"]}_updateFloatingHeight(e,t,n){[e,t,n].some(e=>void 0===e)||(this.floatingHeight=!e&&t?n:0)}attached(){super.attached(),this.floatingDisabled||(!1!==this.readyForMeasure&&(this.readyForMeasure=!0),this.listen(window,"resize","update"),this.listen(window,"scroll","_updateOnScroll"),this._observer=new MutationObserver(this.update.bind(this)),this._observer.observe(this.$.header,{childList:!0,subtree:!0}))}detached(){super.detached(),this.unlisten(window,"scroll","_updateOnScroll"),this.unlisten(window,"resize","update"),this._observer&&this._observer.disconnect()}_readyForMeasureObserver(e){e&&this.update()}_computeHeaderClass(e,t){return[e?"floating":"",this.keepOnScroll&&0===t?"fixedAtTop":""].join(" ")}unfloat(){this.floatingDisabled||(this.$.header.style.top="",this._headerFloating=!1,this.updateStyles({"--header-height":""}))}update(){this.debounce("update",()=>{this._updateDebounced()},100)}_updateOnScroll(){this.debounce("update",()=>{this._updateDebounced()})}_updateDebounced(){this.floatingDisabled||(this._isMeasured=!1,this._maybeFloatHeader(),this._reposition())}_getElementTop(){return this.getBoundingClientRect().top}_reposition(){if(!this._headerFloating)return;const e=this.$.header,t=this._getElementTop();let n;n=this.keepOnScroll&&t<0?0:t,e.style.top||this._topLast!==n||(e.style.top=n),this._topLast!==n&&(e.style.top=void 0===n?"":n+"px",this._topLast=n)}_measure(){if(this._isMeasured)return;const e=this.$.header.getBoundingClientRect();if(0===e.height&&0===e.width)return;const t=document.body.scrollTop+e.top;this._topLast=t,this._headerHeight=e.height,this._topInitial=this.getBoundingClientRect().top+document.body.scrollTop,this._isMeasured=!0}_isFloatingNeeded(){return this.keepOnScroll||document.body.scrollWidth>document.body.clientWidth}_maybeFloatHeader(){this._isFloatingNeeded()&&(this._measure(),this._isMeasured&&this._floatHeader())}_floatHeader(){this.updateStyles({"--header-height":this._headerHeight+"px"}),this._headerFloating=!0}}customElements.define(Zx.is,Zx);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qx=za`
  <style include="shared-styles">
    :host {
      background-color: var(--view-background-color);
    }
    .hidden {
      display: none;
    }
    gr-patch-range-select {
      display: block;
    }
    gr-diff {
      border: none;
      --diff-container-styles: {
        border-bottom: 1px solid var(--border-color);
      }
    }
    gr-fixed-panel {
      background-color: var(--view-background-color);
      border-bottom: 1px solid var(--border-color);
      z-index: 1;
    }
    header,
    .subHeader {
      align-items: center;
      display: flex;
      justify-content: space-between;
    }
    header {
      padding: var(--spacing-s) var(--spacing-xl);
      border-bottom: 1px solid var(--border-color);
    }
    .changeNumberColon {
      color: transparent;
    }
    .headerSubject {
      margin-right: var(--spacing-m);
      font-weight: var(--font-weight-bold);
    }
    .patchRangeLeft {
      align-items: center;
      display: flex;
    }
    .navLink:not([href]) {
      color: var(--deemphasized-text-color);
    }
    .navLinks {
      align-items: center;
      display: flex;
      white-space: nowrap;
    }
    .navLink {
      padding: 0 var(--spacing-xs);
    }
    .reviewed {
      display: inline-block;
      margin: 0 var(--spacing-xs);
      vertical-align: 0.15em;
    }
    .jumpToFileContainer {
      display: inline-block;
    }
    .mobile {
      display: none;
    }
    gr-button {
      padding: var(--spacing-s) 0;
      text-decoration: none;
    }
    .loading {
      color: var(--deemphasized-text-color);
      font-family: var(--header-font-family);
      font-size: var(--font-size-h1);
      font-weight: var(--font-weight-h1);
      line-height: var(--line-height-h1);
      height: 100%;
      padding: var(--spacing-l);
      text-align: center;
    }
    .subHeader {
      background-color: var(--background-color-secondary);
      flex-wrap: wrap;
      padding: 0 var(--spacing-l);
    }
    .prefsButton {
      text-align: right;
    }
    .noOverflow {
      display: block;
      overflow: auto;
    }
    .editMode .hideOnEdit {
      display: none;
    }
    .blameLoader,
    .fileNum {
      display: none;
    }
    .blameLoader.show,
    .fileNum.show,
    .download,
    .preferences,
    .rightControls {
      align-items: center;
      display: flex;
    }
    .diffModeSelector,
    .editButton {
      align-items: center;
      display: flex;
    }
    .diffModeSelector span,
    .editButton span {
      margin-right: var(--spacing-xs);
    }
    .diffModeSelector.hide,
    .separator.hide {
      display: none;
    }
    gr-dropdown-list {
      --trigger-style: {
        text-transform: none;
      }
    }
    .editButtona a {
      text-decoration: none;
    }
    @media screen and (max-width: 50em) {
      header {
        padding: var(--spacing-s) var(--spacing-l);
      }
      .dash {
        display: none;
      }
      .desktop {
        display: none;
      }
      .fileNav {
        align-items: flex-start;
        display: flex;
        margin: 0 var(--spacing-xs);
      }
      .fullFileName {
        display: block;
        font-style: italic;
        min-width: 50%;
        padding: 0 var(--spacing-xxs);
        text-align: center;
        width: 100%;
        word-wrap: break-word;
      }
      .reviewed {
        vertical-align: -1px;
      }
      .mobileNavLink {
        color: var(--primary-text-color);
        font-family: var(--header-font-family);
        font-size: var(--font-size-h2);
        font-weight: var(--font-weight-h2);
        line-height: var(--line-height-h2);
        text-decoration: none;
      }
      .mobileNavLink:not([href]) {
        color: var(--deemphasized-text-color);
      }
      .jumpToFileContainer {
        display: block;
        width: 100%;
      }
      gr-dropdown-list {
        width: 100%;
        --gr-select-style: {
          display: block;
          width: 100%;
        }
        --native-select-style: {
          width: 100%;
        }
      }
    }
  </style>
  <gr-fixed-panel
    class$="[[_computeContainerClass(_editMode)]]"
    floating-disabled="[[_panelFloatingDisabled]]"
    keep-on-scroll=""
    ready-for-measure="[[!_loading]]"
    on-floating-height-changed="_onChangeHeaderPanelHeightChanged"
  >
    <header>
      <div>
        <a
          href$="[[_computeChangePath(_change, _patchRange.*, _change.revisions)]]"
          >[[_changeNum]]</a
        ><!--
       --><span class="changeNumberColon">:</span>
        <span class="headerSubject">[[_change.subject]]</span>
        <input
          id="reviewed"
          class="reviewed hideOnEdit"
          type="checkbox"
          on-change="_handleReviewedChange"
          hidden$="[[!_loggedIn]]"
          hidden=""
        /><!--
       -->
        <div class="jumpToFileContainer">
          <gr-dropdown-list
            id="dropdown"
            value="[[_path]]"
            on-value-change="_handleFileChange"
            items="[[_formattedFiles]]"
            initial-count="75"
          >
          </gr-dropdown-list>
        </div>
      </div>
      <div class="navLinks desktop">
        <span
          class$="fileNum [[_computeFileNumClass(_fileNum, _formattedFiles)]]"
        >
          File [[_fileNum]] of [[_formattedFiles.length]]
          <span class="separator"></span>
        </span>
        <a
          class="navLink"
          title="[[createTitle(Shortcut.PREV_FILE,
                    ShortcutSection.NAVIGATION)]]"
          href$="[[_computeNavLinkURL(_change, _path, _fileList, -1, 1)]]"
        >
          Prev</a
        >
        <span class="separator"></span>
        <a
          class="navLink"
          title="[[createTitle(Shortcut.UP_TO_CHANGE,
                ShortcutSection.NAVIGATION)]]"
          href$="[[_computeChangePath(_change, _patchRange.*, _change.revisions)]]"
        >
          Up</a
        >
        <span class="separator"></span>
        <a
          class="navLink"
          title="[[createTitle(Shortcut.NEXT_FILE,
                ShortcutSection.NAVIGATION)]]"
          href$="[[_computeNavLinkURL(_change, _path, _fileList, 1, 1)]]"
        >
          Next</a
        >
      </div>
    </header>
    <div class="subHeader">
      <div class="patchRangeLeft">
        <gr-patch-range-select
          id="rangeSelect"
          change-num="[[_changeNum]]"
          change-comments="[[_changeComments]]"
          patch-num="[[_patchRange.patchNum]]"
          base-patch-num="[[_patchRange.basePatchNum]]"
          files-weblinks="[[_filesWeblinks]]"
          available-patches="[[_allPatchSets]]"
          revisions="[[_change.revisions]]"
          revision-info="[[_revisionInfo]]"
          on-patch-range-change="_handlePatchChange"
        >
        </gr-patch-range-select>
        <span class="download desktop">
          <span class="separator"></span>
          <gr-dropdown
            link=""
            down-arrow=""
            items="[[_computeDownloadDropdownLinks(_change.project, _changeNum, _patchRange, _path, _diff)]]"
            horizontal-align="left"
          >
            <span class="downloadTitle">
              Download
            </span>
          </gr-dropdown>
        </span>
      </div>
      <div class="rightControls">
        <span
          class$="blameLoader [[_computeBlameLoaderClass(_isImageDiff, _path)]]"
        >
          <gr-button
            link=""
            id="toggleBlame"
            title="[[createTitle(Shortcut.TOGGLE_BLAME, ShortcutSection.DIFFS)]]"
            disabled="[[_isBlameLoading]]"
            on-click="_toggleBlame"
            >[[_computeBlameToggleLabel(_isBlameLoaded,
            _isBlameLoading)]]</gr-button
          >
        </span>
        <template is="dom-if" if="[[_computeCanEdit(_loggedIn, _change.*)]]">
          <span class="separator"></span>
          <span class="editButton">
            <gr-button
              link=""
              title="Edit current file"
              on-click="_goToEditFile"
              >edit</gr-button
            >
          </span>
        </template>
        <span class="separator"></span>
        <div
          class$="diffModeSelector [[_computeModeSelectHideClass(_isImageDiff)]]"
        >
          <span>Diff view:</span>
          <gr-diff-mode-selector
            id="modeSelect"
            save-on-change="[[!_diffPrefsDisabled]]"
            mode="{{changeViewState.diffMode}}"
          ></gr-diff-mode-selector>
        </div>
        <span
          id="diffPrefsContainer"
          hidden$="[[_computePrefsButtonHidden(_prefs, _diffPrefsDisabled)]]"
          hidden=""
        >
          <span class="preferences desktop">
            <gr-button
              link=""
              class="prefsButton"
              has-tooltip=""
              title="Diff preferences"
              on-click="_handlePrefsTap"
              ><iron-icon icon="gr-icons:settings"></iron-icon
            ></gr-button>
          </span>
        </span>
        <gr-endpoint-decorator name="annotation-toggler">
          <span hidden="" id="annotation-span">
            <label for="annotation-checkbox" id="annotation-label"></label>
            <iron-input type="checkbox" disabled="">
              <input
                is="iron-input"
                type="checkbox"
                id="annotation-checkbox"
                disabled=""
              />
            </iron-input>
          </span>
        </gr-endpoint-decorator>
      </div>
    </div>
    <div class="fileNav mobile">
      <a
        class="mobileNavLink"
        href$="[[_computeNavLinkURL(_change, _path, _fileList, -1, 1)]]"
      >
        &lt;</a
      >
      <div class="fullFileName mobile">[[computeDisplayPath(_path)]]</div>
      <a
        class="mobileNavLink"
        href$="[[_computeNavLinkURL(_change, _path, _fileList, 1, 1)]]"
      >
        &gt;</a
      >
    </div>
  </gr-fixed-panel>
  <div class="loading" hidden$="[[!_loading]]">Loading...</div>
  <gr-diff-host
    id="diffHost"
    hidden=""
    hidden$="[[_loading]]"
    class$="[[_computeDiffClass(_panelFloatingDisabled)]]"
    is-image-diff="{{_isImageDiff}}"
    files-weblinks="{{_filesWeblinks}}"
    diff="{{_diff}}"
    change-num="[[_changeNum]]"
    commit-range="[[_commitRange]]"
    patch-range="[[_patchRange]]"
    path="[[_path]]"
    prefs="[[_prefs]]"
    project-name="[[_change.project]]"
    view-mode="[[_diffMode]]"
    is-blame-loaded="{{_isBlameLoaded}}"
    on-comment-anchor-tap="_onLineSelected"
    on-line-selected="_onLineSelected"
  >
  </gr-diff-host>
  <gr-apply-fix-dialog
    id="applyFixDialog"
    prefs="[[_prefs]]"
    change="[[_change]]"
    change-num="[[_changeNum]]"
  >
  </gr-apply-fix-dialog>
  <gr-diff-preferences-dialog
    id="diffPreferencesDialog"
    diff-prefs="{{_prefs}}"
    on-reload-diff-preference="_handleReloadingDiffPreference"
  >
  </gr-diff-preferences-dialog>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-storage id="storage"></gr-storage>
  <gr-diff-cursor
    id="cursor"
    scroll-top-margin="[[_scrollTopMargin]]"
  ></gr-diff-cursor>
  <gr-comment-api id="commentAPI"></gr-comment-api>
  <gr-reporting id="reporting"></gr-reporting>
`
/**
 * @license
 * Copyright (C) 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,eA="left",tA="right",nA="SIDE_BY_SIDE",iA="UNIFIED_DIFF";class sA extends(ra([Wu,vm,Vg,zg],Zn(na(Ka)))){static get template(){return Qx}static get is(){return"gr-diff-view"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},keyEventTarget:{type:Object,value:()=>document.body},changeViewState:{type:Object,notify:!0,value:()=>({}),observer:"_changeViewStateChanged"},disableDiffPrefs:{type:Boolean,value:!1},_diffPrefsDisabled:{type:Boolean,computed:"_computeDiffPrefsDisabled(disableDiffPrefs, _loggedIn)"},_patchRange:Object,_commitRange:Object,_change:Object,_changeComments:Object,_changeNum:String,_diff:Object,_formattedFiles:{type:Array,computed:"_formatFilesForDropdown(_files, _patchRange.patchNum, _changeComments)"},_fileList:{type:Array,computed:"_getSortedFileList(_files)"},_files:{type:Object,value:()=>({sortedFileList:[],changeFilesByPath:{}})},_path:{type:String,observer:"_pathChanged"},_fileNum:{type:Number,computed:"_computeFileNum(_path, _formattedFiles)"},_loggedIn:{type:Boolean,value:!1},_loading:{type:Boolean,value:!0},_prefs:Object,_localPrefs:Object,_projectConfig:Object,_userPrefs:Object,_diffMode:{type:String,computed:"_getDiffViewMode(changeViewState.diffMode, _userPrefs)"},_isImageDiff:Boolean,_filesWeblinks:Object,_commentMap:Object,_commentsForDiff:Object,_commentSkips:{type:Object,computed:"_computeCommentSkips(_commentMap, _fileList, _path)"},_panelFloatingDisabled:{type:Boolean,value:()=>window.PANEL_FLOATING_DISABLED},_editMode:{type:Boolean,computed:"_computeEditMode(_patchRange.*)"},_isBlameLoaded:Boolean,_isBlameLoading:{type:Boolean,value:!1},_allPatchSets:{type:Array,computed:"computeAllPatchSets(_change, _change.revisions.*)"},_revisionInfo:{type:Object,computed:"_getRevisionInfo(_change)"},_reviewedFiles:{type:Object,value:()=>new Set},_scrollTopMargin:{type:Number,value:0}}}static get observers(){return["_getProjectConfig(_change.project)","_getFiles(_changeNum, _patchRange.*, _changeComments)","_setReviewedObserver(_loggedIn, params.*, _prefs)","_recomputeComments(_files.changeFilesByPath,_path, _patchRange, _projectConfig)"]}get keyBindings(){return{esc:"_handleEscKey"}}keyboardShortcuts(){return{[this.Shortcut.LEFT_PANE]:"_handleLeftPane",[this.Shortcut.RIGHT_PANE]:"_handleRightPane",[this.Shortcut.NEXT_LINE]:"_handleNextLineOrFileWithComments",[this.Shortcut.PREV_LINE]:"_handlePrevLineOrFileWithComments",[this.Shortcut.VISIBLE_LINE]:"_handleVisibleLine",[this.Shortcut.NEXT_FILE_WITH_COMMENTS]:"_handleNextLineOrFileWithComments",[this.Shortcut.PREV_FILE_WITH_COMMENTS]:"_handlePrevLineOrFileWithComments",[this.Shortcut.NEW_COMMENT]:"_handleNewComment",[this.Shortcut.SAVE_COMMENT]:null,[this.Shortcut.NEXT_FILE]:"_handleNextFile",[this.Shortcut.PREV_FILE]:"_handlePrevFile",[this.Shortcut.NEXT_CHUNK]:"_handleNextChunkOrCommentThread",[this.Shortcut.NEXT_COMMENT_THREAD]:"_handleNextChunkOrCommentThread",[this.Shortcut.PREV_CHUNK]:"_handlePrevChunkOrCommentThread",[this.Shortcut.PREV_COMMENT_THREAD]:"_handlePrevChunkOrCommentThread",[this.Shortcut.OPEN_REPLY_DIALOG]:"_handleOpenReplyDialogOrToggleLeftPane",[this.Shortcut.TOGGLE_LEFT_PANE]:"_handleOpenReplyDialogOrToggleLeftPane",[this.Shortcut.UP_TO_CHANGE]:"_handleUpToChange",[this.Shortcut.OPEN_DIFF_PREFS]:"_handleCommaKey",[this.Shortcut.TOGGLE_DIFF_MODE]:"_handleToggleDiffMode",[this.Shortcut.TOGGLE_FILE_REVIEWED]:"_handleToggleFileReviewed",[this.Shortcut.EXPAND_ALL_DIFF_CONTEXT]:"_handleExpandAllDiffContext",[this.Shortcut.NEXT_UNREVIEWED_FILE]:"_handleNextUnreviewedFile",[this.Shortcut.TOGGLE_BLAME]:"_handleToggleBlame",[this.Shortcut.EXPAND_ALL_COMMENT_THREADS]:null,[this.Shortcut.COLLAPSE_ALL_COMMENT_THREADS]:null}}attached(){super.attached(),this._getLoggedIn().then(e=>{this._loggedIn=e}),this.addEventListener("open-fix-preview",this._onOpenFixPreview.bind(this)),this.$.cursor.push("diffs",this.$.diffHost);const e=()=>{this.$.diffHost.removeEventListener("render",e),this.$.cursor.reInitCursor()};this.$.diffHost.addEventListener("render",e)}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_getProjectConfig(e){return this.$.restAPI.getProjectConfig(e).then(e=>{this._projectConfig=e})}_getChangeDetail(e){return this.$.restAPI.getDiffChangeDetail(e).then(e=>(this._change=e,e))}_getChangeEdit(e){return this.$.restAPI.getChangeEdit(this._changeNum)}_getSortedFileList(e){return e.sortedFileList}_getFiles(e,t,n){if([e,t,t.base,n].some(e=>void 0===e))return Promise.resolve();const i=t.base;return this.$.restAPI.getChangeFiles(e,i).then(e=>{if(!e)return;const t=n.getPaths(i),s=Object.assign({},e);Object.keys(t).forEach(e=>{s.hasOwnProperty(e)||(s[e]={status:"U"})}),this._files={sortedFileList:Object.keys(s).sort(this.specialFilePathCompare),changeFilesByPath:s}})}_getDiffPreferences(){return this.$.restAPI.getDiffPreferences().then(e=>{this._prefs=e})}_getPreferences(){return this.$.restAPI.getPreferences()}_getWindowWidth(){return window.innerWidth}_handleReviewedChange(e){this._setReviewed(Ui(e).rootTarget.checked)}_setReviewed(e){this._editMode||(this.$.reviewed.checked=e,this._saveReviewedState(e).catch(e=>{throw this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Couldn’t change file review status."},composed:!0,bubbles:!0})),e}))}_saveReviewedState(e){return this.$.restAPI.saveFileReviewed(this._changeNum,this._patchRange.patchNum,this._path,e)}_handleToggleFileReviewed(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._setReviewed(!this.$.reviewed.checked))}_handleEscKey(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.diffHost.displayLine=!1)}_handleLeftPane(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),this.$.cursor.moveLeft())}_handleRightPane(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),this.$.cursor.moveRight())}_handlePrevLineOrFileWithComments(e){this.shouldSuppressKeyboardShortcut(e)||(e.detail.keyboardEvent.shiftKey&&75===e.detail.keyboardEvent.keyCode?this._moveToPreviousFileWithComment():this.modifierPressed(e)||(e.preventDefault(),this.$.diffHost.displayLine=!0,this.$.cursor.moveUp()))}_handleVisibleLine(e){this.shouldSuppressKeyboardShortcut(e)||(e.preventDefault(),this.$.cursor.moveToVisibleArea())}_onOpenFixPreview(e){this.$.applyFixDialog.open(e)}_handleNextLineOrFileWithComments(e){this.shouldSuppressKeyboardShortcut(e)||(e.detail.keyboardEvent.shiftKey&&74===e.detail.keyboardEvent.keyCode?this._moveToNextFileWithComment():this.modifierPressed(e)||(e.preventDefault(),this.$.diffHost.displayLine=!0,this.$.cursor.moveDown()))}_moveToPreviousFileWithComment(){this._commentSkips&&(this._commentSkips.previous?um.navigateToDiff(this._change,this._commentSkips.previous,this._patchRange.patchNum,this._patchRange.basePatchNum):this._navToChangeView())}_moveToNextFileWithComment(){this._commentSkips&&(this._commentSkips.next?um.navigateToDiff(this._change,this._commentSkips.next,this._patchRange.patchNum,this._patchRange.basePatchNum):this._navToChangeView())}_handleNewComment(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this.$.cursor.createCommentInPlace())}_handlePrevFile(e){this.shouldSuppressKeyboardShortcut(e)||this.getKeyboardEvent(e).metaKey||(e.preventDefault(),this._navToFile(this._path,this._fileList,-1))}_handleNextFile(e){this.shouldSuppressKeyboardShortcut(e)||this.getKeyboardEvent(e).metaKey||(e.preventDefault(),this._navToFile(this._path,this._fileList,1))}_handleNextChunkOrCommentThread(e){if(!this.shouldSuppressKeyboardShortcut(e))if(e.preventDefault(),e.detail.keyboardEvent.shiftKey)this.$.cursor.moveToNextCommentThread();else{if(this.modifierPressed(e))return;this.$.cursor.moveToNextChunk()}}_handlePrevChunkOrCommentThread(e){if(!this.shouldSuppressKeyboardShortcut(e))if(e.preventDefault(),e.detail.keyboardEvent.shiftKey)this.$.cursor.moveToPreviousCommentThread();else{if(this.modifierPressed(e))return;this.$.cursor.moveToPreviousChunk()}}_handleOpenReplyDialogOrToggleLeftPane(e){if(!this.shouldSuppressKeyboardShortcut(e))return e.detail.keyboardEvent.shiftKey?(e.preventDefault(),void this.$.diffHost.toggleLeftDiff()):void(this.modifierPressed(e)||this._loggedIn&&(this.set("changeViewState.showReplyDialog",!0),e.preventDefault(),this._navToChangeView()))}_handleUpToChange(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._navToChangeView())}_handleCommaKey(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||this._diffPrefsDisabled||(e.preventDefault(),this.$.diffPreferencesDialog.open())}_handleToggleDiffMode(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||(e.preventDefault(),this._getDiffViewMode()===nA?this.$.modeSelect.setMode(iA):this.$.modeSelect.setMode(nA))}_navToChangeView(){this._changeNum&&this._patchRange.patchNum&&this._navigateToChange(this._change,this._patchRange,this._change&&this._change.revisions)}_navToFile(e,t,n){const i=this._getNavLinkPath(e,t,n);i&&(i.up?this._navigateToChange(this._change,this._patchRange,this._change&&this._change.revisions):um.navigateToDiff(this._change,i.path,this._patchRange.patchNum,this._patchRange.basePatchNum))}_computeNavLinkURL(e,t,n,i,s){const a=this._getNavLinkPath(t,n,i,s);return a?a.up?this._getChangePath(this._change,this._patchRange,this._change&&this._change.revisions):this._getDiffUrl(this._change,this._patchRange,a.path):null}_goToEditFile(){const e=um.getEditUrlForDiff(this._change,this._path,this._patchRange.patchNum);return um.navigateToRelativeUrl(e)}_getNavLinkPath(e,t,n,i){if(!e||!t||0===t.length)return null;let s=t.indexOf(e);if(-1===s){return{path:n>0?t[0]:t[t.length-1]}}return s+=n,s<0||s>t.length-1?i?null:{up:!0}:{path:t[s]}}_getReviewedFiles(e,t){return this.$.restAPI.getReviewedFiles(e,t).then(e=>(this._reviewedFiles=new Set(e),this._reviewedFiles))}_getReviewedStatus(e,t,n,i){return e?Promise.resolve(!1):this._getReviewedFiles(t,n).then(e=>e.has(i))}_paramsChanged(e){if(e.view!==um.View.DIFF)return;if(e.changeNum&&e.project&&this.$.restAPI.setInProjectLookup(e.changeNum,e.project),this.$.diffHost.lineOfInterest=this._getLineOfInterest(this.params),this._initCursor(this.params),this._changeNum=e.changeNum,this._path=e.path,this._patchRange={patchNum:e.patchNum,basePatchNum:e.basePatchNum||"PARENT"},this.async(()=>{this.dispatchEvent(new CustomEvent("title-change",{detail:{title:this.computeTruncatedPath(this._path)},composed:!0,bubbles:!0}))}),!this._patchRange.patchNum)return;const t=[];return t.push(this._getDiffPreferences()),t.push(this._getPreferences().then(e=>{this._userPrefs=e})),t.push(this._getChangeDetail(this._changeNum).then(e=>{let t,n;if(e){for(const i in e.revisions){if(!e.revisions.hasOwnProperty(i))continue;const s=e.revisions[i],a=s._number.toString();if(a===this._patchRange.patchNum){t=i;const e=(s.commit||{}).parents||[];"PARENT"===this._patchRange.basePatchNum&&e.length&&(n=e[e.length-1].commit)}else a===this._patchRange.basePatchNum&&(n=i)}this._commitRange={commit:t,baseCommit:n}}})),t.push(this._loadComments()),t.push(this._getChangeEdit(this._changeNum)),this._loading=!0,Promise.all(t).then(e=>{const t=e[4];return t&&this.set("_change.revisions."+t.commit.commit,{_number:this.EDIT_NAME,basePatchNum:t.base_patch_set_number,commit:t.commit}),this._loading=!1,this.$.diffHost.comments=this._commentsForDiff,this.$.diffHost.reload(!0)}).then(()=>{this.$.reporting.diffViewFullyLoaded(),this.$.reporting.diffViewDisplayed()})}_changeViewStateChanged(e){null===e.diffMode&&this.$.restAPI.getPreferences().then(e=>{this.set("changeViewState.diffMode",e.default_diff_view)})}_setReviewedObserver(e,t,n){if([e,t,n].some(e=>void 0===e))return;const i=t.base||{};e&&(n.manual_review?this._getReviewedStatus(this.editMode,this._changeNum,this._patchRange.patchNum,this._path).then(e=>{this.$.reviewed.checked=e}):i.view===um.View.DIFF&&this._setReviewed(!0))}_initCursor(e){void 0!==e.lineNum&&(e.leftSide?this.$.cursor.side=eA:this.$.cursor.side=tA,this.$.cursor.initialLineNumber=e.lineNum)}_getLineOfInterest(e){return e.lineNum?{number:e.lineNum,leftSide:e.leftSide}:null}_pathChanged(e){e&&this.dispatchEvent(new CustomEvent("title-change",{detail:{title:this.computeTruncatedPath(e)},composed:!0,bubbles:!0})),0!=this._fileList.length&&this.set("changeViewState.selectedFileIndex",this._fileList.indexOf(e))}_getDiffUrl(e,t,n){return[e,t,n].some(e=>void 0===e)?"":um.getUrlForDiff(e,n,t.patchNum,t.basePatchNum)}_patchRangeStr(e){let t=e.patchNum;return null!=e.basePatchNum&&"PARENT"!=e.basePatchNum&&(t=e.basePatchNum+".."+e.patchNum),t}_getChangeUrlRange(e,t){let n=void 0,i=void 0,s=-1;for(const e of Object.values(t||{}))s=Math.max(s,e._number);return"PARENT"===e.basePatchNum&&parseInt(e.patchNum,10)===s||(n=e.patchNum,i=e.basePatchNum),{patchNum:n,basePatchNum:i}}_getChangePath(e,t,n){if([e,t].some(e=>void 0===e))return"";const i=this._getChangeUrlRange(t,n);return um.getUrlForChange(e,i.patchNum,i.basePatchNum)}_navigateToChange(e,t,n){const i=this._getChangeUrlRange(t,n);um.navigateToChange(e,i.patchNum,i.basePatchNum)}_computeChangePath(e,t,n){return this._getChangePath(e,t.base,n)}_formatFilesForDropdown(e,t,n){if([e,t,n].some(e=>void 0===e))return;if(!e)return;const i=[];for(const s of e.sortedFileList)i.push({text:this.computeDisplayPath(s),mobileText:this.computeTruncatedPath(s),value:s,bottomText:this._computeCommentString(n,t,s,e.changeFilesByPath[s])});return i}_computeCommentString(e,t,n,i){const s=e.computeUnresolvedNum({patchNum:t,path:n}),a=e.computeCommentCount({patchNum:t,path:n}),o=Yr.computePluralString(a,"comment"),r=Yr.computeString(s,"unresolved");return["U"===i.status?"no changes":"",o,r].filter(e=>e&&e.length>0).join(", ")}_computePrefsButtonHidden(e,t){return t||!e}_handleFileChange(e){const t=e.detail.value;t!==this._path&&um.navigateToDiff(this._change,t,this._patchRange.patchNum,this._patchRange.basePatchNum)}_handleFileTap(e){this.async(()=>{this.$.dropdown.close()},1)}_handlePatchChange(e){const{basePatchNum:t,patchNum:n}=e.detail;this.patchNumEquals(t,this._patchRange.basePatchNum)&&this.patchNumEquals(n,this._patchRange.patchNum)||um.navigateToDiff(this._change,this._path,n,t)}_handlePrefsTap(e){e.preventDefault(),this.$.diffPreferencesDialog.open()}_getDiffViewMode(){return this.changeViewState.diffMode?this.changeViewState.diffMode:this._userPrefs?(this.set("changeViewState.diffMode",this._userPrefs.default_diff_view),this._userPrefs.default_diff_view):"SIDE_BY_SIDE"}_computeModeSelectHideClass(e){return e?"hide":""}_onLineSelected(e,t){if(!this._change)return;const n=this.$.cursor.getAddress(),i=n?n.number:void 0,s=n?n.leftSide:void 0,a=um.getUrlForDiffById(this._changeNum,this._change.project,this._path,this._patchRange.patchNum,this._patchRange.basePatchNum,i,s);history.replaceState(null,"",a)}_computeDownloadDropdownLinks(e,t,n,i,s){if(!n||!n.patchNum)return[];const a=[{url:this._computeDownloadPatchLink(e,t,n,i),name:"Patch"}];if(s&&s.meta_a){let o=i;"RENAMED"===s.change_type&&(o=s.meta_a.name),a.push({url:this._computeDownloadFileLink(e,t,n,o,!0),name:"Left Content"})}return s&&s.meta_b&&a.push({url:this._computeDownloadFileLink(e,t,n,i,!1),name:"Right Content"}),a}_computeDownloadFileLink(e,t,n,i,s){let a=n.patchNum;const o="PARENT"===n.basePatchNum;s&&!o&&(a=n.basePatchNum);let r=this.changeBaseURL(e,t,a)+`/files/${encodeURIComponent(i)}/download`;return s&&o&&(r+="?parent=1"),r}_computeDownloadPatchLink(e,t,n,i){let s=this.changeBaseURL(e,t,n.patchNum);return s+="/patch?zip&path="+encodeURIComponent(i),s}_loadComments(){return this.$.commentAPI.loadAll(this._changeNum).then(e=>{this._changeComments=e,this._commentMap=this._getPaths(this._patchRange),this._commentsForDiff=this._getCommentsForPath(this._path,this._patchRange,this._projectConfig)})}_recomputeComments(e,t,n,i){if([e,t,n,i].some(e=>void 0===e))return;const s=e[t];s&&s.old_path&&(this._commentsForDiff=this._changeComments.getCommentsBySideForFile({path:t,oldPath:s.old_path},n,i),this.$.diffHost.comments=this._commentsForDiff)}_getPaths(e){return this._changeComments.getPaths(e)}_getCommentsForPath(e,t,n){return this._changeComments.getCommentsBySideForPath(e,t,n)}_getDiffDrafts(){return this.$.restAPI.getDiffDrafts(this._changeNum)}_computeCommentSkips(e,t,n){if([e,t,n].some(e=>void 0===e))return;const i={previous:null,next:null};if(!t.length)return i;const s=t.indexOf(n);for(let n=s-1;n>=0;n--)if(e[t[n]]){i.previous=t[n];break}for(let n=s+1;n<t.length;n++)if(e[t[n]]){i.next=t[n];break}return i}_computeDiffClass(e){if(e)return"noOverflow"}_computeEditMode(e){const t=e.base||{};return this.patchNumEquals(t.patchNum,this.EDIT_NAME)}_computeContainerClass(e){return e?"editMode":""}_computeBlameToggleLabel(e,t){return e?"Hide blame":"Show blame"}_toggleBlame(){this._isBlameLoaded?this.$.diffHost.clearBlame():(this._isBlameLoading=!0,this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Loading blame..."},composed:!0,bubbles:!0})),this.$.diffHost.loadBlame().then(()=>{this._isBlameLoading=!1,this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Blame loaded"},composed:!0,bubbles:!0}))}).catch(()=>{this._isBlameLoading=!1}))}_handleToggleBlame(e){this.shouldSuppressKeyboardShortcut(e)||this.modifierPressed(e)||this._toggleBlame()}_computeBlameLoaderClass(e,t){return this.isMagicPath(t)||e?"":"show"}_getRevisionInfo(e){return new ym(e)}_computeFileNum(e,t){if(![e,t].some(e=>void 0===e))return t.findIndex(({value:t})=>t===e)+1}_computeFileNumClass(e,t){return t&&e>0?"show":""}_handleExpandAllDiffContext(e){this.shouldSuppressKeyboardShortcut(e)||this.$.diffHost.expandAllContext()}_computeDiffPrefsDisabled(e,t){return e||!t}_handleNextUnreviewedFile(e){if(this.shouldSuppressKeyboardShortcut(e))return;this._setReviewed(!0);const t=this._fileList.filter(e=>e===this._path||!this._reviewedFiles.has(e));this._navToFile(this._path,t,1)}_handleReloadingDiffPreference(){this._getDiffPreferences()}_onChangeHeaderPanelHeightChanged(e){this._scrollTopMargin=e.detail.value}_computeCanEdit(e,t){return![t,t.base].some(e=>void 0===e)&&(e&&this.changeIsOpen(t.base))}}customElements.define(sA.is,sA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const aA=za`
  <style include="shared-styles">
    textarea {
      border: none;
      box-sizing: border-box;
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-code);
      line-height: var(--line-height-code);
      min-height: 60vh;
      resize: none;
      white-space: pre;
      width: 100%;
    }
    textarea:focus {
      outline: none;
    }
  </style>
  <textarea
    id="textarea"
    value="[[fileContent]]"
    on-input="_handleTextareaInput"
  ></textarea>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class oA extends(Zn(na(Ka))){static get template(){return aA}static get is(){return"gr-default-editor"}static get properties(){return{fileContent:String}}_handleTextareaInput(e){this.dispatchEvent(new CustomEvent("content-change",{detail:{value:e.target.value},bubbles:!0,composed:!0}))}}customElements.define(oA.is,oA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const rA=za`
  <style include="shared-styles">
    :host {
      background-color: var(--view-background-color);
    }
    gr-fixed-panel {
      background-color: var(--edit-mode-background-color);
      border-bottom: 1px var(--border-color) solid;
      z-index: 1;
    }
    header,
    .subHeader {
      align-items: center;
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-m) var(--spacing-l);
    }
    header gr-editable-label {
      font-family: var(--header-font-family);
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-h3);
      line-height: var(--line-height-h3);
      --label-style: {
        text-overflow: initial;
        white-space: initial;
        word-break: break-all;
      }
      --input-style: {
        margin-top: var(--spacing-l);
      }
    }
    .textareaWrapper {
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      margin: var(--spacing-l);
    }
    .textareaWrapper .editButtons {
      display: none;
    }
    .controlGroup {
      align-items: center;
      display: flex;
      font-family: var(--header-font-family);
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-h3);
      line-height: var(--line-height-h3);
    }
    .rightControls {
      justify-content: flex-end;
    }
    @media screen and (max-width: 50em) {
      header,
      .subHeader {
        display: block;
      }
      .rightControls {
        float: right;
      }
    }
  </style>
  <gr-fixed-panel keep-on-scroll="">
    <header>
      <span class="controlGroup">
        <span>Edit mode</span>
        <span class="separator"></span>
        <gr-editable-label
          label-text="File path"
          value="[[_path]]"
          placeholder="File path..."
          on-changed="_handlePathChanged"
        ></gr-editable-label>
      </span>
      <span class="controlGroup rightControls">
        <gr-button id="close" link="" on-click="_handleCloseTap"
          >Close</gr-button
        >
        <gr-button
          id="save"
          disabled$="[[_saveDisabled]]"
          primary=""
          link=""
          on-click="_saveEdit"
          >Save</gr-button
        >
      </span>
    </header>
  </gr-fixed-panel>
  <div class="textareaWrapper">
    <gr-endpoint-decorator id="editorEndpoint" name="editor">
      <gr-endpoint-param
        name="fileContent"
        value="[[_newContent]]"
      ></gr-endpoint-param>
      <gr-endpoint-param name="prefs" value="[[_prefs]]"></gr-endpoint-param>
      <gr-endpoint-param name="fileType" value="[[_type]]"></gr-endpoint-param>
      <gr-endpoint-param
        name="lineNum"
        value="[[_lineNum]]"
      ></gr-endpoint-param>
      <gr-default-editor
        id="file"
        file-content="[[_newContent]]"
      ></gr-default-editor>
    </gr-endpoint-decorator>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-storage id="storage"></gr-storage>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class lA extends(ra([Wu,vm,Vg],Zn(na(Ka)))){static get template(){return rA}static get is(){return"gr-editor-view"}static get properties(){return{params:{type:Object,observer:"_paramsChanged"},_change:Object,_changeEditDetail:Object,_changeNum:String,_patchNum:String,_path:String,_type:String,_content:String,_newContent:String,_saving:{type:Boolean,value:!1},_successfulSave:{type:Boolean,value:!1},_saveDisabled:{type:Boolean,value:!0,computed:"_computeSaveDisabled(_content, _newContent, _saving)"},_prefs:Object,_lineNum:Number}}get keyBindings(){return{"ctrl+s meta+s":"_handleSaveShortcut"}}created(){super.created(),this.addEventListener("content-change",e=>this._handleContentChange(e))}attached(){super.attached(),this._getEditPrefs().then(e=>{this._prefs=e})}get storageKey(){return`c${this._changeNum}_ps${this._patchNum}_${this._path}`}_getLoggedIn(){return this.$.restAPI.getLoggedIn()}_getEditPrefs(){return this.$.restAPI.getEditPreferences()}_paramsChanged(e){if(e.view!==um.View.EDIT)return;this._changeNum=e.changeNum,this._path=e.path,this._patchNum=e.patchNum||this.EDIT_NAME,this._lineNum=e.lineNum,this.async(()=>{const e=`Editing ${this.computeTruncatedPath(this._path)}`;this.dispatchEvent(new CustomEvent("title-change",{detail:{title:e},composed:!0,bubbles:!0}))});const t=[];return t.push(this._getChangeDetail(this._changeNum)),t.push(this._getFileData(this._changeNum,this._path,this._patchNum)),Promise.all(t)}_getChangeDetail(e){return this.$.restAPI.getDiffChangeDetail(e).then(e=>{this._change=e})}_handlePathChanged(e){const t=e.detail;return t===this._path?Promise.resolve():this.$.restAPI.renameFileInChangeEdit(this._changeNum,this._path,t).then(e=>{e.ok&&(this._successfulSave=!0,this._viewEditInChangeView())})}_viewEditInChangeView(){const e=this._successfulSave?this.EDIT_NAME:this._patchNum;um.navigateToChange(this._change,e,null,e!==this.EDIT_NAME)}_getFileData(e,t,n){const i=this.$.storage.getEditableContentItem(this.storageKey);return this.$.restAPI.getFileContent(e,t,n).then(e=>{i&&i.message&&i.message!==e.content?(this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Content restored from a previous edit."},bubbles:!0,composed:!0})),this._newContent=i.message):this._newContent=e.content||"",this._content=e.content||"",e.ok&&e.type?this._type=e.type:this._type=""})}_saveEdit(){return this._saving=!0,this._showAlert("Saving changes..."),this.$.storage.eraseEditableContentItem(this.storageKey),this.$.restAPI.saveChangeEdit(this._changeNum,this._path,this._newContent).then(e=>{this._saving=!1,this._showAlert(e.ok?"All changes saved":"Failed to save changes"),e.ok&&(this._content=this._newContent,this._successfulSave=!0)})}_showAlert(e){this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:e},bubbles:!0,composed:!0}))}_computeSaveDisabled(e,t,n){return!![e,t,n].some(e=>void 0===e)||(!!n||e===t)}_handleCloseTap(){this._viewEditInChangeView()}_handleContentChange(e){this.debounce("store",()=>{const t=e.detail.value;t?(this.set("_newContent",e.detail.value),this.$.storage.setEditableContentItem(this.storageKey,t)):this.$.storage.eraseEditableContentItem(this.storageKey)},100)}_handleSaveShortcut(e){e.preventDefault(),this._saveDisabled||this._saveEdit()}}customElements.define(lA.is,lA);
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cA extends(Zn(na(Ka))){static get is(){return"gr-plugin-host"}static get properties(){return{config:{type:Object,observer:"_configChanged"}}}_configChanged(e){const t=e.plugin,n=t.html_resource_paths||[],i=this._handleMigrations(t.js_resource_paths||[],n),s=e.default_theme&&!tr.isPluginPreloaded("preloaded:gerrit-theme"),a=(s?[e.default_theme]:[]).concat(i,n),o={};s&&(o[e.default_theme]={sync:!0}),tr.loadPlugins(a,o)}_handleMigrations(e,t){return e.filter(e=>{const n=e.replace(/\.js$/,".html");return!t.includes(n)})}}customElements.define(cA.is,cA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const dA=za`
  <style include="shared-styles">
    h1 {
      margin-bottom: var(--spacing-m);
    }
    h3 {
      margin-bottom: var(--spacing-m);
    }
    .agreementsUrl {
      border: 1px solid #b0bdcc;
      margin-bottom: var(--spacing-xl);
      margin-left: var(--spacing-xl);
      margin-right: var(--spacing-xl);
      padding: var(--spacing-s);
    }
    #claNewAgreementsLabel {
      font-weight: var(--font-weight-bold);
    }
    #claNewAgreement {
      display: none;
    }
    #claNewAgreement.show {
      display: block;
    }
    .contributorAgreementButton {
      font-weight: var(--font-weight-bold);
    }
    .alreadySubmittedText {
      color: var(--error-text-color);
      margin: 0 var(--spacing-xxl);
      padding: var(--spacing-m);
    }
    .alreadySubmittedText.hide,
    .hideAgreementsTextBox {
      display: none;
    }
    main {
      margin: var(--spacing-xxl) auto;
      max-width: 50em;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <main>
    <h1>New Contributor Agreement</h1>
    <h3>Select an agreement type:</h3>
    <template
      is="dom-repeat"
      items="[[_serverConfig.auth.contributor_agreements]]"
    >
      <span class="contributorAgreementButton">
        <input
          id$="claNewAgreementsInput[[item.name]]"
          name="claNewAgreementsRadio"
          type="radio"
          data-name$="[[item.name]]"
          data-url$="[[item.url]]"
          on-click="_handleShowAgreement"
          disabled$="[[_disableAgreements(item, _groups, _signedAgreements)]]"
        />
        <label id="claNewAgreementsLabel">[[item.name]]</label>
      </span>
      <div
        class$="alreadySubmittedText [[_hideAgreements(item, _groups, _signedAgreements)]]"
      >
        Agreement already submitted.
      </div>
      <div class="agreementsUrl">
        [[item.description]]
      </div>
    </template>
    <div
      id="claNewAgreement"
      class$="[[_computeShowAgreementsClass(_showAgreements)]]"
    >
      <h3 class="smallHeading">Review the agreement:</h3>
      <div id="agreementsUrl" class="agreementsUrl">
        <a href$="[[_agreementsUrl]]" target="blank" rel="noopener">
          Please review the agreement.</a
        >
      </div>
      <div
        class$="agreementsTextBox [[_computeHideAgreementClass(_agreementName, _serverConfig.auth.contributor_agreements)]]"
      >
        <h3 class="smallHeading">Complete the agreement:</h3>
        <iron-input
          bind-value="{{_agreementsText}}"
          placeholder="Enter 'I agree' here"
        >
          <input
            id="input-agreements"
            is="iron-input"
            bind-value="{{_agreementsText}}"
            placeholder="Enter 'I agree' here"
          />
        </iron-input>
        <gr-button
          on-click="_handleSaveAgreements"
          disabled="[[_disableAgreementsText(_agreementsText)]]"
        >
          Submit
        </gr-button>
      </div>
    </div>
  </main>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class hA extends(ra([Go],Zn(na(Ka)))){static get template(){return dA}static get is(){return"gr-cla-view"}static get properties(){return{_groups:Object,_serverConfig:Object,_agreementsText:String,_agreementName:String,_signedAgreements:Array,_showAgreements:{type:Boolean,value:!1},_agreementsUrl:String}}attached(){super.attached(),this.loadData(),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"New Contributor Agreement"},composed:!0,bubbles:!0}))}loadData(){const e=[];return e.push(this.$.restAPI.getConfig(!0).then(e=>{this._serverConfig=e})),e.push(this.$.restAPI.getAccountGroups().then(e=>{this._groups=e.sort((e,t)=>e.name.localeCompare(t.name))})),e.push(this.$.restAPI.getAccountAgreements().then(e=>{this._signedAgreements=e||[]})),Promise.all(e)}_getAgreementsUrl(e){let t;return e?(t=e.startsWith("http:")||e.startsWith("https:")?e:this.getBaseUrl()+"/"+e,t):""}_handleShowAgreement(e){this._agreementName=e.target.getAttribute("data-name"),this._agreementsUrl=this._getAgreementsUrl(e.target.getAttribute("data-url")),this._showAgreements=!0}_handleSaveAgreements(e){this._createToast("Agreement saving...");const t=this._agreementName;return this.$.restAPI.saveAccountAgreement({name:t}).then(e=>{let t="Agreement failed to be submitted, please try again";200===e.status&&(t="Agreement has been successfully submited."),this._createToast(t),this.loadData(),this._agreementsText="",this._showAgreements=!1})}_createToast(e){this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:e},bubbles:!0,composed:!0}))}_computeShowAgreementsClass(e){return e?"show":""}_disableAgreements(e,t,n){if(!t)return!1;for(const i of t)if(e&&e.auto_verify_group&&e.auto_verify_group.id===i.id||n.find(t=>t.name===e.name))return!0;return!1}_hideAgreements(e,t,n){return this._disableAgreements(e,t,n)?"":"hide"}_disableAgreementsText(e){return"i agree"!==e.toLowerCase()}_computeHideAgreementClass(e,t){if(!t)return"";for(const n in t)if(t.hasOwnProperty(n))for(const i in t[n])if(t[n].hasOwnProperty(i)&&e===t[n].name&&!t[n].auto_verify_group)return"hideAgreementsTextBox"}}customElements.define(hA.is,hA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pA=za`
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="shared-styles">
    :host {
      display: block;
    }
    main {
      max-width: 46em;
    }
    :host(.loading) main {
      display: none;
    }
    .loadingMessage {
      display: none;
      font-style: italic;
    }
    :host(.loading) .loadingMessage {
      display: block;
    }
    hr {
      margin-top: var(--spacing-l);
      margin-bottom: var(--spacing-l);
    }
    header {
      border-bottom: 1px solid var(--border-color);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spacing-l);
    }
    .container {
      padding: var(--spacing-m) var(--spacing-xl);
    }
    footer {
      display: flex;
      justify-content: flex-end;
    }
    footer gr-button {
      margin-left: var(--spacing-l);
    }
    input {
      width: 20em;
    }
    section.hide {
      display: none;
    }
  </style>
  <div class="container gr-form-styles">
    <header>Please confirm your contact information</header>
    <div class="loadingMessage">Loading...</div>
    <main>
      <p>
        The following contact information was automatically obtained when you
        signed in to the site. This information is used to display who you are
        to others, and to send updates to code reviews you have either started
        or subscribed to.
      </p>
      <hr />
      <section>
        <div class="title">Full Name</div>
        <iron-input bind-value="{{_account.name}}">
          <input
            is="iron-input"
            id="name"
            bind-value="{{_account.name}}"
            disabled="[[_saving]]"
          />
        </iron-input>
      </section>
      <section class$="[[_computeUsernameClass(_usernameMutable)]]">
        <div class="title">Username</div>
        <iron-input bind-value="{{_account.username}}">
          <input
            is="iron-input"
            id="username"
            bind-value="{{_account.username}}"
            disabled="[[_saving]]"
          />
        </iron-input>
      </section>
      <section>
        <div class="title">Preferred Email</div>
        <select id="email" disabled="[[_saving]]">
          <option value="[[_account.email]]">[[_account.email]]</option>
          <template is="dom-repeat" items="[[_account.secondary_emails]]">
            <option value="[[item]]">[[item]]</option>
          </template>
        </select>
      </section>
      <hr />
      <p>
        More configuration options for Gerrit may be found in the
        <a on-click="close" href$="[[settingsUrl]]">settings</a>.
      </p>
    </main>
    <footer>
      <gr-button
        id="closeButton"
        link=""
        disabled="[[_saving]]"
        on-click="_handleClose"
        >Close</gr-button
      >
      <gr-button
        id="saveButton"
        primary=""
        link=""
        disabled="[[_computeSaveDisabled(_account.name, _account.email, _saving)]]"
        on-click="_handleSave"
        >Save</gr-button
      >
    </footer>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class uA extends(Zn(na(Ka))){static get template(){return pA}static get is(){return"gr-registration-dialog"}static get properties(){return{settingsUrl:String,_account:{type:Object,value:()=>({email:null,name:null,username:null})},_usernameMutable:{type:Boolean,computed:"_computeUsernameMutable(_serverConfig, _account.username)"},_loading:{type:Boolean,value:!0,observer:"_loadingChanged"},_saving:{type:Boolean,value:!1},_serverConfig:Object}}ready(){super.ready(),this._ensureAttribute("role","dialog")}loadData(){this._loading=!0;const e=this.$.restAPI.getAccount().then(e=>{this._account=Object.assign({},this._account,e)}),t=this.$.restAPI.getConfig().then(e=>{this._serverConfig=e});return Promise.all([e,t]).then(()=>{this._loading=!1})}_save(){this._saving=!0;const e=[this.$.restAPI.setAccountName(this.$.name.value),this.$.restAPI.setPreferredAccountEmail(this.$.email.value||"")];return this._usernameMutable&&e.push(this.$.restAPI.setAccountUsername(this.$.username.value)),Promise.all(e).then(()=>{this._saving=!1,this.dispatchEvent(new CustomEvent("account-detail-update",{composed:!0,bubbles:!0}))})}_handleSave(e){e.preventDefault(),this._save().then(this.close.bind(this))}_handleClose(e){e.preventDefault(),this.close()}close(){this._saving=!0,this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0}))}_computeSaveDisabled(e,t,n){return!e||!t||n}_computeUsernameMutable(e,t){if(![e,t].some(e=>void 0===e))return e.auth.editable_account_fields.includes("USER_NAME")&&!t}_computeUsernameClass(e){return e?"":"hide"}_loadingChanged(){this.classList.toggle("loading",this._loading)}}customElements.define(uA.is,uA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    #changeCols {
      width: auto;
    }
    #changeCols .visibleHeader {
      text-align: center;
    }
    .checkboxContainer {
      cursor: pointer;
      text-align: center;
    }
    .checkboxContainer input {
      cursor: pointer;
    }
    .checkboxContainer:hover {
      outline: 1px solid var(--border-color);
    }
  </style>
  <div class="gr-form-styles">
    <table id="changeCols">
      <thead>
        <tr>
          <th class="nameHeader">Column</th>
          <th class="visibleHeader">Visible</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Number</td>
          <td
            class="checkboxContainer"
            on-click="_handleCheckboxContainerClick"
          >
            <input
              type="checkbox"
              name="number"
              on-click="_handleNumberCheckboxClick"
              checked$="[[showNumber]]"
            />
          </td>
        </tr>
        <template is="dom-repeat" items="[[columnNames]]">
          <tr>
            <td>[[item]]</td>
            <td
              class="checkboxContainer"
              on-click="_handleCheckboxContainerClick"
            >
              <input
                type="checkbox"
                name="[[item]]"
                on-click="_handleTargetClick"
                checked$="[[!isColumnHidden(item, displayedColumns)]]"
              />
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class gA extends(ra([nv],Zn(na(Ka)))){static get template(){return mA}static get is(){return"gr-change-table-editor"}static get properties(){return{displayedColumns:{type:Array,notify:!0},showNumber:{type:Boolean,notify:!0}}}_getDisplayedColumns(){return Array.from(Ui(this.root).querySelectorAll(".checkboxContainer input:not([name=number])")).filter(e=>e.checked).map(e=>e.name)}_handleCheckboxContainerClick(e){const t=Ui(e.target).querySelector("input");t&&t.click()}_handleNumberCheckboxClick(e){this.showNumber=Ui(e).rootTarget.checked}_handleTargetClick(e){this.set("displayedColumns",this._getDisplayedColumns())}}customElements.define(gA.is,gA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _A=za`
  <style include="shared-styles">
    gr-avatar {
      height: 120px;
      width: 120px;
      margin-right: var(--spacing-xs);
      vertical-align: -0.25em;
    }
    div section.hide {
      display: none;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="gr-form-styles">
    <section>
      <span class="title"></span>
      <span class="value">
        <gr-avatar account="[[_account]]" image-size="120"></gr-avatar>
      </span>
    </section>
    <section class$="[[_hideAvatarChangeUrl(_avatarChangeUrl)]]">
      <span class="title"></span>
      <span class="value">
        <a href$="[[_avatarChangeUrl]]">
          Change avatar
        </a>
      </span>
    </section>
    <section>
      <span class="title">ID</span>
      <span class="value">[[_account._account_id]]</span>
    </section>
    <section>
      <span class="title">Email</span>
      <span class="value">[[_account.email]]</span>
    </section>
    <section>
      <span class="title">Registered</span>
      <span class="value">
        <gr-date-formatter
          has-tooltip=""
          date-str="[[_account.registered_on]]"
        ></gr-date-formatter>
      </span>
    </section>
    <section id="usernameSection">
      <span class="title">Username</span>
      <span hidden$="[[usernameMutable]]" class="value">[[_username]]</span>
      <span hidden$="[[!usernameMutable]]" class="value">
        <iron-input on-keydown="_handleKeydown" bind-value="{{_username}}">
          <input
            is="iron-input"
            id="usernameInput"
            disabled="[[_saving]]"
            on-keydown="_handleKeydown"
            bind-value="{{_username}}"
          />
        </iron-input>
      </span>
    </section>
    <section id="nameSection">
      <span class="title">Full name</span>
      <span hidden$="[[nameMutable]]" class="value">[[_account.name]]</span>
      <span hidden$="[[!nameMutable]]" class="value">
        <iron-input on-keydown="_handleKeydown" bind-value="{{_account.name}}">
          <input
            is="iron-input"
            id="nameInput"
            disabled="[[_saving]]"
            on-keydown="_handleKeydown"
            bind-value="{{_account.name}}"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Display name</span>
      <span class="value">
        <iron-input
          on-keydown="_handleKeydown"
          bind-value="{{_account.display_name}}"
        >
          <input
            is="iron-input"
            id="displayNameInput"
            disabled="[[_saving]]"
            on-keydown="_handleKeydown"
            bind-value="{{_account.display_name}}"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Status (e.g. "Vacation")</span>
      <span class="value">
        <iron-input
          on-keydown="_handleKeydown"
          bind-value="{{_account.status}}"
        >
          <input
            is="iron-input"
            id="statusInput"
            disabled="[[_saving]]"
            on-keydown="_handleKeydown"
            bind-value="{{_account.status}}"
          />
        </iron-input>
      </span>
    </section>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class fA extends(Zn(na(Ka))){static get template(){return _A}static get is(){return"gr-account-info"}static get properties(){return{usernameMutable:{type:Boolean,notify:!0,computed:"_computeUsernameMutable(_serverConfig, _account.username)"},nameMutable:{type:Boolean,notify:!0,computed:"_computeNameMutable(_serverConfig)"},hasUnsavedChanges:{type:Boolean,notify:!0,computed:"_computeHasUnsavedChanges(_hasNameChange, _hasUsernameChange, _hasStatusChange, _hasDisplayNameChange)"},_hasNameChange:Boolean,_hasUsernameChange:Boolean,_hasDisplayNameChange:Boolean,_hasStatusChange:Boolean,_loading:{type:Boolean,value:!1},_saving:{type:Boolean,value:!1},_account:Object,_serverConfig:Object,_username:{type:String,observer:"_usernameChanged"},_avatarChangeUrl:{type:String,value:""}}}static get observers(){return["_nameChanged(_account.name)","_statusChanged(_account.status)","_displayNameChanged(_account.display_name)"]}loadData(){const e=[];return this._loading=!0,e.push(this.$.restAPI.getConfig().then(e=>{this._serverConfig=e})),e.push(this.$.restAPI.getAccount().then(e=>{this._hasNameChange=!1,this._hasUsernameChange=!1,this._hasDisplayNameChange=!1,this._hasStatusChange=!1,e.username=e.username||"",this._account=e,this._username=e.username})),e.push(this.$.restAPI.getAvatarChangeUrl().then(e=>{this._avatarChangeUrl=e})),Promise.all(e).then(()=>{this._loading=!1})}save(){return this.hasUnsavedChanges?(this._saving=!0,this._maybeSetName().then(()=>this._maybeSetUsername()).then(()=>this._maybeSetDisplayName()).then(()=>this._maybeSetStatus()).then(()=>{this._hasNameChange=!1,this._hasDisplayNameChange=!1,this._hasStatusChange=!1,this._saving=!1,this.dispatchEvent(new CustomEvent("account-detail-update",{composed:!0,bubbles:!0}))})):Promise.resolve()}_maybeSetName(){return this._hasNameChange&&this.nameMutable?this.$.restAPI.setAccountName(this._account.name):Promise.resolve()}_maybeSetUsername(){return this._hasUsernameChange&&this.usernameMutable?this.$.restAPI.setAccountUsername(this._username):Promise.resolve()}_maybeSetDisplayName(){return this._hasDisplayNameChange?this.$.restAPI.setAccountDisplayName(this._account.display_name):Promise.resolve()}_maybeSetStatus(){return this._hasStatusChange?this.$.restAPI.setAccountStatus(this._account.status):Promise.resolve()}_computeHasUnsavedChanges(e,t,n,i){return e||t||n||i}_computeUsernameMutable(e,t){if(![e,t].some(e=>void 0===e))return e.auth.editable_account_fields.includes("USER_NAME")&&!t}_computeNameMutable(e){return e.auth.editable_account_fields.includes("FULL_NAME")}_statusChanged(){this._loading||(this._hasStatusChange=!0)}_displayNameChanged(){this._loading||(this._hasDisplayNameChange=!0)}_usernameChanged(){!this._loading&&this._account&&(this._hasUsernameChange=(this._account.username||"")!==(this._username||""))}_nameChanged(){this._loading||(this._hasNameChange=!0)}_handleKeydown(e){13===e.keyCode&&(e.stopPropagation(),this.save())}_hideAvatarChangeUrl(e){return e?"":"hide"}}customElements.define(fA.is,fA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bA=za`
  <style include="shared-styles">
    #agreements .nameColumn {
      min-width: 15em;
      width: auto;
    }
    #agreements .descriptionColumn {
      width: auto;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="gr-form-styles">
    <table id="agreements">
      <thead>
        <tr>
          <th class="nameColumn">Name</th>
          <th class="descriptionColumn">Description</th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-repeat" items="[[_agreements]]">
          <tr>
            <td class="nameColumn">
              <a href$="[[getUrlBase(item.url)]]" rel="external">
                [[item.name]]
              </a>
            </td>
            <td class="descriptionColumn">[[item.description]]</td>
          </tr>
        </template>
      </tbody>
    </table>
    <a href$="[[getUrl()]]">New Contributor Agreement</a>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class vA extends(ra([Go],Zn(na(Ka)))){static get template(){return bA}static get is(){return"gr-agreements-list"}static get properties(){return{_agreements:Array}}attached(){super.attached(),this.loadData()}loadData(){return this.$.restAPI.getAccountAgreements().then(e=>{this._agreements=e})}getUrl(){return this.getBaseUrl()+"/settings/new-agreement"}getUrlBase(e){return this.getBaseUrl()+"/"+e}}customElements.define(vA.is,vA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const yA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div id="editPreferences" class="gr-form-styles">
    <section>
      <span class="title">Tab width</span>
      <span class="value">
        <iron-input
          type="number"
          prevent-invalid-input=""
          allowed-pattern="[0-9]"
          bind-value="{{editPrefs.tab_size}}"
          on-keypress="_handleEditPrefsChanged"
          on-change="_handleEditPrefsChanged"
        >
          <input
            is="iron-input"
            type="number"
            prevent-invalid-input=""
            allowed-pattern="[0-9]"
            bind-value="{{editPrefs.tab_size}}"
            on-keypress="_handleEditPrefsChanged"
            on-change="_handleEditPrefsChanged"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Columns</span>
      <span class="value">
        <iron-input
          type="number"
          prevent-invalid-input=""
          allowed-pattern="[0-9]"
          bind-value="{{editPrefs.line_length}}"
          on-keypress="_handleEditPrefsChanged"
          on-change="_handleEditPrefsChanged"
        >
          <input
            is="iron-input"
            type="number"
            prevent-invalid-input=""
            allowed-pattern="[0-9]"
            bind-value="{{editPrefs.line_length}}"
            on-keypress="_handleEditPrefsChanged"
            on-change="_handleEditPrefsChanged"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Indent unit</span>
      <span class="value">
        <iron-input
          type="number"
          prevent-invalid-input=""
          allowed-pattern="[0-9]"
          bind-value="{{editPrefs.indent_unit}}"
          on-keypress="_handleEditPrefsChanged"
          on-change="_handleEditPrefsChanged"
        >
          <input
            is="iron-input"
            type="number"
            prevent-invalid-input=""
            allowed-pattern="[0-9]"
            bind-value="{{editPrefs.indent_unit}}"
            on-keypress="_handleEditPrefsChanged"
            on-change="_handleEditPrefsChanged"
          />
        </iron-input>
      </span>
    </section>
    <section>
      <span class="title">Syntax highlighting</span>
      <span class="value">
        <input
          id="editSyntaxHighlighting"
          type="checkbox"
          checked$="[[editPrefs.syntax_highlighting]]"
          on-change="_handleEditSyntaxHighlightingChanged"
        />
      </span>
    </section>
    <section>
      <span class="title">Show tabs</span>
      <span class="value">
        <input
          id="editShowTabs"
          type="checkbox"
          checked$="[[editPrefs.show_tabs]]"
          on-change="_handleEditShowTabsChanged"
        />
      </span>
    </section>
    <section>
      <span class="title">Match brackets</span>
      <span class="value">
        <input
          id="showMatchBrackets"
          type="checkbox"
          checked$="[[editPrefs.match_brackets]]"
          on-change="_handleMatchBracketsChanged"
        />
      </span>
    </section>
    <section>
      <span class="title">Line wrapping</span>
      <span class="value">
        <input
          id="editShowLineWrapping"
          type="checkbox"
          checked$="[[editPrefs.line_wrapping]]"
          on-change="_handleEditLineWrappingChanged"
        />
      </span>
    </section>
    <section>
      <span class="title">Indent with tabs</span>
      <span class="value">
        <input
          id="showIndentWithTabs"
          type="checkbox"
          checked$="[[editPrefs.indent_with_tabs]]"
          on-change="_handleIndentWithTabsChanged"
        />
      </span>
    </section>
    <section>
      <span class="title">Auto close brackets</span>
      <span class="value">
        <input
          id="showAutoCloseBrackets"
          type="checkbox"
          checked$="[[editPrefs.auto_close_brackets]]"
          on-change="_handleAutoCloseBracketsChanged"
        />
      </span>
    </section>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class wA extends(Zn(na(Ka))){static get template(){return yA}static get is(){return"gr-edit-preferences"}static get properties(){return{hasUnsavedChanges:{type:Boolean,notify:!0,value:!1},editPrefs:Object}}loadData(){return this.$.restAPI.getEditPreferences().then(e=>{this.editPrefs=e})}_handleEditPrefsChanged(){this.hasUnsavedChanges=!0}_handleEditSyntaxHighlightingChanged(){this.set("editPrefs.syntax_highlighting",this.$.editSyntaxHighlighting.checked),this._handleEditPrefsChanged()}_handleEditShowTabsChanged(){this.set("editPrefs.show_tabs",this.$.editShowTabs.checked),this._handleEditPrefsChanged()}_handleMatchBracketsChanged(){this.set("editPrefs.match_brackets",this.$.showMatchBrackets.checked),this._handleEditPrefsChanged()}_handleEditLineWrappingChanged(){this.set("editPrefs.line_wrapping",this.$.editShowLineWrapping.checked),this._handleEditPrefsChanged()}_handleIndentWithTabsChanged(){this.set("editPrefs.indent_with_tabs",this.$.showIndentWithTabs.checked),this._handleEditPrefsChanged()}_handleAutoCloseBracketsChanged(){this.set("editPrefs.auto_close_brackets",this.$.showAutoCloseBrackets.checked),this._handleEditPrefsChanged()}save(){return this.$.restAPI.saveEditPreferences(this.editPrefs).then(e=>{this.hasUnsavedChanges=!1})}}customElements.define(wA.is,wA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const CA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    th {
      color: var(--deemphasized-text-color);
      text-align: left;
    }
    #emailTable .emailColumn {
      min-width: 32.5em;
      width: auto;
    }
    #emailTable .preferredHeader {
      text-align: center;
      width: 6em;
    }
    #emailTable .preferredControl {
      cursor: pointer;
      height: auto;
      text-align: center;
    }
    #emailTable .preferredControl .preferredRadio {
      height: auto;
    }
    .preferredControl:hover {
      outline: 1px solid var(--border-color);
    }
  </style>
  <div class="gr-form-styles">
    <table id="emailTable">
      <thead>
        <tr>
          <th class="emailColumn">Email</th>
          <th class="preferredHeader">Preferred</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-repeat" items="[[_emails]]">
          <tr>
            <td class="emailColumn">[[item.email]]</td>
            <td
              class="preferredControl"
              on-click="_handlePreferredControlClick"
            >
              <iron-input
                class="preferredRadio"
                type="radio"
                on-change="_handlePreferredChange"
                name="preferred"
                bind-value="[[item.email]]"
                checked$="[[item.preferred]]"
              >
                <input
                  is="iron-input"
                  class="preferredRadio"
                  type="radio"
                  on-change="_handlePreferredChange"
                  name="preferred"
                  value="[[item.email]]"
                  checked$="[[item.preferred]]"
                />
              </iron-input>
            </td>
            <td>
              <gr-button
                data-index$="[[index]]"
                on-click="_handleDeleteButton"
                disabled="[[item.preferred]]"
                class="remove-button"
                >Delete</gr-button
              >
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class EA extends(Zn(na(Ka))){static get template(){return CA}static get is(){return"gr-email-editor"}static get properties(){return{hasUnsavedChanges:{type:Boolean,notify:!0,value:!1},_emails:Array,_emailsToRemove:{type:Array,value:()=>[]},_newPreferred:{type:String,value:null}}}loadData(){return this.$.restAPI.getAccountEmails().then(e=>{this._emails=e})}save(){const e=[];for(const t of this._emailsToRemove)e.push(this.$.restAPI.deleteAccountEmail(t.email));return this._newPreferred&&e.push(this.$.restAPI.setPreferredAccountEmail(this._newPreferred)),Promise.all(e).then(()=>{this._emailsToRemove=[],this._newPreferred=null,this.hasUnsavedChanges=!1})}_handleDeleteButton(e){const t=parseInt(Ui(e).localTarget.getAttribute("data-index"),10),n=this._emails[t];this.push("_emailsToRemove",n),this.splice("_emails",t,1),this.hasUnsavedChanges=!0}_handlePreferredControlClick(e){e.target.classList.contains("preferredControl")&&e.target.firstElementChild.click()}_handlePreferredChange(e){const t=e.target.value;for(let e=0;e<this._emails.length;e++)t===this._emails[e].email?(this.set(["_emails",e,"preferred"],!0),this._newPreferred=t,this.hasUnsavedChanges=!0):this._emails[e].preferred&&this.set(["_emails",e,"preferred"],!1)}}customElements.define(EA.is,EA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const SA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    .keyHeader {
      width: 9em;
    }
    .userIdHeader {
      width: 15em;
    }
    #viewKeyOverlay {
      padding: var(--spacing-xxl);
      width: 50em;
    }
    .publicKey {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      overflow-x: scroll;
      overflow-wrap: break-word;
      width: 30em;
    }
    .closeButton {
      bottom: 2em;
      position: absolute;
      right: 2em;
    }
    #existing {
      margin-bottom: var(--spacing-l);
    }
  </style>
  <div class="gr-form-styles">
    <fieldset id="existing">
      <table>
        <thead>
          <tr>
            <th class="idColumn">ID</th>
            <th class="fingerPrintColumn">Fingerprint</th>
            <th class="userIdHeader">User IDs</th>
            <th class="keyHeader">Public Key</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <template is="dom-repeat" items="[[_keys]]" as="key">
            <tr>
              <td class="idColumn">[[key.id]]</td>
              <td class="fingerPrintColumn">[[key.fingerprint]]</td>
              <td class="userIdHeader">
                <template is="dom-repeat" items="[[key.user_ids]]">
                  [[item]]
                </template>
              </td>
              <td class="keyHeader">
                <gr-button on-click="_showKey" data-index$="[[index]]" link=""
                  >Click to View</gr-button
                >
              </td>
              <td>
                <gr-copy-clipboard
                  has-tooltip=""
                  button-title="Copy GPG public key to clipboard"
                  hide-input=""
                  text="[[key.key]]"
                >
                </gr-copy-clipboard>
              </td>
              <td>
                <gr-button data-index$="[[index]]" on-click="_handleDeleteKey"
                  >Delete</gr-button
                >
              </td>
            </tr>
          </template>
        </tbody>
      </table>
      <gr-overlay id="viewKeyOverlay" with-backdrop="">
        <fieldset>
          <section>
            <span class="title">Status</span>
            <span class="value">[[_keyToView.status]]</span>
          </section>
          <section>
            <span class="title">Key</span>
            <span class="value">[[_keyToView.key]]</span>
          </section>
        </fieldset>
        <gr-button class="closeButton" on-click="_closeOverlay"
          >Close</gr-button
        >
      </gr-overlay>
      <gr-button on-click="save" disabled$="[[!hasUnsavedChanges]]"
        >Save changes</gr-button
      >
    </fieldset>
    <fieldset>
      <section>
        <span class="title">New GPG key</span>
        <span class="value">
          <iron-autogrow-textarea
            id="newKey"
            autocomplete="on"
            bind-value="{{_newKey}}"
            placeholder="New GPG Key"
          ></iron-autogrow-textarea>
        </span>
      </section>
      <gr-button
        id="addButton"
        disabled$="[[_computeAddButtonDisabled(_newKey)]]"
        on-click="_handleAddKey"
        >Add new GPG key</gr-button
      >
    </fieldset>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class xA extends(Zn(na(Ka))){static get template(){return SA}static get is(){return"gr-gpg-editor"}static get properties(){return{hasUnsavedChanges:{type:Boolean,value:!1,notify:!0},_keys:Array,_keyToView:Object,_newKey:{type:String,value:""},_keysToRemove:{type:Array,value:()=>[]}}}loadData(){return this._keys=[],this.$.restAPI.getAccountGPGKeys().then(e=>{e&&(this._keys=Object.keys(e).map(t=>{const n=e[t];return n.id=t,n}))})}save(){const e=this._keysToRemove.map(e=>{this.$.restAPI.deleteAccountGPGKey(e.id)});return Promise.all(e).then(()=>{this._keysToRemove=[],this.hasUnsavedChanges=!1})}_showKey(e){const t=Ui(e).localTarget,n=parseInt(t.getAttribute("data-index"),10);this._keyToView=this._keys[n],this.$.viewKeyOverlay.open()}_closeOverlay(){this.$.viewKeyOverlay.close()}_handleDeleteKey(e){const t=Ui(e).localTarget,n=parseInt(t.getAttribute("data-index"),10);this.push("_keysToRemove",this._keys[n]),this.splice("_keys",n,1),this.hasUnsavedChanges=!0}_handleAddKey(){return this.$.addButton.disabled=!0,this.$.newKey.disabled=!0,this.$.restAPI.addAccountGPGKey({add:[this._newKey.trim()]}).then(e=>{this.$.newKey.disabled=!1,this._newKey="",this.loadData()}).catch(()=>{this.$.addButton.disabled=!1,this.$.newKey.disabled=!1})}_computeAddButtonDisabled(e){return!e.length}}customElements.define(xA.is,xA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const AA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    #groups .nameColumn {
      min-width: 11em;
      width: auto;
    }
    .descriptionHeader {
      min-width: 21.5em;
    }
    .visibleCell {
      text-align: center;
      width: 6em;
    }
  </style>
  <div class="gr-form-styles">
    <table id="groups">
      <thead>
        <tr>
          <th class="nameHeader">Name</th>
          <th class="descriptionHeader">Description</th>
          <th class="visibleCell">Visible to all</th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-repeat" items="[[_groups]]">
          <tr>
            <td class="nameColumn">
              <a href$="[[_computeGroupPath(item)]]">
                [[item.name]]
              </a>
            </td>
            <td>[[item.description]]</td>
            <td class="visibleCell">[[_computeVisibleToAll(item)]]</td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class PA extends(Zn(na(Ka))){static get template(){return AA}static get is(){return"gr-group-list"}static get properties(){return{_groups:Array}}loadData(){return this.$.restAPI.getAccountGroups().then(e=>{this._groups=e.sort((e,t)=>e.name.localeCompare(t.name))})}_computeVisibleToAll(e){return e.options.visible_to_all?"Yes":"No"}_computeGroupPath(e){if(e&&e.id)return um.getUrlForGroup(decodeURIComponent(e.id))}}customElements.define(PA.is,PA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const kA=za`
  <style include="shared-styles">
    .password {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
    }
    #generatedPasswordOverlay {
      padding: var(--spacing-xxl);
      width: 50em;
    }
    #generatedPasswordDisplay {
      margin: var(--spacing-l) 0;
    }
    #generatedPasswordDisplay .title {
      width: unset;
    }
    #generatedPasswordDisplay .value {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
    }
    #passwordWarning {
      font-style: italic;
      text-align: center;
    }
    .closeButton {
      bottom: 2em;
      position: absolute;
      right: 2em;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="gr-form-styles">
    <div hidden$="[[_passwordUrl]]">
      <section>
        <span class="title">Username</span>
        <span class="value">[[_username]]</span>
      </section>
      <gr-button id="generateButton" on-click="_handleGenerateTap"
        >Generate new password</gr-button
      >
    </div>
    <span hidden$="[[!_passwordUrl]]">
      <a href$="[[_passwordUrl]]" target="_blank" rel="noopener">
        Obtain password</a
      >
      (opens in a new tab)
    </span>
  </div>
  <gr-overlay
    id="generatedPasswordOverlay"
    on-iron-overlay-closed="_generatedPasswordOverlayClosed"
    with-backdrop=""
  >
    <div class="gr-form-styles">
      <section id="generatedPasswordDisplay">
        <span class="title">New Password:</span>
        <span class="value">[[_generatedPassword]]</span>
        <gr-copy-clipboard
          has-tooltip=""
          button-title="Copy password to clipboard"
          hide-input=""
          text="[[_generatedPassword]]"
        >
        </gr-copy-clipboard>
      </section>
      <section id="passwordWarning">
        This password will not be displayed again.<br />
        If you lose it, you will need to generate a new one.
      </section>
      <gr-button link="" class="closeButton" on-click="_closeOverlay"
        >Close</gr-button
      >
    </div>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class TA extends(Zn(na(Ka))){static get template(){return kA}static get is(){return"gr-http-password"}static get properties(){return{_username:String,_generatedPassword:String,_passwordUrl:String}}attached(){super.attached(),this.loadData()}loadData(){const e=[];return e.push(this.$.restAPI.getAccount().then(e=>{this._username=e.username})),e.push(this.$.restAPI.getConfig().then(e=>{this._passwordUrl=e.auth.http_password_url||null})),Promise.all(e)}_handleGenerateTap(){this._generatedPassword="Generating...",this.$.generatedPasswordOverlay.open(),this.$.restAPI.generateAccountHttpPassword().then(e=>{this._generatedPassword=e})}_closeOverlay(){this.$.generatedPasswordOverlay.close()}_generatedPasswordOverlayClosed(){this._generatedPassword=""}}customElements.define(TA.is,TA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const IA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    tr th.emailAddressHeader,
    tr th.identityHeader {
      width: 15em;
      padding: 0 10px;
    }
    tr td.statusColumn,
    tr td.emailAddressColumn,
    tr td.identityColumn {
      word-break: break-word;
    }
    tr td.emailAddressColumn,
    tr td.identityColumn {
      padding: 4px 10px;
      width: 15em;
    }
    .deleteButton {
      float: right;
    }
    .deleteButton:not(.show) {
      display: none;
    }
    .space {
      margin-bottom: var(--spacing-l);
    }
  </style>
  <div class="gr-form-styles">
    <fieldset class="space">
      <table>
        <thead>
          <tr>
            <th class="statusHeader">Status</th>
            <th class="emailAddressHeader">Email Address</th>
            <th class="identityHeader">Identity</th>
            <th class="deleteHeader"></th>
          </tr>
        </thead>
        <tbody>
          <template
            is="dom-repeat"
            items="[[_identities]]"
            filter="filterIdentities"
          >
            <tr>
              <td class="statusColumn">
                [[_computeIsTrusted(item.trusted)]]
              </td>
              <td class="emailAddressColumn">[[item.email_address]]</td>
              <td class="identityColumn">
                [[_computeIdentity(item.identity)]]
              </td>
              <td class="deleteColumn">
                <gr-button
                  class$="deleteButton [[_computeHideDeleteClass(item.can_delete)]]"
                  on-click="_handleDeleteItem"
                >
                  Delete
                </gr-button>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </fieldset>
    <template is="dom-if" if="[[_showLinkAnotherIdentity]]">
      <fieldset>
        <a href$="[[_computeLinkAnotherIdentity()]]">
          <gr-button id="linkAnotherIdentity" link=""
            >Link Another Identity</gr-button
          >
        </a>
      </fieldset>
    </template>
  </div>
  <gr-overlay id="overlay" with-backdrop="">
    <gr-confirm-delete-item-dialog
      class="confirmDialog"
      on-confirm="_handleDeleteItemConfirm"
      on-cancel="_handleConfirmDialogCancel"
      item="[[_idName]]"
      item-type="id"
    ></gr-confirm-delete-item-dialog>
  </gr-overlay>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2017 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,RA=["OPENID","OAUTH"];class LA extends(ra([Go],Zn(na(Ka)))){static get template(){return IA}static get is(){return"gr-identities"}static get properties(){return{_identities:Object,_idName:String,serverConfig:Object,_showLinkAnotherIdentity:{type:Boolean,computed:"_computeShowLinkAnotherIdentity(serverConfig)"}}}loadData(){return this.$.restAPI.getExternalIds().then(e=>{this._identities=e})}_computeIdentity(e){return e&&e.startsWith("mailto:")?"":e}_computeHideDeleteClass(e){return e?"show":""}_handleDeleteItemConfirm(){return this.$.overlay.close(),this.$.restAPI.deleteAccountIdentity([this._idName]).then(()=>{this.loadData()})}_handleConfirmDialogCancel(){this.$.overlay.close()}_handleDeleteItem(e){const t=e.model.get("item.identity");t&&(this._idName=t,this.$.overlay.open())}_computeIsTrusted(e){return e?"":"Untrusted"}filterIdentities(e){return!e.identity.startsWith("username:")}_computeShowLinkAnotherIdentity(e){return!!(e&&e.auth&&e.auth.git_basic_auth_policy)&&RA.includes(e.auth.git_basic_auth_policy.toUpperCase())}_computeLinkAnotherIdentity(){const e=this.getBaseUrl()||"";let t=window.location.pathname;return e&&(t="/"+t.substring(e.length)),e+"/login/"+encodeURIComponent(t)+"?link"}}customElements.define(LA.is,LA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const DA=za`
  <style include="shared-styles">
    .buttonColumn {
      width: 2em;
    }
    .moveUpButton,
    .moveDownButton {
      width: 100%;
    }
    tbody tr:first-of-type td .moveUpButton,
    tbody tr:last-of-type td .moveDownButton {
      display: none;
    }
    td.urlCell {
      word-break: break-word;
    }
    .newUrlInput {
      min-width: 23em;
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="gr-form-styles">
    <table>
      <thead>
        <tr>
          <th class="nameHeader">Name</th>
          <th class="url-header">URL</th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-repeat" items="[[menuItems]]">
          <tr>
            <td>[[item.name]]</td>
            <td class="urlCell">[[item.url]]</td>
            <td class="buttonColumn">
              <gr-button
                link=""
                data-index$="[[index]]"
                on-click="_handleMoveUpButton"
                class="moveUpButton"
                >↑</gr-button
              >
            </td>
            <td class="buttonColumn">
              <gr-button
                link=""
                data-index$="[[index]]"
                on-click="_handleMoveDownButton"
                class="moveDownButton"
                >↓</gr-button
              >
            </td>
            <td>
              <gr-button
                link=""
                data-index$="[[index]]"
                on-click="_handleDeleteButton"
                class="remove-button"
                >Delete</gr-button
              >
            </td>
          </tr>
        </template>
      </tbody>
      <tfoot>
        <tr>
          <th>
            <iron-input
              placeholder="New Title"
              on-keydown="_handleInputKeydown"
              bind-value="{{_newName}}"
            >
              <input
                is="iron-input"
                placeholder="New Title"
                on-keydown="_handleInputKeydown"
                bind-value="{{_newName}}"
              />
            </iron-input>
          </th>
          <th>
            <iron-input
              class="newUrlInput"
              placeholder="New URL"
              on-keydown="_handleInputKeydown"
              bind-value="{{_newUrl}}"
            >
              <input
                class="newUrlInput"
                is="iron-input"
                placeholder="New URL"
                on-keydown="_handleInputKeydown"
                bind-value="{{_newUrl}}"
              />
            </iron-input>
          </th>
          <th></th>
          <th></th>
          <th>
            <gr-button
              link=""
              disabled$="[[_computeAddDisabled(_newName, _newUrl)]]"
              on-click="_handleAddButton"
              >Add</gr-button
            >
          </th>
        </tr>
      </tfoot>
    </table>
  </div>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class OA extends(Zn(na(Ka))){static get template(){return DA}static get is(){return"gr-menu-editor"}static get properties(){return{menuItems:Array,_newName:String,_newUrl:String}}_handleMoveUpButton(e){const t=Number(Ui(e).localTarget.dataset.index);if(0===t)return;const n=this.menuItems[t],i=this.menuItems[t-1];this.splice("menuItems",t-1,2,n,i)}_handleMoveDownButton(e){const t=Number(Ui(e).localTarget.dataset.index);if(t===this.menuItems.length-1)return;const n=this.menuItems[t],i=this.menuItems[t+1];this.splice("menuItems",t,2,i,n)}_handleDeleteButton(e){const t=Number(Ui(e).localTarget.dataset.index);this.splice("menuItems",t,1)}_handleAddButton(){this._computeAddDisabled(this._newName,this._newUrl)||(this.splice("menuItems",this.menuItems.length,0,{name:this._newName,url:this._newUrl,target:"_blank"}),this._newName="",this._newUrl="")}_computeAddDisabled(e,t){return!e.length||!t.length}_handleInputKeydown(e){13===e.keyCode&&(e.stopPropagation(),this._handleAddButton())}}customElements.define(OA.is,OA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const NA=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    .statusHeader {
      width: 4em;
    }
    .keyHeader {
      width: 7.5em;
    }
    #viewKeyOverlay {
      padding: var(--spacing-xxl);
      width: 50em;
    }
    .publicKey {
      font-family: var(--monospace-font-family);
      font-size: var(--font-size-mono);
      line-height: var(--line-height-mono);
      overflow-x: scroll;
      overflow-wrap: break-word;
      width: 30em;
    }
    .closeButton {
      bottom: 2em;
      position: absolute;
      right: 2em;
    }
    #existing {
      margin-bottom: var(--spacing-l);
    }
    #existing .commentColumn {
      min-width: 27em;
      width: auto;
    }
  </style>
  <div class="gr-form-styles">
    <fieldset id="existing">
      <table>
        <thead>
          <tr>
            <th class="commentColumn">Comment</th>
            <th class="statusHeader">Status</th>
            <th class="keyHeader">Public key</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <template is="dom-repeat" items="[[_keys]]" as="key">
            <tr>
              <td class="commentColumn">[[key.comment]]</td>
              <td>[[_getStatusLabel(key.valid)]]</td>
              <td>
                <gr-button link="" on-click="_showKey" data-index$="[[index]]"
                  >Click to View</gr-button
                >
              </td>
              <td>
                <gr-copy-clipboard
                  has-tooltip=""
                  button-title="Copy SSH public key to clipboard"
                  hide-input=""
                  text="[[key.ssh_public_key]]"
                >
                </gr-copy-clipboard>
              </td>
              <td>
                <gr-button
                  link=""
                  data-index$="[[index]]"
                  on-click="_handleDeleteKey"
                  >Delete</gr-button
                >
              </td>
            </tr>
          </template>
        </tbody>
      </table>
      <gr-overlay id="viewKeyOverlay" with-backdrop="">
        <fieldset>
          <section>
            <span class="title">Algorithm</span>
            <span class="value">[[_keyToView.algorithm]]</span>
          </section>
          <section>
            <span class="title">Public key</span>
            <span class="value publicKey">[[_keyToView.encoded_key]]</span>
          </section>
          <section>
            <span class="title">Comment</span>
            <span class="value">[[_keyToView.comment]]</span>
          </section>
        </fieldset>
        <gr-button class="closeButton" on-click="_closeOverlay"
          >Close</gr-button
        >
      </gr-overlay>
      <gr-button on-click="save" disabled$="[[!hasUnsavedChanges]]"
        >Save changes</gr-button
      >
    </fieldset>
    <fieldset>
      <section>
        <span class="title">New SSH key</span>
        <span class="value">
          <iron-autogrow-textarea
            id="newKey"
            autocomplete="on"
            bind-value="{{_newKey}}"
            placeholder="New SSH Key"
          ></iron-autogrow-textarea>
        </span>
      </section>
      <gr-button
        id="addButton"
        link=""
        disabled$="[[_computeAddButtonDisabled(_newKey)]]"
        on-click="_handleAddKey"
        >Add new SSH key</gr-button
      >
    </fieldset>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class MA extends(Zn(na(Ka))){static get template(){return NA}static get is(){return"gr-ssh-editor"}static get properties(){return{hasUnsavedChanges:{type:Boolean,value:!1,notify:!0},_keys:Array,_keyToView:Object,_newKey:{type:String,value:""},_keysToRemove:{type:Array,value:()=>[]}}}loadData(){return this.$.restAPI.getAccountSSHKeys().then(e=>{this._keys=e})}save(){const e=this._keysToRemove.map(e=>{this.$.restAPI.deleteAccountSSHKey(e.seq)});return Promise.all(e).then(()=>{this._keysToRemove=[],this.hasUnsavedChanges=!1})}_getStatusLabel(e){return e?"Valid":"Invalid"}_showKey(e){const t=Ui(e).localTarget,n=parseInt(t.getAttribute("data-index"),10);this._keyToView=this._keys[n],this.$.viewKeyOverlay.open()}_closeOverlay(){this.$.viewKeyOverlay.close()}_handleDeleteKey(e){const t=Ui(e).localTarget,n=parseInt(t.getAttribute("data-index"),10);this.push("_keysToRemove",this._keys[n]),this.splice("_keys",n,1),this.hasUnsavedChanges=!0}_handleAddKey(){return this.$.addButton.disabled=!0,this.$.newKey.disabled=!0,this.$.restAPI.addAccountSSHKey(this._newKey.trim()).then(e=>{this.$.newKey.disabled=!1,this._newKey="",this.push("_keys",e)}).catch(()=>{this.$.addButton.disabled=!1,this.$.newKey.disabled=!1})}_computeAddButtonDisabled(e){return!e.length}}customElements.define(MA.is,MA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $A=za`
  <style include="shared-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-form-styles">
    #watchedProjects .notifType {
      text-align: center;
      padding: 0 var(--spacing-s);
    }
    .notifControl {
      cursor: pointer;
      text-align: center;
    }
    .notifControl:hover {
      outline: 1px solid var(--border-color);
    }
    .projectFilter {
      color: var(--deemphasized-text-color);
      font-style: italic;
      margin-left: var(--spacing-l);
    }
    .newFilterInput {
      width: 100%;
    }
  </style>
  <div class="gr-form-styles">
    <table id="watchedProjects">
      <thead>
        <tr>
          <th>Repo</th>
          <template is="dom-repeat" items="[[_getTypes()]]">
            <th class="notifType">[[item.name]]</th>
          </template>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <template
          is="dom-repeat"
          items="[[_projects]]"
          as="project"
          index-as="projectIndex"
        >
          <tr>
            <td>
              [[project.project]]
              <template is="dom-if" if="[[project.filter]]">
                <div class="projectFilter">[[project.filter]]</div>
              </template>
            </td>
            <template is="dom-repeat" items="[[_getTypes()]]" as="type">
              <td class="notifControl" on-click="_handleNotifCellClick">
                <input
                  type="checkbox"
                  data-index$="[[projectIndex]]"
                  data-key$="[[type.key]]"
                  on-change="_handleCheckboxChange"
                  checked$="[[_computeCheckboxChecked(project, type.key)]]"
                />
              </td>
            </template>
            <td>
              <gr-button
                link=""
                data-index$="[[projectIndex]]"
                on-click="_handleRemoveProject"
                >Delete</gr-button
              >
            </td>
          </tr>
        </template>
      </tbody>
      <tfoot>
        <tr>
          <th>
            <gr-autocomplete
              id="newProject"
              query="[[_query]]"
              threshold="1"
              allow-non-suggested-values=""
              tab-complete=""
              placeholder="Repo"
            ></gr-autocomplete>
          </th>
          <th colspan$="[[_getTypeCount()]]">
            <iron-input
              class="newFilterInput"
              placeholder="branch:name, or other search expression"
            >
              <input
                id="newFilter"
                class="newFilterInput"
                is="iron-input"
                placeholder="branch:name, or other search expression"
              />
            </iron-input>
          </th>
          <th>
            <gr-button link="" on-click="_handleAddProject">Add</gr-button>
          </th>
        </tr>
      </tfoot>
    </table>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,BA=[{name:"Changes",key:"notify_new_changes"},{name:"Patches",key:"notify_new_patch_sets"},{name:"Comments",key:"notify_all_comments"},{name:"Submits",key:"notify_submitted_changes"},{name:"Abandons",key:"notify_abandoned_changes"}];class FA extends(Zn(na(Ka))){static get template(){return $A}static get is(){return"gr-watched-projects-editor"}static get properties(){return{hasUnsavedChanges:{type:Boolean,value:!1,notify:!0},_projects:Array,_projectsToRemove:{type:Array,value:()=>[]},_query:{type:Function,value(){return this._getProjectSuggestions.bind(this)}}}}loadData(){return this.$.restAPI.getWatchedProjects().then(e=>{this._projects=e})}save(){let e;return e=this._projectsToRemove.length?this.$.restAPI.deleteWatchedProjects(this._projectsToRemove):Promise.resolve(),e.then(()=>this.$.restAPI.saveWatchedProjects(this._projects)).then(e=>{this._projects=e,this._projectsToRemove=[],this.hasUnsavedChanges=!1})}_getTypes(){return BA}_getTypeCount(){return this._getTypes().length}_computeCheckboxChecked(e,t){return e.hasOwnProperty(t)}_getProjectSuggestions(e){return this.$.restAPI.getSuggestedProjects(e).then(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push({name:n,value:e[n]});return t})}_handleRemoveProject(e){const t=Ui(e).localTarget,n=parseInt(t.getAttribute("data-index"),10),i=this._projects[n];this.splice("_projects",n,1),this.push("_projectsToRemove",i),this.hasUnsavedChanges=!0}_canAddProject(e,t,n){if(!(e&&e.id||t))return!1;if(!e&&t)return!0;for(let t=0;t<this._projects.length;t++)if(this._projects[t].project===e.id&&this._projects[t].filter==n)return!1;return!0}_getNewProjectIndex(e,t){let n;for(n=0;n<this._projects.length&&!(this._projects[n].project>e||this._projects[n].project===e&&this._projects[n].filter>t);n++);return n}_handleAddProject(){const e=this.$.newProject.value,t=this.$.newProject.text,n=this.$.newFilter.value||null;if(!this._canAddProject(e,t,n))return;const i=this._getNewProjectIndex(t,n);this.splice("_projects",i,0,{project:t,filter:n,_is_local:!0}),this.$.newProject.clear(),this.$.newFilter.bindValue="",this.hasUnsavedChanges=!0}_handleCheckboxChange(e){const t=Ui(e).localTarget,n=parseInt(t.getAttribute("data-index"),10),i=t.getAttribute("data-key"),s=t.checked;this.set(["_projects",n,i],!!s),this.hasUnsavedChanges=!0}_handleNotifCellClick(e){const t=Ui(e.target).querySelector("input");t&&t.click()}}customElements.define(FA.is,FA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const UA=za`
  <style include="shared-styles">
    :host {
      color: var(--primary-text-color);
    }
    .newEmailInput {
      width: 20em;
    }
    #email {
      margin-bottom: var(--spacing-l);
    }
    main section.darkToggle {
      display: block;
    }
    .filters p,
    .darkToggle p {
      margin-bottom: var(--spacing-l);
    }
    .queryExample em {
      color: violet;
    }
    .toggle {
      align-items: center;
      display: flex;
      margin-bottom: var(--spacing-l);
      margin-right: var(--spacing-l);
    }
  </style>
  <style include="gr-form-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-menu-page-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <style include="gr-page-nav-styles">
    /* Workaround for empty style block - see https://github.com/Polymer/tools/issues/408 */
  </style>
  <div class="loading" hidden$="[[!_loading]]">Loading...</div>
  <div hidden$="[[_loading]]" hidden="">
    <gr-page-nav class="navStyles">
      <ul>
        <li><a href="#Profile">Profile</a></li>
        <li><a href="#Preferences">Preferences</a></li>
        <li><a href="#DiffPreferences">Diff Preferences</a></li>
        <li><a href="#EditPreferences">Edit Preferences</a></li>
        <li><a href="#Menu">Menu</a></li>
        <li><a href="#ChangeTableColumns">Change Table Columns</a></li>
        <li><a href="#Notifications">Notifications</a></li>
        <li><a href="#EmailAddresses">Email Addresses</a></li>
        <template is="dom-if" if="[[_showHttpAuth(_serverConfig)]]">
          <li><a href="#HTTPCredentials">HTTP Credentials</a></li>
        </template>
        <li hidden$="[[!_serverConfig.sshd]]">
          <a href="#SSHKeys">
            SSH Keys
          </a>
        </li>
        <li hidden$="[[!_serverConfig.receive.enable_signed_push]]">
          <a href="#GPGKeys">
            GPG Keys
          </a>
        </li>
        <li><a href="#Groups">Groups</a></li>
        <li><a href="#Identities">Identities</a></li>
        <template
          is="dom-if"
          if="[[_serverConfig.auth.use_contributor_agreements]]"
        >
          <li>
            <a href="#Agreements">Agreements</a>
          </li>
        </template>
        <li><a href="#MailFilters">Mail Filters</a></li>
        <gr-endpoint-decorator name="settings-menu-item">
        </gr-endpoint-decorator>
      </ul>
    </gr-page-nav>
    <main class="gr-form-styles">
      <h1>User Settings</h1>
      <section class="darkToggle">
        <div class="toggle">
          <paper-toggle-button
            checked="[[_isDark]]"
            on-change="_handleToggleDark"
          ></paper-toggle-button>
          <div>Dark theme (alpha)</div>
        </div>
        <p>
          Gerrit's dark theme is in early alpha, and almost definitely will not
          play nicely with themes set by specific Gerrit hosts. Filing feedback
          via the link in the app footer is strongly encouraged!
        </p>
      </section>
      <h2 id="Profile" class$="[[_computeHeaderClass(_accountInfoChanged)]]">
        Profile
      </h2>
      <fieldset id="profile">
        <gr-account-info
          id="accountInfo"
          has-unsaved-changes="{{_accountInfoChanged}}"
        ></gr-account-info>
        <gr-button
          on-click="_handleSaveAccountInfo"
          disabled="[[!_accountInfoChanged]]"
          >Save changes</gr-button
        >
      </fieldset>
      <h2 id="Preferences" class$="[[_computeHeaderClass(_prefsChanged)]]">
        Preferences
      </h2>
      <fieldset id="preferences">
        <section>
          <span class="title">Changes per page</span>
          <span class="value">
            <gr-select bind-value="{{_localPrefs.changes_per_page}}">
              <select>
                <option value="10">10 rows per page</option>
                <option value="25">25 rows per page</option>
                <option value="50">50 rows per page</option>
                <option value="100">100 rows per page</option>
              </select>
            </gr-select>
          </span>
        </section>
        <section>
          <span class="title">Date/time format</span>
          <span class="value">
            <gr-select bind-value="{{_localPrefs.date_format}}">
              <select>
                <option value="STD">Jun 3 ; Jun 3, 2016</option>
                <option value="US">06/03 ; 06/03/16</option>
                <option value="ISO">06-03 ; 2016-06-03</option>
                <option value="EURO">3. Jun ; 03.06.2016</option>
                <option value="UK">03/06 ; 03/06/2016</option>
              </select>
            </gr-select>
            <gr-select bind-value="{{_localPrefs.time_format}}">
              <select>
                <option value="HHMM_12">4:10 PM</option>
                <option value="HHMM_24">16:10</option>
              </select>
            </gr-select>
          </span>
        </section>
        <section>
          <span class="title">Email notifications</span>
          <span class="value">
            <gr-select bind-value="{{_localPrefs.email_strategy}}">
              <select>
                <option value="CC_ON_OWN_COMMENTS">Every comment</option>
                <option value="ENABLED">Only comments left by others</option>
                <option value="DISABLED">None</option>
              </select>
            </gr-select>
          </span>
        </section>
        <section hidden$="[[!_localPrefs.email_format]]">
          <span class="title">Email format</span>
          <span class="value">
            <gr-select bind-value="{{_localPrefs.email_format}}">
              <select>
                <option value="HTML_PLAINTEXT">HTML and plaintext</option>
                <option value="PLAINTEXT">Plaintext only</option>
              </select>
            </gr-select>
          </span>
        </section>
        <section hidden$="[[!_localPrefs.default_base_for_merges]]">
          <span class="title">Default Base For Merges</span>
          <span class="value">
            <gr-select bind-value="{{_localPrefs.default_base_for_merges}}">
              <select>
                <option value="AUTO_MERGE">Auto Merge</option>
                <option value="FIRST_PARENT">First Parent</option>
              </select>
            </gr-select>
          </span>
        </section>
        <section>
          <span class="title">Show Relative Dates In Changes Table</span>
          <span class="value">
            <input
              id="relativeDateInChangeTable"
              type="checkbox"
              checked$="[[_localPrefs.relative_date_in_change_table]]"
              on-change="_handleRelativeDateInChangeTable"
            />
          </span>
        </section>
        <section>
          <span class="title">Diff view</span>
          <span class="value">
            <gr-select bind-value="{{_localPrefs.diff_view}}">
              <select>
                <option value="SIDE_BY_SIDE">Side by side</option>
                <option value="UNIFIED_DIFF">Unified diff</option>
              </select>
            </gr-select>
          </span>
        </section>
        <section>
          <span class="title">Show size bars in file list</span>
          <span class="value">
            <input
              id="showSizeBarsInFileList"
              type="checkbox"
              checked$="[[_localPrefs.size_bar_in_change_table]]"
              on-change="_handleShowSizeBarsInFileListChanged"
            />
          </span>
        </section>
        <section>
          <span class="title">Publish comments on push</span>
          <span class="value">
            <input
              id="publishCommentsOnPush"
              type="checkbox"
              checked$="[[_localPrefs.publish_comments_on_push]]"
              on-change="_handlePublishCommentsOnPushChanged"
            />
          </span>
        </section>
        <section>
          <span class="title"
            >Set new changes to "work in progress" by default</span
          >
          <span class="value">
            <input
              id="workInProgressByDefault"
              type="checkbox"
              checked$="[[_localPrefs.work_in_progress_by_default]]"
              on-change="_handleWorkInProgressByDefault"
            />
          </span>
        </section>
        <section>
          <span class="title">
            Insert Signed-off-by Footer For Inline Edit Changes
          </span>
          <span class="value">
            <input
              id="insertSignedOff"
              type="checkbox"
              checked$="[[_localPrefs.signed_off_by]]"
              on-change="_handleInsertSignedOff"
            />
          </span>
        </section>
        <gr-button
          id="savePrefs"
          on-click="_handleSavePreferences"
          disabled="[[!_prefsChanged]]"
          >Save changes</gr-button
        >
      </fieldset>
      <h2
        id="DiffPreferences"
        class$="[[_computeHeaderClass(_diffPrefsChanged)]]"
      >
        Diff Preferences
      </h2>
      <fieldset id="diffPreferences">
        <gr-diff-preferences
          id="diffPrefs"
          has-unsaved-changes="{{_diffPrefsChanged}}"
        ></gr-diff-preferences>
        <gr-button
          id="saveDiffPrefs"
          on-click="_handleSaveDiffPreferences"
          disabled$="[[!_diffPrefsChanged]]"
          >Save changes</gr-button
        >
      </fieldset>
      <h2
        id="EditPreferences"
        class$="[[_computeHeaderClass(_editPrefsChanged)]]"
      >
        Edit Preferences
      </h2>
      <fieldset id="editPreferences">
        <gr-edit-preferences
          id="editPrefs"
          has-unsaved-changes="{{_editPrefsChanged}}"
        ></gr-edit-preferences>
        <gr-button
          id="saveEditPrefs"
          on-click="_handleSaveEditPreferences"
          disabled$="[[!_editPrefsChanged]]"
          >Save changes</gr-button
        >
      </fieldset>
      <h2 id="Menu" class$="[[_computeHeaderClass(_menuChanged)]]">Menu</h2>
      <fieldset id="menu">
        <gr-menu-editor menu-items="{{_localMenu}}"></gr-menu-editor>
        <gr-button
          id="saveMenu"
          on-click="_handleSaveMenu"
          disabled="[[!_menuChanged]]"
          >Save changes</gr-button
        >
        <gr-button id="resetMenu" link="" on-click="_handleResetMenuButton"
          >Reset</gr-button
        >
      </fieldset>
      <h2
        id="ChangeTableColumns"
        class$="[[_computeHeaderClass(_changeTableChanged)]]"
      >
        Change Table Columns
      </h2>
      <fieldset id="changeTableColumns">
        <gr-change-table-editor
          show-number="{{_showNumber}}"
          displayed-columns="{{_localChangeTableColumns}}"
        >
        </gr-change-table-editor>
        <gr-button
          id="saveChangeTable"
          on-click="_handleSaveChangeTable"
          disabled="[[!_changeTableChanged]]"
          >Save changes</gr-button
        >
      </fieldset>
      <h2
        id="Notifications"
        class$="[[_computeHeaderClass(_watchedProjectsChanged)]]"
      >
        Notifications
      </h2>
      <fieldset id="watchedProjects">
        <gr-watched-projects-editor
          has-unsaved-changes="{{_watchedProjectsChanged}}"
          id="watchedProjectsEditor"
        ></gr-watched-projects-editor>
        <gr-button
          on-click="_handleSaveWatchedProjects"
          disabled$="[[!_watchedProjectsChanged]]"
          id="_handleSaveWatchedProjects"
          >Save changes</gr-button
        >
      </fieldset>
      <h2 id="EmailAddresses" class$="[[_computeHeaderClass(_emailsChanged)]]">
        Email Addresses
      </h2>
      <fieldset id="email">
        <gr-email-editor
          id="emailEditor"
          has-unsaved-changes="{{_emailsChanged}}"
        ></gr-email-editor>
        <gr-button on-click="_handleSaveEmails" disabled$="[[!_emailsChanged]]"
          >Save changes</gr-button
        >
      </fieldset>
      <fieldset id="newEmail">
        <section>
          <span class="title">New email address</span>
          <span class="value">
            <iron-input
              class="newEmailInput"
              bind-value="{{_newEmail}}"
              type="text"
              on-keydown="_handleNewEmailKeydown"
              placeholder="email@example.com"
            >
              <input
                class="newEmailInput"
                bind-value="{{_newEmail}}"
                is="iron-input"
                type="text"
                disabled="[[_addingEmail]]"
                on-keydown="_handleNewEmailKeydown"
                placeholder="email@example.com"
              />
            </iron-input>
          </span>
        </section>
        <section
          id="verificationSentMessage"
          hidden$="[[!_lastSentVerificationEmail]]"
        >
          <p>
            A verification email was sent to
            <em>[[_lastSentVerificationEmail]]</em>. Please check your inbox.
          </p>
        </section>
        <gr-button
          disabled="[[!_computeAddEmailButtonEnabled(_newEmail, _addingEmail)]]"
          on-click="_handleAddEmailButton"
          >Send verification</gr-button
        >
      </fieldset>
      <template is="dom-if" if="[[_showHttpAuth(_serverConfig)]]">
        <div>
          <h2 id="HTTPCredentials">HTTP Credentials</h2>
          <fieldset>
            <gr-http-password id="httpPass"></gr-http-password>
          </fieldset>
        </div>
      </template>
      <div hidden$="[[!_serverConfig.sshd]]">
        <h2 id="SSHKeys" class$="[[_computeHeaderClass(_keysChanged)]]">
          SSH keys
        </h2>
        <gr-ssh-editor
          id="sshEditor"
          has-unsaved-changes="{{_keysChanged}}"
        ></gr-ssh-editor>
      </div>
      <div hidden$="[[!_serverConfig.receive.enable_signed_push]]">
        <h2 id="GPGKeys" class$="[[_computeHeaderClass(_gpgKeysChanged)]]">
          GPG keys
        </h2>
        <gr-gpg-editor
          id="gpgEditor"
          has-unsaved-changes="{{_gpgKeysChanged}}"
        ></gr-gpg-editor>
      </div>
      <h2 id="Groups">Groups</h2>
      <fieldset>
        <gr-group-list id="groupList"></gr-group-list>
      </fieldset>
      <h2 id="Identities">Identities</h2>
      <fieldset>
        <gr-identities
          id="identities"
          server-config="[[_serverConfig]]"
        ></gr-identities>
      </fieldset>
      <template
        is="dom-if"
        if="[[_serverConfig.auth.use_contributor_agreements]]"
      >
        <h2 id="Agreements">Agreements</h2>
        <fieldset>
          <gr-agreements-list id="agreementsList"></gr-agreements-list>
        </fieldset>
      </template>
      <h2 id="MailFilters">Mail Filters</h2>
      <fieldset class="filters">
        <p>
          Gerrit emails include metadata about the change to support writing
          mail filters.
        </p>
        <p>
          Here are some example Gmail queries that can be used for filters or
          for searching through archived messages. View the
          <a
            href$="[[_getFilterDocsLink(_docsBaseUrl)]]"
            target="_blank"
            rel="nofollow"
            >Gerrit documentation</a
          >
          for the complete set of footers.
        </p>
        <table>
          <tbody>
            <tr>
              <th>Name</th>
              <th>Query</th>
            </tr>
            <tr>
              <td>Changes requesting my review</td>
              <td>
                <code class="queryExample">
                  "Gerrit-Reviewer: <em>Your Name</em>
                  &lt;<em>your.email@example.com</em>&gt;"
                </code>
              </td>
            </tr>
            <tr>
              <td>Changes from a specific owner</td>
              <td>
                <code class="queryExample">
                  "Gerrit-Owner: <em>Owner name</em>
                  &lt;<em>owner.email@example.com</em>&gt;"
                </code>
              </td>
            </tr>
            <tr>
              <td>Changes targeting a specific branch</td>
              <td>
                <code class="queryExample">
                  "Gerrit-Branch: <em>branch-name</em>"
                </code>
              </td>
            </tr>
            <tr>
              <td>Changes in a specific project</td>
              <td>
                <code class="queryExample">
                  "Gerrit-Project: <em>project-name</em>"
                </code>
              </td>
            </tr>
            <tr>
              <td>Messages related to a specific Change ID</td>
              <td>
                <code class="queryExample">
                  "Gerrit-Change-Id: <em>Change ID</em>"
                </code>
              </td>
            </tr>
            <tr>
              <td>Messages related to a specific change number</td>
              <td>
                <code class="queryExample">
                  "Gerrit-Change-Number: <em>change number</em>"
                </code>
              </td>
            </tr>
          </tbody>
        </table>
      </fieldset>
      <gr-endpoint-decorator name="settings-screen"> </gr-endpoint-decorator>
    </main>
  </div>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
`
/**
 * @license
 * Copyright (C) 2016 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,HA=["changes_per_page","date_format","time_format","email_strategy","diff_view","publish_comments_on_push","work_in_progress_by_default","default_base_for_merges","signed_off_by","email_format","size_bar_in_change_table","relative_date_in_change_table"],jA=/^https?:/,GA=/\/$/,VA=["HTTP","HTTP_LDAP"];class zA extends(ra([MS,nv],Zn(na(Ka)))){static get template(){return UA}static get is(){return"gr-settings-view"}static get properties(){return{prefs:{type:Object,value:()=>({})},params:{type:Object,value:()=>({})},_accountInfoChanged:Boolean,_changeTableColumnsNotDisplayed:Array,_localPrefs:{type:Object,value:()=>({})},_localChangeTableColumns:{type:Array,value:()=>[]},_localMenu:{type:Array,value:()=>[]},_loading:{type:Boolean,value:!0},_changeTableChanged:{type:Boolean,value:!1},_prefsChanged:{type:Boolean,value:!1},_diffPrefsChanged:Boolean,_editPrefsChanged:Boolean,_menuChanged:{type:Boolean,value:!1},_watchedProjectsChanged:{type:Boolean,value:!1},_keysChanged:{type:Boolean,value:!1},_gpgKeysChanged:{type:Boolean,value:!1},_newEmail:String,_addingEmail:{type:Boolean,value:!1},_lastSentVerificationEmail:{type:String,value:null},_serverConfig:Object,_docsBaseUrl:String,_emailsChanged:Boolean,_loadingPromise:Object,_showNumber:Boolean,_isDark:{type:Boolean,value:!1}}}static get observers(){return["_handlePrefsChanged(_localPrefs.*)","_handleMenuChanged(_localMenu.splices)","_handleChangeTableChanged(_localChangeTableColumns, _showNumber)"]}attached(){super.attached(),this.listen(window,"location-change","_handleLocationChange"),this.dispatchEvent(new CustomEvent("title-change",{detail:{title:"Settings"},composed:!0,bubbles:!0})),this._isDark=!!window.localStorage.getItem("dark-theme");const e=[this.$.accountInfo.loadData(),this.$.watchedProjectsEditor.loadData(),this.$.groupList.loadData(),this.$.identities.loadData(),this.$.editPrefs.loadData(),this.$.diffPrefs.loadData()];e.push(this.$.restAPI.getPreferences().then(e=>{this.prefs=e,this._showNumber=!!e.legacycid_in_change_table,this._copyPrefs("_localPrefs","prefs"),this._cloneMenu(e.my),this._cloneChangeTableColumns()})),e.push(this.$.restAPI.getConfig().then(e=>{this._serverConfig=e;const t=[];return this._serverConfig&&this._serverConfig.sshd&&t.push(this.$.sshEditor.loadData()),this._serverConfig&&this._serverConfig.receive&&this._serverConfig.receive.enable_signed_push&&t.push(this.$.gpgEditor.loadData()),t.push(this.getDocsBaseUrl(e,this.$.restAPI).then(e=>{this._docsBaseUrl=e})),Promise.all(t)})),this.params.emailToken?e.push(this.$.restAPI.confirmEmail(this.params.emailToken).then(e=>{e&&this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:e},composed:!0,bubbles:!0})),this.$.emailEditor.loadData()})):e.push(this.$.emailEditor.loadData()),this._loadingPromise=Promise.all(e).then(()=>{this._loading=!1,this._handleLocationChange()})}detached(){super.detached(),this.unlisten(window,"location-change","_handleLocationChange")}_handleLocationChange(){const e=window.location.hash;if(e){const t=(this.shadowRoot||document).querySelector(e);t&&t.scrollIntoView()}}reloadAccountDetail(){Promise.all([this.$.accountInfo.loadData(),this.$.emailEditor.loadData()])}_isLoading(){return this._loading||void 0===this._loading}_copyPrefs(e,t){for(let n=0;n<HA.length;n++)this.set([e,HA[n]],this[t][HA[n]])}_cloneMenu(e){const t=[];for(const n of e)t.push({name:n.name,url:n.url,target:n.target});this._localMenu=t}_cloneChangeTableColumns(){let e=this.getVisibleColumns(this.prefs.change_table);0===e.length?(e=this.columnNames,this._changeTableColumnsNotDisplayed=[]):this._changeTableColumnsNotDisplayed=this.getComplementColumns(this.prefs.change_table),this._localChangeTableColumns=e}_formatChangeTableColumns(e){return e.map(e=>({column:e}))}_handleChangeTableChanged(){this._isLoading()||(this._changeTableChanged=!0)}_handlePrefsChanged(e){this._isLoading()||(this._prefsChanged=!0)}_handleRelativeDateInChangeTable(){this.set("_localPrefs.relative_date_in_change_table",this.$.relativeDateInChangeTable.checked)}_handleShowSizeBarsInFileListChanged(){this.set("_localPrefs.size_bar_in_change_table",this.$.showSizeBarsInFileList.checked)}_handlePublishCommentsOnPushChanged(){this.set("_localPrefs.publish_comments_on_push",this.$.publishCommentsOnPush.checked)}_handleWorkInProgressByDefault(){this.set("_localPrefs.work_in_progress_by_default",this.$.workInProgressByDefault.checked)}_handleInsertSignedOff(){this.set("_localPrefs.signed_off_by",this.$.insertSignedOff.checked)}_handleMenuChanged(){this._isLoading()||(this._menuChanged=!0)}_handleSaveAccountInfo(){this.$.accountInfo.save()}_handleSavePreferences(){return this._copyPrefs("prefs","_localPrefs"),this.$.restAPI.savePreferences(this.prefs).then(()=>{this._prefsChanged=!1})}_handleSaveChangeTable(){return this.set("prefs.change_table",this._localChangeTableColumns),this.set("prefs.legacycid_in_change_table",this._showNumber),this._cloneChangeTableColumns(),this.$.restAPI.savePreferences(this.prefs).then(()=>{this._changeTableChanged=!1})}_handleSaveDiffPreferences(){this.$.diffPrefs.save()}_handleSaveEditPreferences(){this.$.editPrefs.save()}_handleSaveMenu(){return this.set("prefs.my",this._localMenu),this._cloneMenu(this.prefs.my),this.$.restAPI.savePreferences(this.prefs).then(()=>{this._menuChanged=!1})}_handleResetMenuButton(){return this.$.restAPI.getDefaultPreferences().then(e=>{e&&e.my&&this._cloneMenu(e.my)})}_handleSaveWatchedProjects(){this.$.watchedProjectsEditor.save()}_computeHeaderClass(e){return e?"edited":""}_handleSaveEmails(){this.$.emailEditor.save()}_handleNewEmailKeydown(e){13===e.keyCode&&(e.stopPropagation(),this._handleAddEmailButton())}_isNewEmailValid(e){return e&&e.includes("@")}_computeAddEmailButtonEnabled(e,t){return this._isNewEmailValid(e)&&!t}_handleAddEmailButton(){this._isNewEmailValid(this._newEmail)&&(this._addingEmail=!0,this.$.restAPI.addAccountEmail(this._newEmail).then(e=>{this._addingEmail=!1,e.status<200||e.status>=300||(this._lastSentVerificationEmail=this._newEmail,this._newEmail="")}))}_getFilterDocsLink(e){let t=e;return t&&jA.test(t)||(t="https://gerrit-review.googlesource.com/Documentation"),t=t.replace(GA,""),t+"/user-notify.html"}_handleToggleDark(){this._isDark?window.localStorage.removeItem("dark-theme"):window.localStorage.setItem("dark-theme","true"),this.dispatchEvent(new CustomEvent("show-alert",{detail:{message:"Reloading..."},bubbles:!0,composed:!0})),this.async(()=>{window.location.reload()},1)}_showHttpAuth(e){return!!(e&&e.auth&&e.auth.git_basic_auth_policy)&&VA.includes(e.auth.git_basic_auth_policy.toUpperCase())}}customElements.define(zA.is,zA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const WA=za`
  <style include="shared-styles">
    :host {
      background-color: var(--background-color-tertiary);
      display: flex;
      flex-direction: column;
      min-height: 100%;
    }
    gr-fixed-panel {
      /**
         * This one should be greater that the z-index in gr-diff-view
         * because gr-main-header contains overlay.
         */
      z-index: 10;
    }
    gr-main-header,
    footer {
      color: var(--primary-text-color);
    }
    gr-main-header {
      background: var(
        --header-background,
        var(--header-background-color, #eee)
      );
      padding: var(--header-padding);
      border-bottom: var(--header-border-bottom);
      border-image: var(--header-border-image);
      border-right: 0;
      border-left: 0;
      border-top: 0;
      box-shadow: var(--header-box-shadow);
    }
    footer {
      background: var(
        --footer-background,
        var(--footer-background-color, #eee)
      );
      border-top: var(--footer-border-top);
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-m) var(--spacing-l);
      z-index: 100;
    }
    main {
      flex: 1;
      padding-bottom: var(--spacing-xxl);
      position: relative;
    }
    .errorView {
      align-items: center;
      display: none;
      flex-direction: column;
      justify-content: center;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }
    .errorView.show {
      display: flex;
    }
    .errorEmoji {
      font-size: 2.6rem;
    }
    .errorText,
    .errorMoreInfo {
      margin-top: var(--spacing-m);
    }
    .errorText {
      font-family: var(--header-font-family);
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-h3);
      line-height: var(--line-height-h3);
    }
    .errorMoreInfo {
      color: var(--deemphasized-text-color);
    }
    .feedback {
      color: var(--error-text-color);
    }
  </style>
  <gr-endpoint-decorator name="banner"></gr-endpoint-decorator>
  <gr-fixed-panel id="header">
    <gr-main-header
      id="mainHeader"
      search-query="{{params.query}}"
      on-mobile-search="_mobileSearchToggle"
      login-url="[[_loginUrl]]"
    >
    </gr-main-header>
  </gr-fixed-panel>
  <main>
    <gr-smart-search
      id="search"
      search-query="{{params.query}}"
      hidden="[[!mobileSearch]]"
    >
    </gr-smart-search>
    <template is="dom-if" if="[[_showChangeListView]]" restamp="true">
      <gr-change-list-view
        params="[[params]]"
        account="[[_account]]"
        view-state="{{_viewState.changeListView}}"
      ></gr-change-list-view>
    </template>
    <template is="dom-if" if="[[_showDashboardView]]" restamp="true">
      <gr-dashboard-view
        account="[[_account]]"
        params="[[params]]"
        view-state="{{_viewState.dashboardView}}"
      ></gr-dashboard-view>
    </template>
    <template is="dom-if" if="[[_showChangeView]]" restamp="true">
      <gr-change-view
        params="[[params]]"
        view-state="{{_viewState.changeView}}"
        back-page="[[_lastSearchPage]]"
      ></gr-change-view>
    </template>
    <template is="dom-if" if="[[_showEditorView]]" restamp="true">
      <gr-editor-view params="[[params]]"></gr-editor-view>
    </template>
    <template is="dom-if" if="[[_showDiffView]]" restamp="true">
      <gr-diff-view
        params="[[params]]"
        change-view-state="{{_viewState.changeView}}"
      ></gr-diff-view>
    </template>
    <template is="dom-if" if="[[_showSettingsView]]" restamp="true">
      <gr-settings-view
        params="[[params]]"
        on-account-detail-update="_handleAccountDetailUpdate"
      >
      </gr-settings-view>
    </template>
    <template is="dom-if" if="[[_showAdminView]]" restamp="true">
      <gr-admin-view path="[[_path]]" params="[[params]]"></gr-admin-view>
    </template>
    <template is="dom-if" if="[[_showPluginScreen]]" restamp="true">
      <gr-endpoint-decorator name="[[_pluginScreenName]]">
        <gr-endpoint-param
          name="token"
          value="[[params.screen]]"
        ></gr-endpoint-param>
      </gr-endpoint-decorator>
    </template>
    <template is="dom-if" if="[[_showCLAView]]" restamp="true">
      <gr-cla-view></gr-cla-view>
    </template>
    <template is="dom-if" if="[[_showDocumentationSearch]]" restamp="true">
      <gr-documentation-search params="[[params]]"> </gr-documentation-search>
    </template>
    <div id="errorView" class="errorView">
      <div class="errorEmoji">[[_lastError.emoji]]</div>
      <div class="errorText">[[_lastError.text]]</div>
      <div class="errorMoreInfo">[[_lastError.moreInfo]]</div>
    </div>
  </main>
  <footer r="contentinfo">
    <div>
      Powered by
      <a href="https://www.gerritcodereview.com/" rel="noopener" target="_blank"
        >Gerrit Code Review</a
      >
      ([[_version]])
      <gr-endpoint-decorator name="footer-left"></gr-endpoint-decorator>
    </div>
    <div>
      <template is="dom-if" if="[[_feedbackUrl]]">
        <a
          class="feedback"
          href$="[[_feedbackUrl]]"
          rel="noopener"
          target="_blank"
          >Report bug</a
        >
        |
      </template>
      Press “?” for keyboard shortcuts
      <gr-endpoint-decorator name="footer-right"></gr-endpoint-decorator>
    </div>
  </footer>
  <gr-overlay id="keyboardShortcuts" with-backdrop="">
    <gr-keyboard-shortcuts-dialog
      on-close="_handleKeyboardShortcutDialogClose"
    ></gr-keyboard-shortcuts-dialog>
  </gr-overlay>
  <gr-overlay id="registrationOverlay" with-backdrop="">
    <gr-registration-dialog
      id="registrationDialog"
      settings-url="[[_settingsUrl]]"
      on-account-detail-update="_handleAccountDetailUpdate"
      on-close="_handleRegistrationDialogClose"
    >
    </gr-registration-dialog>
  </gr-overlay>
  <gr-endpoint-decorator name="plugin-overlay"></gr-endpoint-decorator>
  <gr-error-manager
    id="errorManager"
    login-url="[[_loginUrl]]"
  ></gr-error-manager>
  <gr-rest-api-interface id="restAPI"></gr-rest-api-interface>
  <gr-reporting id="reporting"></gr-reporting>
  <gr-router id="router"></gr-router>
  <gr-plugin-host id="plugins" config="[[_serverConfig]]"> </gr-plugin-host>
  <gr-lib-loader id="libLoader"></gr-lib-loader>
  <gr-external-style
    id="externalStyleForAll"
    name="app-theme"
  ></gr-external-style>
  <gr-external-style
    id="externalStyleForTheme"
    name="[[getThemeEndpoint()]]"
  ></gr-external-style>
`
/**
 * @license
 * Copyright (C) 2019 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class qA extends(ra([Go,Wu],Zn(na(Ka)))){static get template(){return WA}static get is(){return"gr-app-element"}static get properties(){return{params:Object,keyEventTarget:{type:Object,value:()=>document.body},_account:{type:Object,observer:"_accountChanged"},_lastGKeyPressTimestamp:{type:Number,value:null},_serverConfig:Object,_version:String,_showChangeListView:Boolean,_showDashboardView:Boolean,_showChangeView:Boolean,_showDiffView:Boolean,_showSettingsView:Boolean,_showAdminView:Boolean,_showCLAView:Boolean,_showEditorView:Boolean,_showPluginScreen:Boolean,_showDocumentationSearch:Boolean,_viewState:Object,_lastError:Object,_lastSearchPage:String,_path:String,_pluginScreenName:{type:String,computed:"_computePluginScreenName(params)"},_settingsUrl:String,_feedbackUrl:String,mobileSearch:{type:Boolean,value:!1},_loginUrl:{type:String,value:"/login"}}}static get observers(){return["_viewChanged(params.view)","_paramsChanged(params.*)"]}keyboardShortcuts(){return{[this.Shortcut.OPEN_SHORTCUT_HELP_DIALOG]:"_showKeyboardShortcuts",[this.Shortcut.GO_TO_USER_DASHBOARD]:"_goToUserDashboard",[this.Shortcut.GO_TO_OPENED_CHANGES]:"_goToOpenedChanges",[this.Shortcut.GO_TO_MERGED_CHANGES]:"_goToMergedChanges",[this.Shortcut.GO_TO_ABANDONED_CHANGES]:"_goToAbandonedChanges",[this.Shortcut.GO_TO_WATCHED_CHANGES]:"_goToWatchedChanges"}}created(){super.created(),this._bindKeyboardShortcuts(),this.addEventListener("page-error",e=>this._handlePageError(e)),this.addEventListener("title-change",e=>this._handleTitleChange(e)),this.addEventListener("location-change",e=>this._handleLocationChange(e)),this.addEventListener("rpc-log",e=>this._handleRpcLog(e)),this.addEventListener("shortcut-triggered",e=>this._handleShortcutTriggered(e))}ready(){super.ready(),this._updateLoginUrl(),this.$.reporting.appStarted(),this.$.router.start(),this.$.restAPI.getAccount().then(e=>{this._account=e}),this.$.restAPI.getConfig().then(e=>{this._serverConfig=e,e&&e.gerrit&&e.gerrit.report_bug_url&&(this._feedbackUrl=e.gerrit.report_bug_url)}),this.$.restAPI.getVersion().then(e=>{this._version=e,this._logWelcome()}),window.localStorage.getItem("dark-theme")&&this.$.libLoader.getDarkTheme(),this._settingsUrl=um.getUrlForSettings(),this._viewState={changeView:{changeNum:null,patchRange:null,selectedFileIndex:0,showReplyDialog:!1,diffMode:null,numFilesShown:null,scrollTop:0},changeListView:{query:null,offset:0,selectedChangeIndex:0},dashboardView:{selectedChangeIndex:0}}}_bindKeyboardShortcuts(){this.bindShortcut(this.Shortcut.SEND_REPLY,this.DOC_ONLY,"ctrl+enter","meta+enter"),this.bindShortcut(this.Shortcut.EMOJI_DROPDOWN,this.DOC_ONLY,":"),this.bindShortcut(this.Shortcut.OPEN_SHORTCUT_HELP_DIALOG,"?"),this.bindShortcut(this.Shortcut.GO_TO_USER_DASHBOARD,this.GO_KEY,"i"),this.bindShortcut(this.Shortcut.GO_TO_OPENED_CHANGES,this.GO_KEY,"o"),this.bindShortcut(this.Shortcut.GO_TO_MERGED_CHANGES,this.GO_KEY,"m"),this.bindShortcut(this.Shortcut.GO_TO_ABANDONED_CHANGES,this.GO_KEY,"a"),this.bindShortcut(this.Shortcut.GO_TO_WATCHED_CHANGES,this.GO_KEY,"w"),this.bindShortcut(this.Shortcut.CURSOR_NEXT_CHANGE,"j"),this.bindShortcut(this.Shortcut.CURSOR_PREV_CHANGE,"k"),this.bindShortcut(this.Shortcut.OPEN_CHANGE,"o"),this.bindShortcut(this.Shortcut.NEXT_PAGE,"n","]"),this.bindShortcut(this.Shortcut.PREV_PAGE,"p","["),this.bindShortcut(this.Shortcut.TOGGLE_CHANGE_REVIEWED,"r:keyup"),this.bindShortcut(this.Shortcut.TOGGLE_CHANGE_STAR,"s:keyup"),this.bindShortcut(this.Shortcut.REFRESH_CHANGE_LIST,"shift+r:keyup"),this.bindShortcut(this.Shortcut.EDIT_TOPIC,"t"),this.bindShortcut(this.Shortcut.OPEN_REPLY_DIALOG,"a"),this.bindShortcut(this.Shortcut.OPEN_DOWNLOAD_DIALOG,"d"),this.bindShortcut(this.Shortcut.EXPAND_ALL_MESSAGES,"x"),this.bindShortcut(this.Shortcut.COLLAPSE_ALL_MESSAGES,"z"),this.bindShortcut(this.Shortcut.REFRESH_CHANGE,"shift+r:keyup"),this.bindShortcut(this.Shortcut.UP_TO_DASHBOARD,"u"),this.bindShortcut(this.Shortcut.UP_TO_CHANGE,"u"),this.bindShortcut(this.Shortcut.TOGGLE_DIFF_MODE,"m:keyup"),this.bindShortcut(this.Shortcut.NEXT_LINE,"j","down"),this.bindShortcut(this.Shortcut.PREV_LINE,"k","up"),this._isCursorManagerSupportMoveToVisibleLine()&&this.bindShortcut(this.Shortcut.VISIBLE_LINE,"."),this.bindShortcut(this.Shortcut.NEXT_CHUNK,"n"),this.bindShortcut(this.Shortcut.PREV_CHUNK,"p"),this.bindShortcut(this.Shortcut.EXPAND_ALL_DIFF_CONTEXT,"shift+x"),this.bindShortcut(this.Shortcut.NEXT_COMMENT_THREAD,"shift+n"),this.bindShortcut(this.Shortcut.PREV_COMMENT_THREAD,"shift+p"),this.bindShortcut(this.Shortcut.EXPAND_ALL_COMMENT_THREADS,this.DOC_ONLY,"e"),this.bindShortcut(this.Shortcut.COLLAPSE_ALL_COMMENT_THREADS,this.DOC_ONLY,"shift+e"),this.bindShortcut(this.Shortcut.LEFT_PANE,"shift+left"),this.bindShortcut(this.Shortcut.RIGHT_PANE,"shift+right"),this.bindShortcut(this.Shortcut.TOGGLE_LEFT_PANE,"shift+a"),this.bindShortcut(this.Shortcut.NEW_COMMENT,"c"),this.bindShortcut(this.Shortcut.SAVE_COMMENT,"ctrl+enter","meta+enter","ctrl+s","meta+s"),this.bindShortcut(this.Shortcut.OPEN_DIFF_PREFS,","),this.bindShortcut(this.Shortcut.TOGGLE_DIFF_REVIEWED,"r:keyup"),this.bindShortcut(this.Shortcut.NEXT_FILE,"]"),this.bindShortcut(this.Shortcut.PREV_FILE,"["),this.bindShortcut(this.Shortcut.NEXT_FILE_WITH_COMMENTS,"shift+j"),this.bindShortcut(this.Shortcut.PREV_FILE_WITH_COMMENTS,"shift+k"),this.bindShortcut(this.Shortcut.CURSOR_NEXT_FILE,"j","down"),this.bindShortcut(this.Shortcut.CURSOR_PREV_FILE,"k","up"),this.bindShortcut(this.Shortcut.OPEN_FILE,"o","enter"),this.bindShortcut(this.Shortcut.TOGGLE_FILE_REVIEWED,"r:keyup"),this.bindShortcut(this.Shortcut.NEXT_UNREVIEWED_FILE,"shift+m"),this.bindShortcut(this.Shortcut.TOGGLE_ALL_INLINE_DIFFS,"shift+i:keyup"),this.bindShortcut(this.Shortcut.TOGGLE_INLINE_DIFF,"i:keyup"),this.bindShortcut(this.Shortcut.TOGGLE_BLAME,"b"),this.bindShortcut(this.Shortcut.OPEN_FIRST_FILE,"]"),this.bindShortcut(this.Shortcut.OPEN_LAST_FILE,"["),this.bindShortcut(this.Shortcut.SEARCH,"/")}_isCursorManagerSupportMoveToVisibleLine(){return"IntersectionObserver"in window}_accountChanged(e){e&&(this.$.restAPI.getPreferences(),this.$.restAPI.getDiffPreferences(),this.$.restAPI.getEditPreferences(),this.$.errorManager.knownAccountId=this._account&&this._account._account_id||null)}_viewChanged(e){this.$.errorView.classList.remove("show"),this.set("_showChangeListView",e===um.View.SEARCH),this.set("_showDashboardView",e===um.View.DASHBOARD),this.set("_showChangeView",e===um.View.CHANGE),this.set("_showDiffView",e===um.View.DIFF),this.set("_showSettingsView",e===um.View.SETTINGS),this.set("_showAdminView",e===um.View.ADMIN||e===um.View.GROUP||e===um.View.REPO),this.set("_showCLAView",e===um.View.AGREEMENTS),this.set("_showEditorView",e===um.View.EDIT);const t=e===um.View.PLUGIN_SCREEN;this.set("_showPluginScreen",!1),t&&this.async(()=>this.set("_showPluginScreen",!0),1),this.set("_showDocumentationSearch",e===um.View.DOCUMENTATION_SEARCH),this.params.justRegistered&&(this.$.registrationOverlay.open(),this.$.registrationDialog.loadData().then(()=>{this.$.registrationOverlay.refit()})),this.$.header.unfloat()}_handleShortcutTriggered(e){const{event:t,goKey:n}=e.detail;let i=`${t.key}:${t.type}`;n&&(i="g+"+i),t.shiftKey&&(i="shift+"+i),t.ctrlKey&&(i="ctrl+"+i),t.metaKey&&(i="meta+"+i),t.altKey&&(i="alt+"+i),this.$.reporting.reportInteraction("shortcut-triggered",{key:i,from:e.path&&e.path[0]&&e.path[0].nodeName||"unknown"})}_handlePageError(e){const t=["_showChangeListView","_showDashboardView","_showChangeView","_showDiffView","_showSettingsView","_showAdminView"];for(const e of t)this.set(e,!1);this.$.errorView.classList.add("show");const n=e.detail.response,i={text:[n.status,n.statusText].join(" ")};404===n.status?(i.emoji="¯\\_(ツ)_/¯",this._lastError=i):(i.emoji="o_O",n.text().then(e=>{i.moreInfo=e,this._lastError=i}))}_handleLocationChange(e){this._updateLoginUrl();const t=e.detail.hash.substring(1);let n=e.detail.pathname;n.startsWith("/c/")&&parseInt(t,10)>0&&(n+="@"+t),this.set("_path",n)}_updateLoginUrl(){const e=this.getBaseUrl();this._loginUrl=e?e+"/login/"+encodeURIComponent("/"+window.location.pathname.substring(e.length)+window.location.search+window.location.hash):"/login/"+encodeURIComponent(window.location.pathname+window.location.search+window.location.hash)}_paramsChanged(e){const t=e.base;[um.View.SEARCH,um.View.DASHBOARD].includes(t.view)&&this.set("_lastSearchPage",location.pathname)}_handleTitleChange(e){e.detail.title?document.title=e.detail.title+" · Gerrit Code Review":document.title=""}_showKeyboardShortcuts(e){this.$.keyboardShortcuts.opened?this.$.keyboardShortcuts.close():this.shouldSuppressKeyboardShortcut(e)||this.$.keyboardShortcuts.open()}_handleKeyboardShortcutDialogClose(){this.$.keyboardShortcuts.close()}_handleAccountDetailUpdate(e){this.$.mainHeader.reload(),this.params.view===um.View.SETTINGS&&this.shadowRoot.querySelector("gr-settings-view").reloadAccountDetail()}_handleRegistrationDialogClose(e){this.params.justRegistered=!1,this.$.registrationOverlay.close()}_goToOpenedChanges(){um.navigateToStatusSearch("open")}_goToUserDashboard(){um.navigateToUserDashboard()}_goToMergedChanges(){um.navigateToStatusSearch("merged")}_goToAbandonedChanges(){um.navigateToStatusSearch("abandoned")}_goToWatchedChanges(){um.navigateToSearchQuery("is:watched is:open")}_computePluginScreenName({plugin:e,screen:t}){return e&&t?`${e}-screen-${t}`:""}_logWelcome(){console.group("Runtime Info"),console.log("Gerrit UI (PolyGerrit)"),console.log(`Gerrit Server Version: ${this._version}`),window.VERSION_INFO&&console.log(`UI Version Info: ${window.VERSION_INFO}`),this._feedbackUrl&&console.log(`Please file bugs and feedback at: ${this._feedbackUrl}`),console.groupEnd()}_handleRpcLog(e){this.$.reporting.reportRpcTiming(e.detail.anonymizedUrl,e.detail.elapsed)}_mobileSearchToggle(e){this.mobileSearch=!this.mobileSearch}getThemeEndpoint(){return window.localStorage.getItem("dark-theme")?"app-theme-dark":"app-theme-light"}}customElements.define(qA.is,qA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const KA=za`
  <gr-change-list
    show-star=""
    account="[[account]]"
    preferences="[[preferences]]"
    sections="[[sections]]"
  >
    <div id="emptyOutgoing" slot="empty-outgoing">
      <template is="dom-if" if="[[showNewUserHelp]]">
        <gr-create-change-help></gr-create-change-help>
      </template>
      <template is="dom-if" if="[[!showNewUserHelp]]">
        No changes
      </template>
    </div>
  </gr-change-list>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;class YA extends(Zn(na(Ka))){static get template(){return KA}static get is(){return"gr-embed-dashboard"}static get properties(){return{account:Object,sections:Array,preferences:Object,showNewUserHelp:Boolean}}}customElements.define(YA.is,YA);
/**
 * @license
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const XA=za`
  <gr-app-element id="app-element"></gr-app-element>
`
/**
 * @license
 * Copyright (C) 2018 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,JA=/^(https?:\/\/|mailto:|[^:/?#]*(?:[/?#]|$))/i,ZA={};ZA.SafeUrl=function(e){if(!JA.test(e))throw new Error(`URL not marked as safe: ${e}`);this._url=e},ZA.SafeUrl.prototype.asString=function(){return this._url},ZA.safeTypesBridge=function(e,t){if("URL"===t){let t=null;if(e instanceof ZA.SafeUrl?t=e:"string"==typeof e&&(t=new ZA.SafeUrl(e)),t)return t.asString()}if("STRING"===t||"CONSTANT"===t)return e;throw new Error(`Refused to bind value as ${t}: ${e}`)},window.Gerrit=window.Gerrit||{},window.Gerrit.SafeTypes=ZA,D=!1,security.polymer_resin.install({allowedIdentifierPrefixes:[""],reportHandler:security.polymer_resin.CONSOLE_LOGGING_REPORT_HANDLER,safeTypesBridge:ZA.safeTypesBridge});class QA extends(Zn(na(Ka))){static get template(){return XA}static get is(){return"gr-app"}}customElements.define(QA.is,QA),window.GrDisplayNameUtils=uo,window.GrAnnotation=go,window.GrAttributeHelper=fo,window.GrDiffLine=bo,window.GrDiffGroup=vo,window.GrDiffBuilder=wo,window.GrDiffBuilderSideBySide=Co,window.GrDiffBuilderImage=So,window.GrDiffBuilderUnified=xo,window.GrDiffBuilderBinary=Ao,window.GrChangeActionsInterface=To,window.GrChangeReplyInterface=Io,window.GrEditConstants=Ro,window.GrFileListConstants=Lo,window.GrDomHooksManager=Oo,window.GrDomHook=No,window.GrEtagDecorator=$o,window.GrThemeApi=Fo,window.SiteBasedCache=Uo,window.FetchPromisesCache=Ho,window.GrRestApiHelper=jo,window.GrLinkTextParser=zo,window.GrPluginEndpoints=nr,window.GrReviewerUpdatesParser=ar,window.GrPopupInterface=Wr,window.GrRangeNormalizer=Kr,window.GrCountStringFormatter=Yr,window.GrReviewerSuggestionsProvider=Jr,window.util=sr,window.moment=el,window.page=_p,window.Auth=yp,window.EventEmitter=bp,window.GrAdminApi=Cp,window.GrAnnotationActionsContext=Ep,window.GrAnnotationActionsInterface=Sp,window.GrChangeMetadataApi=Pp,window.GrEmailSuggestionsProvider=kp,window.GrGroupSuggestionsProvider=Tp,window.GrEventHelper=Rp,window.GrPluginRestApi=Op,window.GrRepoApi=Zu,window.GrSettingsApi=am,window.GrStylesApi=lm,window.PluginLoader=er,window.GrPluginActionContext=cm,window._apiUtils={getPluginNameFromUrl:Yo,send:Xo,getRestAPI:qo,getBaseUrl:Ko,PRELOADED_PROTOCOL:"preloaded:",PLUGIN_LOADING_TIMEOUT_MS:1e4},window.Gerrit=window.Gerrit||{},window.Gerrit.Nav=um,window.Gerrit.getRootElement=$u,window.Gerrit._pluginLoader=tr,window.Gerrit._endpoints=ir,window.Gerrit.slotToContent=e=>e,window.Gerrit.rangesEqual=_m,window.Gerrit.SUGGESTIONS_PROVIDERS_USERS_TYPES=Xr,window.Gerrit.RevisionInfo=ym,window.Gerrit.CoverageType=wm,Object.defineProperty(window.Gerrit,"hiddenscroll",{get:xm,set:Sm}),w_();